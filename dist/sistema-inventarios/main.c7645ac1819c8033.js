(self.webpackChunkSistemaInventarios=self.webpackChunkSistemaInventarios||[]).push([[179],{476:(_n,Be,Ke)=>{"use strict";function Oe(t){return"function"==typeof t}function he(t){const e=t(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Fe=he(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function p(t,i){if(t){const e=t.indexOf(i);0<=e&&t.splice(e,1)}}class ce{constructor(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let i;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(Oe(n))try{n()}catch(s){i=s instanceof Fe?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Ie(s)}catch(u){i=i??[],u instanceof Fe?i=[...i,...u.errors]:i.push(u)}}if(i)throw new Fe(i)}}add(i){var e;if(i&&i!==this)if(this.closed)Ie(i);else{if(i instanceof ce){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(i)}}_hasParent(i){const{_parentage:e}=this;return e===i||Array.isArray(e)&&e.includes(i)}_addParent(i){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i}_removeParent(i){const{_parentage:e}=this;e===i?this._parentage=null:Array.isArray(e)&&p(e,i)}remove(i){const{_finalizers:e}=this;e&&p(e,i),i instanceof ce&&i._removeParent(this)}}ce.EMPTY=(()=>{const t=new ce;return t.closed=!0,t})();const We=ce.EMPTY;function Je(t){return t instanceof ce||t&&"closed"in t&&Oe(t.remove)&&Oe(t.add)&&Oe(t.unsubscribe)}function Ie(t){Oe(t)?t():t.unsubscribe()}const ht={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ai={setTimeout(t,i,...e){const{delegate:n}=ai;return n?.setTimeout?n.setTimeout(t,i,...e):setTimeout(t,i,...e)},clearTimeout(t){const{delegate:i}=ai;return(i?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Bi(t){ai.setTimeout(()=>{const{onUnhandledError:i}=ht;if(!i)throw t;i(t)})}function xt(){}const Xt=mn("C",void 0,void 0);function mn(t,i,e){return{kind:t,value:i,error:e}}let vi=null;function Et(t){if(ht.useDeprecatedSynchronousErrorHandling){const i=!vi;if(i&&(vi={errorThrown:!1,error:null}),t(),i){const{errorThrown:e,error:n}=vi;if(vi=null,e)throw n}}else t()}class Di extends ce{constructor(i){super(),this.isStopped=!1,i?(this.destination=i,Je(i)&&i.add(this)):this.destination=Si}static create(i,e,n){return new Ni(i,e,n)}next(i){this.isStopped?Ii(function sn(t){return mn("N",t,void 0)}(i),this):this._next(i)}error(i){this.isStopped?Ii(function Vi(t){return mn("E",void 0,t)}(i),this):(this.isStopped=!0,this._error(i))}complete(){this.isStopped?Ii(Xt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(i){this.destination.next(i)}_error(i){try{this.destination.error(i)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ur=Function.prototype.bind;function Ar(t,i){return ur.call(t,i)}class Wt{constructor(i){this.partialObserver=i}next(i){const{partialObserver:e}=this;if(e.next)try{e.next(i)}catch(n){bi(n)}}error(i){const{partialObserver:e}=this;if(e.error)try{e.error(i)}catch(n){bi(n)}else bi(i)}complete(){const{partialObserver:i}=this;if(i.complete)try{i.complete()}catch(e){bi(e)}}}class Ni extends Di{constructor(i,e,n){let r;if(super(),Oe(i)||!i)r={next:i??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&ht.useDeprecatedNextContext?(s=Object.create(i),s.unsubscribe=()=>this.unsubscribe(),r={next:i.next&&Ar(i.next,s),error:i.error&&Ar(i.error,s),complete:i.complete&&Ar(i.complete,s)}):r=i}this.destination=new Wt(r)}}function bi(t){ht.useDeprecatedSynchronousErrorHandling?function zt(t){ht.useDeprecatedSynchronousErrorHandling&&vi&&(vi.errorThrown=!0,vi.error=t)}(t):Bi(t)}function Ii(t,i){const{onStoppedNotification:e}=ht;e&&ai.setTimeout(()=>e(t,i))}const Si={closed:!0,next:xt,error:function ni(t){throw t},complete:xt},hi="function"==typeof Symbol&&Symbol.observable||"@@observable";function ki(t){return t}function Hr(t){return 0===t.length?ki:1===t.length?t[0]:function(e){return t.reduce((n,r)=>r(n),e)}}let $i=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function so(t){return t&&t instanceof Di||function lr(t){return t&&Oe(t.next)&&Oe(t.error)&&Oe(t.complete)}(t)&&Je(t)}(e)?e:new Ni(e,n,r);return Et(()=>{const{operator:u,source:_}=this;s.add(u?u.call(s,_):_?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Js(n))((r,s)=>{const u=new Ni({next:_=>{try{e(_)}catch(b){s(b),u.unsubscribe()}},error:s,complete:r});this.subscribe(u)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[hi](){return this}pipe(...e){return Hr(e)(this)}toPromise(e){return new(e=Js(e))((n,r)=>{let s;this.subscribe(u=>s=u,u=>r(u),()=>n(s))})}}return t.create=i=>new t(i),t})();function Js(t){var i;return null!==(i=t??ht.Promise)&&void 0!==i?i:Promise}const Go=he(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let St=(()=>{class t extends $i{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new Io(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new Go}next(e){Et(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){Et(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){Et(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?We:(this.currentObservers=null,s.push(e),new ce(()=>{this.currentObservers=null,p(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new $i;return e.source=this,e}}return t.create=(i,e)=>new Io(i,e),t})();class Io extends St{constructor(i,e){super(),this.destination=i,this.source=e}next(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,i)}error(i){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,i)}complete(){var i,e;null===(e=null===(i=this.destination)||void 0===i?void 0:i.complete)||void 0===e||e.call(i)}_subscribe(i){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(i))&&void 0!==n?n:We}}function is(t){return Oe(t?.lift)}function Pn(t){return i=>{if(is(i))return i.lift(function(e){try{return t(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Qi(t,i,e,n,r){return new Wr(t,i,e,n,r)}class Wr extends Di{constructor(i,e,n,r,s,u){super(i),this.onFinalize=s,this.shouldUnsubscribe=u,this._next=e?function(_){try{e(_)}catch(b){i.error(b)}}:super._next,this._error=r?function(_){try{r(_)}catch(b){i.error(b)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(_){i.error(_)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(i=this.onFinalize)||void 0===i||i.call(this))}}}function li(t,i){return Pn((e,n)=>{let r=0;e.subscribe(Qi(n,s=>{n.next(t.call(i,s,r++))}))})}function $r(t){return this instanceof $r?(this.v=t,this):new $r(t)}function ma(t,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(t,i||[]),s=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(X){n[X]&&(r[X]=function(re){return new Promise(function(_e,Le){s.push([X,re,_e,Le])>1||_(X,re)})})}function _(X,re){try{!function b(X){X.value instanceof $r?Promise.resolve(X.value.v).then(S,A):B(s[0][2],X)}(n[X](re))}catch(_e){B(s[0][3],_e)}}function S(X){_("next",X)}function A(X){_("throw",X)}function B(X,re){X(re),s.shift(),s.length&&_(s[0][0],s[0][1])}}function yn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=function bs(t){var i="function"==typeof Symbol&&Symbol.iterator,e=i&&t[i],n=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=t[s]&&function(u){return new Promise(function(_,b){!function r(s,u,_,b){Promise.resolve(b).then(function(S){s({value:S,done:_})},u)}(_,b,(u=t[s](u)).done,u.value)})}}}const ic=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Qc(t){return Oe(t?.then)}function jd(t){return Oe(t[hi])}function Va(t){return Symbol.asyncIterator&&Oe(t?.[Symbol.asyncIterator])}function js(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Jc=function nc(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Jr(t){return Oe(t?.[Jc])}function rc(t){return ma(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:n,done:r}=yield $r(e.read());if(r)return yield $r(void 0);yield yield $r(n)}}finally{e.releaseLock()}})}function de(t){return Oe(t?.getReader)}function j(t){if(t instanceof $i)return t;if(null!=t){if(jd(t))return function Y(t){return new $i(i=>{const e=t[hi]();if(Oe(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ic(t))return function ae(t){return new $i(i=>{for(let e=0;e<t.length&&!i.closed;e++)i.next(t[e]);i.complete()})}(t);if(Qc(t))return function me(t){return new $i(i=>{t.then(e=>{i.closed||(i.next(e),i.complete())},e=>i.error(e)).then(null,Bi)})}(t);if(Va(t))return Ve(t);if(Jr(t))return function ke(t){return new $i(i=>{for(const e of t)if(i.next(e),i.closed)return;i.complete()})}(t);if(de(t))return function Ne(t){return Ve(rc(t))}(t)}throw js(t)}function Ve(t){return new $i(i=>{(function Ae(t,i){var e,n,r,s;return function ea(t,i,e,n){return new(e||(e=Promise))(function(s,u){function _(A){try{S(n.next(A))}catch(B){u(B)}}function b(A){try{S(n.throw(A))}catch(B){u(B)}}function S(A){A.done?s(A.value):function r(s){return s instanceof e?s:new e(function(u){u(s)})}(A.value).then(_,b)}S((n=n.apply(t,i||[])).next())})}(this,void 0,void 0,function*(){try{for(e=yn(t);!(n=yield e.next()).done;)if(i.next(n.value),i.closed)return}catch(u){r={error:u}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}i.complete()})})(t,i).catch(e=>i.error(e))})}function je(t,i,e,n=0,r=!1){const s=i.schedule(function(){e(),r?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(s),!r)return s}function Ct(t,i,e=1/0){return Oe(i)?Ct((n,r)=>li((s,u)=>i(n,s,r,u))(j(t(n,r))),e):("number"==typeof i&&(e=i),Pn((n,r)=>function ut(t,i,e,n,r,s,u,_){const b=[];let S=0,A=0,B=!1;const X=()=>{B&&!b.length&&!S&&i.complete()},re=Le=>S<n?_e(Le):b.push(Le),_e=Le=>{s&&i.next(Le),S++;let Ue=!1;j(e(Le,A++)).subscribe(Qi(i,it=>{r?.(it),s?re(it):i.next(it)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(S--;b.length&&S<n;){const it=b.shift();u?je(i,u,()=>_e(it)):_e(it)}X()}catch(it){i.error(it)}}))};return t.subscribe(Qi(i,re,()=>{B=!0,X()})),()=>{_?.()}}(n,r,t,e)))}function pt(t=1/0){return Ct(ki,t)}const ti=new $i(t=>t.complete());function _i(t){return t&&Oe(t.schedule)}function Gi(t){return t[t.length-1]}function In(t){return Oe(Gi(t))?t.pop():void 0}function qi(t){return _i(Gi(t))?t.pop():void 0}function mi(t,i=0){return Pn((e,n)=>{e.subscribe(Qi(n,r=>je(n,t,()=>n.next(r),i),()=>je(n,t,()=>n.complete(),i),r=>je(n,t,()=>n.error(r),i)))})}function Qe(t,i=0){return Pn((e,n)=>{n.add(t.schedule(()=>e.subscribe(n),i))})}function xs(t,i){if(!t)throw new Error("Iterable cannot be null");return new $i(e=>{je(e,i,()=>{const n=t[Symbol.asyncIterator]();je(e,i,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function vr(t,i){return i?function Wh(t,i){if(null!=t){if(jd(t))return function ns(t,i){return j(t).pipe(Qe(i),mi(i))}(t,i);if(ic(t))return function el(t,i){return new $i(e=>{let n=0;return i.schedule(function(){n===t.length?e.complete():(e.next(t[n++]),e.closed||this.schedule())})})}(t,i);if(Qc(t))return function Rr(t,i){return j(t).pipe(Qe(i),mi(i))}(t,i);if(Va(t))return xs(t,i);if(Jr(t))return function Ud(t,i){return new $i(e=>{let n;return je(e,i,()=>{n=t[Jc](),je(e,i,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(u){return void e.error(u)}s?e.complete():e.next(r)},0,!0)}),()=>Oe(n?.return)&&n.return()})}(t,i);if(de(t))return function Hd(t,i){return xs(rc(t),i)}(t,i)}throw js(t)}(t,i):j(t)}function wt(...t){const i=qi(t),e=function Hn(t,i){return"number"==typeof Gi(t)?t.pop():i}(t,1/0),n=t;return n.length?1===n.length?j(n[0]):pt(e)(vr(n,i)):ti}function on(t={}){const{connector:i=(()=>new St),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=t;return s=>{let u,_,b,S=0,A=!1,B=!1;const X=()=>{_?.unsubscribe(),_=void 0},re=()=>{X(),u=b=void 0,A=B=!1},_e=()=>{const Le=u;re(),Le?.unsubscribe()};return Pn((Le,Ue)=>{S++,!B&&!A&&X();const it=b=b??i();Ue.add(()=>{S--,0===S&&!B&&!A&&(_=Ji(_e,r))}),it.subscribe(Ue),!u&&S>0&&(u=new Ni({next:Rt=>it.next(Rt),error:Rt=>{B=!0,X(),_=Ji(re,e,Rt),it.error(Rt)},complete:()=>{A=!0,X(),_=Ji(re,n),it.complete()}}),j(Le).subscribe(u))})(s)}}function Ji(t,i,...e){if(!0===i)return void t();if(!1===i)return;const n=new Ni({next:()=>{n.unsubscribe(),t()}});return i(...e).subscribe(n)}function Mn(t){for(let i in t)if(t[i]===Mn)return i;throw Error("Could not find renamed property on target object.")}function ws(t,i){for(const e in i)i.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=i[e])}function Qt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Qt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const i=t.toString();if(null==i)return""+i;const e=i.indexOf("\n");return-1===e?i:i.substring(0,e)}function tl(t,i){return null==t||""===t?null===i?"":i:null==i||""===i?t:t+" "+i}const oc=Mn({__forward_ref__:Mn});function en(t){return t.__forward_ref__=en,t.toString=function(){return Qt(this())},t}function xi(t){return hr(t)?t():t}function hr(t){return"function"==typeof t&&t.hasOwnProperty(oc)&&t.__forward_ref__===en}class ft extends Error{constructor(i,e){super(function yl(t,i){return`NG0${Math.abs(t)}${i?": "+i.trim():""}`}(i,e)),this.code=i}}function Ri(t){return"string"==typeof t?t:null==t?"":String(t)}function sc(t,i){throw new ft(-201,!1)}function vo(t,i){null==t&&function jn(t,i,e,n){throw new Error(`ASSERTION ERROR: ${t}`+(null==n?"":` [Expected=> ${e} ${n} ${i} <=Actual]`))}(i,t,null,"!=")}function Tt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function jt(t){return{providers:t.providers||[],imports:t.imports||[]}}function os(t){return Ms(t,ed)||Ms(t,lc)}function Ms(t,i){return t.hasOwnProperty(i)?t[i]:null}function Kh(t){return t&&(t.hasOwnProperty(vl)||t.hasOwnProperty(Qh))?t[vl]:null}const ed=Mn({\u0275prov:Mn}),vl=Mn({\u0275inj:Mn}),lc=Mn({ngInjectableDef:Mn}),Qh=Mn({ngInjectorDef:Mn});var zi=(()=>((zi=zi||{})[zi.Default=0]="Default",zi[zi.Host=1]="Host",zi[zi.Self=2]="Self",zi[zi.SkipSelf=4]="SkipSelf",zi[zi.Optional=8]="Optional",zi))();let Xd;function Br(t){const i=Xd;return Xd=t,i}function Kd(t,i,e){const n=os(t);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&zi.Optional?null:void 0!==i?i:void sc(Qt(t))}function Wo(t){return{toString:t}.toString()}var Ds=(()=>((Ds=Ds||{})[Ds.OnPush=0]="OnPush",Ds[Ds.Default=1]="Default",Ds))(),uo=(()=>{return(t=uo||(uo={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",uo;var t})();const Bn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ja={},Nn=[],_a=Mn({\u0275cmp:Mn}),Dn=Mn({\u0275dir:Mn}),dc=Mn({\u0275pipe:Mn}),Qd=Mn({\u0275mod:Mn}),ia=Mn({\u0275fac:Mn}),hn=Mn({__NG_ELEMENT_ID__:Mn});let nl=0;function wi(t){return Wo(()=>{const e=!0===t.standalone,n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ds.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||Nn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||uo.Emulated,id:"c"+nl++,styles:t.styles||Nn,_:null,setInput:null,schemas:t.schemas||null,tView:null},s=t.dependencies,u=t.features;return r.inputs=ep(t.inputs,n),r.outputs=ep(t.outputs),u&&u.forEach(_=>_(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Jd).filter(eu):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Zr).filter(eu):null,r})}function Jd(t){return Qn(t)||bo(t)}function eu(t){return null!==t}function Ut(t){return Wo(()=>({type:t.type,bootstrap:t.bootstrap||Nn,declarations:t.declarations||Nn,imports:t.imports||Nn,exports:t.exports||Nn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ep(t,i){if(null==t)return ja;const e={};for(const n in t)if(t.hasOwnProperty(n)){let r=t[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,i&&(i[r]=s)}return e}const Xe=wi;function ho(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Qn(t){return t[_a]||null}function bo(t){return t[Dn]||null}function Zr(t){return t[dc]||null}function Zo(t,i){const e=t[Qd]||null;if(!e&&!0===i)throw new Error(`Type ${Qt(t)} does not have '\u0275mod' property.`);return e}function Co(t){return Array.isArray(t)&&"object"==typeof t[1]}function Es(t){return Array.isArray(t)&&!0===t[1]}function nu(t){return 0!=(8&t.flags)}function fc(t){return 2==(2&t.flags)}function mc(t){return 1==(1&t.flags)}function as(t){return null!==t.template}function Ha(t){return 0!=(256&t[2])}function Us(t,i){return t.hasOwnProperty(ia)?t[ia]:null}class Bt{constructor(i,e,n){this.previousValue=i,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function R(){return F}function F(t){return t.type.prototype.ngOnChanges&&(t.setInput=ve),Z}function Z(){const t=oi(this),i=t?.current;if(i){const e=t.previous;if(e===ja)t.previous=i;else for(let n in i)e[n]=i[n];t.current=null,this.ngOnChanges(i)}}function ve(t,i,e,n){const r=oi(t)||function Dr(t,i){return t[et]=i}(t,{previous:ja,current:null}),s=r.current||(r.current={}),u=r.previous,_=this.declaredInputs[e],b=u[_];s[_]=new Bt(b&&b.currentValue,i,u===ja),t[n]=i}R.ngInherit=!0;const et="__ngSimpleChanges__";function oi(t){return t[et]||null}function Gr(t){for(;Array.isArray(t);)t=t[0];return t}function _c(t,i){return Gr(i[t])}function Sr(t,i){return Gr(i[t.index])}function lp(t,i){return t.data[i]}function ad(t,i){return t[i]}function Hs(t,i){const e=i[t];return Co(e)?e:e[0]}function ld(t){return 64==(64&t[2])}function $a(t,i){return null==i?null:t[i]}function pf(t){t[18]=0}function cp(t,i){t[5]+=i;let e=t,n=t[3];for(;null!==n&&(1===i&&1===e[5]||-1===i&&0===e[5]);)n[5]+=i,e=n,n=n[3]}const Xi={lFrame:uu(null),bindingsEnabled:!0};function ih(){return Xi.bindingsEnabled}function gt(){return Xi.lFrame.lView}function Sn(){return Xi.lFrame.tView}function Jt(t){return Xi.lFrame.contextLView=t,t[8]}function pi(t){return Xi.lFrame.contextLView=null,t}function kt(){let t=mf();for(;null!==t&&64===t.type;)t=t.parent;return t}function mf(){return Xi.lFrame.currentTNode}function Ts(t,i){const e=Xi.lFrame;e.currentTNode=t,e.isParent=i}function cd(){return Xi.lFrame.isParent}function up(){Xi.lFrame.isParent=!1}function cs(){const t=Xi.lFrame;let i=t.bindingRootIndex;return-1===i&&(i=t.bindingRootIndex=t.tView.bindingStartIndex),i}function yc(){return Xi.lFrame.bindingIndex++}function ks(t){const i=Xi.lFrame,e=i.bindingIndex;return i.bindingIndex=i.bindingIndex+t,e}function Ym(t,i){const e=Xi.lFrame;e.bindingIndex=e.bindingRootIndex=t,rh(i)}function rh(t){Xi.lFrame.currentDirectiveIndex=t}function oh(t){const i=Xi.lFrame.currentDirectiveIndex;return-1===i?null:t[i]}function pp(){return Xi.lFrame.currentQueryIndex}function dd(t){Xi.lFrame.currentQueryIndex=t}function fp(t){const i=t[1];return 2===i.type?i.declTNode:1===i.type?t[6]:null}function yf(t,i,e){if(e&zi.SkipSelf){let r=i,s=t;for(;!(r=r.parent,null!==r||e&zi.Host||(r=fp(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;i=r,t=s}const n=Xi.lFrame=vf();return n.currentTNode=i,n.lView=t,!0}function mp(t){const i=vf(),e=t[1];Xi.lFrame=i,i.currentTNode=e.firstChild,i.lView=t,i.tView=e,i.contextLView=t,i.bindingIndex=e.bindingStartIndex,i.inI18n=!1}function vf(){const t=Xi.lFrame,i=null===t?null:t.child;return null===i?uu(t):i}function uu(t){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=i),i}function bf(){const t=Xi.lFrame;return Xi.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const gp=bf;function _p(){const t=bf();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Fo(){return Xi.lFrame.selectedIndex}function vc(t){Xi.lFrame.selectedIndex=t}function Yr(){const t=Xi.lFrame;return lp(t.tView,t.selectedIndex)}function As(){Xi.lFrame.currentNamespace="svg"}function m(){!function c(){Xi.lFrame.currentNamespace=null}()}function w(t,i){for(let e=i.directiveStart,n=i.directiveEnd;e<n;e++){const s=t.data[e].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:_,ngAfterViewInit:b,ngAfterViewChecked:S,ngOnDestroy:A}=s;u&&(t.contentHooks||(t.contentHooks=[])).push(-e,u),_&&((t.contentHooks||(t.contentHooks=[])).push(e,_),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,_)),b&&(t.viewHooks||(t.viewHooks=[])).push(-e,b),S&&((t.viewHooks||(t.viewHooks=[])).push(e,S),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,S)),null!=A&&(t.destroyHooks||(t.destroyHooks=[])).push(e,A)}}function C(t,i,e){I(t,i,3,e)}function E(t,i,e,n){(3&t[2])===e&&I(t,i,e,n)}function T(t,i){let e=t[2];(3&e)===i&&(e&=2047,e+=1,t[2]=e)}function I(t,i,e,n){const s=n??-1,u=i.length-1;let _=0;for(let b=void 0!==n?65535&t[18]:0;b<u;b++)if("number"==typeof i[b+1]){if(_=i[b],null!=n&&_>=n)break}else i[b]<0&&(t[18]+=65536),(_<s||-1==s)&&(L(t,e,i,b),t[18]=(4294901760&t[18])+b+2),b++}function L(t,i,e,n){const r=e[n]<0,s=e[n+1],_=t[r?-e[n]:e[n]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===i){t[2]+=2048;try{s.call(_)}finally{}}}else try{s.call(_)}finally{}}const N=-1;class G{constructor(i,e,n){this.factory=i,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ee(t,i,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],u=e[n++],_=e[n++];t.setAttribute(i,u,_,s)}else{const s=r,u=e[++n];be(s)?t.setProperty(i,s,u):t.setAttribute(i,s,u),n++}}return n}function De(t){return 3===t||4===t||6===t}function be(t){return 64===t.charCodeAt(0)}function Se(t,i){if(null!==i&&0!==i.length)if(null===t||0===t.length)t=i.slice();else{let e=-1;for(let n=0;n<i.length;n++){const r=i[n];"number"==typeof r?e=r:0===e||Ce(t,e,r,null,-1===e||2===e?i[++n]:null)}}return t}function Ce(t,i,e,n,r){let s=0,u=t.length;if(-1===i)u=-1;else for(;s<t.length;){const _=t[s++];if("number"==typeof _){if(_===i){u=-1;break}if(_>i){u=s-1;break}}}for(;s<t.length;){const _=t[s];if("number"==typeof _)break;if(_===e){if(null===n)return void(null!==r&&(t[s+1]=r));if(n===t[s+1])return void(t[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==u&&(t.splice(u,0,i),s=u+1),t.splice(s++,0,e),null!==n&&t.splice(s++,0,n),null!==r&&t.splice(s++,0,r)}function Re(t){return t!==N}function He(t){return 32767&t}function ze(t,i){let e=function _t(t){return t>>16}(t),n=i;for(;e>0;)n=n[15],e--;return n}let ot=!0;function lt(t){const i=ot;return ot=t,i}let dt=0;const It={};function Zt(t,i){const e=Pi(t,i);if(-1!==e)return e;const n=i[1];n.firstCreatePass&&(t.injectorIndex=i.length,fi(n.data,t),fi(i,null),fi(n.blueprint,null));const r=ln(t,i),s=t.injectorIndex;if(Re(r)){const u=He(r),_=ze(r,i),b=_[1].data;for(let S=0;S<8;S++)i[s+S]=_[u+S]|b[u+S]}return i[s+8]=r,s}function fi(t,i){t.push(0,0,0,0,0,0,0,0,i)}function Pi(t,i){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===i[t.injectorIndex+8]?-1:t.injectorIndex}function ln(t,i){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,n=null,r=i;for(;null!==r;){if(n=us(r),null===n)return N;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return N}function Kt(t,i,e){!function Ft(t,i,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(hn)&&(n=e[hn]),null==n&&(n=e[hn]=dt++);const r=255&n;i.data[t+(r>>5)]|=1<<r}(t,i,e)}function Rn(t,i,e){if(e&zi.Optional||void 0!==t)return t;sc()}function br(t,i,e,n){if(e&zi.Optional&&void 0===n&&(n=null),0==(e&(zi.Self|zi.Host))){const r=t[9],s=Br(void 0);try{return r?r.get(i,n,e&zi.Optional):Kd(i,n,e&zi.Optional)}finally{Br(s)}}return Rn(n,0,e)}function zr(t,i,e,n=zi.Default,r){if(null!==t){if(1024&i[2]){const u=function ud(t,i,e,n,r){let s=t,u=i;for(;null!==s&&null!==u&&1024&u[2]&&!(256&u[2]);){const _=ir(s,u,e,n|zi.Self,It);if(_!==It)return _;let b=s.parent;if(!b){const S=u[21];if(S){const A=S.get(e,It,n);if(A!==It)return A}b=us(u),u=u[15]}s=b}return r}(t,i,e,n,It);if(u!==It)return u}const s=ir(t,i,e,n,It);if(s!==It)return s}return br(i,e,n,r)}function ir(t,i,e,n,r){const s=function Er(t){if("string"==typeof t)return t.charCodeAt(0)||0;const i=t.hasOwnProperty(hn)?t[hn]:void 0;return"number"==typeof i?i>=0?255&i:ds:i}(e);if("function"==typeof s){if(!yf(i,t,n))return n&zi.Host?Rn(r,0,n):br(i,e,n,r);try{const u=s(n);if(null!=u||n&zi.Optional)return u;sc()}finally{gp()}}else if("number"==typeof s){let u=null,_=Pi(t,i),b=N,S=n&zi.Host?i[16][6]:null;for((-1===_||n&zi.SkipSelf)&&(b=-1===_?ln(t,i):i[_+8],b!==N&&cn(n,!1)?(u=i[1],_=He(b),i=ze(b,i)):_=-1);-1!==_;){const A=i[1];if(Tr(s,_,A.data)){const B=Xo(_,i,e,u,n,S);if(B!==It)return B}b=i[_+8],b!==N&&cn(n,i[1].data[_+8]===S)&&Tr(s,_,i)?(u=A,_=He(b),i=ze(b,i)):_=-1}}return r}function Xo(t,i,e,n,r,s){const u=i[1],_=u.data[t+8],A=$s(_,u,e,null==n?fc(_)&&ot:n!=u&&0!=(3&_.type),r&zi.Host&&s===_);return null!==A?aa(i,u,A,_):It}function $s(t,i,e,n,r){const s=t.providerIndexes,u=i.data,_=1048575&s,b=t.directiveStart,A=s>>20,X=r?_+A:t.directiveEnd;for(let re=n?_:_+A;re<X;re++){const _e=u[re];if(re<b&&e===_e||re>=b&&_e.type===e)return re}if(r){const re=u[b];if(re&&as(re)&&re.type===e)return b}return null}function aa(t,i,e,n){let r=t[e];const s=i.data;if(function Q(t){return t instanceof G}(r)){const u=r;u.resolving&&function il(t,i){const e=i?`. Dependency path: ${i.join(" > ")} > ${t}`:"";throw new ft(-200,`Circular dependency in DI detected for ${t}${e}`)}(function Ln(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Ri(t)}(s[e]));const _=lt(u.canSeeViewProviders);u.resolving=!0;const b=u.injectImpl?Br(u.injectImpl):null;yf(t,n,zi.Default);try{r=t[e]=u.factory(void 0,s,t,n),i.firstCreatePass&&e>=n.directiveStart&&function y(t,i,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=i.type.prototype;if(n){const u=F(i);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,u),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,u)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,s))}(e,s[e],i)}finally{null!==b&&Br(b),lt(_),u.resolving=!1,gp()}}return r}function Tr(t,i,e){return!!(e[i+(t>>5)]&1<<t)}function cn(t,i){return!(t&zi.Self||t&zi.Host&&i)}class Pr{constructor(i,e){this._tNode=i,this._lView=e}get(i,e,n){return zr(this._tNode,this._lView,i,n,e)}}function ds(){return new Pr(kt(),gt())}function Yt(t){return Wo(()=>{const i=t.prototype.constructor,e=i[ia]||Lo(i),n=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==n;){const s=r[ia]||Lo(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Lo(t){return hr(t)?()=>{const i=Lo(xi(t));return i&&i()}:Us(t)}function us(t){const i=t[1],e=i.type;return 2===e?i.declTNode:1===e?t[6]:null}function Vr(t){return function Hi(t,i){if("class"===i)return t.classes;if("style"===i)return t.styles;const e=t.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(De(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===i)return e[r+1];r+=2}}}return null}(kt(),t)}const xa="__parameters__";function cl(t,i,e){return Wo(()=>{const n=function ll(t){return function(...e){if(t){const n=t(...e);for(const r in n)this[r]=n[r]}}}(i);function r(...s){if(this instanceof r)return n.apply(this,s),this;const u=new r(...s);return _.annotation=u,_;function _(b,S,A){const B=b.hasOwnProperty(xa)?b[xa]:Object.defineProperty(b,xa,{value:[]})[xa];for(;B.length<=A;)B.push(null);return(B[A]=B[A]||[]).push(u),b}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class tt{constructor(i,e){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Tt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wa(t,i){void 0===i&&(i=t);for(let e=0;e<t.length;e++){let n=t[e];Array.isArray(n)?(i===t&&(i=t.slice(0,e)),wa(n,i)):i!==t&&i.push(n)}return i}function kl(t,i){t.forEach(e=>Array.isArray(e)?kl(e,i):i(e))}function Cf(t,i,e){i>=t.length?t.push(e):t.splice(i,0,e)}function dl(t,i){return i>=t.length-1?t.pop():t.splice(i,1)[0]}function hu(t,i){const e=[];for(let n=0;n<t;n++)e.push(i);return e}function Is(t,i,e){let n=Ca(t,i);return n>=0?t[1|n]=e:(n=~n,function W1(t,i,e,n){let r=t.length;if(r==i)t.push(e,n);else if(1===r)t.push(n,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>i;)t[r]=t[r-2],r--;t[i]=e,t[i+1]=n}}(t,n,i,e)),n}function pu(t,i){const e=Ca(t,i);if(e>=0)return t[1|e]}function Ca(t,i){return function pd(t,i,e){let n=0,r=t.length>>e;for(;r!==n;){const s=n+(r-n>>1),u=t[s<<e];if(i===u)return s<<e;u>i?r=s:n=s+1}return~(r<<e)}(t,i,1)}const Mf={},iy="__NG_DI_FLAG__",qr="ngTempTokenPath",mu=/\n/gm,Gn="__source";let vp;function gu(t){const i=vp;return vp=t,i}function Cc(t,i=zi.Default){if(void 0===vp)throw new ft(-203,!1);return null===vp?Kd(t,void 0,i):vp.get(t,i&zi.Optional?null:void 0,i)}function $e(t,i=zi.Default){return(function cf(){return Xd}()||Cc)(xi(t),i)}function qn(t,i=zi.Default){return"number"!=typeof i&&(i=0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)),$e(t,i)}function No(t){const i=[];for(let e=0;e<t.length;e++){const n=xi(t[e]);if(Array.isArray(n)){if(0===n.length)throw new ft(900,!1);let r,s=zi.Default;for(let u=0;u<n.length;u++){const _=n[u],b=Mc(_);"number"==typeof b?-1===b?r=_.token:s|=b:r=_}i.push($e(r,s))}else i.push($e(n))}return i}function bp(t,i){return t[iy]=i,t.prototype[iy]=i,t}function Mc(t){return t[iy]}const la=bp(cl("Optional"),8),ul=bp(cl("SkipSelf"),4);let uy,Rs,Sc;function ca(t){return function ig(){if(void 0===Rs&&(Rs=null,Bn.trustedTypes))try{Rs=Bn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Rs}()?.createHTML(t)||t}function kf(t){return function Tf(){if(void 0===Sc&&(Sc=null,Bn.trustedTypes))try{Sc=Bn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Sc}()?.createHTML(t)||t}class dh{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class my extends dh{getTypeName(){return"HTML"}}class t0 extends dh{getTypeName(){return"Style"}}class Af extends dh{getTypeName(){return"Script"}}class Mp extends dh{getTypeName(){return"URL"}}class vu extends dh{getTypeName(){return"ResourceURL"}}function da(t){return t instanceof dh?t.changingThisBreaksApplicationSecurity:t}function Al(t,i){const e=function gy(t){return t instanceof dh&&t.getTypeName()||null}(t);if(null!=e&&e!==i){if("ResourceURL"===e&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===i}class Mo{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const e=(new window.DOMParser).parseFromString(ca(i),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(i):(e.removeChild(e.firstChild),e)}catch{return null}}}class n0{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(i){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=ca(i),e;const n=this.inertDocument.createElement("body");return n.innerHTML=ca(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(i){const e=i.attributes;for(let r=e.length-1;0<r;r--){const u=e.item(r).name;("xmlns:ns1"===u||0===u.indexOf("ns1:"))&&i.removeAttribute(u)}let n=i.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Rl=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function sg(t){return(t=String(t)).match(Rl)?t:"unsafe:"+t}function fd(t){const i={};for(const e of t.split(","))i[e]=!0;return i}function Dp(...t){const i={};for(const e of t)for(const n in e)e.hasOwnProperty(n)&&(i[n]=!0);return i}const bu=fd("area,br,col,hr,img,wbr"),yy=fd("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vy=fd("rp,rt"),Rf=Dp(bu,Dp(yy,fd("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Dp(vy,fd("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Dp(vy,yy)),Pf=fd("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),o0=Dp(Pf,fd("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fd("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),s0=fd("script,style,template");class sC{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let e=i.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(i){const e=i.nodeName.toLowerCase();if(!Rf.hasOwnProperty(e))return this.sanitizedSomething=!0,!s0.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=i.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),u=s.name,_=u.toLowerCase();if(!o0.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let b=s.value;Pf[_]&&(b=sg(b)),this.buf.push(" ",u,'="',by(b),'"')}return this.buf.push(">"),!0}endElement(i){const e=i.nodeName.toLowerCase();Rf.hasOwnProperty(e)&&!bu.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(i){this.buf.push(by(i))}checkClobberedElement(i,e){if(e&&(i.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return e}}const aC=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a0=/([^\#-~ |!])/g;function by(t){return t.replace(/&/g,"&amp;").replace(aC,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(a0,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Of;function ag(t,i){let e=null;try{Of=Of||function og(t){const i=new n0(t);return function If(){try{return!!(new window.DOMParser).parseFromString(ca(""),"text/html")}catch{return!1}}()?new Mo(i):i}(t);let n=i?String(i):"";e=Of.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=Of.getInertBodyElement(n)}while(n!==s);return ca((new sC).sanitizeChildren(Pl(e)||e))}finally{if(e){const n=Pl(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Pl(t){return"content"in t&&function Da(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var pr=(()=>((pr=pr||{})[pr.NONE=0]="NONE",pr[pr.HTML=1]="HTML",pr[pr.STYLE=2]="STYLE",pr[pr.SCRIPT=3]="SCRIPT",pr[pr.URL=4]="URL",pr[pr.RESOURCE_URL=5]="RESOURCE_URL",pr))();function lg(t){const i=Ff();return i?kf(i.sanitize(pr.HTML,t)||""):Al(t,"HTML")?kf(da(t)):ag(function Ef(){return void 0!==uy?uy:typeof document<"u"?document:void 0}(),Ri(t))}function cg(t){const i=Ff();return i?i.sanitize(pr.URL,t)||"":Al(t,"URL")?da(t):sg(Ri(t))}function Ff(){const t=gt();return t&&t[12]}const xy=new tt("ENVIRONMENT_INITIALIZER"),d0=new tt("INJECTOR",-1),u0=new tt("INJECTOR_DEF_TYPES");class h0{get(i,e=Mf){if(e===Mf){const n=new Error(`NullInjectorError: No provider for ${Qt(i)}!`);throw n.name="NullInjectorError",n}return e}}function dC(...t){return{\u0275providers:pg(0,t)}}function pg(t,...i){const e=[],n=new Set;let r;return kl(i,s=>{const u=s;xu(u,e,[],n)&&(r||(r=[]),r.push(u))}),void 0!==r&&p0(r,e),e}function p0(t,i){for(let e=0;e<t.length;e++){const{providers:r}=t[e];kl(r,s=>{i.push(s)})}}function xu(t,i,e,n){if(!(t=xi(t)))return!1;let r=null,s=Kh(t);const u=!s&&Qn(t);if(s||u){if(u&&!u.standalone)return!1;r=t}else{const b=t.ngModule;if(s=Kh(b),!s)return!1;r=b}const _=n.has(r);if(u){if(_)return!1;if(n.add(r),u.dependencies){const b="function"==typeof u.dependencies?u.dependencies():u.dependencies;for(const S of b)xu(S,i,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!_){let S;n.add(r);try{kl(s.imports,A=>{xu(A,i,e,n)&&(S||(S=[]),S.push(A))})}finally{}void 0!==S&&p0(S,i)}if(!_){const S=Us(r)||(()=>new r);i.push({provide:r,useFactory:S,deps:Nn},{provide:u0,useValue:r,multi:!0},{provide:xy,useValue:()=>$e(r),multi:!0})}const b=s.providers;null==b||_||kl(b,A=>{i.push(A)})}}return r!==t&&void 0!==t.providers}const io=Mn({provide:String,useValue:Mn});function Sp(t){return null!==t&&"object"==typeof t&&io in t}function Ec(t){return"function"==typeof t}const fg=new tt("Set Injector scope."),Nf={},zf={};let Vf;function Ep(){return void 0===Vf&&(Vf=new h0),Vf}class wu{}class Cy extends wu{constructor(i,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sy(i,u=>this.processProvider(u)),this.records.set(d0,Cu(void 0,this)),r.has("environment")&&this.records.set(wu,Cu(void 0,this));const s=this.records.get(fg);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(u0.multi,Nn,zi.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();for(const i of this._onDestroyHooks)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(i){this._onDestroyHooks.push(i)}runInContext(i){this.assertNotDestroyed();const e=gu(this),n=Br(void 0);try{return i()}finally{gu(e),Br(n)}}get(i,e=Mf,n=zi.Default){this.assertNotDestroyed();const r=gu(this),s=Br(void 0);try{if(!(n&zi.SkipSelf)){let _=this.records.get(i);if(void 0===_){const b=function hC(t){return"function"==typeof t||"object"==typeof t&&t instanceof tt}(i)&&os(i);_=b&&this.injectableDefInScope(b)?Cu(hh(i),Nf):null,this.records.set(i,_)}if(null!=_)return this.hydrate(i,_)}return(n&zi.Self?Ep():this.parent).get(i,e=n&zi.Optional&&e===Mf?null:e)}catch(u){if("NullInjectorError"===u.name){if((u[qr]=u[qr]||[]).unshift(Qt(i)),r)throw u;return function Kb(t,i,e,n){const r=t[qr];throw i[Gn]&&r.unshift(i[Gn]),t.message=function xp(t,i,e,n=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=Qt(i);if(Array.isArray(i))r=i.map(Qt).join(" -> ");else if("object"==typeof i){let s=[];for(let u in i)if(i.hasOwnProperty(u)){let _=i[u];s.push(u+":"+("string"==typeof _?JSON.stringify(_):Qt(_)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${t.replace(mu,"\n  ")}`}("\n"+t.message,r,e,n),t.ngTokenPath=r,t[qr]=null,t}(u,i,"R3InjectorError",this.source)}throw u}finally{Br(s),gu(r)}}resolveInjectorInitializers(){const i=gu(this),e=Br(void 0);try{const n=this.get(xy.multi,Nn,zi.Self);for(const r of n)r()}finally{gu(i),Br(e)}}toString(){const i=[],e=this.records;for(const n of e.keys())i.push(Qt(n));return`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ft(205,!1)}processProvider(i){let e=Ec(i=xi(i))?i:xi(i&&i.provide);const n=function My(t){return Sp(t)?Cu(void 0,t.useValue):Cu(f0(t),Nf)}(i);if(Ec(i)||!0!==i.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Cu(void 0,Nf,!0),r.factory=()=>No(r.multi),this.records.set(e,r)),e=i,r.multi.push(i)}this.records.set(e,n)}hydrate(i,e){return e.value===Nf&&(e.value=zf,e.value=e.factory()),"object"==typeof e.value&&e.value&&function mg(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(i){if(!i.providedIn)return!1;const e=xi(i.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function hh(t){const i=os(t),e=null!==i?i.factory:Us(t);if(null!==e)return e;if(t instanceof tt)throw new ft(204,!1);if(t instanceof Function)return function uC(t){const i=t.length;if(i>0)throw hu(i,"?"),new ft(204,!1);const e=function Yu(t){const i=t&&(t[ed]||t[lc]);if(i){const e=function Yd(t){if(t.hasOwnProperty("name"))return t.name;const i=(""+t).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),i}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new ft(204,!1)}function f0(t,i,e){let n;if(Ec(t)){const r=xi(t);return Us(r)||hh(r)}if(Sp(t))n=()=>xi(t.useValue);else if(function Lf(t){return!(!t||!t.useFactory)}(t))n=()=>t.useFactory(...No(t.deps||[]));else if(function wy(t){return!(!t||!t.useExisting)}(t))n=()=>$e(xi(t.useExisting));else{const r=xi(t&&(t.useClass||t.provide));if(!function Dy(t){return!!t.deps}(t))return Us(r)||hh(r);n=()=>new r(...No(t.deps))}return n}function Cu(t,i,e=!1){return{factory:t,value:i,multi:e?[]:void 0}}function pC(t){return!!t.\u0275providers}function Sy(t,i){for(const e of t)Array.isArray(e)?Sy(e,i):pC(e)?Sy(e.\u0275providers,i):i(e)}class m0{}class gC{resolveComponentFactory(i){throw function mC(t){const i=Error(`No component factory found for ${Qt(t)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=t,i}(i)}}let ph=(()=>{class t{}return t.NULL=new gC,t})();function g0(){return fh(kt(),gt())}function fh(t,i){return new Ci(Sr(t,i))}let Ci=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=g0,t})();function _C(t){return t instanceof Ci?t.nativeElement:t}class Mu{}let Tc=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function yC(){const t=gt(),e=Hs(kt().index,t);return(Co(e)?e:t)[11]}(),t})(),Uf=(()=>{class t{}return t.\u0275prov=Tt({token:t,providedIn:"root",factory:()=>null}),t})();class Ol{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const _0=new Ol("14.2.7"),mh={};function Ay(t){return t.ngOriginalError}class md{constructor(){this._console=console}handleError(i){const e=this._findOriginalError(i);this._console.error("ERROR",i),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(i){let e=i&&Ay(i);for(;e&&Ay(e);)e=Ay(e);return e||null}}const bg=new Map;let kC=0;const Hf="__ngContext__";function Ko(t,i){Co(i)?(t[Hf]=i[20],function IC(t){bg.set(t[20],t)}(i)):t[Hf]=i}function Py(t){return t.ownerDocument}function Ac(t){return t instanceof Function?t():t}var Sa=(()=>((Sa=Sa||{})[Sa.Important=1]="Important",Sa[Sa.DashCase=2]="DashCase",Sa))();function Fy(t,i){return undefined(t,i)}function Gf(t){const i=t[3];return Es(i)?i[3]:i}function qf(t){return Ly(t[13])}function Wf(t){return Ly(t[4])}function Ly(t){for(;null!==t&&!Es(t);)t=t[4];return t}function Ic(t,i,e,n,r){if(null!=n){let s,u=!1;Es(n)?s=n:Co(n)&&(u=!0,n=n[0]);const _=Gr(n);0===t&&null!==e?null==r?B0(i,e,_):Su(i,e,_,r||null,!0):1===t&&null!==e?Su(i,e,_,r||null,!0):2===t?function j0(t,i,e){const n=Eu(t,i);n&&function z0(t,i,e,n){t.removeChild(i,e,n)}(t,n,i,e)}(i,_,u):3===t&&i.destroyNode(_),null!=s&&function $y(t,i,e,n,r){const s=e[7];s!==Gr(e)&&Ic(i,t,n,s,r);for(let _=10;_<e.length;_++){const b=e[_];Kf(b[1],b,t,i,n,s)}}(i,t,s,e,r)}}function By(t,i,e){return t.createElement(i,e)}function Mg(t,i){const e=t[9],n=e.indexOf(i),r=i[3];512&i[2]&&(i[2]&=-513,cp(r,-1)),e.splice(n,1)}function Dg(t,i){if(t.length<=10)return;const e=10+i,n=t[e];if(n){const r=n[17];null!==r&&r!==t&&Mg(r,n),i>0&&(t[e-1][4]=n[4]);const s=dl(t,10+i);!function I0(t,i){Kf(t,i,i[11],2,null,null),i[0]=null,i[6]=null}(n[1],n);const u=s[19];null!==u&&u.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function F0(t,i){if(!(128&i[2])){const e=i[11];e.destroyNode&&Kf(t,i,e,3,null,null),function P0(t){let i=t[13];if(!i)return Sg(t[1],t);for(;i;){let e=null;if(Co(i))e=i[13];else{const n=i[10];n&&(e=n)}if(!e){for(;i&&!i[4]&&i!==t;)Co(i)&&Sg(i[1],i),i=i[3];null===i&&(i=t),Co(i)&&Sg(i[1],i),e=i&&i[4]}i=e}}(i)}}function Sg(t,i){if(!(128&i[2])){i[2]&=-65,i[2]|=128,function L0(t,i){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let n=0;n<e.length;n+=2){const r=i[e[n]];if(!(r instanceof G)){const s=e[n+1];if(Array.isArray(s))for(let u=0;u<s.length;u+=2){const _=r[s[u]],b=s[u+1];try{b.call(_)}finally{}}else try{s.call(r)}finally{}}}}(t,i),function _d(t,i){const e=t.cleanup,n=i[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const u=e[s+1],_="function"==typeof u?u(i):Gr(i[u]),b=n[r=e[s+2]],S=e[s+3];"boolean"==typeof S?_.removeEventListener(e[s],b,S):S>=0?n[r=S]():n[r=-S].unsubscribe(),s+=2}else{const u=n[r=e[s+1]];e[s].call(u)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();i[7]=null}}(t,i),1===i[1].type&&i[11].destroy();const e=i[17];if(null!==e&&Es(i[3])){e!==i[3]&&Mg(e,i);const n=i[19];null!==n&&n.detachView(t)}!function RC(t){bg.delete(t[20])}(i)}}function zy(t,i,e){return function Vy(t,i,e){let n=i;for(;null!==n&&40&n.type;)n=(i=n).parent;if(null===n)return e[0];if(2&n.flags){const r=t.data[n.directiveStart].encapsulation;if(r===uo.None||r===uo.Emulated)return null}return Sr(n,e)}(t,i.parent,e)}function Su(t,i,e,n,r){t.insertBefore(i,e,n,r)}function B0(t,i,e){t.appendChild(i,e)}function N0(t,i,e,n,r){null!==n?Su(t,i,e,n,r):B0(t,i,e)}function Eu(t,i){return t.parentNode(i)}function jy(t,i,e){return _h(t,i,e)}let _h=function Eg(t,i,e){return 40&t.type?Sr(t,e):null};function Yf(t,i,e,n){const r=zy(t,n,i),s=i[11],_=jy(n.parent||i[6],n,i);if(null!=r)if(Array.isArray(e))for(let b=0;b<e.length;b++)N0(s,r,e[b],_,!1);else N0(s,r,e,_,!1)}function yh(t,i){if(null!==i){const e=i.type;if(3&e)return Sr(i,t);if(4&e)return Uy(-1,t[i.index]);if(8&e){const n=i.child;if(null!==n)return yh(t,n);{const r=t[i.index];return Es(r)?Uy(-1,r):Gr(r)}}if(32&e)return Fy(i,t)()||Gr(t[i.index]);{const n=Xf(t,i);return null!==n?Array.isArray(n)?n[0]:yh(Gf(t[16]),n):yh(t,i.next)}}return null}function Xf(t,i){return null!==i?t[16][6].projection[i.projection]:null}function Uy(t,i){const e=10+t+1;if(e<i.length){const n=i[e],r=n[1].firstChild;if(null!==r)return yh(n,r)}return i[7]}function Hy(t,i,e,n,r,s,u){for(;null!=e;){const _=n[e.index],b=e.type;if(u&&0===i&&(_&&Ko(Gr(_),n),e.flags|=4),64!=(64&e.flags))if(8&b)Hy(t,i,e.child,n,r,s,!1),Ic(i,t,r,_,s);else if(32&b){const S=Fy(e,n);let A;for(;A=S();)Ic(i,t,r,A,s);Ic(i,t,r,_,s)}else 16&b?vh(t,i,n,e,r,s):Ic(i,t,r,_,s);e=u?e.projectionNext:e.next}}function Kf(t,i,e,n,r,s){Hy(e,n,t.firstChild,i,r,s,!1)}function vh(t,i,e,n,r,s){const u=e[16],b=u[6].projection[n.projection];if(Array.isArray(b))for(let S=0;S<b.length;S++)Ic(i,t,r,b[S],s);else Hy(t,i,b,u[3],r,s,!0)}function Gy(t,i,e){t.setAttribute(i,"style",e)}function qy(t,i,e){""===e?t.removeAttribute(i,"class"):t.setAttribute(i,"class",e)}function kg(t,i,e){let n=t.length;for(;;){const r=t.indexOf(i,e);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=i.length;if(r+s===n||t.charCodeAt(r+s)<=32)return r}e=r+1}}const yd="ng-template";function U0(t,i,e){let n=0;for(;n<t.length;){let r=t[n++];if(e&&"class"===r){if(r=t[n],-1!==kg(r.toLowerCase(),i,0))return!0}else if(1===r){for(;n<t.length&&"string"==typeof(r=t[n++]);)if(r.toLowerCase()===i)return!0;return!1}}return!1}function Wy(t){return 4===t.type&&t.value!==yd}function Ag(t,i,e){return i===(4!==t.type||e?t.value:yd)}function Zy(t,i,e){let n=4;const r=t.attrs||[],s=function Qf(t){for(let i=0;i<t.length;i++)if(De(t[i]))return i;return t.length}(r);let u=!1;for(let _=0;_<i.length;_++){const b=i[_];if("number"!=typeof b){if(!u)if(4&n){if(n=2|1&n,""!==b&&!Ag(t,b,e)||""===b&&1===i.length){if(Bl(n))return!1;u=!0}}else{const S=8&n?b:i[++_];if(8&n&&null!==t.attrs){if(!U0(t.attrs,S,e)){if(Bl(n))return!1;u=!0}continue}const B=HC(8&n?"class":b,r,Wy(t),e);if(-1===B){if(Bl(n))return!1;u=!0;continue}if(""!==S){let X;X=B>s?"":r[B+1].toLowerCase();const re=8&n?X:null;if(re&&-1!==kg(re,S,0)||2&n&&S!==X){if(Bl(n))return!1;u=!0}}}}else{if(!u&&!Bl(n)&&!Bl(b))return!1;if(u&&Bl(b))continue;u=!1,n=b|1&n}}return Bl(n)||u}function Bl(t){return 0==(1&t)}function HC(t,i,e,n){if(null===i)return-1;let r=0;if(n||!e){let s=!1;for(;r<i.length;){const u=i[r];if(u===t)return r;if(3===u||6===u)s=!0;else{if(1===u||2===u){let _=i[++r];for(;"string"==typeof _;)_=i[++r];continue}if(4===u)break;if(0===u){r+=4;continue}}r+=s?1:2}return-1}return function vd(t,i){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const n=t[e];if("number"==typeof n)return-1;if(n===i)return e;e++}return-1}(i,t)}function Yy(t,i,e=!1){for(let n=0;n<i.length;n++)if(Zy(t,i[n],e))return!0;return!1}function Xy(t,i){e:for(let e=0;e<i.length;e++){const n=i[e];if(t.length===n.length){for(let r=0;r<t.length;r++)if(t[r]!==n[r])continue e;return!0}}return!1}function bh(t,i){return t?":not("+i.trim()+")":i}function Nl(t){let i=t[0],e=1,n=2,r="",s=!1;for(;e<t.length;){let u=t[e];if("string"==typeof u)if(2&n){const _=t[++e];r+="["+u+(_.length>0?'="'+_+'"':"")+"]"}else 8&n?r+="."+u:4&n&&(r+=" "+u);else""!==r&&!Bl(u)&&(i+=bh(s,r),r=""),n=u,s=s||!Bl(n);e++}return""!==r&&(i+=bh(s,r)),i}const gn={};function q(t){Ig(Sn(),gt(),Fo()+t,!1)}function Ig(t,i,e,n){if(!n)if(3==(3&i[2])){const s=t.preOrderCheckHooks;null!==s&&C(i,s,e)}else{const s=t.preOrderHooks;null!==s&&E(i,s,0,e)}vc(e)}function Jf(t,i=null,e=null,n){const r=Ky(t,i,e,n);return r.resolveInjectorInitializers(),r}function Ky(t,i=null,e=null,n,r=new Set){const s=[e||Nn,dC(t)];return n=n||("object"==typeof t?void 0:Qt(t)),new Cy(s,i||Ep(),n||null,r)}let no=(()=>{class t{static create(e,n){if(Array.isArray(e))return Jf({name:""},n,e,"");{const r=e.name??"";return Jf({name:r},e.parent,e.providers,r)}}}return t.THROW_IF_NOT_FOUND=Mf,t.NULL=new h0,t.\u0275prov=Tt({token:t,providedIn:"any",factory:()=>$e(d0)}),t.__NG_ELEMENT_ID__=-1,t})();function W(t,i=zi.Default){const e=gt();return null===e?$e(t,i):zr(kt(),e,xi(t),i)}function ml(){throw new Error("invalid")}function wh(t,i){return t<<17|i<<2}function jl(t){return t>>17&32767}function Rc(t){return 2|t}function bd(t){return(131068&t)>>2}function rm(t,i){return-131069&t|i<<2}function Bp(t){return 1|t}function sv(t,i){const e=t.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],s=e[n+1];if(-1!==s){const u=t.data[s];dd(r),u.contentQueries(2,i[s],s)}}}function Dh(t,i,e,n,r,s,u,_,b,S,A){const B=i.blueprint.slice();return B[0]=r,B[2]=76|n,(null!==A||t&&1024&t[2])&&(B[2]|=1024),pf(B),B[3]=B[15]=t,B[8]=e,B[10]=u||t&&t[10],B[11]=_||t&&t[11],B[12]=b||t&&t[12]||null,B[9]=S||t&&t[9]||null,B[6]=s,B[20]=function AC(){return kC++}(),B[21]=A,B[16]=2==i.type?t[16]:B,B}function Sh(t,i,e,n,r){let s=t.data[i];if(null===s)s=function Gg(t,i,e,n,r){const s=mf(),u=cd(),b=t.data[i]=function x(t,i,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,u?s:s&&s.parent,e,i,n,r);return null===t.firstChild&&(t.firstChild=b),null!==s&&(u?null==s.child&&null!==b.parent&&(s.child=b):null===s.next&&(s.next=b)),b}(t,i,e,n,r),function Zm(){return Xi.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const u=function du(){const t=Xi.lFrame,i=t.currentTNode;return t.isParent?i:i.parent}();s.injectorIndex=null===u?-1:u.injectorIndex}return Ts(s,!0),s}function zp(t,i,e,n){if(0===e)return-1;const r=i.length;for(let s=0;s<e;s++)i.push(n),t.blueprint.push(n),t.data.push(null);return r}function qg(t,i,e){mp(i);try{const n=t.viewQuery;null!==n&&En(1,n,e);const r=t.template;null!==r&&Zg(t,i,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&sv(t,i),t.staticViewQueries&&En(2,t.viewQuery,e);const s=t.components;null!==s&&function lm(t,i){for(let e=0;e<i.length;e++)ji(t,i[e])}(i,s)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),n}finally{i[2]&=-5,_p()}}function Wg(t,i,e,n){const r=i[2];if(128!=(128&r)){mp(i);try{pf(i),function nh(t){return Xi.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Zg(t,i,e,2,n);const u=3==(3&r);if(u){const S=t.preOrderCheckHooks;null!==S&&C(i,S,null)}else{const S=t.preOrderHooks;null!==S&&E(i,S,0,null),T(i,0)}if(function gi(t){for(let i=qf(t);null!==i;i=Wf(i)){if(!i[2])continue;const e=i[9];for(let n=0;n<e.length;n++){const r=e[n],s=r[3];0==(512&r[2])&&cp(s,1),r[2]|=512}}}(i),function nn(t){for(let i=qf(t);null!==i;i=Wf(i))for(let e=10;e<i.length;e++){const n=i[e],r=n[1];ld(n)&&Wg(r,n,r.template,n[8])}}(i),null!==t.contentQueries&&sv(t,i),u){const S=t.contentCheckHooks;null!==S&&C(i,S)}else{const S=t.contentHooks;null!==S&&E(i,S,1),T(i,1)}!function Mh(t,i){const e=t.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)vc(~r);else{const s=r,u=e[++n],_=e[++n];Ym(u,s),_(2,i[s])}}}finally{vc(-1)}}(t,i);const _=t.components;null!==_&&function rx(t,i){for(let e=0;e<i.length;e++)Ot(t,i[e])}(i,_);const b=t.viewQuery;if(null!==b&&En(2,b,n),u){const S=t.viewCheckHooks;null!==S&&C(i,S)}else{const S=t.viewHooks;null!==S&&E(i,S,2),T(i,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i[2]&=-41,512&i[2]&&(i[2]&=-513,cp(i[3],-1))}finally{_p()}}}function Zg(t,i,e,n,r){const s=Fo(),u=2&n;try{vc(-1),u&&i.length>22&&Ig(t,i,22,!1),e(n,r)}finally{vc(s)}}function av(t,i,e){if(nu(i)){const r=i.directiveEnd;for(let s=i.directiveStart;s<r;s++){const u=t.data[s];u.contentQueries&&u.contentQueries(1,e[s],s)}}}function Yg(t,i,e){!ih()||(function fe(t,i,e,n){const r=e.directiveStart,s=e.directiveEnd;t.firstCreatePass||Zt(e,i),Ko(n,i);const u=e.initialInputs;for(let _=r;_<s;_++){const b=t.data[_],S=as(b);S&&ct(i,e,b);const A=aa(i,t,_,e);Ko(A,i),null!==u&&vt(0,_-r,A,b,0,u),S&&(Hs(e.index,i)[8]=A)}}(t,i,e,Sr(e,i)),128==(128&e.flags)&&function ye(t,i,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,u=function _f(){return Xi.lFrame.currentDirectiveIndex}();try{vc(s);for(let _=n;_<r;_++){const b=t.data[_],S=i[_];rh(_),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Te(b,S)}}finally{vc(-1),rh(u)}}(t,i,e))}function l(t,i,e=Sr){const n=i.localNames;if(null!==n){let r=i.index+1;for(let s=0;s<n.length;s+=2){const u=n[s+1],_=-1===u?e(i,t):t[u];t[r++]=_}}}function o(t){const i=t.tView;return null===i||i.incompleteFirstPass?t.tView=a(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):i}function a(t,i,e,n,r,s,u,_,b,S){const A=22+n,B=A+r,X=function d(t,i){const e=[];for(let n=0;n<i;n++)e.push(n<t?null:gn);return e}(A,B),re="function"==typeof S?S():S;return X[1]={type:t,blueprint:X,template:e,queries:null,viewQuery:_,declTNode:i,data:X.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof u?u():u,firstChild:null,schemas:b,consts:re,incompleteFirstPass:!1}}function v(t,i,e,n){const r=sr(i);null===e?r.push(n):(r.push(e),t.firstCreatePass&&or(t).push(n,r.length-1))}function M(t,i,e){for(let n in t)if(t.hasOwnProperty(n)){const r=t[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(i,r):e[n]=[i,r]}return e}function D(t,i){const n=i.directiveEnd,r=t.data,s=i.attrs,u=[];let _=null,b=null;for(let S=i.directiveStart;S<n;S++){const A=r[S],B=A.inputs,X=null===s||Wy(i)?null:mt(B,s);u.push(X),_=M(B,S,_),b=M(A.outputs,S,b)}null!==_&&(_.hasOwnProperty("class")&&(i.flags|=16),_.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=u,i.inputs=_,i.outputs=b}function P(t,i,e,n,r,s,u,_){const b=Sr(i,e);let A,S=i.inputs;!_&&null!=S&&(A=S[n])?(Do(t,e,A,n,r),fc(i)&&O(e,i.index)):3&i.type&&(n=function k(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n),r=null!=u?u(r,i.value||"",n):r,s.setProperty(b,n,r))}function O(t,i){const e=Hs(i,t);16&e[2]||(e[2]|=32)}function J(t,i,e,n){let r=!1;if(ih()){const s=function we(t,i,e){const n=t.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const u=n[s];Yy(e,u.selectors,!1)&&(r||(r=[]),Kt(Zt(e,i),t,u.type),as(u)?(qe(t,e),r.unshift(u)):r.push(u))}return r}(t,i,e),u=null===n?null:{"":-1};if(null!==s){r=!0,Mt(e,t.data.length,s.length);for(let A=0;A<s.length;A++){const B=s[A];B.providersResolver&&B.providersResolver(B)}let _=!1,b=!1,S=zp(t,i,s.length,null);for(let A=0;A<s.length;A++){const B=s[A];e.mergedAttrs=Se(e.mergedAttrs,B.hostAttrs),Ze(t,e,i,S,B),nt(S,B,u),null!==B.contentQueries&&(e.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(e.flags|=128);const X=B.type.prototype;!_&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),_=!0),!b&&(X.ngOnChanges||X.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),b=!0),S++}D(t,e)}u&&function Ge(t,i,e){if(i){const n=t.localNames=[];for(let r=0;r<i.length;r+=2){const s=e[i[r+1]];if(null==s)throw new ft(-301,!1);n.push(i[r],s)}}}(e,n,u)}return e.mergedAttrs=Se(e.mergedAttrs,e.attrs),r}function ue(t,i,e,n,r,s){const u=s.hostBindings;if(u){let _=t.hostBindingOpCodes;null===_&&(_=t.hostBindingOpCodes=[]);const b=~i.index;(function xe(t){let i=t.length;for(;i>0;){const e=t[--i];if("number"==typeof e&&e<0)return e}return 0})(_)!=b&&_.push(b),_.push(n,r,u)}}function Te(t,i){null!==t.hostBindings&&t.hostBindings(1,i)}function qe(t,i){i.flags|=2,(t.components||(t.components=[])).push(i.index)}function nt(t,i,e){if(e){if(i.exportAs)for(let n=0;n<i.exportAs.length;n++)e[i.exportAs[n]]=t;as(i)&&(e[""]=t)}}function Mt(t,i,e){t.flags|=1,t.directiveStart=i,t.directiveEnd=i+e,t.providerIndexes=i}function Ze(t,i,e,n,r){t.data[n]=r;const s=r.factory||(r.factory=Us(r.type)),u=new G(s,as(r),W);t.blueprint[n]=u,e[n]=u,ue(t,i,0,n,zp(t,e,r.hostVars,gn),r)}function ct(t,i,e){const n=Sr(i,t),r=o(e),s=t[10],u=nr(t,Dh(t,r,null,e.onPush?32:16,n,i,s,s.createRenderer(n,e),null,null,null));t[i.index]=u}function at(t,i,e,n,r,s){const u=Sr(t,i);!function st(t,i,e,n,r,s,u){if(null==s)t.removeAttribute(i,r,e);else{const _=null==u?Ri(s):u(s,n||"",r);t.setAttribute(i,r,_,e)}}(i[11],u,s,t.value,e,n,r)}function vt(t,i,e,n,r,s){const u=s[i];if(null!==u){const _=n.setInput;for(let b=0;b<u.length;){const S=u[b++],A=u[b++],B=u[b++];null!==_?n.setInput(e,B,S,A):e[A]=B}}}function mt(t,i){let e=null,n=0;for(;n<i.length;){const r=i[n];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,t[r],i[n+1])),n+=2}else n+=2;else n+=4}return e}function Wi(t,i,e,n){return new Array(t,!0,!1,i,null,0,n,e,null,null)}function Ot(t,i){const e=Hs(i,t);if(ld(e)){const n=e[1];48&e[2]?Wg(n,e,n.template,e[8]):e[5]>0&&pn(e)}}function pn(t){for(let n=qf(t);null!==n;n=Wf(n))for(let r=10;r<n.length;r++){const s=n[r];if(ld(s))if(512&s[2]){const u=s[1];Wg(u,s,u.template,s[8])}else s[5]>0&&pn(s)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Hs(e[n],t);ld(r)&&r[5]>0&&pn(r)}}function ji(t,i){const e=Hs(i,t),n=e[1];(function Vt(t,i){for(let e=i.length;e<t.blueprint.length;e++)i.push(t.blueprint[e])})(n,e),qg(n,e,e[8])}function nr(t,i){return t[13]?t[14][4]=i:t[13]=i,t[14]=i,i}function rr(t){for(;t;){t[2]|=32;const i=Gf(t);if(Ha(t)&&!i)return t;t=i}return null}function mr(t,i,e,n=!0){const r=i[10];r.begin&&r.begin();try{Wg(t,i,t.template,e)}catch(u){throw n&&Or(i,u),u}finally{r.end&&r.end()}}function En(t,i,e){dd(0),i(t,e)}function sr(t){return t[7]||(t[7]=[])}function or(t){return t.cleanup||(t.cleanup=[])}function wr(t,i,e){return(null===t||as(t))&&(e=function hf(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(e[i.index])),e[11]}function Or(t,i){const e=t[9],n=e?e.get(md,null):null;n&&n.handleError(i)}function Do(t,i,e,n,r){for(let s=0;s<e.length;){const u=e[s++],_=e[s++],b=i[u],S=t.data[u];null!==S.setInput?S.setInput(b,r,n,_):b[_]=r}}function ro(t,i,e){const n=_c(i,t);!function wg(t,i,e){t.setValue(i,e)}(t[11],n,e)}function vn(t,i,e){let n=e?t.styles:null,r=e?t.classes:null,s=0;if(null!==i)for(let u=0;u<i.length;u++){const _=i[u];"number"==typeof _?s=_:1==s?r=tl(r,_):2==s&&(n=tl(n,_+": "+i[++u]+";"))}e?t.styles=n:t.stylesWithoutHost=n,e?t.classes=r:t.classesWithoutHost=r}function Fr(t,i,e,n,r=!1){for(;null!==e;){const s=i[e.index];if(null!==s&&n.push(Gr(s)),Es(s))for(let _=10;_<s.length;_++){const b=s[_],S=b[1].firstChild;null!==S&&Fr(b[1],b,S,n)}const u=e.type;if(8&u)Fr(t,i,e.child,n);else if(32&u){const _=Fy(e,i);let b;for(;b=_();)n.push(b)}else if(16&u){const _=Xf(i,e);if(Array.isArray(_))n.push(..._);else{const b=Gf(i[16]);Fr(b[1],b,_,n,!0)}}e=r?e.projectionNext:e.next}return n}class So{constructor(i,e){this._lView=i,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,e=i[1];return Fr(e,i,e.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Es(i)){const e=i[8],n=e?e.indexOf(this):-1;n>-1&&(Dg(i,n),dl(e,n))}this._attachedToViewContainer=!1}F0(this._lView[1],this._lView)}onDestroy(i){v(this._lView[1],this._lView,null,i)}markForCheck(){rr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){mr(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ft(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zC(t,i){Kf(t,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new ft(902,!1);this._appRef=i}}class Wn extends So{constructor(i){super(i),this._view=i}detectChanges(){const i=this._view;mr(i[1],i,i[8],!1)}checkNoChanges(){}get context(){return null}}class kr extends ph{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const e=Qn(i);return new oo(e,this.ngModule)}}function Ps(t){const i=[];for(let e in t)t.hasOwnProperty(e)&&i.push({propName:t[e],templateName:e});return i}class Xr{constructor(i,e){this.injector=i,this.parentInjector=e}get(i,e,n){const r=this.injector.get(i,mh,n);return r!==mh||e===mh?r:this.parentInjector.get(i,e,n)}}class oo extends m0{constructor(i,e){super(),this.componentDef=i,this.ngModule=e,this.componentType=i.type,this.selector=function zl(t){return t.map(Nl).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ps(this.componentDef.inputs)}get outputs(){return Ps(this.componentDef.outputs)}create(i,e,n,r){let s=(r=r||this.ngModule)instanceof wu?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const u=s?new Xr(i,s):i,_=u.get(Mu,null);if(null===_)throw new ft(407,!1);const b=u.get(Uf,null),S=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",B=n?function g(t,i,e){return t.selectRootElement(i,e===uo.ShadowDom)}(S,n,this.componentDef.encapsulation):By(_.createRenderer(null,this.componentDef),A,function Lr(t){const i=t.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(A)),X=this.componentDef.onPush?288:272,re=a(0,null,null,1,0,null,null,null,null,null),_e=Dh(null,re,null,X,null,null,_,S,b,u,null);let Le,Ue;mp(_e);try{const it=function Md(t,i,e,n,r,s){const u=e[1];e[22]=t;const b=Sh(u,22,2,"#host",null),S=b.mergedAttrs=i.hostAttrs;null!==S&&(vn(b,S,!0),null!==t&&(Ee(r,t,S),null!==b.classes&&qy(r,t,b.classes),null!==b.styles&&Gy(r,t,b.styles)));const A=n.createRenderer(t,i),B=Dh(e,o(i),null,i.onPush?32:16,e[22],b,n,A,s||null,null,null);return u.firstCreatePass&&(Kt(Zt(b,e),u,i.type),qe(u,b),Mt(b,e.length,1)),nr(e,B),e[22]=B}(B,this.componentDef,_e,_,S);if(B)if(n)Ee(S,B,["ng-version",_0.full]);else{const{attrs:Rt,classes:rt}=function $C(t){const i=[],e=[];let n=1,r=2;for(;n<t.length;){let s=t[n];if("string"==typeof s)2===r?""!==s&&i.push(s,t[++n]):8===r&&e.push(s);else{if(!Bl(r))break;r=s}n++}return{attrs:i,classes:e}}(this.componentDef.selectors[0]);Rt&&Ee(S,B,Rt),rt&&rt.length>0&&qy(S,B,rt.join(" "))}if(Ue=lp(re,22),void 0!==e){const Rt=Ue.projection=[];for(let rt=0;rt<this.ngContentSelectors.length;rt++){const ei=e[rt];Rt.push(null!=ei?Array.from(ei):null)}}Le=function Vp(t,i,e,n){const r=e[1],s=function K(t,i,e){const n=kt();t.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),Ze(t,n,i,zp(t,i,1,null),e),D(t,n));const r=aa(i,t,n.directiveStart,n);Ko(r,i);const s=Sr(n,i);return s&&Ko(s,i),r}(r,e,i);if(t[8]=e[8]=s,null!==n)for(const _ of n)_(s,i);if(i.contentQueries){const _=kt();i.contentQueries(1,s,_.directiveStart)}const u=kt();return!r.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(vc(u.index),ue(e[1],u,0,u.directiveStart,u.directiveEnd,i),Te(i,s)),s}(it,this.componentDef,_e,[cm]),qg(re,_e,null)}finally{_p()}return new qs(this.componentType,Le,fh(Ue,_e),_e,Ue)}}class qs extends class fC{}{constructor(i,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new Wn(r),this.componentType=i}setInput(i,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[i])){const s=this._rootLView;Do(s[1],s,r,i,e),O(s,this._tNode.index)}}get injector(){return new Pr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}function cm(){const t=kt();w(gt()[1],t)}function At(t){let i=function jp(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const n=[t];for(;i;){let r;if(as(t))r=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new ft(903,!1);r=i.\u0275dir}if(r){if(e){n.push(r);const u=t;u.inputs=Xg(t.inputs),u.declaredInputs=Xg(t.declaredInputs),u.outputs=Xg(t.outputs);const _=r.hostBindings;_&&Fc(t,_);const b=r.viewQuery,S=r.contentQueries;if(b&&lv(t,b),S&&cv(t,S),ws(t.inputs,r.inputs),ws(t.declaredInputs,r.declaredInputs),ws(t.outputs,r.outputs),as(r)&&r.data.animation){const A=t.data;A.animation=(A.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let u=0;u<s.length;u++){const _=s[u];_&&_.ngInherit&&_(t),_===At&&(e=!1)}}i=Object.getPrototypeOf(i)}!function ox(t){let i=0,e=null;for(let n=t.length-1;n>=0;n--){const r=t[n];r.hostVars=i+=r.hostVars,r.hostAttrs=Se(r.hostAttrs,e=Se(e,r.hostAttrs))}}(n)}function Xg(t){return t===ja?{}:t===Nn?[]:t}function lv(t,i){const e=t.viewQuery;t.viewQuery=e?(n,r)=>{i(n,r),e(n,r)}:i}function cv(t,i){const e=t.contentQueries;t.contentQueries=e?(n,r,s)=>{i(n,r,s),e(n,r,s)}:i}function Fc(t,i){const e=t.hostBindings;t.hostBindings=e?(n,r)=>{i(n,r),e(n,r)}:i}let Up=null;function Ea(){if(!Up){const t=Bn.Symbol;if(t&&t.iterator)Up=t.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<i.length;++e){const n=i[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Up=n)}}}return Up}function dm(t){return!!Th(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ea()in t)}function Th(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Hl(t,i,e){return t[i]=e}function Aa(t,i,e){return!Object.is(t[i],e)&&(t[i]=e,!0)}function um(t,i,e,n){const r=Aa(t,i,e);return Aa(t,i+1,n)||r}function Ti(t,i,e,n){const r=gt();return Aa(r,yc(),i)&&(Sn(),at(Yr(),r,t,i,e,n)),Ti}function Qg(t,i,e,n){return Aa(t,yc(),e)?i+Ri(e)+n:gn}function Jg(t,i,e,n,r,s){const _=um(t,function sa(){return Xi.lFrame.bindingIndex}(),e,r);return ks(2),_?i+Ri(e)+n+Ri(r)+s:gn}function Pe(t,i,e,n,r,s,u,_){const b=gt(),S=Sn(),A=t+22,B=S.firstCreatePass?function wB(t,i,e,n,r,s,u,_,b){const S=i.consts,A=Sh(i,t,4,u||null,$a(S,_));J(i,e,A,$a(S,b)),w(i,A);const B=A.tViews=a(2,A,n,r,s,i.directiveRegistry,i.pipeRegistry,null,i.schemas,S);return null!==i.queries&&(i.queries.template(i,A),B.queries=i.queries.embeddedTView(A)),A}(A,S,b,i,e,n,r,s,u):S.data[A];Ts(B,!1);const X=b[11].createComment("");Yf(S,b,X,B),Ko(X,b),nr(b,b[A]=Wi(X,b,X,B)),mc(B)&&Yg(S,b,B),null!=u&&l(b,B,_)}function Zn(t){return ad(function Wm(){return Xi.lFrame.contextLView}(),22+t)}function le(t,i,e){const n=gt();return Aa(n,yc(),i)&&P(Sn(),Yr(),n,t,i,n[11],e,!1),le}function sM(t,i,e,n,r){const u=r?"class":"style";Do(t,e,i.inputs[u],u,n)}function H(t,i,e,n){const r=gt(),s=Sn(),u=22+t,_=r[11],b=r[u]=By(_,i,function h(){return Xi.lFrame.currentNamespace}()),S=s.firstCreatePass?function MB(t,i,e,n,r,s,u){const _=i.consts,S=Sh(i,t,2,r,$a(_,s));return J(i,e,S,$a(_,u)),null!==S.attrs&&vn(S,S.attrs,!1),null!==S.mergedAttrs&&vn(S,S.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,S),S}(u,s,r,0,i,e,n):s.data[u];Ts(S,!0);const A=S.mergedAttrs;null!==A&&Ee(_,b,A);const B=S.classes;null!==B&&qy(_,b,B);const X=S.styles;return null!==X&&Gy(_,b,X),64!=(64&S.flags)&&Yf(s,r,b,S),0===function Yo(){return Xi.lFrame.elementDepthCount}()&&Ko(b,r),function K_(){Xi.lFrame.elementDepthCount++}(),mc(S)&&(Yg(s,r,S),av(s,S,r)),null!==n&&l(r,S),H}function U(){let t=kt();cd()?up():(t=t.parent,Ts(t,!1));const i=t;!function dp(){Xi.lFrame.elementDepthCount--}();const e=Sn();return e.firstCreatePass&&(w(e,t),nu(t)&&e.queries.elementEnd(t)),null!=i.classesWithoutHost&&function ne(t){return 0!=(16&t.flags)}(i)&&sM(e,i,gt(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function ee(t){return 0!=(32&t.flags)}(i)&&sM(e,i,gt(),i.stylesWithoutHost,!1),U}function bt(t,i,e,n){return H(t,i,e,n),U(),bt}function Wa(t,i,e){const n=gt(),r=Sn(),s=t+22,u=r.firstCreatePass?function DB(t,i,e,n,r){const s=i.consts,u=$a(s,n),_=Sh(i,t,8,"ng-container",u);return null!==u&&vn(_,u,!0),J(i,e,_,$a(s,r)),null!==i.queries&&i.queries.elementStart(i,_),_}(s,r,n,i,e):r.data[s];Ts(u,!0);const _=n[s]=n[11].createComment("");return Yf(r,n,_,u),Ko(_,n),mc(u)&&(Yg(r,n,u),av(r,u,n)),null!=e&&l(n,u),Wa}function Za(){let t=kt();const i=Sn();return cd()?up():(t=t.parent,Ts(t,!1)),i.firstCreatePass&&(w(i,t),nu(t)&&i.queries.elementEnd(t)),Za}function Ws(t,i,e){return Wa(t,i,e),Za(),Ws}function Tn(){return gt()}function hv(t){return!!t&&"function"==typeof t.then}function UT(t){return!!t&&"function"==typeof t.subscribe}const aM=UT;function Dt(t,i,e,n){const r=gt(),s=Sn(),u=kt();return HT(s,r,r[11],u,t,i,0,n),Dt}function cx(t,i){const e=kt(),n=gt(),r=Sn();return HT(r,n,wr(oh(r.data),e,n),e,t,i),cx}function HT(t,i,e,n,r,s,u,_){const b=mc(n),A=t.firstCreatePass&&or(t),B=i[8],X=sr(i);let re=!0;if(3&n.type||_){const Ue=Sr(n,i),it=_?_(Ue):Ue,Rt=X.length,rt=_?Fn=>_(Gr(Fn[n.index])):n.index;let ei=null;if(!_&&b&&(ei=function SB(t,i,e,n){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const u=r[s];if(u===e&&r[s+1]===n){const _=i[7],b=r[s+2];return _.length>b?_[b]:null}"string"==typeof u&&(s+=2)}return null}(t,i,r,n.index)),null!==ei)(ei.__ngLastListenerFn__||ei).__ngNextListenerFn__=s,ei.__ngLastListenerFn__=s,re=!1;else{s=GT(n,i,B,s,!1);const Fn=e.listen(it,r,s);X.push(s,Fn),A&&A.push(r,rt,Rt,Rt+1)}}else s=GT(n,i,B,s,!1);const _e=n.outputs;let Le;if(re&&null!==_e&&(Le=_e[r])){const Ue=Le.length;if(Ue)for(let it=0;it<Ue;it+=2){const ar=i[Le[it]][Le[it+1]].subscribe(s),ko=X.length;X.push(s,ar),A&&A.push(r,n.index,ko,-(ko+1))}}}function $T(t,i,e,n){try{return!1!==e(n)}catch(r){return Or(t,r),!1}}function GT(t,i,e,n,r){return function s(u){if(u===Function)return n;rr(2&t.flags?Hs(t.index,i):i);let b=$T(i,0,n,u),S=s.__ngNextListenerFn__;for(;S;)b=$T(i,0,S,u)&&b,S=S.__ngNextListenerFn__;return r&&!1===b&&(u.preventDefault(),u.returnValue=!1),b}}function Me(t=1){return function xf(t){return(Xi.lFrame.contextLView=function wf(t,i){for(;t>0;)i=i[15],t--;return i}(t,Xi.lFrame.contextLView))[8]}(t)}function EB(t,i){let e=null;const n=function H0(t){const i=t.attrs;if(null!=i){const e=i.indexOf(5);if(0==(1&e))return i[e+1]}return null}(t);for(let r=0;r<i.length;r++){const s=i[r];if("*"!==s){if(null===n?Yy(t,s,!0):Xy(n,s))return r}else e=r}return e}function Qo(t){const i=gt()[16][6];if(!i.projection){const n=i.projection=hu(t?t.length:1,null),r=n.slice();let s=i.child;for(;null!==s;){const u=t?EB(s,t):0;null!==u&&(r[u]?r[u].projectionNext=s:n[u]=s,r[u]=s),s=s.next}}}function gr(t,i=0,e){const n=gt(),r=Sn(),s=Sh(r,22+t,16,null,e||null);null===s.projection&&(s.projection=i),up(),64!=(64&s.flags)&&function jC(t,i,e){vh(i[11],0,i,e,zy(t,e,i),jy(e.parent||i[6],e,i))}(r,n,s)}function Fi(t,i,e){return lM(t,"",i,"",e),Fi}function lM(t,i,e,n,r){const s=gt(),u=Qg(s,i,e,n);return u!==gn&&P(Sn(),Yr(),s,t,u,s[11],r,!1),lM}function ek(t,i,e,n,r){const s=t[e+1],u=null===i;let _=n?jl(s):bd(s),b=!1;for(;0!==_&&(!1===b||u);){const A=t[_+1];AB(t[_],i)&&(b=!0,t[_+1]=n?Bp(A):Rc(A)),_=n?jl(A):bd(A)}b&&(t[e+1]=n?Rc(s):Bp(s))}function AB(t,i){return null===t||null==i||(Array.isArray(t)?t[1]:t)===i||!(!Array.isArray(t)||"string"!=typeof i)&&Ca(t,i)>=0}const Fs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tk(t){return t.substring(Fs.key,Fs.keyEnd)}function ik(t,i){const e=Fs.textEnd;return e===i?-1:(i=Fs.keyEnd=function OB(t,i,e){for(;i<e&&t.charCodeAt(i)>32;)i++;return i}(t,Fs.key=i,e),s_(t,i,e))}function s_(t,i,e){for(;i<e&&t.charCodeAt(i)<=32;)i++;return i}function Zs(t,i,e){return Dd(t,i,e,!1),Zs}function bn(t,i){return Dd(t,i,null,!0),bn}function _r(t){Sd(Is,Ou,t,!0)}function Ou(t,i){for(let e=function RB(t){return function rk(t){Fs.key=0,Fs.keyEnd=0,Fs.value=0,Fs.valueEnd=0,Fs.textEnd=t.length}(t),ik(t,s_(t,0,Fs.textEnd))}(i);e>=0;e=ik(i,e))Is(t,tk(i),!0)}function Dd(t,i,e,n){const r=gt(),s=Sn(),u=ks(2);s.firstUpdatePass&&lk(s,t,u,n),i!==gn&&Aa(r,u,i)&&dk(s,s.data[Fo()],r,r[11],t,r[u+1]=function $B(t,i){return null==t||("string"==typeof i?t+=i:"object"==typeof t&&(t=Qt(da(t)))),t}(i,e),n,u)}function Sd(t,i,e,n){const r=Sn(),s=ks(2);r.firstUpdatePass&&lk(r,null,s,n);const u=gt();if(e!==gn&&Aa(u,s,e)){const _=r.data[Fo()];if(hk(_,n)&&!ak(r,s)){let b=n?_.classesWithoutHost:_.stylesWithoutHost;null!==b&&(e=tl(b,e||"")),sM(r,_,u,e,n)}else!function HB(t,i,e,n,r,s,u,_){r===gn&&(r=Nn);let b=0,S=0,A=0<r.length?r[0]:null,B=0<s.length?s[0]:null;for(;null!==A||null!==B;){const X=b<r.length?r[b+1]:void 0,re=S<s.length?s[S+1]:void 0;let Le,_e=null;A===B?(b+=2,S+=2,X!==re&&(_e=B,Le=re)):null===B||null!==A&&A<B?(b+=2,_e=A):(S+=2,_e=B,Le=re),null!==_e&&dk(t,i,e,n,_e,Le,u,_),A=b<r.length?r[b]:null,B=S<s.length?s[S]:null}}(r,_,u,u[11],u[s+1],u[s+1]=function UB(t,i,e){if(null==e||""===e)return Nn;const n=[],r=da(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(n,s,r[s]);else"string"==typeof r&&i(n,r);return n}(t,i,e),n,s)}}function ak(t,i){return i>=t.expandoStartIndex}function lk(t,i,e,n){const r=t.data;if(null===r[e+1]){const s=r[Fo()],u=ak(t,e);hk(s,n)&&null===i&&!u&&(i=!1),i=function NB(t,i,e,n){const r=oh(t);let s=n?i.residualClasses:i.residualStyles;if(null===r)0===(n?i.classBindings:i.styleBindings)&&(e=pv(e=cM(null,t,i,e,n),i.attrs,n),s=null);else{const u=i.directiveStylingLast;if(-1===u||t[u]!==r)if(e=cM(r,t,i,e,n),null===s){let b=function zB(t,i,e){const n=e?i.classBindings:i.styleBindings;if(0!==bd(n))return t[jl(n)]}(t,i,n);void 0!==b&&Array.isArray(b)&&(b=cM(null,t,i,b[1],n),b=pv(b,i.attrs,n),function VB(t,i,e,n){t[jl(e?i.classBindings:i.styleBindings)]=n}(t,i,n,b))}else s=function jB(t,i,e){let n;const r=i.directiveEnd;for(let s=1+i.directiveStylingLast;s<r;s++)n=pv(n,t[s].hostAttrs,e);return pv(n,i.attrs,e)}(t,i,n)}return void 0!==s&&(n?i.residualClasses=s:i.residualStyles=s),e}(r,s,i,n),function TB(t,i,e,n,r,s){let u=s?i.classBindings:i.styleBindings,_=jl(u),b=bd(u);t[n]=e;let A,S=!1;if(Array.isArray(e)){const B=e;A=B[1],(null===A||Ca(B,A)>0)&&(S=!0)}else A=e;if(r)if(0!==b){const X=jl(t[_+1]);t[n+1]=wh(X,_),0!==X&&(t[X+1]=rm(t[X+1],n)),t[_+1]=function nv(t,i){return 131071&t|i<<17}(t[_+1],n)}else t[n+1]=wh(_,0),0!==_&&(t[_+1]=rm(t[_+1],n)),_=n;else t[n+1]=wh(b,0),0===_?_=n:t[b+1]=rm(t[b+1],n),b=n;S&&(t[n+1]=Rc(t[n+1])),ek(t,A,n,!0),ek(t,A,n,!1),function kB(t,i,e,n,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof i&&Ca(s,i)>=0&&(e[n+1]=Bp(e[n+1]))}(i,A,t,n,s),u=wh(_,b),s?i.classBindings=u:i.styleBindings=u}(r,s,i,e,u,n)}}function cM(t,i,e,n,r){let s=null;const u=e.directiveEnd;let _=e.directiveStylingLast;for(-1===_?_=e.directiveStart:_++;_<u&&(s=i[_],n=pv(n,s.hostAttrs,r),s!==t);)_++;return null!==t&&(e.directiveStylingLast=_),n}function pv(t,i,e){const n=e?1:2;let r=-1;if(null!==i)for(let s=0;s<i.length;s++){const u=i[s];"number"==typeof u?r=u:r===n&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Is(t,u,!!e||i[++s]))}return void 0===t?null:t}function dk(t,i,e,n,r,s,u,_){if(!(3&i.type))return;const b=t.data,S=b[_+1];dx(function rv(t){return 1==(1&t)}(S)?uk(b,i,e,r,bd(S),u):void 0)||(dx(s)||function Ng(t){return 2==(2&t)}(S)&&(s=uk(b,null,e,r,_,u)),function UC(t,i,e,n,r){if(i)r?t.addClass(e,n):t.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:Sa.DashCase;null==r?t.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Sa.Important),t.setStyle(e,n,r,s))}}(n,u,_c(Fo(),e),r,s))}function uk(t,i,e,n,r,s){const u=null===i;let _;for(;r>0;){const b=t[r],S=Array.isArray(b),A=S?b[1]:b,B=null===A;let X=e[r+1];X===gn&&(X=B?Nn:void 0);let re=B?pu(X,n):A===n?X:void 0;if(S&&!dx(re)&&(re=pu(b,n)),dx(re)&&(_=re,u))return _;const _e=t[r+1];r=u?jl(_e):bd(_e)}if(null!==i){let b=s?i.residualClasses:i.residualStyles;null!=b&&(_=pu(b,n))}return _}function dx(t){return void 0!==t}function hk(t,i){return 0!=(t.flags&(i?16:32))}function ge(t,i=""){const e=gt(),n=Sn(),r=t+22,s=n.firstCreatePass?Sh(n,r,1,i,null):n.data[r],u=e[r]=function Du(t,i){return t.createText(i)}(e[11],i);Yf(n,e,u,s),Ts(s,!1)}function Lt(t){return Yn("",t,""),Lt}function Yn(t,i,e){const n=gt(),r=Qg(n,t,i,e);return r!==gn&&ro(n,Fo(),r),Yn}function jo(t,i,e,n,r){const s=gt(),u=Jg(s,t,i,e,n,r);return u!==gn&&ro(s,Fo(),u),jo}function dM(t,i,e){Sd(Is,Ou,Qg(gt(),t,i,e),!0)}function Ya(t,i,e){const n=gt();return Aa(n,yc(),i)&&P(Sn(),Yr(),n,t,i,n[11],e,!0),Ya}function ux(t,i,e){const n=gt();if(Aa(n,yc(),i)){const s=Sn(),u=Yr();P(s,u,n,t,i,wr(oh(s.data),u,n),e,!0)}return ux}const hm=void 0;var cN=["en",[["a","p"],["AM","PM"],hm],[["AM","PM"],hm,hm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hm,"{1} 'at' {0}",hm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lN(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let a_={};function Xa(t){const i=function dN(t){return t.toLowerCase().replace(/_/g,"-")}(t);let e=Ak(i);if(e)return e;const n=i.split("-")[0];if(e=Ak(n),e)return e;if("en"===n)return cN;throw new ft(701,!1)}function Ak(t){return t in a_||(a_[t]=Bn.ng&&Bn.ng.common&&Bn.ng.common.locales&&Bn.ng.common.locales[t]),a_[t]}var ci=(()=>((ci=ci||{})[ci.LocaleId=0]="LocaleId",ci[ci.DayPeriodsFormat=1]="DayPeriodsFormat",ci[ci.DayPeriodsStandalone=2]="DayPeriodsStandalone",ci[ci.DaysFormat=3]="DaysFormat",ci[ci.DaysStandalone=4]="DaysStandalone",ci[ci.MonthsFormat=5]="MonthsFormat",ci[ci.MonthsStandalone=6]="MonthsStandalone",ci[ci.Eras=7]="Eras",ci[ci.FirstDayOfWeek=8]="FirstDayOfWeek",ci[ci.WeekendRange=9]="WeekendRange",ci[ci.DateFormat=10]="DateFormat",ci[ci.TimeFormat=11]="TimeFormat",ci[ci.DateTimeFormat=12]="DateTimeFormat",ci[ci.NumberSymbols=13]="NumberSymbols",ci[ci.NumberFormats=14]="NumberFormats",ci[ci.CurrencyCode=15]="CurrencyCode",ci[ci.CurrencySymbol=16]="CurrencySymbol",ci[ci.CurrencyName=17]="CurrencyName",ci[ci.Currencies=18]="Currencies",ci[ci.Directionality=19]="Directionality",ci[ci.PluralCase=20]="PluralCase",ci[ci.ExtraData=21]="ExtraData",ci))();const l_="en-US";let Ik=l_;function pM(t,i,e,n,r){if(t=xi(t),Array.isArray(t))for(let s=0;s<t.length;s++)pM(t[s],i,e,n,r);else{const s=Sn(),u=gt();let _=Ec(t)?t:xi(t.provide),b=f0(t);const S=kt(),A=1048575&S.providerIndexes,B=S.directiveStart,X=S.providerIndexes>>20;if(Ec(t)||!t.multi){const re=new G(b,r,W),_e=mM(_,i,r?A:A+X,B);-1===_e?(Kt(Zt(S,u),s,_),fM(s,t,i.length),i.push(_),S.directiveStart++,S.directiveEnd++,r&&(S.providerIndexes+=1048576),e.push(re),u.push(re)):(e[_e]=re,u[_e]=re)}else{const re=mM(_,i,A+X,B),_e=mM(_,i,A,A+X),Le=re>=0&&e[re],Ue=_e>=0&&e[_e];if(r&&!Ue||!r&&!Le){Kt(Zt(S,u),s,_);const it=function l3(t,i,e,n,r){const s=new G(t,e,W);return s.multi=[],s.index=i,s.componentProviders=0,iA(s,r,n&&!e),s}(r?a3:s3,e.length,r,n,b);!r&&Ue&&(e[_e].providerFactory=it),fM(s,t,i.length,0),i.push(_),S.directiveStart++,S.directiveEnd++,r&&(S.providerIndexes+=1048576),e.push(it),u.push(it)}else fM(s,t,re>-1?re:_e,iA(e[r?_e:re],b,!r&&n));!r&&n&&Ue&&e[_e].componentProviders++}}}function fM(t,i,e,n){const r=Ec(i),s=function Bf(t){return!!t.useClass}(i);if(r||s){const b=(s?xi(i.useClass):i).prototype.ngOnDestroy;if(b){const S=t.destroyHooks||(t.destroyHooks=[]);if(!r&&i.multi){const A=S.indexOf(e);-1===A?S.push(e,[n,b]):S[A+1].push(n,b)}else S.push(e,b)}}}function iA(t,i,e){return e&&t.componentProviders++,t.multi.push(i)-1}function mM(t,i,e,n){for(let r=e;r<n;r++)if(i[r]===t)return r;return-1}function s3(t,i,e,n){return gM(this.multi,[])}function a3(t,i,e,n){const r=this.multi;let s;if(this.providerFactory){const u=this.providerFactory.componentProviders,_=aa(e,e[1],this.providerFactory.index,n);s=_.slice(0,u),gM(r,s);for(let b=u;b<_.length;b++)s.push(_[b])}else s=[],gM(r,s);return s}function gM(t,i){for(let e=0;e<t.length;e++)i.push((0,t[e])());return i}function di(t,i=[]){return e=>{e.providersResolver=(n,r)=>function o3(t,i,e){const n=Sn();if(n.firstCreatePass){const r=as(t);pM(e,n.data,n.blueprint,r,!0),pM(i,n.data,n.blueprint,r,!1)}}(n,r?r(t):t,i)}}class pm{}class nA{}class rA extends pm{constructor(i,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kr(this);const n=Zo(i);this._bootstrapComponents=Ac(n.bootstrap),this._r3Injector=Ky(i,e,[{provide:pm,useValue:this},{provide:ph,useValue:this.componentFactoryResolver}],Qt(i),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(i)}get injector(){return this._r3Injector}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class _M extends nA{constructor(i){super(),this.moduleType=i}create(i){return new rA(this.moduleType,i)}}class d3 extends pm{constructor(i,e,n){super(),this.componentFactoryResolver=new kr(this),this.instance=null;const r=new Cy([...i,{provide:pm,useValue:this},{provide:ph,useValue:this.componentFactoryResolver}],e||Ep(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(i){this.injector.onDestroy(i)}}function gx(t,i,e=null){return new d3(t,i,e).injector}let u3=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const n=pg(0,e.type),r=n.length>0?gx([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,r)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=Tt({token:t,providedIn:"environment",factory:()=>new t($e(wu))}),t})();function oA(t){t.getStandaloneInjector=i=>i.get(u3).getOrCreateStandaloneInjector(t)}function vM(t,i,e,n,r){return function pA(t,i,e,n,r,s,u){const _=i+e;return um(t,_,r,s)?Hl(t,_+2,u?n.call(u,r,s):n(r,s)):vv(t,_+2)}(gt(),cs(),t,i,e,n,r)}function vv(t,i){const e=t[i];return e===gn?void 0:e}function bM(t,i){const e=Sn();let n;const r=t+22;e.firstCreatePass?(n=function T3(t,i){if(i)for(let e=i.length-1;e>=0;e--){const n=i[e];if(t===n.name)return n}}(i,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=Us(n.type)),u=Br(W);try{const _=lt(!1),b=s();return lt(_),function CB(t,i,e,n){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),i[e]=n}(e,gt(),r,b),b}finally{Br(u)}}function xM(t,i,e){const n=t+22,r=gt(),s=ad(r,n);return function bv(t,i){return t[1].data[i].pure}(r,n)?function hA(t,i,e,n,r,s){const u=i+e;return Aa(t,u,r)?Hl(t,u+1,s?n.call(s,r):n(r)):vv(t,u+1)}(r,cs(),i,s.transform,e,s):s.transform(e)}function wM(t){return i=>{setTimeout(t,void 0,i)}}const Ht=class P3 extends St{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,e,n){let r=i,s=e||(()=>null),u=n;if(i&&"object"==typeof i){const b=i;r=b.next?.bind(b),s=b.error?.bind(b),u=b.complete?.bind(b)}this.__isAsync&&(s=wM(s),r&&(r=wM(r)),u&&(u=wM(u)));const _=super.subscribe({next:r,error:s,complete:u});return i instanceof ce&&i.add(_),_}};function O3(){return this._results[Ea()]()}class Hp{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ea(),n=Hp.prototype;n[e]||(n[e]=O3)}get changes(){return this._changes||(this._changes=new Ht)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,e){return this._results.reduce(i,e)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,e){const n=this;n.dirty=!1;const r=wa(i);(this._changesDetected=!function Xm(t,i,e){if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++){let r=t[n],s=i[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let mo=(()=>{class t{}return t.__NG_ELEMENT_ID__=B3,t})();const F3=mo,L3=class extends F3{constructor(i,e,n){super(),this._declarationLView=i,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(i,e){const n=this._declarationTContainer.tViews,r=Dh(this._declarationLView,n,i,16,null,n.declTNode,null,null,null,null,e||null);r[17]=this._declarationLView[this._declarationTContainer.index];const u=this._declarationLView[19];return null!==u&&(r[19]=u.createEmbeddedView(n)),qg(n,r,i),new So(r)}};function B3(){return yx(kt(),gt())}function yx(t,i){return 4&t.type?new L3(i,t,fh(t,i)):null}let go=(()=>{class t{}return t.__NG_ELEMENT_ID__=N3,t})();function N3(){return vA(kt(),gt())}const z3=go,_A=class extends z3{constructor(i,e,n){super(),this._lContainer=i,this._hostTNode=e,this._hostLView=n}get element(){return fh(this._hostTNode,this._hostLView)}get injector(){return new Pr(this._hostTNode,this._hostLView)}get parentInjector(){const i=ln(this._hostTNode,this._hostLView);if(Re(i)){const e=ze(i,this._hostLView),n=He(i);return new Pr(e[1].data[n+8],e)}return new Pr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const e=yA(this._lContainer);return null!==e&&e[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const u=i.createEmbeddedView(e||{},s);return this.insert(u,r),u}createComponent(i,e,n,r,s){const u=i&&!function hd(t){return"function"==typeof t}(i);let _;if(u)_=e;else{const B=e||{};_=B.index,n=B.injector,r=B.projectableNodes,s=B.environmentInjector||B.ngModuleRef}const b=u?i:new oo(Qn(i)),S=n||this.parentInjector;if(!s&&null==b.ngModule){const X=(u?S:this.parentInjector).get(wu,null);X&&(s=X)}const A=b.create(S,r,void 0,s);return this.insert(A.hostView,_),A}insert(i,e){const n=i._lView,r=n[1];if(function cu(t){return Es(t[3])}(n)){const A=this.indexOf(i);if(-1!==A)this.detach(A);else{const B=n[3],X=new _A(B,B[6],B[3]);X.detach(X.indexOf(i))}}const s=this._adjustIndex(e),u=this._lContainer;!function O0(t,i,e,n){const r=10+n,s=e.length;n>0&&(e[r-1][4]=i),n<s-10?(i[4]=e[r],Cf(e,10+n,i)):(e.push(i),i[4]=null),i[3]=e;const u=i[17];null!==u&&e!==u&&function Ny(t,i){const e=t[9];i[16]!==i[3][3][16]&&(t[2]=!0),null===e?t[9]=[i]:e.push(i)}(u,i);const _=i[19];null!==_&&_.insertView(t),i[2]|=64}(r,n,u,s);const _=Uy(s,u),b=n[11],S=Eu(b,u[7]);return null!==S&&function R0(t,i,e,n,r,s){n[0]=r,n[6]=i,Kf(t,n,e,1,r,s)}(r,u[6],b,n,S,_),i.attachToViewContainerRef(),Cf(CM(u),s,i),i}move(i,e){return this.insert(i,e)}indexOf(i){const e=yA(this._lContainer);return null!==e?e.indexOf(i):-1}remove(i){const e=this._adjustIndex(i,-1),n=Dg(this._lContainer,e);n&&(dl(CM(this._lContainer),e),F0(n[1],n))}detach(i){const e=this._adjustIndex(i,-1),n=Dg(this._lContainer,e);return n&&null!=dl(CM(this._lContainer),e)?new So(n):null}_adjustIndex(i,e=0){return i??this.length+e}};function yA(t){return t[8]}function CM(t){return t[8]||(t[8]=[])}function vA(t,i){let e;const n=i[t.index];if(Es(n))e=n;else{let r;if(8&t.type)r=Gr(n);else{const s=i[11];r=s.createComment("");const u=Sr(t,i);Su(s,Eu(s,u),r,function V0(t,i){return t.nextSibling(i)}(s,u),!1)}i[t.index]=e=Wi(n,i,r,t),nr(i,e)}return new _A(e,t,i)}class MM{constructor(i){this.queryList=i,this.matches=null}clone(){return new MM(this.queryList)}setDirty(){this.queryList.setDirty()}}class DM{constructor(i=[]){this.queries=i}createEmbeddedView(i){const e=i.queries;if(null!==e){const n=null!==i.contentQueries?i.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const u=e.getByIndex(s);r.push(this.queries[u.indexInDeclarationView].clone())}return new DM(r)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let e=0;e<this.queries.length;e++)null!==MA(i,e).matches&&this.queries[e].setDirty()}}class bA{constructor(i,e,n=null){this.predicate=i,this.flags=e,this.read=n}}class SM{constructor(i=[]){this.queries=i}elementStart(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(i,e)}elementEnd(i){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(i)}embeddedTView(i){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(i,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new SM(e):null}template(i,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(i,e)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class EM{constructor(i,e=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(i,e){this.isApplyingToNode(e)&&this.matchTNode(i,e)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,e){this.elementStart(i,e)}embeddedTView(i,e){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,e),new EM(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=i.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(i,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(i,e,U3(e,s)),this.matchTNodeWithReadOption(i,e,$s(e,i,s,!1,!1))}else n===mo?4&e.type&&this.matchTNodeWithReadOption(i,e,-1):this.matchTNodeWithReadOption(i,e,$s(e,i,n,!1,!1))}matchTNodeWithReadOption(i,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ci||r===go||r===mo&&4&e.type)this.addMatch(e.index,-2);else{const s=$s(e,i,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(i,e){null===this.matches?this.matches=[i,e]:this.matches.push(i,e)}}function U3(t,i){const e=t.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===i)return e[n+1];return null}function $3(t,i,e,n){return-1===e?function H3(t,i){return 11&t.type?fh(t,i):4&t.type?yx(t,i):null}(i,t):-2===e?function G3(t,i,e){return e===Ci?fh(i,t):e===mo?yx(i,t):e===go?vA(i,t):void 0}(t,i,n):aa(t,t[1],e,i)}function xA(t,i,e,n){const r=i[19].queries[n];if(null===r.matches){const s=t.data,u=e.matches,_=[];for(let b=0;b<u.length;b+=2){const S=u[b];_.push(S<0?null:$3(i,s[S],u[b+1],e.metadata.read))}r.matches=_}return r.matches}function TM(t,i,e,n){const r=t.queries.getByIndex(e),s=r.matches;if(null!==s){const u=xA(t,i,r,e);for(let _=0;_<s.length;_+=2){const b=s[_];if(b>0)n.push(u[_/2]);else{const S=s[_+1],A=i[-b];for(let B=10;B<A.length;B++){const X=A[B];X[17]===X[3]&&TM(X[1],X,S,n)}if(null!==A[9]){const B=A[9];for(let X=0;X<B.length;X++){const re=B[X];TM(re[1],re,S,n)}}}}}return n}function $t(t){const i=gt(),e=Sn(),n=pp();dd(n+1);const r=MA(e,n);if(t.dirty&&function $m(t){return 4==(4&t[2])}(i)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?TM(e,i,n,[]):xA(e,i,r,n);t.reset(s,_C),t.notifyOnChanges()}return!0}return!1}function kn(t,i,e){const n=Sn();n.firstCreatePass&&(CA(n,new bA(t,i,e),-1),2==(2&i)&&(n.staticViewQueries=!0)),wA(n,gt(),i)}function An(t,i,e,n){const r=Sn();if(r.firstCreatePass){const s=kt();CA(r,new bA(i,e,n),s.index),function W3(t,i){const e=t.contentQueries||(t.contentQueries=[]);i!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,i)}(r,t),2==(2&e)&&(r.staticContentQueries=!0)}wA(r,gt(),e)}function Gt(){return function q3(t,i){return t[19].queries[i].queryList}(gt(),pp())}function wA(t,i,e){const n=new Hp(4==(4&e));v(t,i,n,n.destroy),null===i[19]&&(i[19]=new DM),i[19].queries.push(new MM(n))}function CA(t,i,e){null===t.queries&&(t.queries=new SM),t.queries.track(new EM(i,e))}function MA(t,i){return t.queries.getByIndex(i)}function DA(t,i){return yx(t,i)}function bx(...t){}const xx=new tt("Application Initializer");let wx=(()=>{class t{constructor(e){this.appInits=e,this.resolve=bx,this.reject=bx,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(hv(s))e.push(s);else if(aM(s)){const u=new Promise((_,b)=>{s.subscribe({complete:_,error:b})});e.push(u)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)($e(xx,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const wv=new tt("AppId",{providedIn:"root",factory:function $A(){return`${PM()}${PM()}${PM()}`}});function PM(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const GA=new tt("Platform Initializer"),Cx=new tt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qA=new tt("appBootstrapListener"),Ia=new tt("AnimationModuleType");let pz=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Fu=new tt("LocaleId",{providedIn:"root",factory:()=>qn(Fu,zi.Optional|zi.SkipSelf)||function fz(){return typeof $localize<"u"&&$localize.locale||l_}()});class gz{constructor(i,e){this.ngModuleFactory=i,this.componentFactories=e}}let OM=(()=>{class t{compileModuleSync(e){return new _M(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=Ac(Zo(e).declarations).reduce((u,_)=>{const b=Qn(_);return b&&u.push(new oo(b)),u},[]);return new gz(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const vz=(()=>Promise.resolve(0))();function FM(t){typeof Zone>"u"?vz.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ki{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ht(!1),this.onMicrotaskEmpty=new Ht(!1),this.onStable=new Ht(!1),this.onError=new Ht(!1),typeof Zone>"u")throw new ft(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function bz(){let t=Bn.requestAnimationFrame,i=Bn.cancelAnimationFrame;if(typeof Zone<"u"&&t&&i){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const n=i[Zone.__symbol__("OriginalDelegate")];n&&(i=n)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Cz(t){const i=()=>{!function wz(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Bn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,BM(t),t.isCheckStableRunning=!0,LM(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),BM(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,u,_)=>{try{return YA(t),e.invokeTask(r,s,u,_)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&i(),XA(t)}},onInvoke:(e,n,r,s,u,_,b)=>{try{return YA(t),e.invoke(r,s,u,_,b)}finally{t.shouldCoalesceRunChangeDetection&&i(),XA(t)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,BM(t),LM(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ki.isInAngularZone())throw new ft(909,!1)}static assertNotInAngularZone(){if(Ki.isInAngularZone())throw new ft(909,!1)}run(i,e,n){return this._inner.run(i,e,n)}runTask(i,e,n,r){const s=this._inner,u=s.scheduleEventTask("NgZoneEvent: "+r,i,xz,bx,bx);try{return s.runTask(u,e,n)}finally{s.cancelTask(u)}}runGuarded(i,e,n){return this._inner.runGuarded(i,e,n)}runOutsideAngular(i){return this._outer.run(i)}}const xz={};function LM(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function BM(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function YA(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function XA(t){t._nesting--,LM(t)}class Mz{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ht,this.onMicrotaskEmpty=new Ht,this.onStable=new Ht,this.onError=new Ht}run(i,e,n){return i.apply(e,n)}runGuarded(i,e,n){return i.apply(e,n)}runOutsideAngular(i){return i()}runTask(i,e,n,r){return i.apply(e,n)}}const KA=new tt(""),Mx=new tt("");let VM,NM=(()=>{class t{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,VM||(function Dz(t){VM=t}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ki.assertNotInAngularZone(),FM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())FM(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(u=>u.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return t.\u0275fac=function(e){return new(e||t)($e(Ki),$e(zM),$e(Mx))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})(),zM=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return VM?.findTestabilityInTree(this,e,n)??null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),$p=null;const QA=new tt("AllowMultipleToken"),jM=new tt("PlatformDestroyListeners");class JA{constructor(i,e){this.name=i,this.token=e}}function tI(t,i,e=[]){const n=`Platform: ${i}`,r=new tt(n);return(s=[])=>{let u=UM();if(!u||u.injector.get(QA,!1)){const _=[...e,...s,{provide:r,useValue:!0}];t?t(_):function Tz(t){if($p&&!$p.get(QA,!1))throw new ft(400,!1);$p=t;const i=t.get(nI);(function eI(t){const i=t.get(GA,null);i&&i.forEach(e=>e())})(t)}(function iI(t=[],i){return no.create({name:i,providers:[{provide:fg,useValue:"platform"},{provide:jM,useValue:new Set([()=>$p=null])},...t]})}(_,n))}return function Az(t){const i=UM();if(!i)throw new ft(401,!1);return i}()}}function UM(){return $p?.get(nI)??null}let nI=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function oI(t,i){let e;return e="noop"===t?new Mz:("zone.js"===t?void 0:t)||new Ki(i),e}(n?.ngZone,function rI(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:Ki,useValue:r}];return r.run(()=>{const u=no.create({providers:s,parent:this.injector,name:e.moduleType.name}),_=e.create(u),b=_.injector.get(md,null);if(!b)throw new ft(402,!1);return r.runOutsideAngular(()=>{const S=r.onError.subscribe({next:A=>{b.handleError(A)}});_.onDestroy(()=>{Dx(this._modules,_),S.unsubscribe()})}),function sI(t,i,e){try{const n=e();return hv(n)?n.catch(r=>{throw i.runOutsideAngular(()=>t.handleError(r)),r}):n}catch(n){throw i.runOutsideAngular(()=>t.handleError(n)),n}}(b,r,()=>{const S=_.injector.get(wx);return S.runInitializers(),S.donePromise.then(()=>(function Rk(t){vo(t,"Expected localeId to be defined"),"string"==typeof t&&(Ik=t.toLowerCase().replace(/_/g,"-"))}(_.injector.get(Fu,l_)||l_),this._moduleDoBootstrap(_),_))})})}bootstrapModule(e,n=[]){const r=aI({},n);return function Sz(t,i,e){const n=new _M(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(u_);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new ft(403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ft(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(jM,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)($e(no))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function aI(t,i){return Array.isArray(i)?i.reduce(aI,t):{...t,...i}}let u_=(()=>{class t{constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new $i(_=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{_.next(this._stable),_.complete()})}),u=new $i(_=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{Ki.assertNotInAngularZone(),FM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,_.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ki.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{_.next(!1)}))});return()=>{b.unsubscribe(),S.unsubscribe()}});this.isStable=wt(s,u.pipe(on()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){const r=e instanceof m0;if(!this._injector.get(wx).done)throw!r&&function ol(t){const i=Qn(t)||bo(t)||Zr(t);return null!==i&&i.standalone}(e),new ft(405,false);let u;u=r?e:this._injector.get(ph).resolveComponentFactory(e),this.componentTypes.push(u.componentType);const _=function Ez(t){return t.isBoundToModule}(u)?void 0:this._injector.get(pm),S=u.create(no.NULL,[],n||u.selector,_),A=S.location.nativeElement,B=S.injector.get(KA,null);return B?.registerApplication(A),S.onDestroy(()=>{this.detachView(S.hostView),Dx(this.components,S),B?.unregisterApplication(A)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new ft(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;Dx(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(qA,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Dx(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new ft(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(e){return new(e||t)($e(Ki),$e(wu),$e(md))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Dx(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}let cI=!0,Jn=(()=>{class t{}return t.__NG_ELEMENT_ID__=Pz,t})();function Pz(t){return function Oz(t,i,e){if(fc(t)&&!e){const n=Hs(t.index,i);return new So(n,n)}return 47&t.type?new So(i[16],i):null}(kt(),gt(),16==(16&t))}class fI{constructor(){}supports(i){return dm(i)}create(i){return new Vz(i)}}const zz=(t,i)=>i;class Vz{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||zz}forEachItem(i){let e;for(e=this._itHead;null!==e;e=e._next)i(e)}forEachOperation(i){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const u=!n||e&&e.currentIndex<gI(n,r,s)?e:n,_=gI(u,r,s),b=u.currentIndex;if(u===n)r--,n=n._nextRemoved;else if(e=e._next,null==u.previousIndex)r++;else{s||(s=[]);const S=_-r,A=b-r;if(S!=A){for(let X=0;X<S;X++){const re=X<s.length?s[X]:s[X]=0,_e=re+X;A<=_e&&_e<S&&(s[X]=re+1)}s[u.previousIndex]=A-S}}_!==b&&i(u,_,b)}}forEachPreviousItem(i){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachMovedItem(i){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}forEachIdentityChange(i){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)i(e)}diff(i){if(null==i&&(i=[]),!dm(i))throw new ft(900,!1);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let r,s,u,e=this._itHead,n=!1;if(Array.isArray(i)){this.length=i.length;for(let _=0;_<this.length;_++)s=i[_],u=this._trackByFn(_,s),null!==e&&Object.is(e.trackById,u)?(n&&(e=this._verifyReinsertion(e,s,u,_)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,u,_),n=!0),e=e._next}else r=0,function ka(t,i){if(Array.isArray(t))for(let e=0;e<t.length;e++)i(t[e]);else{const e=t[Ea()]();let n;for(;!(n=e.next()).done;)i(n.value)}}(i,_=>{u=this._trackByFn(r,_),null!==e&&Object.is(e.trackById,u)?(n&&(e=this._verifyReinsertion(e,_,u,r)),Object.is(e.item,_)||this._addIdentityChange(e,_)):(e=this._mismatch(e,_,u,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,e,n,r){let s;return null===i?s=this._itTail:(s=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._reinsertAfter(i,s,r)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(i.item,e)||this._addIdentityChange(i,e),this._moveAfter(i,s,r)):i=this._addAfter(new jz(e,n),s,r),i}_verifyReinsertion(i,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?i=this._reinsertAfter(s,i._prev,r):i.currentIndex!=r&&(i.currentIndex=r,this._addToMoves(i,r)),i}_truncate(i){for(;null!==i;){const e=i._next;this._addToRemovals(this._unlink(i)),i=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const r=i._prevRemoved,s=i._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(i,e,n),this._addToMoves(i,n),i}_moveAfter(i,e,n){return this._unlink(i),this._insertAfter(i,e,n),this._addToMoves(i,n),i}_addAfter(i,e,n){return this._insertAfter(i,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,e,n){const r=null===e?this._itHead:e._next;return i._next=r,i._prev=e,null===r?this._itTail=i:r._prev=i,null===e?this._itHead=i:e._next=i,null===this._linkedRecords&&(this._linkedRecords=new mI),this._linkedRecords.put(i),i.currentIndex=n,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const e=i._prev,n=i._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,i}_addToMoves(i,e){return i.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,e){return i.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class jz{constructor(i,e){this.item=i,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Uz{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,i))return n;return null}remove(i){const e=i._prevDup,n=i._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class mI{constructor(){this.map=new Map}put(i){const e=i.trackById;let n=this.map.get(e);n||(n=new Uz,this.map.set(e,n)),n.add(i)}get(i,e){const r=this.map.get(i);return r?r.get(i,e):null}remove(i){const e=i.trackById;return this.map.get(e).remove(i)&&this.map.delete(e),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gI(t,i,e){const n=t.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+i+r}class _I{constructor(){}supports(i){return i instanceof Map||Th(i)}create(){return new Hz}}class Hz{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let e;for(e=this._mapHead;null!==e;e=e._next)i(e)}forEachPreviousItem(i){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)i(e)}forEachChangedItem(i){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)i(e)}forEachAddedItem(i){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)i(e)}forEachRemovedItem(i){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)i(e)}diff(i){if(i){if(!(i instanceof Map||Th(i)))throw new ft(900,!1)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(i,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,e){if(i){const n=i._prev;return e._next=i,e._prev=n,i._prev=e,n&&(n._next=e),i===this._mapHead&&(this._mapHead=e),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(i,e){if(this._records.has(i)){const r=this._records.get(i);this._maybeAddToChanges(r,e);const s=r._prev,u=r._next;return s&&(s._next=u),u&&(u._prev=s),r._next=null,r._prev=null,r}const n=new $z(i);return this._records.set(i,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,e){Object.is(e,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=e,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,e){i instanceof Map?i.forEach(e):Object.keys(i).forEach(n=>e(i[n],n))}}class $z{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yI(){return new Bc([new fI])}let Bc=(()=>{class t{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||yI()),deps:[[t,new ul,new la]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new ft(901,!1)}}return t.\u0275prov=Tt({token:t,providedIn:"root",factory:yI}),t})();function vI(){return new Cv([new _I])}let Cv=(()=>{class t{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||vI()),deps:[[t,new ul,new la]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new ft(901,!1)}}return t.\u0275prov=Tt({token:t,providedIn:"root",factory:vI}),t})();const Wz=tI(null,"core",[]);let Zz=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)($e(u_))},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})(),Tx=null;function Lu(){return Tx}const Zi=new tt("DocumentToken");let WM=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:function(){return function Qz(){return $e(bI)}()},providedIn:"platform"}),t})();const Jz=new tt("Location Initialized");let bI=(()=>{class t extends WM{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Lu().getBaseHref(this._doc)}onPopState(e){const n=Lu().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Lu().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){xI()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){xI()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)($e(Zi))},t.\u0275prov=Tt({token:t,factory:function(){return function e5(){return new bI($e(Zi))}()},providedIn:"platform"}),t})();function xI(){return!!window.history.pushState}function ZM(t,i){if(0==t.length)return i;if(0==i.length)return t;let e=0;return t.endsWith("/")&&e++,i.startsWith("/")&&e++,2==e?t+i.substring(1):1==e?t+i:t+"/"+i}function wI(t){const i=t.match(/#|\?|$/),e=i&&i.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function Ih(t){return t&&"?"!==t[0]?"?"+t:t}let mm=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:function(){return qn(MI)},providedIn:"root"}),t})();const CI=new tt("appBaseHref");let MI=(()=>{class t extends mm{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??qn(Zi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ZM(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Ih(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const u=this.prepareExternalUrl(r+Ih(s));this._platformLocation.pushState(e,n,u)}replaceState(e,n,r,s){const u=this.prepareExternalUrl(r+Ih(s));this._platformLocation.replaceState(e,n,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)($e(WM),$e(CI,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),t5=(()=>{class t extends mm{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=ZM(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let u=this.prepareExternalUrl(r+Ih(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(e,n,u)}replaceState(e,n,r,s){let u=this.prepareExternalUrl(r+Ih(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)($e(WM),$e(CI,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})(),Mv=(()=>{class t{constructor(e){this._subject=new Ht,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._baseHref=wI(DI(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Ih(n))}normalize(e){return t.stripTrailingSlash(function r5(t,i){return t&&i.startsWith(t)?i.substring(t.length):i}(this._baseHref,DI(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ih(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ih(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return t.normalizeQueryParams=Ih,t.joinWithSlash=ZM,t.stripTrailingSlash=wI,t.\u0275fac=function(e){return new(e||t)($e(mm))},t.\u0275prov=Tt({token:t,factory:function(){return function n5(){return new Mv($e(mm))}()},providedIn:"root"}),t})();function DI(t){return t.replace(/\/index.html$/,"")}var Jo=(()=>((Jo=Jo||{})[Jo.Format=0]="Format",Jo[Jo.Standalone=1]="Standalone",Jo))(),er=(()=>((er=er||{})[er.Narrow=0]="Narrow",er[er.Abbreviated=1]="Abbreviated",er[er.Wide=2]="Wide",er[er.Short=3]="Short",er))(),Eo=(()=>((Eo=Eo||{})[Eo.Short=0]="Short",Eo[Eo.Medium=1]="Medium",Eo[Eo.Long=2]="Long",Eo[Eo.Full=3]="Full",Eo))(),rn=(()=>((rn=rn||{})[rn.Decimal=0]="Decimal",rn[rn.Group=1]="Group",rn[rn.List=2]="List",rn[rn.PercentSign=3]="PercentSign",rn[rn.PlusSign=4]="PlusSign",rn[rn.MinusSign=5]="MinusSign",rn[rn.Exponential=6]="Exponential",rn[rn.SuperscriptingExponent=7]="SuperscriptingExponent",rn[rn.PerMille=8]="PerMille",rn[rn.Infinity=9]="Infinity",rn[rn.NaN=10]="NaN",rn[rn.TimeSeparator=11]="TimeSeparator",rn[rn.CurrencyDecimal=12]="CurrencyDecimal",rn[rn.CurrencyGroup=13]="CurrencyGroup",rn))();function kx(t,i){return zc(Xa(t)[ci.DateFormat],i)}function Ax(t,i){return zc(Xa(t)[ci.TimeFormat],i)}function Ix(t,i){return zc(Xa(t)[ci.DateTimeFormat],i)}function Nc(t,i){const e=Xa(t),n=e[ci.NumberSymbols][i];if(typeof n>"u"){if(i===rn.CurrencyDecimal)return e[ci.NumberSymbols][rn.Decimal];if(i===rn.CurrencyGroup)return e[ci.NumberSymbols][rn.Group]}return n}function EI(t){if(!t[ci.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ci.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function zc(t,i){for(let e=i;e>-1;e--)if(typeof t[e]<"u")return t[e];throw new Error("Locale data API: locale data undefined")}function XM(t){const[i,e]=t.split(":");return{hours:+i,minutes:+e}}const _5=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Dv={},y5=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ls=(()=>((Ls=Ls||{})[Ls.Short=0]="Short",Ls[Ls.ShortGMT=1]="ShortGMT",Ls[Ls.Long=2]="Long",Ls[Ls.Extended=3]="Extended",Ls))(),dn=(()=>((dn=dn||{})[dn.FullYear=0]="FullYear",dn[dn.Month=1]="Month",dn[dn.Date=2]="Date",dn[dn.Hours=3]="Hours",dn[dn.Minutes=4]="Minutes",dn[dn.Seconds=5]="Seconds",dn[dn.FractionalSeconds=6]="FractionalSeconds",dn[dn.Day=7]="Day",dn))(),On=(()=>((On=On||{})[On.DayPeriods=0]="DayPeriods",On[On.Days=1]="Days",On[On.Months=2]="Months",On[On.Eras=3]="Eras",On))();function v5(t,i,e,n){let r=function T5(t){if(AI(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[r,s=1,u=1]=t.split("-").map(_=>+_);return Rx(r,s-1,u)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(_5))return function k5(t){const i=new Date(0);let e=0,n=0;const r=t[8]?i.setUTCFullYear:i.setFullYear,s=t[8]?i.setUTCHours:i.setHours;t[9]&&(e=Number(t[9]+t[10]),n=Number(t[9]+t[11])),r.call(i,Number(t[1]),Number(t[2])-1,Number(t[3]));const u=Number(t[4]||0)-e,_=Number(t[5]||0)-n,b=Number(t[6]||0),S=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(i,u,_,b,S),i}(n)}const i=new Date(t);if(!AI(i))throw new Error(`Unable to convert "${t}" into a date`);return i}(t);i=Rh(e,i)||i;let _,u=[];for(;i;){if(_=y5.exec(i),!_){u.push(i);break}{u=u.concat(_.slice(1));const A=u.pop();if(!A)break;i=A}}let b=r.getTimezoneOffset();n&&(b=kI(n,b),r=function E5(t,i,e){const n=e?-1:1,r=t.getTimezoneOffset();return function S5(t,i){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+i),t}(t,n*(kI(i,r)-r))}(r,n,!0));let S="";return u.forEach(A=>{const B=function D5(t){if(QM[t])return QM[t];let i;switch(t){case"G":case"GG":case"GGG":i=Kr(On.Eras,er.Abbreviated);break;case"GGGG":i=Kr(On.Eras,er.Wide);break;case"GGGGG":i=Kr(On.Eras,er.Narrow);break;case"y":i=ms(dn.FullYear,1,0,!1,!0);break;case"yy":i=ms(dn.FullYear,2,0,!0,!0);break;case"yyy":i=ms(dn.FullYear,3,0,!1,!0);break;case"yyyy":i=ms(dn.FullYear,4,0,!1,!0);break;case"Y":i=Lx(1);break;case"YY":i=Lx(2,!0);break;case"YYY":i=Lx(3);break;case"YYYY":i=Lx(4);break;case"M":case"L":i=ms(dn.Month,1,1);break;case"MM":case"LL":i=ms(dn.Month,2,1);break;case"MMM":i=Kr(On.Months,er.Abbreviated);break;case"MMMM":i=Kr(On.Months,er.Wide);break;case"MMMMM":i=Kr(On.Months,er.Narrow);break;case"LLL":i=Kr(On.Months,er.Abbreviated,Jo.Standalone);break;case"LLLL":i=Kr(On.Months,er.Wide,Jo.Standalone);break;case"LLLLL":i=Kr(On.Months,er.Narrow,Jo.Standalone);break;case"w":i=KM(1);break;case"ww":i=KM(2);break;case"W":i=KM(1,!0);break;case"d":i=ms(dn.Date,1);break;case"dd":i=ms(dn.Date,2);break;case"c":case"cc":i=ms(dn.Day,1);break;case"ccc":i=Kr(On.Days,er.Abbreviated,Jo.Standalone);break;case"cccc":i=Kr(On.Days,er.Wide,Jo.Standalone);break;case"ccccc":i=Kr(On.Days,er.Narrow,Jo.Standalone);break;case"cccccc":i=Kr(On.Days,er.Short,Jo.Standalone);break;case"E":case"EE":case"EEE":i=Kr(On.Days,er.Abbreviated);break;case"EEEE":i=Kr(On.Days,er.Wide);break;case"EEEEE":i=Kr(On.Days,er.Narrow);break;case"EEEEEE":i=Kr(On.Days,er.Short);break;case"a":case"aa":case"aaa":i=Kr(On.DayPeriods,er.Abbreviated);break;case"aaaa":i=Kr(On.DayPeriods,er.Wide);break;case"aaaaa":i=Kr(On.DayPeriods,er.Narrow);break;case"b":case"bb":case"bbb":i=Kr(On.DayPeriods,er.Abbreviated,Jo.Standalone,!0);break;case"bbbb":i=Kr(On.DayPeriods,er.Wide,Jo.Standalone,!0);break;case"bbbbb":i=Kr(On.DayPeriods,er.Narrow,Jo.Standalone,!0);break;case"B":case"BB":case"BBB":i=Kr(On.DayPeriods,er.Abbreviated,Jo.Format,!0);break;case"BBBB":i=Kr(On.DayPeriods,er.Wide,Jo.Format,!0);break;case"BBBBB":i=Kr(On.DayPeriods,er.Narrow,Jo.Format,!0);break;case"h":i=ms(dn.Hours,1,-12);break;case"hh":i=ms(dn.Hours,2,-12);break;case"H":i=ms(dn.Hours,1);break;case"HH":i=ms(dn.Hours,2);break;case"m":i=ms(dn.Minutes,1);break;case"mm":i=ms(dn.Minutes,2);break;case"s":i=ms(dn.Seconds,1);break;case"ss":i=ms(dn.Seconds,2);break;case"S":i=ms(dn.FractionalSeconds,1);break;case"SS":i=ms(dn.FractionalSeconds,2);break;case"SSS":i=ms(dn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":i=Ox(Ls.Short);break;case"ZZZZZ":i=Ox(Ls.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":i=Ox(Ls.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":i=Ox(Ls.Long);break;default:return null}return QM[t]=i,i}(A);S+=B?B(r,e,b):"''"===A?"'":A.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),S}function Rx(t,i,e){const n=new Date(0);return n.setFullYear(t,i,e),n.setHours(0,0,0),n}function Rh(t,i){const e=function o5(t){return Xa(t)[ci.LocaleId]}(t);if(Dv[e]=Dv[e]||{},Dv[e][i])return Dv[e][i];let n="";switch(i){case"shortDate":n=kx(t,Eo.Short);break;case"mediumDate":n=kx(t,Eo.Medium);break;case"longDate":n=kx(t,Eo.Long);break;case"fullDate":n=kx(t,Eo.Full);break;case"shortTime":n=Ax(t,Eo.Short);break;case"mediumTime":n=Ax(t,Eo.Medium);break;case"longTime":n=Ax(t,Eo.Long);break;case"fullTime":n=Ax(t,Eo.Full);break;case"short":const r=Rh(t,"shortTime"),s=Rh(t,"shortDate");n=Px(Ix(t,Eo.Short),[r,s]);break;case"medium":const u=Rh(t,"mediumTime"),_=Rh(t,"mediumDate");n=Px(Ix(t,Eo.Medium),[u,_]);break;case"long":const b=Rh(t,"longTime"),S=Rh(t,"longDate");n=Px(Ix(t,Eo.Long),[b,S]);break;case"full":const A=Rh(t,"fullTime"),B=Rh(t,"fullDate");n=Px(Ix(t,Eo.Full),[A,B])}return n&&(Dv[e][i]=n),n}function Px(t,i){return i&&(t=t.replace(/\{([^}]+)}/g,function(e,n){return null!=i&&n in i?i[n]:e})),t}function Td(t,i,e="-",n,r){let s="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,s=e));let u=String(t);for(;u.length<i;)u="0"+u;return n&&(u=u.slice(u.length-i)),s+u}function ms(t,i,e=0,n=!1,r=!1){return function(s,u){let _=function x5(t,i){switch(t){case dn.FullYear:return i.getFullYear();case dn.Month:return i.getMonth();case dn.Date:return i.getDate();case dn.Hours:return i.getHours();case dn.Minutes:return i.getMinutes();case dn.Seconds:return i.getSeconds();case dn.FractionalSeconds:return i.getMilliseconds();case dn.Day:return i.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((e>0||_>-e)&&(_+=e),t===dn.Hours)0===_&&-12===e&&(_=12);else if(t===dn.FractionalSeconds)return function b5(t,i){return Td(t,3).substring(0,i)}(_,i);const b=Nc(u,rn.MinusSign);return Td(_,i,b,n,r)}}function Kr(t,i,e=Jo.Format,n=!1){return function(r,s){return function w5(t,i,e,n,r,s){switch(e){case On.Months:return function l5(t,i,e){const n=Xa(t),s=zc([n[ci.MonthsFormat],n[ci.MonthsStandalone]],i);return zc(s,e)}(i,r,n)[t.getMonth()];case On.Days:return function a5(t,i,e){const n=Xa(t),s=zc([n[ci.DaysFormat],n[ci.DaysStandalone]],i);return zc(s,e)}(i,r,n)[t.getDay()];case On.DayPeriods:const u=t.getHours(),_=t.getMinutes();if(s){const S=function h5(t){const i=Xa(t);return EI(i),(i[ci.ExtraData][2]||[]).map(n=>"string"==typeof n?XM(n):[XM(n[0]),XM(n[1])])}(i),A=function p5(t,i,e){const n=Xa(t);EI(n);const s=zc([n[ci.ExtraData][0],n[ci.ExtraData][1]],i)||[];return zc(s,e)||[]}(i,r,n),B=S.findIndex(X=>{if(Array.isArray(X)){const[re,_e]=X,Le=u>=re.hours&&_>=re.minutes,Ue=u<_e.hours||u===_e.hours&&_<_e.minutes;if(re.hours<_e.hours){if(Le&&Ue)return!0}else if(Le||Ue)return!0}else if(X.hours===u&&X.minutes===_)return!0;return!1});if(-1!==B)return A[B]}return function s5(t,i,e){const n=Xa(t),s=zc([n[ci.DayPeriodsFormat],n[ci.DayPeriodsStandalone]],i);return zc(s,e)}(i,r,n)[u<12?0:1];case On.Eras:return function c5(t,i){return zc(Xa(t)[ci.Eras],i)}(i,n)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,t,i,e,n)}}function Ox(t){return function(i,e,n){const r=-1*n,s=Nc(e,rn.MinusSign),u=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case Ls.Short:return(r>=0?"+":"")+Td(u,2,s)+Td(Math.abs(r%60),2,s);case Ls.ShortGMT:return"GMT"+(r>=0?"+":"")+Td(u,1,s);case Ls.Long:return"GMT"+(r>=0?"+":"")+Td(u,2,s)+":"+Td(Math.abs(r%60),2,s);case Ls.Extended:return 0===n?"Z":(r>=0?"+":"")+Td(u,2,s)+":"+Td(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}function TI(t){return Rx(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function KM(t,i=!1){return function(e,n){let r;if(i){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,u=e.getDate();r=1+Math.floor((u+s)/7)}else{const s=TI(e),u=function M5(t){const i=Rx(t,0,1).getDay();return Rx(t,0,1+(i<=4?4:11)-i)}(s.getFullYear()),_=s.getTime()-u.getTime();r=1+Math.round(_/6048e5)}return Td(r,t,Nc(n,rn.MinusSign))}}function Lx(t,i=!1){return function(e,n){return Td(TI(e).getFullYear(),t,Nc(n,rn.MinusSign),i)}}const QM={};function kI(t,i){t=t.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(e)?i:e}function AI(t){return t instanceof Date&&!isNaN(t.valueOf())}function OI(t,i){i=encodeURIComponent(i);for(const e of t.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===i)return decodeURIComponent(s)}return null}let Ev=(()=>{class t{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(dm(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Qt(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return t.\u0275fac=function(e){return new(e||t)(W(Bc),W(Cv),W(Ci),W(Tc))},t.\u0275dir=Xe({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class U5{constructor(i,e,n,r){this.$implicit=i,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ph=(()=>{class t{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,u)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new U5(r.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)n.remove(null===s?void 0:s);else if(null!==s){const _=n.get(s);n.move(_,u),BI(_,r)}});for(let r=0,s=n.length;r<s;r++){const _=n.get(r).context;_.index=r,_.count=s,_.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{BI(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return t.\u0275fac=function(e){return new(e||t)(W(go),W(mo),W(Bc))},t.\u0275dir=Xe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function BI(t,i){t.context.$implicit=i.item}let Gl=(()=>{class t{constructor(e,n){this._viewContainer=e,this._context=new $5,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){NI("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){NI("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return t.\u0275fac=function(e){return new(e||t)(W(go),W(mo))},t.\u0275dir=Xe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class $5{constructor(){this.$implicit=null,this.ngIf=null}}function NI(t,i){if(i&&!i.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Qt(i)}'.`)}class rD{constructor(i,e){this._viewContainerRef=i,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(i){i&&!this._created?this.create():!i&&this._created&&this.destroy()}}let Vc=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xe({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),t})(),Bu=(()=>{class t{constructor(e,n,r){this.ngSwitch=r,r._addCase(),this._view=new rD(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(W(go),W(mo),W(Vc,9))},t.\u0275dir=Xe({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),t})(),h_=(()=>{class t{constructor(e,n,r){r._addDefault(new rD(e,n))}}return t.\u0275fac=function(e){return new(e||t)(W(go),W(mo),W(Vc,9))},t.\u0275dir=Xe({type:t,selectors:[["","ngSwitchDefault",""]],standalone:!0}),t})(),oD=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:u}=this;this._viewRef=n.createEmbeddedView(r,s,u?{injector:u}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(W(go))},t.\u0275dir=Xe({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[R]}),t})();function kd(t,i){return new ft(2100,!1)}class q5{createSubscription(i,e){return i.subscribe({next:e,error:n=>{throw n}})}dispose(i){i.unsubscribe()}}class W5{createSubscription(i,e){return i.then(e,n=>{throw n})}dispose(i){}}const Z5=new W5,Y5=new q5;let jI=(()=>{class t{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if(hv(e))return Z5;if(UT(e))return Y5;throw kd()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(W(Jn,16))},t.\u0275pipe=ho({name:"async",type:t,pure:!1,standalone:!0}),t})();const eV=new tt("DATE_PIPE_DEFAULT_TIMEZONE");let UI=(()=>{class t{constructor(e,n){this.locale=e,this.defaultTimezone=n}transform(e,n="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return v5(e,n,s||this.locale,r??this.defaultTimezone??void 0)}catch(u){throw kd()}}}return t.\u0275fac=function(e){return new(e||t)(W(Fu,16),W(eV,24))},t.\u0275pipe=ho({name:"date",type:t,pure:!0,standalone:!0}),t})(),gs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})();const $I="browser";let mV=(()=>{class t{}return t.\u0275prov=Tt({token:t,providedIn:"root",factory:()=>new gV($e(Zi),window)}),t})();class gV{constructor(i,e){this.document=i,this.window=e,this.offset=()=>[0,0]}setOffset(i){this.offset=Array.isArray(i)?()=>i:i}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(i){this.supportsScrolling()&&this.window.scrollTo(i[0],i[1])}scrollToAnchor(i){if(!this.supportsScrolling())return;const e=function _V(t,i){const e=t.getElementById(i)||t.getElementsByName(i)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const u=s.getElementById(i)||s.querySelector(`[name="${i}"]`);if(u)return u}r=n.nextNode()}}return null}(this.document,i);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(i){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=i)}}scrollToElement(i){const e=i.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const i=GI(this.window.history)||GI(Object.getPrototypeOf(this.window.history));return!(!i||!i.writable&&!i.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function GI(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class qI{}class dD extends class FV extends class Kz{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Xz(t){Tx||(Tx=t)}(new dD)}onAndCancel(i,e,n){return i.addEventListener(e,n,!1),()=>{i.removeEventListener(e,n,!1)}}dispatchEvent(i,e){i.dispatchEvent(e)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,e){return(e=e||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,e){return"window"===e?window:"document"===e?i:"body"===e?i.body:null}getBaseHref(i){const e=function LV(){return kv=kv||document.querySelector("base"),kv?kv.getAttribute("href"):null}();return null==e?null:function BV(t){zx=zx||document.createElement("a"),zx.setAttribute("href",t);const i=zx.pathname;return"/"===i.charAt(0)?i:`/${i}`}(e)}resetBaseElement(){kv=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return OI(document.cookie,i)}}let zx,kv=null;const XI=new tt("TRANSITION_ID"),zV=[{provide:xx,useFactory:function NV(t,i,e){return()=>{e.get(wx).donePromise.then(()=>{const n=Lu(),r=i.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[XI,Zi,no],multi:!0}];let jV=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();const Vx=new tt("EventManagerPlugins");let jx=(()=>{class t{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const u=r[s];if(u.supports(e))return this._eventNameToPlugin.set(e,u),u}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)($e(Vx),$e(Ki))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();class KI{constructor(i){this._doc=i}addGlobalEventListener(i,e,n){const r=Lu().getGlobalEventTarget(this._doc,i);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let QI=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})(),Av=(()=>{class t extends QI{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,r.push(n.appendChild(u))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(JI),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(JI))}}return t.\u0275fac=function(e){return new(e||t)($e(Zi))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();function JI(t){Lu().remove(t)}const uD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},hD=/%COMP%/g;function Ux(t,i,e){for(let n=0;n<i.length;n++){let r=i[n];Array.isArray(r)?Ux(t,r,e):(r=r.replace(hD,t),e.push(r))}return e}function n2(t){return i=>{if("__ngUnwrap__"===i)return t;!1===t(i)&&(i.preventDefault(),i.returnValue=!1)}}let Hx=(()=>{class t{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new pD(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case uo.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new WV(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case uo.ShadowDom:return new ZV(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=Ux(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)($e(jx),$e(Av),$e(wv))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();class pD{constructor(i){this.eventManager=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(i,e){return e?document.createElementNS(uD[e]||e,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,e){(o2(i)?i.content:i).appendChild(e)}insertBefore(i,e,n){i&&(o2(i)?i.content:i).insertBefore(e,n)}removeChild(i,e){i&&i.removeChild(e)}selectRootElement(i,e){let n="string"==typeof i?document.querySelector(i):i;if(!n)throw new Error(`The selector "${i}" did not match any elements`);return e||(n.textContent=""),n}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,e,n,r){if(r){e=r+":"+e;const s=uD[r];s?i.setAttributeNS(s,e,n):i.setAttribute(e,n)}else i.setAttribute(e,n)}removeAttribute(i,e,n){if(n){const r=uD[n];r?i.removeAttributeNS(r,e):i.removeAttribute(`${n}:${e}`)}else i.removeAttribute(e)}addClass(i,e){i.classList.add(e)}removeClass(i,e){i.classList.remove(e)}setStyle(i,e,n,r){r&(Sa.DashCase|Sa.Important)?i.style.setProperty(e,n,r&Sa.Important?"important":""):i.style[e]=n}removeStyle(i,e,n){n&Sa.DashCase?i.style.removeProperty(e):i.style[e]=""}setProperty(i,e,n){i[e]=n}setValue(i,e){i.nodeValue=e}listen(i,e,n){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,e,n2(n)):this.eventManager.addEventListener(i,e,n2(n))}}function o2(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class WV extends pD{constructor(i,e,n,r){super(i),this.component=n;const s=Ux(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr=function $V(t){return"_ngcontent-%COMP%".replace(hD,t)}(r+"-"+n.id),this.hostAttr=function GV(t){return"_nghost-%COMP%".replace(hD,t)}(r+"-"+n.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,e){const n=super.createElement(i,e);return super.setAttribute(n,this.contentAttr,""),n}}class ZV extends pD{constructor(i,e,n,r){super(i),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ux(r.id,r.styles,[]);for(let u=0;u<s.length;u++){const _=document.createElement("style");_.textContent=s[u],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,e){return super.appendChild(this.nodeOrShadowRoot(i),e)}insertBefore(i,e,n){return super.insertBefore(this.nodeOrShadowRoot(i),e,n)}removeChild(i,e){return super.removeChild(this.nodeOrShadowRoot(i),e)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let YV=(()=>{class t extends KI{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return t.\u0275fac=function(e){return new(e||t)($e(Zi))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();const s2=["alt","control","meta","shift"],XV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let QV=(()=>{class t extends KI{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const s=t.parseEventName(n),u=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Lu().onAndCancel(e,s.domEventName,u))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(n.pop());let u="",_=n.indexOf("code");if(_>-1&&(n.splice(_,1),u="code."),s2.forEach(S=>{const A=n.indexOf(S);A>-1&&(n.splice(A,1),u+=S+".")}),u+=s,0!=n.length||0===s.length)return null;const b={};return b.domEventName=r,b.fullKey=u,b}static matchEventFullKeyCode(e,n){let r=XV[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),s2.forEach(u=>{u!==r&&(0,KV[u])(e)&&(s+=u+".")}),s+=r,s===n)}static eventCallback(e,n,r){return s=>{t.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)($e(Zi))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();const n4=tI(Wz,"browser",[{provide:Cx,useValue:$I},{provide:GA,useValue:function JV(){dD.makeCurrent()},multi:!0},{provide:Zi,useFactory:function t4(){return function iC(t){uy=t}(document),document},deps:[]}]),c2=new tt(""),d2=[{provide:Mx,useClass:class VV{addToWindow(i){Bn.getAngularTestability=(n,r=!0)=>{const s=i.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},Bn.getAllAngularTestabilities=()=>i.getAllTestabilities(),Bn.getAllAngularRootElements=()=>i.getAllRootElements(),Bn.frameworkStabilizers||(Bn.frameworkStabilizers=[]),Bn.frameworkStabilizers.push(n=>{const r=Bn.getAllAngularTestabilities();let s=r.length,u=!1;const _=function(b){u=u||b,s--,0==s&&n(u)};r.forEach(function(b){b.whenStable(_)})})}findTestabilityInTree(i,e,n){return null==e?null:i.getTestability(e)??(n?Lu().isShadowRoot(e)?this.findTestabilityInTree(i,e.host,!0):this.findTestabilityInTree(i,e.parentElement,!0):null)}},deps:[]},{provide:KA,useClass:NM,deps:[Ki,zM,Mx]},{provide:NM,useClass:NM,deps:[Ki,zM,Mx]}],u2=[{provide:fg,useValue:"root"},{provide:md,useFactory:function e4(){return new md},deps:[]},{provide:Vx,useClass:YV,multi:!0,deps:[Zi,Ki,Cx]},{provide:Vx,useClass:QV,multi:!0,deps:[Zi]},{provide:Hx,useClass:Hx,deps:[jx,Av,wv]},{provide:Mu,useExisting:Hx},{provide:QI,useExisting:Av},{provide:Av,useClass:Av,deps:[Zi]},{provide:jx,useClass:jx,deps:[Vx,Ki]},{provide:qI,useClass:jV,deps:[]},[]];let h2=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:wv,useValue:e.appId},{provide:XI,useExisting:wv},zV]}}}return t.\u0275fac=function(e){return new(e||t)($e(c2,12))},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[...u2,...d2],imports:[gs,Zz]}),t})(),p2=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return t.\u0275fac=function(e){return new(e||t)($e(Zi))},t.\u0275prov=Tt({token:t,factory:function(e){let n=null;return n=e?new e:function o4(){return new p2($e(Zi))}(),n},providedIn:"root"}),t})();typeof window<"u"&&window;let Iv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:function(e){let n=null;return n=e?new(e||t):$e(g2),n},providedIn:"root"}),t})(),g2=(()=>{class t extends Iv{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case pr.NONE:return n;case pr.HTML:return Al(n,"HTML")?da(n):ag(this._doc,String(n)).toString();case pr.STYLE:return Al(n,"Style")?da(n):n;case pr.SCRIPT:if(Al(n,"Script"))return da(n);throw new Error("unsafe value used in a script context");case pr.URL:return Al(n,"URL")?da(n):sg(String(n));case pr.RESOURCE_URL:if(Al(n,"ResourceURL"))return da(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function _y(t){return new my(t)}(e)}bypassSecurityTrustStyle(e){return function Il(t){return new t0(t)}(e)}bypassSecurityTrustScript(e){return function rg(t){return new Af(t)}(e)}bypassSecurityTrustUrl(e){return function Gs(t){return new Mp(t)}(e)}bypassSecurityTrustResourceUrl(e){return function pl(t){return new vu(t)}(e)}}return t.\u0275fac=function(e){return new(e||t)($e(Zi))},t.\u0275prov=Tt({token:t,factory:function(e){let n=null;return n=e?new e:function h4(t){return new g2(t.get(Zi))}($e(no)),n},providedIn:"root"}),t})();function ui(...t){return vr(t,qi(t))}class Ys extends St{constructor(i){super(),this._value=i}get value(){return this.getValue()}_subscribe(i){const e=super._subscribe(i);return!e.closed&&i.next(this._value),e}getValue(){const{hasError:i,thrownError:e,_value:n}=this;if(i)throw e;return this._throwIfClosed(),n}next(i){super.next(this._value=i)}}const $x=he(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:p4}=Array,{getPrototypeOf:f4,prototype:m4,keys:g4}=Object;function _2(t){if(1===t.length){const i=t[0];if(p4(i))return{args:i,keys:null};if(function _4(t){return t&&"object"==typeof t&&f4(t)===m4}(i)){const e=g4(i);return{args:e.map(n=>i[n]),keys:e}}}return{args:t,keys:null}}const{isArray:y4}=Array;function gD(t){return li(i=>function v4(t,i){return y4(i)?t(...i):t(i)}(t,i))}function y2(t,i){return t.reduce((e,n,r)=>(e[n]=i[r],e),{})}function p_(...t){const i=qi(t),e=In(t),{args:n,keys:r}=_2(t);if(0===n.length)return vr([],i);const s=new $i(function b4(t,i,e=ki){return n=>{v2(i,()=>{const{length:r}=t,s=new Array(r);let u=r,_=r;for(let b=0;b<r;b++)v2(i,()=>{const S=vr(t[b],i);let A=!1;S.subscribe(Qi(n,B=>{s[b]=B,A||(A=!0,_--),_||n.next(e(s.slice()))},()=>{--u||n.complete()}))},n)},n)}}(n,i,r?u=>y2(r,u):ki));return e?s.pipe(gD(e)):s}function v2(t,i,e){t?je(e,t,i):i()}function Rv(...t){return function x4(){return pt(1)}()(vr(t,qi(t)))}function Pv(t){return new $i(i=>{j(t()).subscribe(i)})}function f_(t,i){const e=Oe(t)?t:()=>t,n=r=>r.error(e());return new $i(i?r=>i.schedule(n,0,r):n)}function _D(){return Pn((t,i)=>{let e=null;t._refCount++;const n=Qi(i,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const r=t._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),i.unsubscribe()});t.subscribe(n),n.closed||(e=t.connect())})}class b2 extends $i{constructor(i,e){super(),this.source=i,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,is(i)&&(this.lift=i.lift)}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:i}=this;this._subject=this._connection=null,i?.unsubscribe()}connect(){let i=this._connection;if(!i){i=this._connection=new ce;const e=this.getSubject();i.add(this.source.subscribe(Qi(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),i.closed&&(this._connection=null,i=ce.EMPTY)}return i}refCount(){return _D()(this)}}function Pa(t,i){return Pn((e,n)=>{let r=null,s=0,u=!1;const _=()=>u&&!r&&n.complete();e.subscribe(Qi(n,b=>{r?.unsubscribe();let S=0;const A=s++;j(t(b,A)).subscribe(r=Qi(n,B=>n.next(i?i(b,B,A,S++):B),()=>{r=null,_()}))},()=>{u=!0,_()}))})}function jr(t){return t<=0?()=>ti:Pn((i,e)=>{let n=0;i.subscribe(Qi(e,r=>{++n<=t&&(e.next(r),t<=n&&e.complete())}))})}function Bs(...t){const i=qi(t);return Pn((e,n)=>{(i?Rv(t,e,i):Rv(t,e)).subscribe(n)})}function To(t,i){return Pn((e,n)=>{let r=0;e.subscribe(Qi(n,s=>t.call(i,s,r++)&&n.next(s)))})}function Gx(t){return Pn((i,e)=>{let n=!1;i.subscribe(Qi(e,r=>{n=!0,e.next(r)},()=>{n||e.next(t),e.complete()}))})}function x2(t=w4){return Pn((i,e)=>{let n=!1;i.subscribe(Qi(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(t())))})}function w4(){return new $x}function qp(t,i){const e=arguments.length>=2;return n=>n.pipe(t?To((r,s)=>t(r,s,n)):ki,jr(1),e?Gx(i):x2(()=>new $x))}function Wp(t,i){return Oe(i)?Ct(t,i,1):Ct(t,1)}function es(t,i,e){const n=Oe(t)||i||e?{next:t,error:i,complete:e}:t;return n?Pn((r,s)=>{var u;null===(u=n.subscribe)||void 0===u||u.call(n);let _=!0;r.subscribe(Qi(s,b=>{var S;null===(S=n.next)||void 0===S||S.call(n,b),s.next(b)},()=>{var b;_=!1,null===(b=n.complete)||void 0===b||b.call(n),s.complete()},b=>{var S;_=!1,null===(S=n.error)||void 0===S||S.call(n,b),s.error(b)},()=>{var b,S;_&&(null===(b=n.unsubscribe)||void 0===b||b.call(n)),null===(S=n.finalize)||void 0===S||S.call(n)}))}):ki}function Oh(t){return Pn((i,e)=>{let s,n=null,r=!1;n=i.subscribe(Qi(e,void 0,void 0,u=>{s=j(t(u,Oh(t)(i))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function C4(t,i,e,n,r){return(s,u)=>{let _=e,b=i,S=0;s.subscribe(Qi(u,A=>{const B=S++;b=_?t(b,A,B):(_=!0,A),n&&u.next(b)},r&&(()=>{_&&u.next(b),u.complete()})))}}function w2(t,i){return Pn(C4(t,i,arguments.length>=2,!0))}function yD(t){return t<=0?()=>ti:Pn((i,e)=>{let n=[];i.subscribe(Qi(e,r=>{n.push(r),t<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function C2(t,i){const e=arguments.length>=2;return n=>n.pipe(t?To((r,s)=>t(r,s,n)):ki,yD(1),e?Gx(i):x2(()=>new $x))}function M2(t,i=!1){return Pn((e,n)=>{let r=0;e.subscribe(Qi(n,s=>{const u=t(s,r++);(u||i)&&n.next(s),!u&&n.complete()}))})}function qx(t){return Pn((i,e)=>{try{i.subscribe(e)}finally{e.add(t)}})}const Un="primary",Ov=Symbol("RouteTitle");class M4{constructor(i){this.params=i||{}}has(i){return Object.prototype.hasOwnProperty.call(this.params,i)}get(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e[0]:e}return null}getAll(i){if(this.has(i)){const e=this.params[i];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function m_(t){return new M4(t)}function D4(t,i,e){const n=e.path.split("/");if(n.length>t.length||"full"===e.pathMatch&&(i.hasChildren()||n.length<t.length))return null;const r={};for(let s=0;s<n.length;s++){const u=n[s],_=t[s];if(u.startsWith(":"))r[u.substring(1)]=_;else if(u!==_.path)return null}return{consumed:t.slice(0,n.length),posParams:r}}function Nu(t,i){const e=t?Object.keys(t):void 0,n=i?Object.keys(i):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!S2(t[r],i[r]))return!1;return!0}function S2(t,i){if(Array.isArray(t)&&Array.isArray(i)){if(t.length!==i.length)return!1;const e=[...t].sort(),n=[...i].sort();return e.every((r,s)=>n[s]===r)}return t===i}function E2(t){return Array.prototype.concat.apply([],t)}function T2(t){return t.length>0?t[t.length-1]:null}function pa(t,i){for(const e in t)t.hasOwnProperty(e)&&i(t[e],e)}function Zp(t){return aM(t)?t:hv(t)?vr(Promise.resolve(t)):ui(t)}const T4={exact:function I2(t,i,e){if(!_m(t.segments,i.segments)||!Wx(t.segments,i.segments,e)||t.numberOfChildren!==i.numberOfChildren)return!1;for(const n in i.children)if(!t.children[n]||!I2(t.children[n],i.children[n],e))return!1;return!0},subset:R2},k2={exact:function k4(t,i){return Nu(t,i)},subset:function A4(t,i){return Object.keys(i).length<=Object.keys(t).length&&Object.keys(i).every(e=>S2(t[e],i[e]))},ignored:()=>!0};function A2(t,i,e){return T4[e.paths](t.root,i.root,e.matrixParams)&&k2[e.queryParams](t.queryParams,i.queryParams)&&!("exact"===e.fragment&&t.fragment!==i.fragment)}function R2(t,i,e){return P2(t,i,i.segments,e)}function P2(t,i,e,n){if(t.segments.length>e.length){const r=t.segments.slice(0,e.length);return!(!_m(r,e)||i.hasChildren()||!Wx(r,e,n))}if(t.segments.length===e.length){if(!_m(t.segments,e)||!Wx(t.segments,e,n))return!1;for(const r in i.children)if(!t.children[r]||!R2(t.children[r],i.children[r],n))return!1;return!0}{const r=e.slice(0,t.segments.length),s=e.slice(t.segments.length);return!!(_m(t.segments,r)&&Wx(t.segments,r,n)&&t.children[Un])&&P2(t.children[Un],i,s,n)}}function Wx(t,i,e){return i.every((n,r)=>k2[e](t[r].parameters,n.parameters))}class gm{constructor(i,e,n){this.root=i,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=m_(this.queryParams)),this._queryParamMap}toString(){return P4.serialize(this)}}class Xn{constructor(i,e){this.segments=i,this.children=e,this.parent=null,pa(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zx(this)}}class Fv{constructor(i,e){this.path=i,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=m_(this.parameters)),this._parameterMap}toString(){return B2(this)}}function _m(t,i){return t.length===i.length&&t.every((e,n)=>e.path===i[n].path)}let O2=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:function(){return new bD},providedIn:"root"}),t})();class bD{parse(i){const e=new U4(i);return new gm(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(i){const e=`/${Lv(i.root,!0)}`,n=function L4(t){const i=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(r=>`${Yx(e)}=${Yx(r)}`).join("&"):`${Yx(e)}=${Yx(n)}`}).filter(e=>!!e);return i.length?`?${i.join("&")}`:""}(i.queryParams);return`${e}${n}${"string"==typeof i.fragment?`#${function O4(t){return encodeURI(t)}(i.fragment)}`:""}`}}const P4=new bD;function Zx(t){return t.segments.map(i=>B2(i)).join("/")}function Lv(t,i){if(!t.hasChildren())return Zx(t);if(i){const e=t.children[Un]?Lv(t.children[Un],!1):"",n=[];return pa(t.children,(r,s)=>{s!==Un&&n.push(`${s}:${Lv(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function R4(t,i){let e=[];return pa(t.children,(n,r)=>{r===Un&&(e=e.concat(i(n,r)))}),pa(t.children,(n,r)=>{r!==Un&&(e=e.concat(i(n,r)))}),e}(t,(n,r)=>r===Un?[Lv(t.children[Un],!1)]:[`${r}:${Lv(n,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Un]?`${Zx(t)}/${e[0]}`:`${Zx(t)}/(${e.join("//")})`}}function F2(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yx(t){return F2(t).replace(/%3B/gi,";")}function xD(t){return F2(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xx(t){return decodeURIComponent(t)}function L2(t){return Xx(t.replace(/\+/g,"%20"))}function B2(t){return`${xD(t.path)}${function F4(t){return Object.keys(t).map(i=>`;${xD(i)}=${xD(t[i])}`).join("")}(t.parameters)}`}const B4=/^[^\/()?;=#]+/;function Kx(t){const i=t.match(B4);return i?i[0]:""}const N4=/^[^=?&#]+/,V4=/^[^&#]+/;class U4{constructor(i){this.url=i,this.remaining=i}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xn([],{}):new Xn([],this.parseChildren())}parseQueryParams(){const i={};if(this.consumeOptional("?"))do{this.parseQueryParam(i)}while(this.consumeOptional("&"));return i}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const i=[];for(this.peekStartsWith("(")||i.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),i.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(i.length>0||Object.keys(e).length>0)&&(n[Un]=new Xn(i,e)),n}parseSegment(){const i=Kx(this.remaining);if(""===i&&this.peekStartsWith(";"))throw new ft(4009,!1);return this.capture(i),new Fv(Xx(i),this.parseMatrixParams())}parseMatrixParams(){const i={};for(;this.consumeOptional(";");)this.parseParam(i);return i}parseParam(i){const e=Kx(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=Kx(this.remaining);r&&(n=r,this.capture(n))}i[Xx(e)]=Xx(n)}parseQueryParam(i){const e=function z4(t){const i=t.match(N4);return i?i[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const u=function j4(t){const i=t.match(V4);return i?i[0]:""}(this.remaining);u&&(n=u,this.capture(n))}const r=L2(e),s=L2(n);if(i.hasOwnProperty(r)){let u=i[r];Array.isArray(u)||(u=[u],i[r]=u),u.push(s)}else i[r]=s}parseParens(i){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Kx(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new ft(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):i&&(s=Un);const u=this.parseChildren();e[s]=1===Object.keys(u).length?u[Un]:new Xn([],u),this.consumeOptional("//")}return e}peekStartsWith(i){return this.remaining.startsWith(i)}consumeOptional(i){return!!this.peekStartsWith(i)&&(this.remaining=this.remaining.substring(i.length),!0)}capture(i){if(!this.consumeOptional(i))throw new ft(4011,!1)}}function wD(t){return t.segments.length>0?new Xn([],{[Un]:t}):t}function Qx(t){const i={};for(const n of Object.keys(t.children)){const s=Qx(t.children[n]);(s.segments.length>0||s.hasChildren())&&(i[n]=s)}return function H4(t){if(1===t.numberOfChildren&&t.children[Un]){const i=t.children[Un];return new Xn(t.segments.concat(i.segments),i.children)}return t}(new Xn(t.segments,i))}function ym(t){return t instanceof gm}function q4(t,i,e,n,r){if(0===e.length)return g_(i.root,i.root,i.root,n,r);const s=function V2(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new z2(!0,0,t);let i=0,e=!1;const n=t.reduce((r,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const _={};return pa(s.outlets,(b,S)=>{_[S]="string"==typeof b?b.split("/"):b}),[...r,{outlets:_}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===u?(s.split("/").forEach((_,b)=>{0==b&&"."===_||(0==b&&""===_?e=!0:".."===_?i++:""!=_&&r.push(_))}),r):[...r,s]},[]);return new z2(e,i,n)}(e);return s.toRoot()?g_(i.root,i.root,new Xn([],{}),n,r):function u(b){const S=function Z4(t,i,e,n){if(t.isAbsolute)return new __(i.root,!0,0);if(-1===n)return new __(e,e===i.root,0);return function j2(t,i,e){let n=t,r=i,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new ft(4005,!1);r=n.segments.length}return new __(n,!1,r-s)}(e,n+(Bv(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,i,t.snapshot?._urlSegment,b),A=S.processChildren?zv(S.segmentGroup,S.index,s.commands):MD(S.segmentGroup,S.index,s.commands);return g_(i.root,S.segmentGroup,A,n,r)}(t.snapshot?._lastPathIndex)}function Bv(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Nv(t){return"object"==typeof t&&null!=t&&t.outlets}function g_(t,i,e,n,r){let u,s={};n&&pa(n,(b,S)=>{s[S]=Array.isArray(b)?b.map(A=>`${A}`):`${b}`}),u=t===i?e:N2(t,i,e);const _=wD(Qx(u));return new gm(_,s,r)}function N2(t,i,e){const n={};return pa(t.children,(r,s)=>{n[s]=r===i?e:N2(r,i,e)}),new Xn(t.segments,n)}class z2{constructor(i,e,n){if(this.isAbsolute=i,this.numberOfDoubleDots=e,this.commands=n,i&&n.length>0&&Bv(n[0]))throw new ft(4003,!1);const r=n.find(Nv);if(r&&r!==T2(n))throw new ft(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class __{constructor(i,e,n){this.segmentGroup=i,this.processChildren=e,this.index=n}}function MD(t,i,e){if(t||(t=new Xn([],{})),0===t.segments.length&&t.hasChildren())return zv(t,i,e);const n=function X4(t,i,e){let n=0,r=i;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(n>=e.length)return s;const u=t.segments[r],_=e[n];if(Nv(_))break;const b=`${_}`,S=n<e.length-1?e[n+1]:null;if(r>0&&void 0===b)break;if(b&&S&&"object"==typeof S&&void 0===S.outlets){if(!H2(b,S,u))return s;n+=2}else{if(!H2(b,{},u))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(t,i,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<t.segments.length){const s=new Xn(t.segments.slice(0,n.pathIndex),{});return s.children[Un]=new Xn(t.segments.slice(n.pathIndex),t.children),zv(s,0,r)}return n.match&&0===r.length?new Xn(t.segments,{}):n.match&&!t.hasChildren()?DD(t,i,e):n.match?zv(t,0,r):DD(t,i,e)}function zv(t,i,e){if(0===e.length)return new Xn(t.segments,{});{const n=function Y4(t){return Nv(t[0])?t[0].outlets:{[Un]:t}}(e),r={};return pa(n,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[u]=MD(t.children[u],i,s))}),pa(t.children,(s,u)=>{void 0===n[u]&&(r[u]=s)}),new Xn(t.segments,r)}}function DD(t,i,e){const n=t.segments.slice(0,i);let r=0;for(;r<e.length;){const s=e[r];if(Nv(s)){const b=K4(s.outlets);return new Xn(n,b)}if(0===r&&Bv(e[0])){n.push(new Fv(t.segments[i].path,U2(e[0]))),r++;continue}const u=Nv(s)?s.outlets[Un]:`${s}`,_=r<e.length-1?e[r+1]:null;u&&_&&Bv(_)?(n.push(new Fv(u,U2(_))),r+=2):(n.push(new Fv(u,{})),r++)}return new Xn(n,{})}function K4(t){const i={};return pa(t,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(i[n]=DD(new Xn([],{}),0,e))}),i}function U2(t){const i={};return pa(t,(e,n)=>i[n]=`${e}`),i}function H2(t,i,e){return t==e.path&&Nu(i,e.parameters)}class Fh{constructor(i,e){this.id=i,this.url=e}}class SD extends Fh{constructor(i,e,n="imperative",r=null){super(i,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vm extends Fh{constructor(i,e,n){super(i,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jx extends Fh{constructor(i,e,n,r){super(i,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $2 extends Fh{constructor(i,e,n,r){super(i,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Q4 extends Fh{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J4 extends Fh{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ej extends Fh{constructor(i,e,n,r,s){super(i,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class tj extends Fh{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ij extends Fh{constructor(i,e,n,r){super(i,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nj{constructor(i){this.route=i,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rj{constructor(i){this.route=i,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oj{constructor(i){this.snapshot=i,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sj{constructor(i){this.snapshot=i,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aj{constructor(i){this.snapshot=i,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lj{constructor(i){this.snapshot=i,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class G2{constructor(i,e,n){this.routerEvent=i,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class q2{constructor(i){this._root=i}get root(){return this._root.value}parent(i){const e=this.pathFromRoot(i);return e.length>1?e[e.length-2]:null}children(i){const e=ED(i,this._root);return e?e.children.map(n=>n.value):[]}firstChild(i){const e=ED(i,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(i){const e=TD(i,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==i)}pathFromRoot(i){return TD(i,this._root).map(e=>e.value)}}function ED(t,i){if(t===i.value)return i;for(const e of i.children){const n=ED(t,e);if(n)return n}return null}function TD(t,i){if(t===i.value)return[i];for(const e of i.children){const n=TD(t,e);if(n.length)return n.unshift(i),n}return[]}class Lh{constructor(i,e){this.value=i,this.children=e}toString(){return`TreeNode(${this.value})`}}function y_(t){const i={};return t&&t.children.forEach(e=>i[e.value.outlet]=e),i}class W2 extends q2{constructor(i,e){super(i),this.snapshot=e,kD(this,i)}toString(){return this.snapshot.toString()}}function Z2(t,i){const e=function dj(t,i){const u=new ew([],{},{},"",{},Un,i,null,t.root,-1,{});return new X2("",new Lh(u,[]))}(t,i),n=new Ys([new Fv("",{})]),r=new Ys({}),s=new Ys({}),u=new Ys({}),_=new Ys(""),b=new Yp(n,r,u,_,s,Un,i,e.root);return b.snapshot=e.root,new W2(new Lh(b,[]),e)}class Yp{constructor(i,e,n,r,s,u,_,b){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=u,this.component=_,this.title=this.data?.pipe(li(S=>S[Ov]))??ui(void 0),this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(li(i=>m_(i)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(li(i=>m_(i)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Y2(t,i="emptyOnly"){const e=t.pathFromRoot;let n=0;if("always"!==i)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function uj(t){return t.reduce((i,e)=>({params:{...i.params,...e.params},data:{...i.data,...e.data},resolve:{...e.data,...i.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class ew{constructor(i,e,n,r,s,u,_,b,S,A,B,X){this.url=i,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=u,this.component=_,this.title=this.data?.[Ov],this.routeConfig=b,this._urlSegment=S,this._lastPathIndex=A,this._correctedLastPathIndex=X??A,this._resolve=B}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=m_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=m_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class X2 extends q2{constructor(i,e){super(e),this.url=i,kD(this,e)}toString(){return K2(this._root)}}function kD(t,i){i.value._routerState=t,i.children.forEach(e=>kD(t,e))}function K2(t){const i=t.children.length>0?` { ${t.children.map(K2).join(", ")} } `:"";return`${t.value}${i}`}function AD(t){if(t.snapshot){const i=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Nu(i.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),i.fragment!==e.fragment&&t.fragment.next(e.fragment),Nu(i.params,e.params)||t.params.next(e.params),function S4(t,i){if(t.length!==i.length)return!1;for(let e=0;e<t.length;++e)if(!Nu(t[e],i[e]))return!1;return!0}(i.url,e.url)||t.url.next(e.url),Nu(i.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function ID(t,i){const e=Nu(t.params,i.params)&&function I4(t,i){return _m(t,i)&&t.every((e,n)=>Nu(e.parameters,i[n].parameters))}(t.url,i.url);return e&&!(!t.parent!=!i.parent)&&(!t.parent||ID(t.parent,i.parent))}function Vv(t,i,e){if(e&&t.shouldReuseRoute(i.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=i.value;const r=function pj(t,i,e){return i.children.map(n=>{for(const r of e.children)if(t.shouldReuseRoute(n.value,r.value.snapshot))return Vv(t,n,r);return Vv(t,n)})}(t,i,e);return new Lh(n,r)}{if(t.shouldAttach(i.value)){const s=t.retrieve(i.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=i.value,u.children=i.children.map(_=>Vv(t,_)),u}}const n=function fj(t){return new Yp(new Ys(t.url),new Ys(t.params),new Ys(t.queryParams),new Ys(t.fragment),new Ys(t.data),t.outlet,t.component,t)}(i.value),r=i.children.map(s=>Vv(t,s));return new Lh(n,r)}}const RD="ngNavigationCancelingError";function Q2(t,i){const{redirectTo:e,navigationBehaviorOptions:n}=ym(i)?{redirectTo:i,navigationBehaviorOptions:void 0}:i,r=J2(!1,0,i);return r.url=e,r.navigationBehaviorOptions=n,r}function J2(t,i,e){const n=new Error("NavigationCancelingError: "+(t||""));return n[RD]=!0,n.cancellationCode=i,e&&(n.url=e),n}function eR(t){return tR(t)&&ym(t.url)}function tR(t){return t&&t[RD]}class mj{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jv,this.attachRef=null}}let jv=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new mj,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const tw=!1;let PD=(()=>{class t{constructor(e,n,r,s,u){this.parentContexts=e,this.location=n,this.changeDetector=s,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ht,this.deactivateEvents=new Ht,this.attachEvents=new Ht,this.detachEvents=new Ht,this.name=r||Un,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ft(4012,tw);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ft(4012,tw);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ft(4012,tw);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new ft(4013,tw);this._activatedRoute=e;const r=this.location,u=e._futureSnapshot.component,_=this.parentContexts.getOrCreateContext(this.name).children,b=new gj(e,_,r.injector);if(n&&function _j(t){return!!t.resolveComponentFactory}(n)){const S=n.resolveComponentFactory(u);this.activated=r.createComponent(S,r.length,b)}else this.activated=r.createComponent(u,{index:r.length,injector:b,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(W(jv),W(go),Vr("name"),W(Jn),W(wu))},t.\u0275dir=Xe({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),t})();class gj{constructor(i,e,n){this.route=i,this.childContexts=e,this.parent=n}get(i,e){return i===Yp?this.route:i===jv?this.childContexts:this.parent.get(i,e)}}let OD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=wi({type:t,selectors:[["ng-component"]],standalone:!0,features:[oA],decls:1,vars:0,template:function(e,n){1&e&&bt(0,"router-outlet")},dependencies:[PD],encapsulation:2}),t})();function iR(t,i){return t.providers&&!t._injector&&(t._injector=gx(t.providers,i,`Route: ${t.path}`)),t._injector??i}function LD(t){const i=t.children&&t.children.map(LD),e=i?{...t,children:i}:{...t};return!e.component&&!e.loadComponent&&(i||e.loadChildren)&&e.outlet&&e.outlet!==Un&&(e.component=OD),e}function jc(t){return t.outlet||Un}function nR(t,i){const e=t.filter(n=>jc(n)===i);return e.push(...t.filter(n=>jc(n)!==i)),e}function Uv(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let i=t.parent;i;i=i.parent){const e=i.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class wj{constructor(i,e,n,r){this.routeReuseStrategy=i,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(i){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,i),AD(this.futureState.root),this.activateChildRoutes(e,n,i)}deactivateChildRoutes(i,e,n){const r=y_(e);i.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,r[u],n),delete r[u]}),pa(r,(s,u)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(i,e,n){const r=i.value,s=e?e.value:null;if(r===s)if(r.component){const u=n.getContext(r.outlet);u&&this.deactivateChildRoutes(i,e,u.children)}else this.deactivateChildRoutes(i,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(i,e){i.value.component&&this.routeReuseStrategy.shouldDetach(i.value.snapshot)?this.detachAndStoreRouteSubtree(i,e):this.deactivateRouteAndOutlet(i,e)}detachAndStoreRouteSubtree(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,s=y_(i);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);if(n&&n.outlet){const u=n.outlet.detach(),_=n.children.onOutletDeactivated();this.routeReuseStrategy.store(i.value.snapshot,{componentRef:u,route:i,contexts:_})}}deactivateRouteAndOutlet(i,e){const n=e.getContext(i.value.outlet),r=n&&i.value.component?n.children:e,s=y_(i);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(i,e,n){const r=y_(e);i.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new lj(s.value.snapshot))}),i.children.length&&this.forwardEvent(new sj(i.value.snapshot))}activateRoutes(i,e,n){const r=i.value,s=e?e.value:null;if(AD(r),r===s)if(r.component){const u=n.getOrCreateContext(r.outlet);this.activateChildRoutes(i,e,u.children)}else this.activateChildRoutes(i,e,n);else if(r.component){const u=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const _=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),u.children.onOutletReAttached(_.contexts),u.attachRef=_.componentRef,u.route=_.route.value,u.outlet&&u.outlet.attach(_.componentRef,_.route.value),AD(_.route.value),this.activateChildRoutes(i,null,u.children)}else{const _=Uv(r.snapshot),b=_?.get(ph)??null;u.attachRef=null,u.route=r,u.resolver=b,u.injector=_,u.outlet&&u.outlet.activateWith(r,u.injector),this.activateChildRoutes(i,null,u.children)}}else this.activateChildRoutes(i,null,n)}}class rR{constructor(i){this.path=i,this.route=this.path[this.path.length-1]}}class iw{constructor(i,e){this.component=i,this.route=e}}function Cj(t,i,e){const n=t._root;return Hv(n,i?i._root:null,e,[n.value])}function v_(t,i){const e=Symbol(),n=i.get(t,e);return n===e?"function"!=typeof t||function Zd(t){return null!==os(t)}(t)?i.get(t):t:n}function Hv(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=y_(i);return t.children.forEach(u=>{(function Dj(t,i,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,u=i?i.value:null,_=e?e.getContext(t.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const b=function Sj(t,i,e){if("function"==typeof e)return e(t,i);switch(e){case"pathParamsChange":return!_m(t.url,i.url);case"pathParamsOrQueryParamsChange":return!_m(t.url,i.url)||!Nu(t.queryParams,i.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ID(t,i)||!Nu(t.queryParams,i.queryParams);default:return!ID(t,i)}}(u,s,s.routeConfig.runGuardsAndResolvers);b?r.canActivateChecks.push(new rR(n)):(s.data=u.data,s._resolvedData=u._resolvedData),Hv(t,i,s.component?_?_.children:null:e,n,r),b&&_&&_.outlet&&_.outlet.isActivated&&r.canDeactivateChecks.push(new iw(_.outlet.component,u))}else u&&$v(i,_,r),r.canActivateChecks.push(new rR(n)),Hv(t,null,s.component?_?_.children:null:e,n,r)})(u,s[u.value.outlet],e,n.concat([u.value]),r),delete s[u.value.outlet]}),pa(s,(u,_)=>$v(u,e.getContext(_),r)),r}function $v(t,i,e){const n=y_(t),r=t.value;pa(n,(s,u)=>{$v(s,r.component?i?i.children.getContext(u):null:i,e)}),e.canDeactivateChecks.push(new iw(r.component&&i&&i.outlet&&i.outlet.isActivated?i.outlet.component:null,r))}function Gv(t){return"function"==typeof t}function BD(t){return t instanceof $x||"EmptyError"===t?.name}const nw=Symbol("INITIAL_VALUE");function b_(){return Pa(t=>p_(t.map(i=>i.pipe(jr(1),Bs(nw)))).pipe(li(i=>{for(const e of i)if(!0!==e){if(e===nw)return nw;if(!1===e||e instanceof gm)return e}return!0}),To(i=>i!==nw),jr(1)))}function oR(t){return function Ai(...t){return Hr(t)}(es(i=>{if(ym(i))throw Q2(0,i)}),li(i=>!0===i))}const ND={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sR(t,i,e,n,r){const s=zD(t,i,e);return s.matched?function Hj(t,i,e,n){const r=i.canMatch;return r&&0!==r.length?ui(r.map(u=>{const _=v_(u,t);return Zp(function Rj(t){return t&&Gv(t.canMatch)}(_)?_.canMatch(i,e):t.runInContext(()=>_(i,e)))})).pipe(b_(),oR()):ui(!0)}(n=iR(i,n),i,e).pipe(li(u=>!0===u?s:{...ND})):ui(s)}function zD(t,i,e){if(""===i.path)return"full"===i.pathMatch&&(t.hasChildren()||e.length>0)?{...ND}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(i.matcher||D4)(e,t,i);if(!r)return{...ND};const s={};pa(r.posParams,(_,b)=>{s[b]=_.path});const u=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:u,positionalParamSegments:r.posParams??{}}}function rw(t,i,e,n,r="corrected"){if(e.length>0&&function qj(t,i,e){return e.some(n=>ow(t,i,n)&&jc(n)!==Un)}(t,e,n)){const u=new Xn(i,function Gj(t,i,e,n){const r={};r[Un]=n,n._sourceSegment=t,n._segmentIndexShift=i.length;for(const s of e)if(""===s.path&&jc(s)!==Un){const u=new Xn([],{});u._sourceSegment=t,u._segmentIndexShift=i.length,r[jc(s)]=u}return r}(t,i,n,new Xn(e,t.children)));return u._sourceSegment=t,u._segmentIndexShift=i.length,{segmentGroup:u,slicedSegments:[]}}if(0===e.length&&function Wj(t,i,e){return e.some(n=>ow(t,i,n))}(t,e,n)){const u=new Xn(t.segments,function $j(t,i,e,n,r,s){const u={};for(const _ of n)if(ow(t,e,_)&&!r[jc(_)]){const b=new Xn([],{});b._sourceSegment=t,b._segmentIndexShift="legacy"===s?t.segments.length:i.length,u[jc(_)]=b}return{...r,...u}}(t,i,e,n,t.children,r));return u._sourceSegment=t,u._segmentIndexShift=i.length,{segmentGroup:u,slicedSegments:e}}const s=new Xn(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=i.length,{segmentGroup:s,slicedSegments:e}}function ow(t,i,e){return(!(t.hasChildren()||i.length>0)||"full"!==e.pathMatch)&&""===e.path}function aR(t,i,e,n){return!!(jc(t)===n||n!==Un&&ow(i,e,t))&&("**"===t.path||zD(i,t,e).matched)}function lR(t,i,e){return 0===i.length&&!t.children[e]}const sw=!1;class aw{constructor(i){this.segmentGroup=i||null}}class cR{constructor(i){this.urlTree=i}}function qv(t){return f_(new aw(t))}function dR(t){return f_(new cR(t))}class Kj{constructor(i,e,n,r,s){this.injector=i,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const i=rw(this.urlTree.root,[],[],this.config).segmentGroup,e=new Xn(i.segments,i.children);return this.expandSegmentGroup(this.injector,this.config,e,Un).pipe(li(s=>this.createUrlTree(Qx(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Oh(s=>{if(s instanceof cR)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof aw?this.noMatchError(s):s}))}match(i){return this.expandSegmentGroup(this.injector,this.config,i.root,Un).pipe(li(r=>this.createUrlTree(Qx(r),i.queryParams,i.fragment))).pipe(Oh(r=>{throw r instanceof aw?this.noMatchError(r):r}))}noMatchError(i){return new ft(4002,sw)}createUrlTree(i,e,n){const r=wD(i);return new gm(r,e,n)}expandSegmentGroup(i,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(i,e,n).pipe(li(s=>new Xn([],s))):this.expandSegment(i,n,e,n.segments,r,!0)}expandChildren(i,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return vr(r).pipe(Wp(s=>{const u=n.children[s],_=nR(e,s);return this.expandSegmentGroup(i,_,u,s).pipe(li(b=>({segment:b,outlet:s})))}),w2((s,u)=>(s[u.outlet]=u.segment,s),{}),C2())}expandSegment(i,e,n,r,s,u){return vr(n).pipe(Wp(_=>this.expandSegmentAgainstRoute(i,e,n,_,r,s,u).pipe(Oh(S=>{if(S instanceof aw)return ui(null);throw S}))),qp(_=>!!_),Oh((_,b)=>{if(BD(_))return lR(e,r,s)?ui(new Xn([],{})):qv(e);throw _}))}expandSegmentAgainstRoute(i,e,n,r,s,u,_){return aR(r,e,s,u)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(i,e,r,s,u):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(i,e,n,r,s,u):qv(e):qv(e)}expandSegmentAgainstRouteUsingRedirect(i,e,n,r,s,u){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(i,n,r,u):this.expandRegularSegmentAgainstRouteUsingRedirect(i,e,n,r,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(i,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?dR(s):this.lineralizeSegments(n,s).pipe(Ct(u=>{const _=new Xn(u,{});return this.expandSegment(i,_,e,u,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(i,e,n,r,s,u){const{matched:_,consumedSegments:b,remainingSegments:S,positionalParamSegments:A}=zD(e,r,s);if(!_)return qv(e);const B=this.applyRedirectCommands(b,r.redirectTo,A);return r.redirectTo.startsWith("/")?dR(B):this.lineralizeSegments(r,B).pipe(Ct(X=>this.expandSegment(i,e,n,X.concat(S),u,!1)))}matchSegmentAgainstRoute(i,e,n,r,s){return"**"===n.path?(i=iR(n,i),n.loadChildren?(n._loadedRoutes?ui({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(i,n)).pipe(li(_=>(n._loadedRoutes=_.routes,n._loadedInjector=_.injector,new Xn(r,{})))):ui(new Xn(r,{}))):sR(e,n,r,i).pipe(Pa(({matched:u,consumedSegments:_,remainingSegments:b})=>u?this.getChildConfig(i=n._injector??i,n,r).pipe(Ct(A=>{const B=A.injector??i,X=A.routes,{segmentGroup:re,slicedSegments:_e}=rw(e,_,b,X),Le=new Xn(re.segments,re.children);if(0===_e.length&&Le.hasChildren())return this.expandChildren(B,X,Le).pipe(li(rt=>new Xn(_,rt)));if(0===X.length&&0===_e.length)return ui(new Xn(_,{}));const Ue=jc(n)===s;return this.expandSegment(B,Le,X,_e,Ue?Un:s,!0).pipe(li(Rt=>new Xn(_.concat(Rt.segments),Rt.children)))})):qv(e)))}getChildConfig(i,e,n){return e.children?ui({routes:e.children,injector:i}):e.loadChildren?void 0!==e._loadedRoutes?ui({routes:e._loadedRoutes,injector:e._loadedInjector}):function Uj(t,i,e,n){const r=i.canLoad;return void 0===r||0===r.length?ui(!0):ui(r.map(u=>{const _=v_(u,t);return Zp(function Tj(t){return t&&Gv(t.canLoad)}(_)?_.canLoad(i,e):t.runInContext(()=>_(i,e)))})).pipe(b_(),oR())}(i,e,n).pipe(Ct(r=>r?this.configLoader.loadChildren(i,e).pipe(es(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function Yj(t){return f_(J2(sw,3))}())):ui({routes:[],injector:i})}lineralizeSegments(i,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return ui(n);if(r.numberOfChildren>1||!r.children[Un])return f_(new ft(4e3,sw));r=r.children[Un]}}applyRedirectCommands(i,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),i,n)}applyRedirectCreateUrlTree(i,e,n,r){const s=this.createSegmentGroup(i,e.root,n,r);return new gm(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(i,e){const n={};return pa(i,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const _=r.substring(1);n[s]=e[_]}else n[s]=r}),n}createSegmentGroup(i,e,n,r){const s=this.createSegments(i,e.segments,n,r);let u={};return pa(e.children,(_,b)=>{u[b]=this.createSegmentGroup(i,_,n,r)}),new Xn(s,u)}createSegments(i,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(i,s,r):this.findOrReturn(s,n))}findPosParam(i,e,n){const r=n[e.path.substring(1)];if(!r)throw new ft(4001,sw);return r}findOrReturn(i,e){let n=0;for(const r of e){if(r.path===i.path)return e.splice(n),r;n++}return i}}class Jj{}class iU{constructor(i,e,n,r,s,u,_,b){this.injector=i,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=_,this.urlSerializer=b}recognize(){const i=rw(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,i,Un).pipe(li(e=>{if(null===e)return null;const n=new ew([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Un,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Lh(n,e),s=new X2(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(i){const e=i.value,n=Y2(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),i.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(i,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(i,e,n):this.processSegment(i,e,n,n.segments,r)}processChildren(i,e,n){return vr(Object.keys(n.children)).pipe(Wp(r=>{const s=n.children[r],u=nR(e,r);return this.processSegmentGroup(i,u,s,r)}),w2((r,s)=>r&&s?(r.push(...s),r):null),M2(r=>null!==r),Gx(null),C2(),li(r=>{if(null===r)return null;const s=uR(r);return function nU(t){t.sort((i,e)=>i.value.outlet===Un?-1:e.value.outlet===Un?1:i.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(i,e,n,r,s){return vr(e).pipe(Wp(u=>this.processSegmentAgainstRoute(u._injector??i,u,n,r,s)),qp(u=>!!u),Oh(u=>{if(BD(u))return lR(n,r,s)?ui([]):ui(null);throw u}))}processSegmentAgainstRoute(i,e,n,r,s){if(e.redirectTo||!aR(e,n,r,s))return ui(null);let u;if("**"===e.path){const _=r.length>0?T2(r).parameters:{},b=pR(n)+r.length;u=ui({snapshot:new ew(r,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mR(e),jc(e),e.component??e._loadedComponent??null,e,hR(n),b,gR(e),b),consumedSegments:[],remainingSegments:[]})}else u=sR(n,e,r,i).pipe(li(({matched:_,consumedSegments:b,remainingSegments:S,parameters:A})=>{if(!_)return null;const B=pR(n)+b.length;return{snapshot:new ew(b,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mR(e),jc(e),e.component??e._loadedComponent??null,e,hR(n),B,gR(e),B),consumedSegments:b,remainingSegments:S}}));return u.pipe(Pa(_=>{if(null===_)return ui(null);const{snapshot:b,consumedSegments:S,remainingSegments:A}=_;i=e._injector??i;const B=e._loadedInjector??i,X=function rU(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:re,slicedSegments:_e}=rw(n,S,A,X.filter(Ue=>void 0===Ue.redirectTo),this.relativeLinkResolution);if(0===_e.length&&re.hasChildren())return this.processChildren(B,X,re).pipe(li(Ue=>null===Ue?null:[new Lh(b,Ue)]));if(0===X.length&&0===_e.length)return ui([new Lh(b,[])]);const Le=jc(e)===s;return this.processSegment(B,X,re,_e,Le?Un:s).pipe(li(Ue=>null===Ue?null:[new Lh(b,Ue)]))}))}}function oU(t){const i=t.value.routeConfig;return i&&""===i.path&&void 0===i.redirectTo}function uR(t){const i=[],e=new Set;for(const n of t){if(!oU(n)){i.push(n);continue}const r=i.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):i.push(n)}for(const n of e){const r=uR(n.children);i.push(new Lh(n.value,r))}return i.filter(n=>!e.has(n))}function hR(t){let i=t;for(;i._sourceSegment;)i=i._sourceSegment;return i}function pR(t){let i=t,e=i._segmentIndexShift??0;for(;i._sourceSegment;)i=i._sourceSegment,e+=i._segmentIndexShift??0;return e-1}function mR(t){return t.data||{}}function gR(t){return t.resolve||{}}function lU(t,i){return Ct(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return ui(e);let s=0;return vr(r).pipe(Wp(u=>function cU(t,i,e,n){const r=t.routeConfig,s=t._resolve;return void 0!==r?.title&&!_R(r)&&(s[Ov]=r.title),function dU(t,i,e,n){const r=function uU(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===r.length)return ui({});const s={};return vr(r).pipe(Ct(u=>function hU(t,i,e,n){const r=Uv(i)??n,s=v_(t,r);return Zp(s.resolve?s.resolve(i,e):r.runInContext(()=>s(i,e)))}(t[u],i,e,n).pipe(qp(),es(_=>{s[u]=_}))),yD(1),function D2(t){return li(()=>t)}(s),Oh(u=>BD(u)?ti:f_(u)))}(s,t,i,n).pipe(li(u=>(t._resolvedData=u,t.data=Y2(t,e).resolve,r&&_R(r)&&(t.data[Ov]=r.title),null)))}(u.route,n,t,i)),es(()=>s++),yD(1),Ct(u=>s===r.length?ui(e):ti))})}function _R(t){return"string"==typeof t.title||null===t.title}function VD(t){return Pa(i=>{const e=t(i);return e?vr(e).pipe(li(()=>i)):ui(i)})}let yR=(()=>{class t{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===Un);return n}getResolvedTitleForRoute(e){return e.data[Ov]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:function(){return qn(vR)},providedIn:"root"}),t})(),vR=(()=>{class t extends yR{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return t.\u0275fac=function(e){return new(e||t)($e(p2))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class pU{}class mU extends class fU{shouldDetach(i){return!1}store(i,e){}shouldAttach(i){return!1}retrieve(i){return null}shouldReuseRoute(i,e){return i.routeConfig===e.routeConfig}}{}const cw=new tt("",{providedIn:"root",factory:()=>({})}),jD=new tt("ROUTES");let UD=(()=>{class t{constructor(e,n){this.injector=e,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ui(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=Zp(e.loadComponent()).pipe(es(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),qx(()=>{this.componentLoaders.delete(e)})),r=new b2(n,()=>new St).pipe(_D());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ui({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(li(_=>{this.onLoadEndListener&&this.onLoadEndListener(n);let b,S,A=!1;Array.isArray(_)?S=_:(b=_.create(e).injector,S=E2(b.get(jD,[],zi.Self|zi.Optional)));return{routes:S.map(LD),injector:b}}),qx(()=>{this.childrenLoaders.delete(n)})),u=new b2(s,()=>new St).pipe(_D());return this.childrenLoaders.set(n,u),u}loadModuleFactoryOrRoutes(e){return Zp(e()).pipe(Ct(n=>n instanceof nA||Array.isArray(n)?ui(n):vr(this.compiler.compileModuleAsync(n))))}}return t.\u0275fac=function(e){return new(e||t)($e(no),$e(OM))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class _U{}class yU{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,e){return i}}function vU(t){throw t}function bU(t,i,e){return i.parse("/")}const xU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function xR(){const t=qn(O2),i=qn(jv),e=qn(Mv),n=qn(no),r=qn(OM),s=qn(jD,{optional:!0})??[],u=qn(cw,{optional:!0})??{},_=qn(vR),b=qn(yR,{optional:!0}),S=qn(_U,{optional:!0}),A=qn(pU,{optional:!0}),B=new Ho(null,t,i,e,n,r,E2(s));return S&&(B.urlHandlingStrategy=S),A&&(B.routeReuseStrategy=A),B.titleStrategy=b??_,function CU(t,i){t.errorHandler&&(i.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(i.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(i.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(i.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(i.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(i.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(i.canceledNavigationResolution=t.canceledNavigationResolution)}(u,B),B}let Ho=(()=>{class t{constructor(e,n,r,s,u,_,b){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new St,this.errorHandler=vU,this.malformedUriErrorHandler=bU,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ui(void 0),this.urlHandlingStrategy=new yU,this.routeReuseStrategy=new mU,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(UD),this.configLoader.onLoadEndListener=X=>this.triggerEvent(new rj(X)),this.configLoader.onLoadStartListener=X=>this.triggerEvent(new nj(X)),this.ngModule=u.get(pm),this.console=u.get(pz);const B=u.get(Ki);this.isNgZoneEnabled=B instanceof Ki&&Ki.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=function E4(){return new gm(new Xn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Z2(this.currentUrlTree,this.rootComponentType),this.transitions=new Ys({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(To(r=>0!==r.id),li(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Pa(r=>{let s=!1,u=!1;return ui(r).pipe(es(_=>{this.currentNavigation={id:_.id,initialUrl:_.rawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Pa(_=>{const b=this.browserUrlTree.toString(),S=!this.navigated||_.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||S)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return wR(_.source)&&(this.browserUrlTree=_.extractedUrl),ui(_).pipe(Pa(B=>{const X=this.transitions.getValue();return n.next(new SD(B.id,this.serializeUrl(B.extractedUrl),B.source,B.restoredState)),X!==this.transitions.getValue()?ti:Promise.resolve(B)}),function Qj(t,i,e,n){return Pa(r=>function Xj(t,i,e,n,r){return new Kj(t,i,e,n,r).apply()}(t,i,e,r.extractedUrl,n).pipe(li(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),es(B=>{this.currentNavigation={...this.currentNavigation,finalUrl:B.urlAfterRedirects},r.urlAfterRedirects=B.urlAfterRedirects}),function aU(t,i,e,n,r,s){return Ct(u=>function tU(t,i,e,n,r,s,u="emptyOnly",_="legacy"){return new iU(t,i,e,n,r,u,_,s).recognize().pipe(Pa(b=>null===b?function eU(t){return new $i(i=>i.error(t))}(new Jj):ui(b)))}(t,i,e,u.urlAfterRedirects,n.serialize(u.urlAfterRedirects),n,r,s).pipe(li(_=>({...u,targetSnapshot:_}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),es(B=>{if(r.targetSnapshot=B.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!B.extras.skipLocationChange){const re=this.urlHandlingStrategy.merge(B.urlAfterRedirects,B.rawUrl);this.setBrowserUrl(re,B)}this.browserUrlTree=B.urlAfterRedirects}const X=new Q4(B.id,this.serializeUrl(B.extractedUrl),this.serializeUrl(B.urlAfterRedirects),B.targetSnapshot);n.next(X)}));if(S&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:X,extractedUrl:re,source:_e,restoredState:Le,extras:Ue}=_,it=new SD(X,this.serializeUrl(re),_e,Le);n.next(it);const Rt=Z2(re,this.rootComponentType).snapshot;return ui(r={..._,targetSnapshot:Rt,urlAfterRedirects:re,extras:{...Ue,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=_.rawUrl,_.resolve(null),ti}),es(_=>{const b=new J4(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),li(_=>r={..._,guards:Cj(_.targetSnapshot,_.currentSnapshot,this.rootContexts)}),function Oj(t,i){return Ct(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:u}}=e;return 0===u.length&&0===s.length?ui({...e,guardsResult:!0}):function Fj(t,i,e,n){return vr(t).pipe(Ct(r=>function jj(t,i,e,n,r){const s=i&&i.routeConfig?i.routeConfig.canDeactivate:null;return s&&0!==s.length?ui(s.map(_=>{const b=Uv(i)??r,S=v_(_,b);return Zp(function Ij(t){return t&&Gv(t.canDeactivate)}(S)?S.canDeactivate(t,i,e,n):b.runInContext(()=>S(t,i,e,n))).pipe(qp())})).pipe(b_()):ui(!0)}(r.component,r.route,e,i,n)),qp(r=>!0!==r,!0))}(u,n,r,t).pipe(Ct(_=>_&&function Ej(t){return"boolean"==typeof t}(_)?function Lj(t,i,e,n){return vr(i).pipe(Wp(r=>Rv(function Nj(t,i){return null!==t&&i&&i(new oj(t)),ui(!0)}(r.route.parent,n),function Bj(t,i){return null!==t&&i&&i(new aj(t)),ui(!0)}(r.route,n),function Vj(t,i,e){const n=i[i.length-1],s=i.slice(0,i.length-1).reverse().map(u=>function Mj(t){const i=t.routeConfig?t.routeConfig.canActivateChild:null;return i&&0!==i.length?{node:t,guards:i}:null}(u)).filter(u=>null!==u).map(u=>Pv(()=>ui(u.guards.map(b=>{const S=Uv(u.node)??e,A=v_(b,S);return Zp(function Aj(t){return t&&Gv(t.canActivateChild)}(A)?A.canActivateChild(n,t):S.runInContext(()=>A(n,t))).pipe(qp())})).pipe(b_())));return ui(s).pipe(b_())}(t,r.path,e),function zj(t,i,e){const n=i.routeConfig?i.routeConfig.canActivate:null;if(!n||0===n.length)return ui(!0);const r=n.map(s=>Pv(()=>{const u=Uv(i)??e,_=v_(s,u);return Zp(function kj(t){return t&&Gv(t.canActivate)}(_)?_.canActivate(i,t):u.runInContext(()=>_(i,t))).pipe(qp())}));return ui(r).pipe(b_())}(t,r.route,e))),qp(r=>!0!==r,!0))}(n,s,t,i):ui(_)),li(_=>({...e,guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),es(_=>{if(r.guardsResult=_.guardsResult,ym(_.guardsResult))throw Q2(0,_.guardsResult);const b=new ej(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(b)}),To(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",3),!1)),VD(_=>{if(_.guards.canActivateChecks.length)return ui(_).pipe(es(b=>{const S=new tj(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(S)}),Pa(b=>{let S=!1;return ui(b).pipe(lU(this.paramsInheritanceStrategy,this.ngModule.injector),es({next:()=>S=!0,complete:()=>{S||(this.restoreHistory(b),this.cancelNavigationTransition(b,"",2))}}))}),es(b=>{const S=new ij(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(S)}))}),VD(_=>{const b=S=>{const A=[];S.routeConfig?.loadComponent&&!S.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(S.routeConfig).pipe(es(B=>{S.component=B}),li(()=>{})));for(const B of S.children)A.push(...b(B));return A};return p_(b(_.targetSnapshot.root)).pipe(Gx(),jr(1))}),VD(()=>this.afterPreactivation()),li(_=>{const b=function hj(t,i,e){const n=Vv(t,i._root,e?e._root:void 0);return new W2(n,i)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return r={..._,targetRouterState:b}}),es(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((t,i,e)=>li(n=>(new wj(i,n.targetRouterState,n.currentRouterState,e).activate(t),n)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),es({next(){s=!0},complete(){s=!0}}),qx(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Oh(_=>{if(u=!0,tR(_)){eR(_)||(this.navigated=!0,this.restoreHistory(r,!0));const b=new Jx(r.id,this.serializeUrl(r.extractedUrl),_.message,_.cancellationCode);if(n.next(b),eR(_)){const S=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),A={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||wR(r.source)};this.scheduleNavigation(S,"imperative",null,A,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const b=new $2(r.id,this.serializeUrl(r.extractedUrl),_,r.targetSnapshot??void 0);n.next(b);try{r.resolve(this.errorHandler(_))}catch(S){r.reject(S)}}return ti}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const _={...s};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(r.state=_)}const u=this.parseUrl(e.url);this.scheduleNavigation(u,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(LD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:u,queryParamsHandling:_,preserveFragment:b}=n,S=r||this.routerState.root,A=b?this.currentUrlTree.fragment:u;let B=null;switch(_){case"merge":B={...this.currentUrlTree.queryParams,...s};break;case"preserve":B=this.currentUrlTree.queryParams;break;default:B=s||null}return null!==B&&(B=this.removeEmptyProps(B)),q4(S,this.currentUrlTree,e,B,A??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=ym(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function MU(t){for(let i=0;i<t.length;i++){if(null==t[i])throw new ft(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...xU}:!1===n?{...wU}:n,ym(e))return A2(this.currentUrlTree,e,r);const s=this.parseUrl(e);return A2(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new vm(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,s,u){if(this.disposed)return Promise.resolve(!1);let _,b,S;u?(_=u.resolve,b=u.reject,S=u.promise):S=new Promise((X,re)=>{_=X,b=re});const A=++this.navigationId;let B;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),B=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):B=0,this.setTransition({id:A,targetPageId:B,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:_,reject:b,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(X=>Promise.reject(X))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n,r){const s=new Jx(e.id,this.serializeUrl(e.extractedUrl),n,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return t.\u0275fac=function(e){ml()},t.\u0275prov=Tt({token:t,factory:function(){return xR()},providedIn:"root"}),t})();function wR(t){return"imperative"!==t}class CR{}let EU=(()=>{class t{constructor(e,n,r,s,u){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(To(e=>e instanceof vm),Wp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=gx(s.providers,e,`Route: ${s.path}`));const u=s._injector??e,_=s._loadedInjector??u;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(u,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(_,s.children??s._loadedRoutes))}return vr(r).pipe(pt())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):ui(null);const s=r.pipe(Ct(u=>null===u?ui(void 0):(n._loadedRoutes=u.routes,n._loadedInjector=u.injector,this.processRoutes(u.injector??e,u.routes))));return n.loadComponent&&!n._loadedComponent?vr([s,this.loader.loadComponent(n)]).pipe(pt()):s})}}return t.\u0275fac=function(e){return new(e||t)($e(Ho),$e(OM),$e(wu),$e(CR),$e(UD))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const GD=new tt("");let MR=(()=>{class t{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof SD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof vm&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof G2&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new G2(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){ml()},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();function x_(t,i){return{\u0275kind:t,\u0275providers:i}}function qD(t){return[{provide:jD,multi:!0,useValue:t}]}function SR(){const t=qn(no);return i=>{const e=t.get(u_);if(i!==e.components[0])return;const n=t.get(Ho),r=t.get(ER);1===t.get(WD)&&n.initialNavigation(),t.get(TR,null,zi.Optional)?.setUpPreloading(),t.get(GD,null,zi.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const ER=new tt("",{factory:()=>new St}),WD=new tt("",{providedIn:"root",factory:()=>1});const TR=new tt("");function IU(t){return x_(0,[{provide:TR,useExisting:EU},{provide:CR,useExisting:t}])}const kR=new tt("ROUTER_FORROOT_GUARD"),RU=[Mv,{provide:O2,useClass:bD},{provide:Ho,useFactory:xR},jv,{provide:Yp,useFactory:function DR(t){return t.routerState.root},deps:[Ho]},UD];function PU(){return new JA("Router",Ho)}let AR=(()=>{class t{constructor(e){}static forRoot(e,n){return{ngModule:t,providers:[RU,[],qD(e),{provide:kR,useFactory:BU,deps:[[Ho,new la,new ul]]},{provide:cw,useValue:n||{}},n?.useHash?{provide:mm,useClass:t5}:{provide:mm,useClass:MI},{provide:GD,useFactory:()=>{const t=qn(Ho),i=qn(mV),e=qn(cw);return e.scrollOffset&&i.setOffset(e.scrollOffset),new MR(t,i,e)}},n?.preloadingStrategy?IU(n.preloadingStrategy).\u0275providers:[],{provide:JA,multi:!0,useFactory:PU},n?.initialNavigation?NU(n):[],[{provide:IR,useFactory:SR},{provide:qA,multi:!0,useExisting:IR}]]}}static forChild(e){return{ngModule:t,providers:[qD(e)]}}}return t.\u0275fac=function(e){return new(e||t)($e(kR,8))},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[OD]}),t})();function BU(t){return"guarded"}function NU(t){return["disabled"===t.initialNavigation?x_(3,[{provide:xx,multi:!0,useFactory:()=>{const i=qn(Ho);return()=>{i.setUpLocationChangeListener()}}},{provide:WD,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?x_(2,[{provide:WD,useValue:0},{provide:xx,multi:!0,deps:[no],useFactory:i=>{const e=i.get(Jz,Promise.resolve());let n=!1;return()=>e.then(()=>new Promise(s=>{const u=i.get(Ho),_=i.get(ER);(function r(s){i.get(Ho).events.pipe(To(_=>_ instanceof vm||_ instanceof Jx||_ instanceof $2),li(_=>_ instanceof vm||_ instanceof Jx&&(0===_.code||1===_.code)&&null),To(_=>null!==_),jr(1)).subscribe(()=>{s()})})(()=>{s(!0),n=!0}),u.afterPreactivation=()=>(s(!0),n||_.closed?ui(void 0):_),u.initialNavigation()}))}}]).\u0275providers:[]]}const IR=new tt("");function RR(t,i,e,n,r,s,u){try{var _=t[s](u),b=_.value}catch(S){return void e(S)}_.done?i(b):Promise.resolve(b).then(n,r)}function Wv(t){return function(){var i=this,e=arguments;return new Promise(function(n,r){var s=t.apply(i,e);function u(b){RR(s,n,r,u,_,"next",b)}function _(b){RR(s,n,r,u,_,"throw",b)}u(void 0)})}}function PR(...t){const i=In(t),{args:e,keys:n}=_2(t),r=new $i(s=>{const{length:u}=e;if(!u)return void s.complete();const _=new Array(u);let b=u,S=u;for(let A=0;A<u;A++){let B=!1;j(e[A]).subscribe(Qi(s,X=>{B||(B=!0,S--),_[A]=X},()=>b--,void 0,()=>{(!b||!B)&&(S||s.next(n?y2(n,_):_),s.complete())}))}});return i?r.pipe(gD(i)):r}let OR=(()=>{class t{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(W(Tc),W(Ci))},t.\u0275dir=Xe({type:t}),t})(),bm=(()=>{class t extends OR{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,features:[At]}),t})();const Xs=new tt("NgValueAccessor"),jU={provide:Xs,useExisting:en(()=>xm),multi:!0},HU=new tt("CompositionEventMode");let xm=(()=>{class t extends OR{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function UU(){const t=Lu()?Lu().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Tc),W(Ci),W(HU,8))},t.\u0275dir=Xe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&Dt("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[di([jU]),At]}),t})();function Xp(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function LR(t){return null!=t&&"number"==typeof t.length}const Ns=new tt("NgValidators"),Kp=new tt("NgAsyncValidators"),GU=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Oa{static min(i){return function BR(t){return i=>{if(Xp(i.value)||Xp(t))return null;const e=parseFloat(i.value);return!isNaN(e)&&e<t?{min:{min:t,actual:i.value}}:null}}(i)}static max(i){return function NR(t){return i=>{if(Xp(i.value)||Xp(t))return null;const e=parseFloat(i.value);return!isNaN(e)&&e>t?{max:{max:t,actual:i.value}}:null}}(i)}static required(i){return function zR(t){return Xp(t.value)?{required:!0}:null}(i)}static requiredTrue(i){return function VR(t){return!0===t.value?null:{required:!0}}(i)}static email(i){return function jR(t){return Xp(t.value)||GU.test(t.value)?null:{email:!0}}(i)}static minLength(i){return function UR(t){return i=>Xp(i.value)||!LR(i.value)?null:i.value.length<t?{minlength:{requiredLength:t,actualLength:i.value.length}}:null}(i)}static maxLength(i){return HR(i)}static pattern(i){return function $R(t){if(!t)return pw;let i,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),i=new RegExp(e)):(e=t.toString(),i=t),n=>{if(Xp(n.value))return null;const r=n.value;return i.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(i)}static nullValidator(i){return null}static compose(i){return XR(i)}static composeAsync(i){return KR(i)}}function HR(t){return i=>LR(i.value)&&i.value.length>t?{maxlength:{requiredLength:t,actualLength:i.value.length}}:null}function pw(t){return null}function GR(t){return null!=t}function qR(t){return hv(t)?vr(t):t}function WR(t){let i={};return t.forEach(e=>{i=null!=e?{...i,...e}:i}),0===Object.keys(i).length?null:i}function ZR(t,i){return i.map(e=>e(t))}function YR(t){return t.map(i=>function qU(t){return!t.validate}(i)?i:e=>i.validate(e))}function XR(t){if(!t)return null;const i=t.filter(GR);return 0==i.length?null:function(e){return WR(ZR(e,i))}}function ZD(t){return null!=t?XR(YR(t)):null}function KR(t){if(!t)return null;const i=t.filter(GR);return 0==i.length?null:function(e){return PR(ZR(e,i).map(qR)).pipe(li(WR))}}function YD(t){return null!=t?KR(YR(t)):null}function QR(t,i){return null===t?[i]:Array.isArray(t)?[...t,i]:[t,i]}function JR(t){return t._rawValidators}function eP(t){return t._rawAsyncValidators}function XD(t){return t?Array.isArray(t)?t:[t]:[]}function fw(t,i){return Array.isArray(t)?t.includes(i):t===i}function tP(t,i){const e=XD(i);return XD(t).forEach(r=>{fw(e,r)||e.push(r)}),e}function iP(t,i){return XD(i).filter(e=>!fw(t,e))}class nP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=ZD(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=YD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i){this.control&&this.control.reset(i)}hasError(i,e){return!!this.control&&this.control.hasError(i,e)}getError(i,e){return this.control?this.control.getError(i,e):null}}class Qa extends nP{get formDirective(){return null}get path(){return null}}class Ad extends nP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rP{constructor(i){this._cd=i}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Zv=(()=>{class t extends rP{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Ad,2))},t.\u0275dir=Xe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&bn("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[At]}),t})(),Yv=(()=>{class t extends rP{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Qa,10))},t.\u0275dir=Xe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&bn("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[At]}),t})();const Xv="VALID",gw="INVALID",w_="PENDING",Kv="DISABLED";function eS(t){return(_w(t)?t.validators:t)||null}function sP(t){return Array.isArray(t)?ZD(t):t||null}function tS(t,i){return(_w(i)?i.asyncValidators:t)||null}function aP(t){return Array.isArray(t)?YD(t):t||null}function _w(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}function lP(t,i,e){const n=t.controls;if(!(i?Object.keys(n):n).length)throw new ft(1e3,"");if(!n[e])throw new ft(1001,"")}function cP(t,i,e){t._forEachChild((n,r)=>{if(void 0===e[r])throw new ft(1002,"")})}class yw{constructor(i,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=i,this._rawAsyncValidators=e,this._composedValidatorFn=sP(this._rawValidators),this._composedAsyncValidatorFn=aP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===Xv}get invalid(){return this.status===gw}get pending(){return this.status==w_}get disabled(){return this.status===Kv}get enabled(){return this.status!==Kv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._rawValidators=i,this._composedValidatorFn=sP(i)}setAsyncValidators(i){this._rawAsyncValidators=i,this._composedAsyncValidatorFn=aP(i)}addValidators(i){this.setValidators(tP(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(tP(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(iP(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(iP(i,this._rawAsyncValidators))}hasValidator(i){return fw(this._rawValidators,i)}hasAsyncValidator(i){return fw(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=w_,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=Kv,this.errors=null,this._forEachChild(n=>{n.disable({...i,onlySelf:!0})}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...i,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=Xv,this._forEachChild(n=>{n.enable({...i,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors({...i,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}getRawValue(){return this.value}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xv||this.status===w_)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kv:Xv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=w_,this._hasOwnPendingAsyncValidator=!0;const e=qR(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(!1!==e.emitEvent)}get(i){let e=i;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(i,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new Ht,this.statusChanges=new Ht}_calculateStatus(){return this._allControlsDisabled()?Kv:this.errors?gw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(w_)?w_:this._anyControlsHaveStatus(gw)?gw:Xv}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){_w(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(i){return null}}class Id extends yw{constructor(i,e,n){super(eS(e),tS(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,n={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){cP(this,0,i),Object.keys(i).forEach(n=>{lP(this,!0,n),this.controls[n].setValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(Object.keys(i).forEach(n=>{const r=this.controls[n];r&&r.patchValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((n,r)=>{n.reset(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,n)=>(i[n]=e.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&i(n,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const[e,n]of Object.entries(this.controls))if(this.contains(e)&&i(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(i,e){let n=i;return this._forEachChild((r,s)=>{n=e(n,r,s)}),n}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(i){return this.controls.hasOwnProperty(i)?this.controls[i]:null}}class dP extends Id{}function Qv(t,i){iS(t,i),i.valueAccessor.writeValue(t.value),t.disabled&&i.valueAccessor.setDisabledState?.(!0),function e8(t,i){i.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&uP(t,i)})}(t,i),function n8(t,i){const e=(n,r)=>{i.valueAccessor.writeValue(n),r&&i.viewToModelUpdate(n)};t.registerOnChange(e),i._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,i),function t8(t,i){i.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&uP(t,i),"submit"!==t.updateOn&&t.markAsTouched()})}(t,i),function JU(t,i){if(i.valueAccessor.setDisabledState){const e=n=>{i.valueAccessor.setDisabledState(n)};t.registerOnDisabledChange(e),i._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,i)}function bw(t,i,e=!0){const n=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(n),i.valueAccessor.registerOnTouched(n)),ww(t,i),t&&(i._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function xw(t,i){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function iS(t,i){const e=JR(t);null!==i.validator?t.setValidators(QR(e,i.validator)):"function"==typeof e&&t.setValidators([e]);const n=eP(t);null!==i.asyncValidator?t.setAsyncValidators(QR(n,i.asyncValidator)):"function"==typeof n&&t.setAsyncValidators([n]);const r=()=>t.updateValueAndValidity();xw(i._rawValidators,r),xw(i._rawAsyncValidators,r)}function ww(t,i){let e=!1;if(null!==t){if(null!==i.validator){const r=JR(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(u=>u!==i.validator);s.length!==r.length&&(e=!0,t.setValidators(s))}}if(null!==i.asyncValidator){const r=eP(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(u=>u!==i.asyncValidator);s.length!==r.length&&(e=!0,t.setAsyncValidators(s))}}}const n=()=>{};return xw(i._rawValidators,n),xw(i._rawAsyncValidators,n),e}function uP(t,i){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function hP(t,i){iS(t,i)}function fP(t,i){t._syncPendingControls(),i.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}const l8={provide:Qa,useExisting:en(()=>C_)},Jv=(()=>Promise.resolve())();let C_=(()=>{class t extends Qa{constructor(e,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ht,this.form=new Id({},ZD(e),YD(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Jv.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Qv(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Jv.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Jv.then(()=>{const n=this._findContainer(e.path),r=new Id({});hP(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Jv.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Jv.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,fP(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return t.\u0275fac=function(e){return new(e||t)(W(Ns,10),W(Kp,10))},t.\u0275dir=Xe({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&Dt("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[di([l8]),At]}),t})();function mP(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}function gP(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const Fa=class extends yw{constructor(i=null,e,n){super(eS(e),tS(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),_w(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=gP(i)?i.value:i)}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=this.defaultValue,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){mP(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){mP(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){gP(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}};let eb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),wP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})();const oS=new tt("NgModelWithFormControlWarning"),_8={provide:Qa,useExisting:en(()=>zu)};let zu=(()=>{class t extends Qa{constructor(e,n){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ht,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ww(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return Qv(n,e),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){bw(e.control||null,e,!1),function a8(t,i){const e=t.indexOf(i);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,fP(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(bw(n||null,e),(t=>t instanceof Fa)(r)&&(Qv(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);hP(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function r8(t,i){return ww(t,i)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){iS(this.form,this),this._oldForm&&ww(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(W(Ns,10),W(Kp,10))},t.\u0275dir=Xe({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&Dt("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[di([_8]),At,R]}),t})();const b8={provide:Ad,useExisting:en(()=>M_)};let M_=(()=>{class t extends Ad{constructor(e,n,r,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new Ht,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function rS(t,i){if(!i)return null;let e,n,r;return Array.isArray(i),i.forEach(s=>{s.constructor===xm?e=s:function s8(t){return Object.getPrototypeOf(t.constructor)===bm}(s)?n=s:r=s}),r||n||e||null}(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function nS(t,i){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(i,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function vw(t,i){return[...i.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(W(Qa,13),W(Ns,10),W(Kp,10),W(Xs,10),W(oS,8))},t.\u0275dir=Xe({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[di([b8]),At,R]}),t})();let wm=(()=>{class t{constructor(){this._validator=pw}ngOnChanges(e){if(this.inputName in e){const n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):pw,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xe({type:t,features:[R]}),t})();const P8={provide:Ns,useExisting:en(()=>tb),multi:!0};let tb=(()=>{class t extends wm{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>function kP(t){return"number"==typeof t?t:parseInt(t,10)}(e),this.createValidator=e=>HR(e)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&Ti("maxlength",n._enabled?n.maxlength:null)},inputs:{maxlength:"maxlength"},features:[di([P8]),At]}),t})(),F8=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[wP]}),t})(),uS=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:oS,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[F8]}),t})();class LP extends yw{constructor(i,e,n){super(eS(e),tS(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[this._adjustIndex(i)]}push(i,e={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(i,e,n={}){this.controls.splice(i,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(i,e={}){let n=this._adjustIndex(i);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(i,e,n={}){let r=this._adjustIndex(i);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,e={}){cP(this,0,i),i.forEach((n,r)=>{lP(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(i.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i=[],e={}){this._forEachChild((n,r)=>{n.reset(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(i=>i.getRawValue())}clear(i={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_adjustIndex(i){return i<0?i+this.length:i}_syncPendingControls(){let i=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_forEachChild(i){this.controls.forEach((e,n)=>{i(e,n)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(e=>e.enabled&&i(e))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}_find(i){return this.at(i)??null}}function BP(t){return!!t&&(void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn)}let L8=(()=>{class t{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new t;return e.useNonNullable=!0,e}group(e,n=null){const r=this._reduceControls(e);let s={};return BP(n)?s=n:null!==n&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new Id(r,s)}record(e,n=null){const r=this._reduceControls(e);return new dP(r,n)}control(e,n,r){let s={};return this.useNonNullable?(BP(n)?s=n:(s.validators=n,s.asyncValidators=r),new Fa(e,{...s,nonNullable:!0})):new Fa(e,n,r)}array(e,n,r){const s=e.map(u=>this._createControl(u));return new LP(s,n,r)}_reduceControls(e){const n={};return Object.keys(e).forEach(r=>{n[r]=this._createControl(e[r])}),n}_createControl(e){return e instanceof Fa||e instanceof yw?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:uS}),t})(),B8=(()=>{class t extends L8{group(e,n=null){return super.group(e,n)}control(e,n,r){return super.control(e,n,r)}array(e,n,r){return super.array(e,n,r)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:uS}),t})();var N8=Ke(226),Ur=Ke.n(N8);class NP{}class zP{}class Ja{constructor(i){this.normalizedNames=new Map,this.lazyUpdate=null,i?this.lazyInit="string"==typeof i?()=>{this.headers=new Map,i.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),u=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:()=>{this.headers=new Map,Object.keys(i).forEach(e=>{let n=i[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(i){return this.init(),this.headers.has(i.toLowerCase())}get(i){this.init();const e=this.headers.get(i.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(i){return this.init(),this.headers.get(i.toLowerCase())||null}append(i,e){return this.clone({name:i,value:e,op:"a"})}set(i,e){return this.clone({name:i,value:e,op:"s"})}delete(i,e){return this.clone({name:i,value:e,op:"d"})}maybeSetNormalizedName(i,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,i)}init(){this.lazyInit&&(this.lazyInit instanceof Ja?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(i=>this.applyUpdate(i)),this.lazyUpdate=null))}copyFrom(i){i.init(),Array.from(i.headers.keys()).forEach(e=>{this.headers.set(e,i.headers.get(e)),this.normalizedNames.set(e,i.normalizedNames.get(e))})}clone(i){const e=new Ja;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ja?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([i]),e}applyUpdate(i){const e=i.name.toLowerCase();switch(i.op){case"a":case"s":let n=i.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(i.name,e);const r=("a"===i.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=i.value;if(s){let u=this.headers.get(e);if(!u)return;u=u.filter(_=>-1===s.indexOf(_)),0===u.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,u)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(i){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>i(this.normalizedNames.get(e),this.headers.get(e)))}}class z8{encodeKey(i){return VP(i)}encodeValue(i){return VP(i)}decodeKey(i){return decodeURIComponent(i)}decodeValue(i){return decodeURIComponent(i)}}const j8=/%(\d[a-f0-9])/gi,U8={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function VP(t){return encodeURIComponent(t).replace(j8,(i,e)=>U8[e]??i)}function Mw(t){return`${t}`}class Qp{constructor(i={}){if(this.updates=null,this.cloneFrom=null,this.encoder=i.encoder||new z8,i.fromString){if(i.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function V8(t,i){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[u,_]=-1==s?[i.decodeKey(r),""]:[i.decodeKey(r.slice(0,s)),i.decodeValue(r.slice(s+1))],b=e.get(u)||[];b.push(_),e.set(u,b)}),e}(i.fromString,this.encoder)}else i.fromObject?(this.map=new Map,Object.keys(i.fromObject).forEach(e=>{const n=i.fromObject[e],r=Array.isArray(n)?n.map(Mw):[Mw(n)];this.map.set(e,r)})):this.map=null}has(i){return this.init(),this.map.has(i)}get(i){this.init();const e=this.map.get(i);return e?e[0]:null}getAll(i){return this.init(),this.map.get(i)||null}keys(){return this.init(),Array.from(this.map.keys())}append(i,e){return this.clone({param:i,value:e,op:"a"})}appendAll(i){const e=[];return Object.keys(i).forEach(n=>{const r=i[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(i,e){return this.clone({param:i,value:e,op:"s"})}delete(i,e){return this.clone({param:i,value:e,op:"d"})}toString(){return this.init(),this.keys().map(i=>{const e=this.encoder.encodeKey(i);return this.map.get(i).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(i=>""!==i).join("&")}clone(i){const e=new Qp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(i),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(i=>this.map.set(i,this.cloneFrom.map.get(i))),this.updates.forEach(i=>{switch(i.op){case"a":case"s":const e=("a"===i.op?this.map.get(i.param):void 0)||[];e.push(Mw(i.value)),this.map.set(i.param,e);break;case"d":if(void 0===i.value){this.map.delete(i.param);break}{let n=this.map.get(i.param)||[];const r=n.indexOf(Mw(i.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(i.param,n):this.map.delete(i.param)}}}),this.cloneFrom=this.updates=null)}}class H8{constructor(){this.map=new Map}set(i,e){return this.map.set(i,e),this}get(i){return this.map.has(i)||this.map.set(i,i.defaultValue()),this.map.get(i)}delete(i){return this.map.delete(i),this}has(i){return this.map.has(i)}keys(){return this.map.keys()}}function jP(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function UP(t){return typeof Blob<"u"&&t instanceof Blob}function HP(t){return typeof FormData<"u"&&t instanceof FormData}class ib{constructor(i,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=i.toUpperCase(),function $8(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ja),this.context||(this.context=new H8),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=e;else{const _=e.indexOf("?");this.urlWithParams=e+(-1===_?"?":_<e.length-1?"&":"")+u}}else this.params=new Qp,this.urlWithParams=e}serializeBody(){return null===this.body?null:jP(this.body)||UP(this.body)||HP(this.body)||function G8(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||HP(this.body)?null:UP(this.body)?this.body.type||null:jP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(i={}){const e=i.method||this.method,n=i.url||this.url,r=i.responseType||this.responseType,s=void 0!==i.body?i.body:this.body,u=void 0!==i.withCredentials?i.withCredentials:this.withCredentials,_=void 0!==i.reportProgress?i.reportProgress:this.reportProgress;let b=i.headers||this.headers,S=i.params||this.params;const A=i.context??this.context;return void 0!==i.setHeaders&&(b=Object.keys(i.setHeaders).reduce((B,X)=>B.set(X,i.setHeaders[X]),b)),i.setParams&&(S=Object.keys(i.setParams).reduce((B,X)=>B.set(X,i.setParams[X]),S)),new ib(e,n,s,{params:S,headers:b,context:A,reportProgress:_,responseType:r,withCredentials:u})}}var _s=(()=>((_s=_s||{})[_s.Sent=0]="Sent",_s[_s.UploadProgress=1]="UploadProgress",_s[_s.ResponseHeader=2]="ResponseHeader",_s[_s.DownloadProgress=3]="DownloadProgress",_s[_s.Response=4]="Response",_s[_s.User=5]="User",_s))();class hS{constructor(i,e=200,n="OK"){this.headers=i.headers||new Ja,this.status=void 0!==i.status?i.status:e,this.statusText=i.statusText||n,this.url=i.url||null,this.ok=this.status>=200&&this.status<300}}class pS extends hS{constructor(i={}){super(i),this.type=_s.ResponseHeader}clone(i={}){return new pS({headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class Dw extends hS{constructor(i={}){super(i),this.type=_s.Response,this.body=void 0!==i.body?i.body:null}clone(i={}){return new Dw({body:void 0!==i.body?i.body:this.body,headers:i.headers||this.headers,status:void 0!==i.status?i.status:this.status,statusText:i.statusText||this.statusText,url:i.url||this.url||void 0})}}class $P extends hS{constructor(i){super(i,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${i.url||"(unknown url)"}`:`Http failure response for ${i.url||"(unknown url)"}: ${i.status} ${i.statusText}`,this.error=i.error||null}}function fS(t,i){return{body:i,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Cm=(()=>{class t{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof ib)s=e;else{let b,S;b=r.headers instanceof Ja?r.headers:new Ja(r.headers),r.params&&(S=r.params instanceof Qp?r.params:new Qp({fromObject:r.params})),s=new ib(e,n,void 0!==r.body?r.body:null,{headers:b,context:r.context,params:S,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const u=ui(s).pipe(Wp(b=>this.handler.handle(b)));if(e instanceof ib||"events"===r.observe)return u;const _=u.pipe(To(b=>b instanceof Dw));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return _.pipe(li(b=>{if(null!==b.body&&!(b.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return b.body}));case"blob":return _.pipe(li(b=>{if(null!==b.body&&!(b.body instanceof Blob))throw new Error("Response is not a Blob.");return b.body}));case"text":return _.pipe(li(b=>{if(null!==b.body&&"string"!=typeof b.body)throw new Error("Response is not a string.");return b.body}));default:return _.pipe(li(b=>b.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Qp).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,fS(r,n))}post(e,n,r={}){return this.request("POST",e,fS(r,n))}put(e,n,r={}){return this.request("PUT",e,fS(r,n))}}return t.\u0275fac=function(e){return new(e||t)($e(NP))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();class GP{constructor(i,e){this.next=i,this.interceptor=e}handle(i){return this.interceptor.intercept(i,this.next)}}const qP=new tt("HTTP_INTERCEPTORS");let q8=(()=>{class t{intercept(e,n){return n.handle(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();const W8=/^\)\]\}',?\n/;let WP=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new $i(n=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((re,_e)=>r.setRequestHeader(re,_e.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const re=e.detectContentTypeHeader();null!==re&&r.setRequestHeader("Content-Type",re)}if(e.responseType){const re=e.responseType.toLowerCase();r.responseType="json"!==re?re:"text"}const s=e.serializeBody();let u=null;const _=()=>{if(null!==u)return u;const re=r.statusText||"OK",_e=new Ja(r.getAllResponseHeaders()),Le=function Z8(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||e.url;return u=new pS({headers:_e,status:r.status,statusText:re,url:Le}),u},b=()=>{let{headers:re,status:_e,statusText:Le,url:Ue}=_(),it=null;204!==_e&&(it=typeof r.response>"u"?r.responseText:r.response),0===_e&&(_e=it?200:0);let Rt=_e>=200&&_e<300;if("json"===e.responseType&&"string"==typeof it){const rt=it;it=it.replace(W8,"");try{it=""!==it?JSON.parse(it):null}catch(ei){it=rt,Rt&&(Rt=!1,it={error:ei,text:it})}}Rt?(n.next(new Dw({body:it,headers:re,status:_e,statusText:Le,url:Ue||void 0})),n.complete()):n.error(new $P({error:it,headers:re,status:_e,statusText:Le,url:Ue||void 0}))},S=re=>{const{url:_e}=_(),Le=new $P({error:re,status:r.status||0,statusText:r.statusText||"Unknown Error",url:_e||void 0});n.error(Le)};let A=!1;const B=re=>{A||(n.next(_()),A=!0);let _e={type:_s.DownloadProgress,loaded:re.loaded};re.lengthComputable&&(_e.total=re.total),"text"===e.responseType&&!!r.responseText&&(_e.partialText=r.responseText),n.next(_e)},X=re=>{let _e={type:_s.UploadProgress,loaded:re.loaded};re.lengthComputable&&(_e.total=re.total),n.next(_e)};return r.addEventListener("load",b),r.addEventListener("error",S),r.addEventListener("timeout",S),r.addEventListener("abort",S),e.reportProgress&&(r.addEventListener("progress",B),null!==s&&r.upload&&r.upload.addEventListener("progress",X)),r.send(s),n.next({type:_s.Sent}),()=>{r.removeEventListener("error",S),r.removeEventListener("abort",S),r.removeEventListener("load",b),r.removeEventListener("timeout",S),e.reportProgress&&(r.removeEventListener("progress",B),null!==s&&r.upload&&r.upload.removeEventListener("progress",X)),r.readyState!==r.DONE&&r.abort()}})}}return t.\u0275fac=function(e){return new(e||t)($e(qI))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();const mS=new tt("XSRF_COOKIE_NAME"),gS=new tt("XSRF_HEADER_NAME");class ZP{}let Y8=(()=>{class t{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=OI(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)($e(Zi),$e(Cx),$e(mS))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})(),_S=(()=>{class t{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return n.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),n.handle(e)}}return t.\u0275fac=function(e){return new(e||t)($e(ZP),$e(gS))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})(),X8=(()=>{class t{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(qP,[]);this.chain=n.reduceRight((r,s)=>new GP(r,s),this.backend)}return this.chain.handle(e)}}return t.\u0275fac=function(e){return new(e||t)($e(zP),$e(no))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})(),K8=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:_S,useClass:q8}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:mS,useValue:e.cookieName}:[],e.headerName?{provide:gS,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[_S,{provide:qP,useExisting:_S,multi:!0},{provide:ZP,useClass:Y8},{provide:mS,useValue:"XSRF-TOKEN"},{provide:gS,useValue:"X-XSRF-TOKEN"}]}),t})(),Q8=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[Cm,{provide:NP,useClass:X8},WP,{provide:zP,useExisting:WP}],imports:[K8.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),t})();const Vu_baseUrl="https://beneficio-cafe-ws.herokuapp.com/api/ben-caf/";let D_=(()=>{class t{constructor(e){this.http=e,this.baseUrl=Vu_baseUrl,this.userValid=!1,this.userLogged=""}createHeader(){this.token="",this.headers=null,this.options=null,this.token=localStorage.getItem("token"),this.headers=new Ja({Authorization:`Bearer ${this.token}`}),this.options={headers:this.headers},this.baseUrl=Vu_baseUrl}login(e){return this.http.post(`${this.baseUrl}users/login`,e)}getUser(e){return this.http.post(`${this.baseUrl}users/user`,e)}getPiloto(e){return this.http.post(`${this.baseUrl}users/piloto`,e)}}return t.\u0275fac=function(e){return new(e||t)($e(Cm))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function wn(t){return Pn((i,e)=>{j(t).subscribe(Qi(e,()=>e.complete(),xt)),!e.closed&&i.subscribe(e)})}class YP{}const Bh="*";function _o(t,i){return{type:7,name:t,definitions:i,options:{}}}function Kn(t,i=null){return{type:4,styles:i,timings:t}}function Sw(t,i=null){return{type:3,steps:t,options:i}}function XP(t,i=null){return{type:2,steps:t,options:i}}function ii(t){return{type:6,styles:t,offset:null}}function Cn(t,i,e){return{type:0,name:t,styles:i,options:e}}function Mm(t){return{type:5,steps:t}}function Vn(t,i,e=null){return{type:1,expr:t,animation:i,options:e}}function S_(t=null){return{type:9,options:t}}function E_(t,i,e=null){return{type:11,selector:t,animation:i,options:e}}function KP(t){Promise.resolve().then(t)}class nb{constructor(i=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=i+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){KP(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(i=>i()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(i){this._position=this.totalTime?i*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(i){const e="start"==i?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class QP{constructor(i){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=i;let e=0,n=0,r=0;const s=this.players.length;0==s?KP(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++e==s&&this._onFinish()}),u.onDestroy(()=>{++n==s&&this._onDestroy()}),u.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,_)=>Math.max(u,_.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this.players.forEach(i=>i.init())}onStart(i){this._onStartFns.push(i)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(i=>i()),this._onStartFns=[])}onDone(i){this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(i=>i.play())}pause(){this.players.forEach(i=>i.pause())}restart(){this.players.forEach(i=>i.restart())}finish(){this._onFinish(),this.players.forEach(i=>i.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(i=>i.destroy()),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}reset(){this.players.forEach(i=>i.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(i){const e=i*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const i=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=i?i.getPosition():0}beforeDestroy(){this.players.forEach(i=>{i.beforeDestroy&&i.beforeDestroy()})}triggerCallback(i){const e="start"==i?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}const e6=["overlay"];function t6(t,i){1&t&&bt(0,"div")}function i6(t,i){if(1&t&&(H(0,"div"),Pe(1,t6,1,0,"div",6),U()),2&t){const e=Me(2);_r(e.spinner.class),Zs("color",e.spinner.color),q(1),le("ngForOf",e.spinner.divArray)}}function n6(t,i){1&t&&(bt(0,"div",7),bM(1,"safeHtml")),2&t&&le("innerHTML",xM(1,1,Me(2).template),lg)}function r6(t,i){if(1&t&&(H(0,"div",1,2),Pe(2,i6,2,5,"div",3),Pe(3,n6,2,3,"div",4),H(4,"div",5),gr(5),U()()),2&t){const e=Me();Zs("background-color",e.spinner.bdColor)("z-index",e.spinner.zIndex)("position",e.spinner.fullScreen?"fixed":"absolute"),le("@.disabled",e.disableAnimation)("@fadeIn","in"),q(2),le("ngIf",!e.template),q(1),le("ngIf",e.template),q(1),Zs("z-index",e.spinner.zIndex)}}const o6=["*"],s6={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},bS="primary";class Dm{constructor(i){Object.assign(this,i)}static create(i){return(null==i?.type||0===i.type.length)&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new Dm(i)}}let T_=(()=>{class t{constructor(){this.spinnerObservable=new Ys(null)}getSpinner(e){return this.spinnerObservable.asObservable().pipe(To(n=>n&&n.name===e))}show(e=bS,n){return new Promise((r,s)=>{setTimeout(()=>{n&&Object.keys(n).length?(n.name=e,this.spinnerObservable.next(new Dm({...n,show:!0})),r(!0)):(this.spinnerObservable.next(new Dm({name:e,show:!0})),r(!0))},10)})}hide(e=bS,n=10){return new Promise((r,s)=>{setTimeout(()=>{this.spinnerObservable.next(new Dm({name:e,show:!1})),r(!0)},n)})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const JP=new tt("NGX_SPINNER_CONFIG");let xS,a6=(()=>{class t{constructor(e){this._sanitizer=e}transform(e){if(e)return this._sanitizer.bypassSecurityTrustHtml(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Iv,16))},t.\u0275pipe=ho({name:"safeHtml",type:t,pure:!0}),t})(),l6=(()=>{class t{constructor(e,n,r,s){this.spinnerService=e,this.changeDetector=n,this.elementRef=r,this.globalConfig=s,this.disableAnimation=!1,this.spinner=new Dm,this.ngUnsubscribe=new St,this.setDefaultOptions=()=>{const{type:u}=this.globalConfig??{};this.spinner=Dm.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??u,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=bS,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}handleKeyboardEvent(e){this.spinnerDOM&&this.spinnerDOM.nativeElement&&(this.fullScreen||!this.fullScreen&&this.isSpinnerZone(e.target))&&(e.returnValue=!1,e.preventDefault())}initObservable(){this.spinnerService.getSpinner(this.name).pipe(wn(this.ngUnsubscribe)).subscribe(e=>{this.setDefaultOptions(),Object.assign(this.spinner,e),e.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(e){return e===this.elementRef.nativeElement.parentElement||e.parentNode&&this.isSpinnerZone(e.parentNode)}ngOnChanges(e){for(const n in e)if(n){const r=e[n];if(r.isFirstChange())return;typeof r.currentValue<"u"&&r.currentValue!==r.previousValue&&""!==r.currentValue&&(this.spinner[n]=r.currentValue,"showSpinner"===n&&(r.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===n&&this.initObservable())}}getClass(e,n){this.spinner.divCount=s6[e],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((s,u)=>u);let r="";switch(n.toLowerCase()){case"small":r="la-sm";break;case"medium":r="la-2x";break;case"large":r="la-3x"}return"la-"+e+" "+r}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return t.\u0275fac=function(e){return new(e||t)(W(T_),W(Jn),W(Ci),W(JP,8))},t.\u0275cmp=wi({type:t,selectors:[["ngx-spinner"]],viewQuery:function(e,n){if(1&e&&kn(e6,5),2&e){let r;$t(r=Gt())&&(n.spinnerDOM=r.first)}},hostBindings:function(e,n){1&e&&Dt("keydown",function(s){return n.handleKeyboardEvent(s)},0,Py)},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[R],ngContentSelectors:o6,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(e,n){1&e&&(Qo(),Pe(0,r6,6,12,"div",0)),2&e&&le("ngIf",n.spinner.show)},dependencies:[Ph,Gl,a6],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[_o("fadeIn",[Cn("in",ii({opacity:1})),Vn(":enter",[ii({opacity:0}),Kn(300)]),Vn(":leave",Kn(200,ii({opacity:0})))])]},changeDetection:0}),t})(),c6=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:JP,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[gs]}),t})();try{xS=typeof Intl<"u"&&Intl.v8BreakIterator}catch{xS=!1}let k_,ys=(()=>{class t{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function fV(t){return t===$I}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!xS)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)($e(Cx))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const eO=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function tO(){if(k_)return k_;if("object"!=typeof document||!document)return k_=new Set(eO),k_;let t=document.createElement("input");return k_=new Set(eO.filter(i=>(t.setAttribute("type",i),t.type===i))),k_}let rb,Sm,wS;function Rd(t){return function d6(){if(null==rb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>rb=!0}))}finally{rb=rb||!1}return rb}()?t:!!t.capture}function u6(){if(null==Sm){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Sm=!1,Sm;if("scrollBehavior"in document.documentElement.style)Sm=!0;else{const t=Element.prototype.scrollTo;Sm=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Sm}function Tw(t){if(function h6(){if(null==wS){const t=typeof document<"u"?document.head:null;wS=!(!t||!t.createShadowRoot&&!t.attachShadow)}return wS}()){const i=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&i instanceof ShadowRoot)return i}return null}function A_(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const i=t.shadowRoot.activeElement;if(i===t)break;t=i}return t}function Uc(t){return t.composedPath?t.composedPath()[0]:t.target}function CS(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function zs(t,...i){return i.length?i.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class w6 extends ce{constructor(i,e){super()}schedule(i,e=0){return this}}const kw={setInterval(t,i,...e){const{delegate:n}=kw;return n?.setInterval?n.setInterval(t,i,...e):setInterval(t,i,...e)},clearInterval(t){const{delegate:i}=kw;return(i?.clearInterval||clearInterval)(t)},delegate:void 0};class ES extends w6{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){var n;if(this.closed)return this;this.state=i;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(s,this.id,e),this}requestAsyncId(i,e,n=0){return kw.setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&kw.clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let r,n=!1;try{this.work(i)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:i,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,p(n,this),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null,super.unsubscribe()}}}const iO={now:()=>(iO.delegate||Date).now(),delegate:void 0};class cb{constructor(i,e=cb.now){this.schedulerActionCtor=i,this.now=e}schedule(i,e=0,n){return new this.schedulerActionCtor(this,i).schedule(n,e)}}cb.now=iO.now;class TS extends cb{constructor(i,e=cb.now){super(i,e),this.actions=[],this._active=!1}flush(i){const{actions:e}=this;if(this._active)return void e.push(i);let n;this._active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=e.shift());if(this._active=!1,n){for(;i=e.shift();)i.unsubscribe();throw n}}}const db=new TS(ES),C6=db;function kS(t,i=db){return Pn((e,n)=>{let r=null,s=null,u=null;const _=()=>{if(r){r.unsubscribe(),r=null;const S=s;s=null,n.next(S)}};function b(){const S=u+t,A=i.now();if(A<S)return r=this.schedule(void 0,S-A),void n.add(r);_()}e.subscribe(Qi(n,S=>{s=S,u=i.now(),r||(r=i.schedule(b,t),n.add(r))},()=>{_(),n.complete()},void 0,()=>{s=r=null}))})}function nO(t){return To((i,e)=>t<=e)}function AS(t,i=ki){return t=t??M6,Pn((e,n)=>{let r,s=!0;e.subscribe(Qi(n,u=>{const _=i(u);(s||!t(r,_))&&(s=!1,r=_,n.next(u))}))})}function M6(t,i){return t===i}function si(t){return null!=t&&"false"!=`${t}`}function $o(t,i=0){return rO(t)?Number(t):i}function rO(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Aw(t){return Array.isArray(t)?t:[t]}function vs(t){return null==t?"":"string"==typeof t?t:`${t}px`}function ts(t){return t instanceof Ci?t.nativeElement:t}let oO=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),S6=(()=>{class t{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){const n=ts(e);return new $i(r=>{const u=this._observeElement(n).subscribe(r);return()=>{u.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const n=new St,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}}return t.\u0275fac=function(e){return new(e||t)($e(oO))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),IS=(()=>{class t{constructor(e,n,r){this._contentObserver=e,this._elementRef=n,this._ngZone=r,this.event=new Ht,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=si(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=$o(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(kS(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(W(S6),W(Ci),W(Ki))},t.\u0275dir=Xe({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),ub=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[oO]}),t})();function Iw(t,i){return(t.getAttribute(i)||"").match(/\S+/g)||[]}const aO="cdk-describedby-message",Rw="cdk-describedby-host";let lO=0,k6=(()=>{class t{constructor(e,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+lO++,this._document=e}describe(e,n,r){if(!this._canBeDescribed(e,n))return;const s=RS(n,r);"string"!=typeof n?(cO(n),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,n,r){if(!n||!this._isElementNode(e))return;const s=RS(n,r);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),"string"==typeof n){const u=this._messageRegistry.get(s);u&&0===u.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${Rw}="${this._id}"]`);for(let n=0;n<e.length;n++)this._removeCdkDescribedByReferenceIds(e[n]),e[n].removeAttribute(Rw);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,n){const r=this._document.createElement("div");cO(r),r.textContent=e,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(RS(e,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){const n=Iw(e,"aria-describedby").filter(r=>0!=r.indexOf(aO));e.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(e,n){const r=this._messageRegistry.get(n);(function E6(t,i,e){const n=Iw(t,i);n.some(r=>r.trim()==e.trim())||(n.push(e.trim()),t.setAttribute(i,n.join(" ")))})(e,"aria-describedby",r.messageElement.id),e.setAttribute(Rw,this._id),r.referenceCount++}_removeMessageReference(e,n){const r=this._messageRegistry.get(n);r.referenceCount--,function T6(t,i,e){const r=Iw(t,i).filter(s=>s!=e.trim());r.length?t.setAttribute(i,r.join(" ")):t.removeAttribute(i)}(e,"aria-describedby",r.messageElement.id),e.removeAttribute(Rw)}_isElementDescribedByMessage(e,n){const r=Iw(e,"aria-describedby"),s=this._messageRegistry.get(n),u=s&&s.messageElement.id;return!!u&&-1!=r.indexOf(u)}_canBeDescribed(e,n){if(!this._isElementNode(e))return!1;if(n&&"object"==typeof n)return!0;const r=null==n?"":`${n}`.trim(),s=e.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return t.\u0275fac=function(e){return new(e||t)($e(Zi),$e(ys))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function RS(t,i){return"string"==typeof t?`${i||""}/${t}`:t}function cO(t){t.id||(t.id=`${aO}-${lO++}`)}class dO{constructor(i){this._items=i,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new St,this._typeaheadSubscription=ce.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new St,this.change=new St,i instanceof Hp&&i.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(i){return this._skipPredicateFn=i,this}withWrap(i=!0){return this._wrap=i,this}withVerticalOrientation(i=!0){return this._vertical=i,this}withHorizontalOrientation(i){return this._horizontal=i,this}withAllowedModifierKeys(i){return this._allowedModifierKeys=i,this}withTypeAhead(i=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(es(e=>this._pressedLetters.push(e)),kS(i),To(()=>this._pressedLetters.length>0),li(()=>this._pressedLetters.join(""))).subscribe(e=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,u=n[s];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(i=!0){return this._homeAndEnd=i,this}setActiveItem(i){const e=this._activeItem;this.updateActiveItem(i),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(i){const e=i.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!i[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||zs(i,"shiftKey"))&&(i.key&&1===i.key.length?this._letterKeyStream.next(i.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],i.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(i){const e=this._getItemsArray(),n="number"==typeof i?i:e.indexOf(i);this._activeItem=e[n]??null,this._activeItemIndex=n}_setActiveItemByDelta(i){this._wrap?this._setActiveInWrapMode(i):this._setActiveInDefaultMode(i)}_setActiveInWrapMode(i){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+i*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(i){this._setActiveItemByIndex(this._activeItemIndex+i,i)}_setActiveItemByIndex(i,e){const n=this._getItemsArray();if(n[i]){for(;this._skipPredicateFn(n[i]);)if(!n[i+=e])return;this.setActiveItem(i)}}_getItemsArray(){return this._items instanceof Hp?this._items.toArray():this._items}}class A6 extends dO{setActiveItem(i){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(i),this.activeItem&&this.activeItem.setActiveStyles()}}class PS extends dO{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(i){return this._origin=i,this}setActiveItem(i){super.setActiveItem(i),this.activeItem&&this.activeItem.focus(this._origin)}}let uO=(()=>{class t{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function R6(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function I6(t){try{return t.frameElement}catch{return null}}(function V6(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(e));if(n&&(-1===pO(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),s=pO(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function N6(t){let i=t.nodeName.toLowerCase(),e="input"===i&&t.type;return"text"===e||"password"===e||"select"===i||"textarea"===i}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function z6(t){return!function O6(t){return function L6(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function P6(t){let i=t.nodeName.toLowerCase();return"input"===i||"select"===i||"button"===i||"textarea"===i}(t)||function F6(t){return function B6(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||hO(t))}(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}}return t.\u0275fac=function(e){return new(e||t)($e(ys))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function hO(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let i=t.getAttribute("tabindex");return!(!i||isNaN(parseInt(i,10)))}function pO(t){if(!hO(t))return null;const i=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(i)?-1:i}class j6{constructor(i,e,n,r,s=!1){this._element=i,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(i){this._enabled=i,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(i,this._startAnchor),this._toggleAnchorTabIndex(i,this._endAnchor))}destroy(){const i=this._startAnchor,e=this._endAnchor;i&&(i.removeEventListener("focus",this.startAnchorListener),i.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(i)))})}focusFirstTabbableElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(i)))})}focusLastTabbableElementWhenReady(i){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(i)))})}_getRegionBoundary(i){const e=this._element.querySelectorAll(`[cdk-focus-region-${i}], [cdkFocusRegion${i}], [cdk-focus-${i}]`);return"start"==i?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(i){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return n?.focus(i),!!n}return e.focus(i),!0}return this.focusFirstTabbableElement(i)}focusFirstTabbableElement(i){const e=this._getRegionBoundary("start");return e&&e.focus(i),!!e}focusLastTabbableElement(i){const e=this._getRegionBoundary("end");return e&&e.focus(i),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(i){if(this._checker.isFocusable(i)&&this._checker.isTabbable(i))return i;const e=i.children;for(let n=0;n<e.length;n++){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(i){if(this._checker.isFocusable(i)&&this._checker.isTabbable(i))return i;const e=i.children;for(let n=e.length-1;n>=0;n--){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){const i=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,i),i.classList.add("cdk-visually-hidden"),i.classList.add("cdk-focus-trap-anchor"),i.setAttribute("aria-hidden","true"),i}_toggleAnchorTabIndex(i,e){i?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(i){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(i,this._startAnchor),this._toggleAnchorTabIndex(i,this._endAnchor))}_executeOnStable(i){this._ngZone.isStable?i():this._ngZone.onStable.pipe(jr(1)).subscribe(i)}}let fO=(()=>{class t{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new j6(e,this._checker,this._ngZone,this._document,n)}}return t.\u0275fac=function(e){return new(e||t)($e(uO),$e(Ki),$e(Zi))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),U6=(()=>{class t{constructor(e,n,r){this._elementRef=e,this._focusTrapFactory=n,this._previouslyFocusedElement=null,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(e){this.focusTrap.enabled=si(e)}get autoCapture(){return this._autoCapture}set autoCapture(e){this._autoCapture=si(e)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(e){const n=e.autoCapture;n&&!n.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=A_(),this.focusTrap.focusInitialElementWhenReady()}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(fO),W(Zi))},t.\u0275dir=Xe({type:t,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["cdkTrapFocus"],features:[R]}),t})();function OS(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function FS(t){const i=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!i||-1!==i.identifier||null!=i.radiusX&&1!==i.radiusX||null!=i.radiusY&&1!==i.radiusY)}const H6=new tt("cdk-input-modality-detector-options"),$6={ignoreKeys:[18,17,224,91,16]},I_=Rd({passive:!0,capture:!0});let G6=(()=>{class t{constructor(e,n,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Ys(null),this._lastTouchMs=0,this._onKeydown=u=>{this._options?.ignoreKeys?.some(_=>_===u.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Uc(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(OS(u)?"keyboard":"mouse"),this._mostRecentTarget=Uc(u))},this._onTouchstart=u=>{FS(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Uc(u))},this._options={...$6,...s},this.modalityDetected=this._modality.pipe(nO(1)),this.modalityChanged=this.modalityDetected.pipe(AS()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,I_),r.addEventListener("mousedown",this._onMousedown,I_),r.addEventListener("touchstart",this._onTouchstart,I_)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,I_),document.removeEventListener("mousedown",this._onMousedown,I_),document.removeEventListener("touchstart",this._onTouchstart,I_))}}return t.\u0275fac=function(e){return new(e||t)($e(ys),$e(Ki),$e(Zi),$e(H6,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const q6=new tt("liveAnnouncerElement",{providedIn:"root",factory:function W6(){return null}}),Z6=new tt("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let Y6=(()=>{class t{constructor(e,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...n){const r=this._defaultOptions;let s,u;return 1===n.length&&"number"==typeof n[0]?u=n[0]:[s,u]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==u&&r&&(u=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(_=>this._currentResolve=_)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof u&&(this._previousTimeout=setTimeout(()=>this.clear(),u)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return t.\u0275fac=function(e){return new(e||t)($e(q6,8),$e(Ki),$e(Zi),$e(Z6,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const X6=new tt("cdk-focus-monitor-default-options"),Pw=Rd({passive:!0,capture:!0});let Od=(()=>{class t{constructor(e,n,r,s,u){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new St,this._rootNodeFocusAndBlurListener=_=>{const b=Uc(_),S="focus"===_.type?this._onFocus:this._onBlur;for(let A=b;A;A=A.parentElement)S.call(this,_,A)},this._document=s,this._detectionMode=u?.detectionMode||0}monitor(e,n=!1){const r=ts(e);if(!this._platform.isBrowser||1!==r.nodeType)return ui(null);const s=Tw(r)||this._getDocument(),u=this._elementInfo.get(r);if(u)return n&&(u.checkChildren=!0),u.subject;const _={checkChildren:n,subject:new St,rootNode:s};return this._elementInfo.set(r,_),this._registerGlobalListeners(_),_.subject}stopMonitoring(e){const n=ts(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){const s=ts(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([_,b])=>this._originChanged(_,n,b)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const r=this._elementInfo.get(n),s=Uc(e);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(e,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r.subject,null))}_emitOrigin(e,n){this._ngZone.run(()=>e.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,Pw),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,Pw)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(wn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Pw),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Pw),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r.subject,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&n.push([s,r])}),n}}return t.\u0275fac=function(e){return new(e||t)($e(Ki),$e(ys),$e(G6),$e(Zi,8),$e(X6,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),K6=(()=>{class t{constructor(e,n){this._elementRef=e,this._focusMonitor=n,this.cdkFocusChange=new Ht}ngAfterViewInit(){const e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,1===e.nodeType&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(n=>this.cdkFocusChange.emit(n))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(Od))},t.\u0275dir=Xe({type:t,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"}}),t})();const gO="cdk-high-contrast-black-on-white",_O="cdk-high-contrast-white-on-black",LS="cdk-high-contrast-active";let yO=(()=>{class t{constructor(e,n){this._platform=e,this._document=n}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(LS),e.remove(gO),e.remove(_O),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?(e.add(LS),e.add(gO)):2===n&&(e.add(LS),e.add(_O))}}}return t.\u0275fac=function(e){return new(e||t)($e(ys),$e(Zi))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hb=(()=>{class t{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return t.\u0275fac=function(e){return new(e||t)($e(yO))},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[ub]]}),t})();const Q6=new tt("cdk-dir-doc",{providedIn:"root",factory:function J6(){return qn(Zi)}}),eH=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ks=(()=>{class t{constructor(e){if(this.value="ltr",this.change=new Ht,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function tH(t){const i=t?.toLowerCase()||"";return"auto"===i&&typeof navigator<"u"&&navigator?.language?eH.test(navigator.language)?"rtl":"ltr":"rtl"===i?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)($e(Q6,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),R_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})();function iH(t,i){if(1&t&&bt(0,"mat-pseudo-checkbox",4),2&t){const e=Me();le("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function nH(t,i){if(1&t&&(H(0,"span",5),ge(1),U()),2&t){const e=Me();q(1),Yn("(",e.group.label,")")}}const rH=["*"],sH=new tt("mat-sanity-checks",{providedIn:"root",factory:function oH(){return!0}});let yi=(()=>{class t{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!CS()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return t.\u0275fac=function(e){return new(e||t)($e(yO),$e(sH,8),$e(Zi))},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[R_],R_]}),t})();function Am(t){return class extends t{constructor(...i){super(...i),this._disabled=!1}get disabled(){return this._disabled}set disabled(i){this._disabled=si(i)}}}function ju(t,i){return class extends t{constructor(...e){super(...e),this.defaultColor=i,this.color=i}get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function Nh(t){return class extends t{constructor(...i){super(...i),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=si(i)}}}function Im(t,i=0){return class extends t{constructor(...e){super(...e),this._tabIndex=i,this.defaultTabIndex=i}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?$o(e):this.defaultTabIndex}}}function zS(t){return class extends t{constructor(...i){super(...i),this.stateChanges=new St,this.errorState=!1}updateErrorState(){const i=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==i&&(this.errorState=s,this.stateChanges.next())}}}function aH(t){return class extends t{constructor(...i){super(...i),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new $i(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(i){i.next(),i.complete()}}}const lH=new tt("MAT_DATE_LOCALE",{providedIn:"root",factory:function cH(){return qn(Fu)}});class fa{constructor(){this._localeChanges=new St,this.localeChanges=this._localeChanges}getValidDateOrNull(i){return this.isDateInstance(i)&&this.isValid(i)?i:null}deserialize(i){return null==i||this.isDateInstance(i)&&this.isValid(i)?i:this.invalid()}setLocale(i){this.locale=i,this._localeChanges.next()}compareDate(i,e){return this.getYear(i)-this.getYear(e)||this.getMonth(i)-this.getMonth(e)||this.getDate(i)-this.getDate(e)}sameDate(i,e){if(i&&e){let n=this.isValid(i),r=this.isValid(e);return n&&r?!this.compareDate(i,e):n==r}return i==e}clampDate(i,e,n){return e&&this.compareDate(i,e)<0?e:n&&this.compareDate(i,n)>0?n:i}}const Rm=new tt("mat-date-formats"),dH=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function VS(t,i){const e=Array(t);for(let n=0;n<t;n++)e[n]=i(n);return e}let uH=(()=>{class t extends fa{constructor(e,n){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const n=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return VS(12,r=>this._format(n,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return VS(31,n=>this._format(e,new Date(2017,0,n+1)))}getDayOfWeekNames(e){const n=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return VS(7,r=>this._format(n,new Date(2017,0,r+1)))}getYearName(e){const n=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(n,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,n,r){let s=this._createDateWithOverflow(e,n,r);return s.getMonth(),s}today(){return new Date}parse(e){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,n){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...n,timeZone:"utc"});return this._format(r,e)}addCalendarYears(e,n){return this.addCalendarMonths(e,12*n)}addCalendarMonths(e,n){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+n,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+n)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,n){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+n)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(dH.test(e)){let n=new Date(e);if(this.isValid(n))return n}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,n,r){const s=new Date;return s.setFullYear(e,n,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,n){const r=new Date;return r.setUTCFullYear(n.getFullYear(),n.getMonth(),n.getDate()),r.setUTCHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e.format(r)}}return t.\u0275fac=function(e){return new(e||t)($e(lH,8),$e(ys))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();const hH={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let pH=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[{provide:fa,useClass:uH}]}),t})(),xO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[{provide:Rm,useValue:hH}],imports:[[pH]]}),t})(),Jp=(()=>{class t{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ow=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[yi],yi]}),t})();class gH{constructor(i,e,n){this._renderer=i,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const wO={enterDuration:225,exitDuration:150},jS=Rd({passive:!0}),CO=["mousedown","touchstart"],MO=["mouseup","mouseleave","touchend","touchcancel"];class DO{constructor(i,e,n,r){this._target=i,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ts(n))}fadeInRipple(i,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...wO,...n.animation};n.centered&&(i=r.left+r.width/2,e=r.top+r.height/2);const u=n.radius||function vH(t,i,e){const n=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),r=Math.max(Math.abs(i-e.top),Math.abs(i-e.bottom));return Math.sqrt(n*n+r*r)}(i,e,r),_=i-r.left,b=e-r.top,S=s.enterDuration,A=document.createElement("div");A.classList.add("mat-ripple-element"),A.style.left=_-u+"px",A.style.top=b-u+"px",A.style.height=2*u+"px",A.style.width=2*u+"px",null!=n.color&&(A.style.backgroundColor=n.color),A.style.transitionDuration=`${S}ms`,this._containerElement.appendChild(A),function yH(t){window.getComputedStyle(t).getPropertyValue("opacity")}(A),A.style.transform="scale(1)";const B=new gH(this,A,n);return B.state=0,this._activeRipples.add(B),n.persistent||(this._mostRecentTransientRipple=B),this._runTimeoutOutsideZone(()=>{const X=B===this._mostRecentTransientRipple;B.state=1,!n.persistent&&(!X||!this._isPointerDown)&&B.fadeOut()},S),B}fadeOutRipple(i){const e=this._activeRipples.delete(i);if(i===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=i.element,r={...wO,...i.config.animation};n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",i.state=2,this._runTimeoutOutsideZone(()=>{i.state=3,n.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(i=>i.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(i=>{i.config.persistent||i.fadeOut()})}setupTriggerEvents(i){const e=ts(i);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(CO))}handleEvent(i){"mousedown"===i.type?this._onMousedown(i):"touchstart"===i.type?this._onTouchStart(i):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(MO),this._pointerUpEventsRegistered=!0)}_onMousedown(i){const e=OS(i),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(i.clientX,i.clientY,this._target.rippleConfig))}_onTouchStart(i){if(!this._target.rippleDisabled&&!FS(i)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=i.changedTouches;for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(i=>{!i.config.persistent&&(1===i.state||i.config.terminateOnPointerUp&&0===i.state)&&i.fadeOut()}))}_runTimeoutOutsideZone(i,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(i,e))}_registerEvents(i){this._ngZone.runOutsideAngular(()=>{i.forEach(e=>{this._triggerElement.addEventListener(e,this,jS)})})}_removeTriggerEvents(){this._triggerElement&&(CO.forEach(i=>{this._triggerElement.removeEventListener(i,this,jS)}),this._pointerUpEventsRegistered&&MO.forEach(i=>{this._triggerElement.removeEventListener(i,this,jS)}))}}const SO=new tt("mat-ripple-global-options");let Uu=(()=>{class t{constructor(e,n,r,s,u){this._elementRef=e,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new DO(this,n,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(Ki),W(ys),W(SO,8),W(Ia,8))},t.\u0275dir=Xe({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,n){2&e&&bn("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),t})(),Fd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[yi],yi]}),t})(),EO=(()=>{class t{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return t.\u0275fac=function(e){return new(e||t)(W(Ia,8))},t.\u0275cmp=wi({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,n){2&e&&bn("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,n){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),t})(),US=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[yi]]}),t})();const TO=new tt("MAT_OPTION_PARENT_COMPONENT"),kO=new tt("MatOptgroup");let bH=0;class AO{constructor(i,e=!1){this.source=i,this.isUserInput=e}}let xH=(()=>{class t{constructor(e,n,r,s){this._element=e,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+bH++,this.onSelectionChange=new Ht,this._stateChanges=new St}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=si(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!zs(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new AO(this,e))}}return t.\u0275fac=function(e){ml()},t.\u0275dir=Xe({type:t,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),t})(),fb=(()=>{class t extends xH{constructor(e,n,r,s){super(e,n,r,s)}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(Jn),W(TO,8),W(kO,8))},t.\u0275cmp=wi({type:t,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,n){1&e&&Dt("click",function(){return n._selectViaInteraction()})("keydown",function(s){return n._handleKeydown(s)}),2&e&&(Ya("id",n.id),Ti("tabindex",n._getTabIndex())("aria-selected",n._getAriaSelected())("aria-disabled",n.disabled.toString()),bn("mat-selected",n.selected)("mat-option-multiple",n.multiple)("mat-active",n.active)("mat-option-disabled",n.disabled))},exportAs:["matOption"],features:[At],ngContentSelectors:rH,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,n){1&e&&(Qo(),Pe(0,iH,1,2,"mat-pseudo-checkbox",0),H(1,"span",1),gr(2),U(),Pe(3,nH,2,1,"span",2),bt(4,"div",3)),2&e&&(le("ngIf",n.multiple),q(3),le("ngIf",n.group&&n.group._inert),q(1),le("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},dependencies:[EO,Gl,Uu],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),t})();function HS(t,i,e){if(e.length){let n=i.toArray(),r=e.toArray(),s=0;for(let u=0;u<t+1;u++)n[u].group&&n[u].group===r[s]&&s++;return s}return 0}let Fw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[Fd,gs,yi,US]]}),t})();const wH=["mat-button",""],CH=["*"],DH=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],SH=ju(Am(Nh(class{constructor(t){this._elementRef=t}})));let ef=(()=>{class t extends SH{constructor(e,n,r){super(e),this._focusMonitor=n,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of DH)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,n){e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(n=>this._getHostElement().hasAttribute(n))}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(Od),W(Ia,8))},t.\u0275cmp=wi({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,n){if(1&e&&kn(Uu,5),2&e){let r;$t(r=Gt())&&(n.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,n){2&e&&(Ti("disabled",n.disabled||null),bn("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[At],attrs:wH,ngContentSelectors:CH,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,n){1&e&&(Qo(),H(0,"span",0),gr(1),U(),bt(2,"span",1)(3,"span",2)),2&e&&(q(2),bn("mat-button-ripple-round",n.isRoundButton||n.isIconButton),le("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},dependencies:[Uu],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),mb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[Fd,yi],yi]}),t})();const EH=["*",[["mat-card-footer"]]],TH=["*","mat-card-footer"];let gb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xe({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),_b=(()=>{class t{constructor(e){this._animationMode=e}}return t.\u0275fac=function(e){return new(e||t)(W(Ia,8))},t.\u0275cmp=wi({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,n){2&e&&bn("_mat-animation-noopable","NoopAnimations"===n._animationMode)},exportAs:["matCard"],ngContentSelectors:TH,decls:2,vars:0,template:function(e,n){1&e&&(Qo(EH),gr(0),gr(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),kH=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[yi],yi]}),t})();const AH=["addListener","removeListener"],IH=["addEventListener","removeEventListener"],RH=["on","off"];function Pm(t,i,e,n){if(Oe(e)&&(n=e,e=void 0),n)return Pm(t,i,e).pipe(gD(n));const[r,s]=function FH(t){return Oe(t.addEventListener)&&Oe(t.removeEventListener)}(t)?IH.map(u=>_=>t[u](i,_,e)):function PH(t){return Oe(t.addListener)&&Oe(t.removeListener)}(t)?AH.map(RO(t,i)):function OH(t){return Oe(t.on)&&Oe(t.off)}(t)?RH.map(RO(t,i)):[];if(!r&&ic(t))return Ct(u=>Pm(u,i,e))(j(t));if(!r)throw new TypeError("Invalid event target");return new $i(u=>{const _=(...b)=>u.next(1<b.length?b:b[0]);return r(_),()=>s(_)})}function RO(t,i){return e=>n=>t[e](i,n)}const LH=["connectionContainer"],BH=["inputContainer"],NH=["label"];function zH(t,i){1&t&&(Wa(0),H(1,"div",14),bt(2,"div",15)(3,"div",16)(4,"div",17),U(),H(5,"div",18),bt(6,"div",15)(7,"div",16)(8,"div",17),U(),Za())}function VH(t,i){if(1&t){const e=Tn();H(0,"div",19),Dt("cdkObserveContent",function(){return Jt(e),pi(Me().updateOutlineGap())}),gr(1,1),U()}2&t&&le("cdkObserveContentDisabled","outline"!=Me().appearance)}function jH(t,i){if(1&t&&(Wa(0),gr(1,2),H(2,"span"),ge(3),U(),Za()),2&t){const e=Me(2);q(3),Lt(e._control.placeholder)}}function UH(t,i){1&t&&gr(0,3,["*ngSwitchCase","true"])}function HH(t,i){1&t&&(H(0,"span",23),ge(1," *"),U())}function $H(t,i){if(1&t){const e=Tn();H(0,"label",20,21),Dt("cdkObserveContent",function(){return Jt(e),pi(Me().updateOutlineGap())}),Pe(2,jH,4,1,"ng-container",12),Pe(3,UH,1,0,"ng-content",12),Pe(4,HH,2,0,"span",22),U()}if(2&t){const e=Me();bn("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),le("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),Ti("for",e._control.id)("aria-owns",e._control.id),q(2),le("ngSwitchCase",!1),q(1),le("ngSwitchCase",!0),q(1),le("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function GH(t,i){1&t&&(H(0,"div",24),gr(1,4),U())}function qH(t,i){if(1&t&&(H(0,"div",25),bt(1,"span",26),U()),2&t){const e=Me();q(1),bn("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function WH(t,i){1&t&&(H(0,"div"),gr(1,5),U()),2&t&&le("@transitionMessages",Me()._subscriptAnimationState)}function ZH(t,i){if(1&t&&(H(0,"div",30),ge(1),U()),2&t){const e=Me(2);le("id",e._hintLabelId),q(1),Lt(e.hintLabel)}}function YH(t,i){if(1&t&&(H(0,"div",27),Pe(1,ZH,2,2,"div",28),gr(2,6),bt(3,"div",29),gr(4,7),U()),2&t){const e=Me();le("@transitionMessages",e._subscriptAnimationState),q(1),le("ngIf",e.hintLabel)}}const XH=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],KH=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],QH=new tt("MatError"),JH={transitionMessages:_o("transitionMessages",[Cn("enter",ii({opacity:1,transform:"translateY(0%)"})),Vn("void => enter",[ii({opacity:0,transform:"translateY(-5px)"}),Kn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let yb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xe({type:t}),t})(),e$=0;const PO=new tt("MatHint");let $S=(()=>{class t{constructor(){this.align="start",this.id="mat-hint-"+e$++}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xe({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:function(e,n){2&e&&(Ti("id",n.id)("align",null),bn("mat-form-field-hint-end","end"===n.align))},inputs:{align:"align",id:"id"},features:[di([{provide:PO,useExisting:t}])]}),t})(),P_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xe({type:t,selectors:[["mat-label"]]}),t})(),t$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xe({type:t,selectors:[["mat-placeholder"]]}),t})();const i$=new tt("MatPrefix"),OO=new tt("MatSuffix");let GS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xe({type:t,selectors:[["","matSuffix",""]],features:[di([{provide:OO,useExisting:t}])]}),t})(),FO=0;const r$=ju(class{constructor(t){this._elementRef=t}},"primary"),o$=new tt("MAT_FORM_FIELD_DEFAULT_OPTIONS"),vb=new tt("MatFormField");let bb=(()=>{class t extends r${constructor(e,n,r,s,u,_,b){super(e),this._changeDetectorRef=n,this._dir=r,this._defaults=s,this._platform=u,this._ngZone=_,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new St,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+FO++,this._labelId="mat-form-field-label-"+FO++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==b,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const n=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&n!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=si(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Bs(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(wn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(wn(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),wt(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Bs(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Bs(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(wn(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const n=this._control?this._control.ngControl:null;return n&&n[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Pm(this._label.nativeElement,"transitionend").pipe(jr(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,n=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const A=n.querySelectorAll(`${r}, ${s}`);for(let B=0;B<A.length;B++)A[B].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,_=0;const b=n.querySelectorAll(r),S=n.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const A=n.getBoundingClientRect();if(0===A.width&&0===A.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const B=this._getStartEnd(A),X=e.children,re=this._getStartEnd(X[0].getBoundingClientRect());let _e=0;for(let Le=0;Le<X.length;Le++)_e+=X[Le].offsetWidth;u=Math.abs(re-B)-5,_=_e>0?.75*_e+10:0}for(let A=0;A<b.length;A++)b[A].style.width=`${u}px`;for(let A=0;A<S.length;A++)S[A].style.width=`${_}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(Jn),W(Ks,8),W(o$,8),W(ys),W(Ki),W(Ia,8))},t.\u0275cmp=wi({type:t,selectors:[["mat-form-field"]],contentQueries:function(e,n,r){if(1&e&&(An(r,yb,5),An(r,yb,7),An(r,P_,5),An(r,P_,7),An(r,t$,5),An(r,QH,5),An(r,PO,5),An(r,i$,5),An(r,OO,5)),2&e){let s;$t(s=Gt())&&(n._controlNonStatic=s.first),$t(s=Gt())&&(n._controlStatic=s.first),$t(s=Gt())&&(n._labelChildNonStatic=s.first),$t(s=Gt())&&(n._labelChildStatic=s.first),$t(s=Gt())&&(n._placeholderChild=s.first),$t(s=Gt())&&(n._errorChildren=s),$t(s=Gt())&&(n._hintChildren=s),$t(s=Gt())&&(n._prefixChildren=s),$t(s=Gt())&&(n._suffixChildren=s)}},viewQuery:function(e,n){if(1&e&&(kn(LH,7),kn(BH,5),kn(NH,5)),2&e){let r;$t(r=Gt())&&(n._connectionContainerRef=r.first),$t(r=Gt())&&(n._inputContainerRef=r.first),$t(r=Gt())&&(n._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,n){2&e&&bn("mat-form-field-appearance-standard","standard"==n.appearance)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-appearance-legacy","legacy"==n.appearance)("mat-form-field-invalid",n._control.errorState)("mat-form-field-can-float",n._canLabelFloat())("mat-form-field-should-float",n._shouldLabelFloat())("mat-form-field-has-label",n._hasFloatingLabel())("mat-form-field-hide-placeholder",n._hideControlPlaceholder())("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-focused",n._control.focused)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))("_mat-animation-noopable",!n._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[di([{provide:vb,useExisting:t}]),At],ngContentSelectors:KH,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,n){1&e&&(Qo(XH),H(0,"div",0)(1,"div",1,2),Dt("click",function(s){return n._control.onContainerClick&&n._control.onContainerClick(s)}),Pe(3,zH,9,0,"ng-container",3),Pe(4,VH,2,1,"div",4),H(5,"div",5,6),gr(7),H(8,"span",7),Pe(9,$H,5,16,"label",8),U()(),Pe(10,GH,2,0,"div",9),U(),Pe(11,qH,2,4,"div",10),H(12,"div",11),Pe(13,WH,2,1,"div",12),Pe(14,YH,5,2,"div",13),U()()),2&e&&(q(3),le("ngIf","outline"==n.appearance),q(1),le("ngIf",n._prefixChildren.length),q(5),le("ngIf",n._hasFloatingLabel()),q(1),le("ngIf",n._suffixChildren.length),q(1),le("ngIf","outline"!=n.appearance),q(1),le("ngSwitch",n._getDisplayedMessages()),q(1),le("ngSwitchCase","error"),q(1),le("ngSwitchCase","hint"))},dependencies:[Gl,IS,Vc,Bu],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[JH.transitionMessages]},changeDetection:0}),t})(),qS=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[gs,yi,ub],yi]}),t})();const BO=Rd({passive:!0});let s$=(()=>{class t{constructor(e,n){this._platform=e,this._ngZone=n,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return ti;const n=ts(e),r=this._monitoredElements.get(n);if(r)return r.subject;const s=new St,u="cdk-text-field-autofilled",_=b=>{"cdk-text-field-autofill-start"!==b.animationName||n.classList.contains(u)?"cdk-text-field-autofill-end"===b.animationName&&n.classList.contains(u)&&(n.classList.remove(u),this._ngZone.run(()=>s.next({target:b.target,isAutofilled:!1}))):(n.classList.add(u),this._ngZone.run(()=>s.next({target:b.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",_,BO),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",_,BO)}}),s}stopMonitoring(e){const n=ts(e),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((e,n)=>this.stopMonitoring(n))}}return t.\u0275fac=function(e){return new(e||t)($e(ys),$e(Ki))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),NO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})();const zO=new tt("MAT_INPUT_VALUE_ACCESSOR"),a$=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let l$=0;const c$=zS(class{constructor(t,i,e,n){this._defaultErrorStateMatcher=t,this._parentForm=i,this._parentFormGroup=e,this.ngControl=n}});let Lw=(()=>{class t extends c${constructor(e,n,r,s,u,_,b,S,A,B){super(_,s,u,r),this._elementRef=e,this._platform=n,this._autofillMonitor=S,this._formField=B,this._uid="mat-input-"+l$++,this.focused=!1,this.stateChanges=new St,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(_e=>tO().has(_e)),this._iOSKeyupListener=_e=>{const Le=_e.target;!Le.value&&0===Le.selectionStart&&0===Le.selectionEnd&&(Le.setSelectionRange(1,1),Le.setSelectionRange(0,0))};const X=this._elementRef.nativeElement,re=X.nodeName.toLowerCase();this._inputValueAccessor=b||X,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&A.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===re,this._isTextarea="textarea"===re,this._isInFormField=!!B,this._isNativeSelect&&(this.controlType=X.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=si(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Oa.required)??!1}set required(e){this._required=si(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&tO().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=si(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const e=this._formField?._hideControlPlaceholder?.()?null:this.placeholder;if(e!==this._previousPlaceholder){const n=this._elementRef.nativeElement;this._previousPlaceholder=e,e?n.setAttribute("placeholder",e):n.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){a$.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,n=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(ys),W(Ad,10),W(C_,8),W(zu,8),W(Jp),W(zO,10),W(s$),W(Ki),W(vb,8))},t.\u0275dir=Xe({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,n){1&e&&Dt("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&e&&(Ya("disabled",n.disabled)("required",n.required),Ti("id",n.id)("data-placeholder",n.placeholder)("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required),bn("mat-input-server",n._isServer)("mat-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[di([{provide:yb,useExisting:t}]),At,R]}),t})(),d$=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[Jp],imports:[[NO,qS,yi],NO,qS]}),t})(),VO=(()=>{class t{constructor(e,n,r,s){this._formBuilder=e,this.loginService=n,this.router=r,this.spinner=s,this.userValid=!1,this.datosFormGroup=this._formBuilder.group({loginFormControl:["",[Oa.required]],passFormControl:["",[Oa.required]]})}ngOnInit(){}iniciarSesion(e){var n=this;return Wv(function*(){n.spinner.show(),n.loginService.login({username:e.loginFormControl,password:e.passFormControl}).subscribe(s=>{console.log("el token es",s),localStorage.setItem("token",s.accessToken),localStorage.setItem("role",s.roles[0]),n.loginService.role=s.roles[0],n.loginService.getUser({login:s.username}).subscribe(_=>{localStorage.setItem("idUser",_.idUsuario),"ROLE_UMG_BC_AGRICULTOR"===s.roles[0]?n.router.navigate(["agricultor-main"]):"ROLE_UMG_BC_BENEFICIO"===s.roles[0]?n.router.navigate(["beneficio-main"]):"ROLE_UMG_BC_PESO_CABAL"===s.roles[0]&&n.router.navigate(["peso-cabal-main"])}),n.spinner.hide()},s=>{n.spinner.hide(),Ur().fire("Usuario incorrecto","El usuario y/o contrase\xf1a proporcionados son incorrectos, por favor validar","error")})})()}}return t.\u0275fac=function(e){return new(e||t)(W(B8),W(D_),W(Ho),W(T_))},t.\u0275cmp=wi({type:t,selectors:[["app-login"]],decls:19,vars:2,consts:[[1,"card-body"],[1,"margenArriba"],[1,"titulo"],[1,"m-0","row","justify-content-center"],[3,"formGroup"],[1,"col-auto","text-center"],["matInput","","placeholder","","formControlName","loginFormControl","autocomplete","off"],["matInput","","type","password","placeholder","","formControlName","passFormControl"],["mat-raised-button","","type","button",1,"botones","margenBotones",3,"disabled","click"]],template:function(e,n){1&e&&(H(0,"div",0)(1,"mat-card",1)(2,"mat-card-title",2),ge(3,"Bienvenido al Sistema Beneficio del Cafe"),U(),H(4,"div",3)(5,"form",4)(6,"div",5)(7,"mat-form-field")(8,"mat-label"),ge(9,"Nombre de Usuario"),U(),bt(10,"input",6),U()(),H(11,"div",5)(12,"mat-form-field")(13,"mat-label"),ge(14,"Contrase\xf1a"),U(),bt(15,"input",7),U()(),H(16,"div",5)(17,"button",8),Dt("click",function(){return n.iniciarSesion(n.datosFormGroup.value)}),ge(18,"Login"),U()()()()()()),2&e&&(q(5),le("formGroup",n.datosFormGroup),q(12),le("disabled",n.datosFormGroup.invalid))},dependencies:[ef,_b,gb,bb,P_,Lw,eb,xm,Zv,Yv,zu,M_],styles:[".titulo[_ngcontent-%COMP%]{text-align:center;background:#335930;color:#fff;height:40px;display:flex;justify-content:center;align-content:center;flex-direction:column;margin:3%}.margenArriba[_ngcontent-%COMP%]{margin:3%;background-color:#d1e8cf}.tamanio[_ngcontent-%COMP%]{width:100%}.tamanioTextArea[_ngcontent-%COMP%]{height:100px}.botones[_ngcontent-%COMP%]{margin-left:2%;color:#fff;background-color:#335930;outline:none}.margenBotones[_ngcontent-%COMP%]{margin-left:2%}"]}),t})();const xb={schedule(t){let i=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=xb;n&&(i=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=i(s=>{e=void 0,t(s)});return new ce(()=>e?.(r))},requestAnimationFrame(...t){const{delegate:i}=xb;return(i?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:i}=xb;return(i?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0},jO=new class h$ extends TS{flush(i){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;i=i||n.shift();do{if(r=i.execute(i.state,i.delay))break}while((i=n[0])&&i.id===e&&n.shift());if(this._active=!1,r){for(;(i=n[0])&&i.id===e&&n.shift();)i.unsubscribe();throw r}}}(class u$ extends ES{constructor(i,e){super(i,e),this.scheduler=i,this.work=e}requestAsyncId(i,e,n=0){return null!==n&&n>0?super.requestAsyncId(i,e,n):(i.actions.push(this),i._scheduled||(i._scheduled=xb.requestAnimationFrame(()=>i.flush(void 0))))}recycleAsyncId(i,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(i,e,n);const{actions:s}=i;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(xb.cancelAnimationFrame(e),i._scheduled=void 0)}});let WS,p$=1;const Bw={};function UO(t){return t in Bw&&(delete Bw[t],!0)}const f$={setImmediate(t){const i=p$++;return Bw[i]=!0,WS||(WS=Promise.resolve()),WS.then(()=>UO(i)&&t()),i},clearImmediate(t){UO(t)}},{setImmediate:m$,clearImmediate:g$}=f$,Nw={setImmediate(...t){const{delegate:i}=Nw;return(i?.setImmediate||m$)(...t)},clearImmediate(t){const{delegate:i}=Nw;return(i?.clearImmediate||g$)(t)},delegate:void 0};new class y$ extends TS{flush(i){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;i=i||n.shift();do{if(r=i.execute(i.state,i.delay))break}while((i=n[0])&&i.id===e&&n.shift());if(this._active=!1,r){for(;(i=n[0])&&i.id===e&&n.shift();)i.unsubscribe();throw r}}}(class _$ extends ES{constructor(i,e){super(i,e),this.scheduler=i,this.work=e}requestAsyncId(i,e,n=0){return null!==n&&n>0?super.requestAsyncId(i,e,n):(i.actions.push(this),i._scheduled||(i._scheduled=Nw.setImmediate(i.flush.bind(i,void 0))))}recycleAsyncId(i,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(i,e,n);const{actions:s}=i;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(Nw.clearImmediate(e),i._scheduled=void 0)}});function ZS(t=0,i,e=C6){let n=-1;return null!=i&&(_i(i)?e=i:n=i),new $i(r=>{let s=function x$(t){return t instanceof Date&&!isNaN(t)}(t)?+t-e.now():t;s<0&&(s=0);let u=0;return e.schedule(function(){r.closed||(r.next(u++),0<=n?this.schedule(void 0,n):r.complete())},s)})}function HO(t,i=db){return function b$(t){return Pn((i,e)=>{let n=!1,r=null,s=null,u=!1;const _=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const S=r;r=null,e.next(S)}u&&e.complete()},b=()=>{s=null,u&&e.complete()};i.subscribe(Qi(e,S=>{n=!0,r=S,s||j(t(S)).subscribe(s=Qi(e,_,b))},()=>{u=!0,(!n||!s||s.closed)&&e.complete()}))})}(()=>ZS(t,i))}let $O=(()=>{class t{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new St,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new $i(n=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(HO(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ui()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(To(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=ts(n),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Pm(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)($e(Ki),$e(ys),$e(Zi,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Om=(()=>{class t{constructor(e,n,r){this._platform=e,this._change=new St,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(HO(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)($e(ys),$e(Ki),$e(Zi,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Hu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})(),zw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[R_,Hu],R_,Hu]}),t})();class YS{attach(i){return this._attachedHost=i,i.attach(this)}detach(){let i=this._attachedHost;null!=i&&(this._attachedHost=null,i.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(i){this._attachedHost=i}}class O_ extends YS{constructor(i,e,n,r){super(),this.component=i,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class wb extends YS{constructor(i,e,n){super(),this.templateRef=i,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(i,e=this.context){return this.context=e,super.attach(i)}detach(){return this.context=void 0,super.detach()}}class M$ extends YS{constructor(i){super(),this.element=i instanceof Ci?i.nativeElement:i}}class XS{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(i){return i instanceof O_?(this._attachedPortal=i,this.attachComponentPortal(i)):i instanceof wb?(this._attachedPortal=i,this.attachTemplatePortal(i)):this.attachDomPortal&&i instanceof M$?(this._attachedPortal=i,this.attachDomPortal(i)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(i){this._disposeFn=i}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class D$ extends XS{constructor(i,e,n,r,s){super(),this.outletElement=i,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=u=>{const _=u.element,b=this._document.createComment("dom-portal");_.parentNode.insertBefore(b,_),this.outletElement.appendChild(_),this._attachedPortal=u,super.setDisposeFn(()=>{b.parentNode&&b.parentNode.replaceChild(_,b)})},this._document=s}attachComponentPortal(i){const n=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component);let r;return i.viewContainerRef?(r=i.viewContainerRef.createComponent(n,i.viewContainerRef.length,i.injector||i.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=n.create(i.injector||this._defaultInjector||no.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=i,r}attachTemplatePortal(i){let e=i.viewContainerRef,n=e.createEmbeddedView(i.templateRef,i.context);return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=i,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(i){return i.hostView.rootNodes[0]}}let Cb=(()=>{class t extends XS{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new Ht,this.attachDomPortal=s=>{const u=s.element,_=this._document.createComment("dom-portal");s.setAttachedHost(this),u.parentNode.insertBefore(_,u),this._getRootNode().appendChild(u),this._attachedPortal=s,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(u,_)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),u=n.createComponent(s,n.length,e.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(u.hostView.rootNodes[0]),super.setDisposeFn(()=>u.destroy()),this._attachedPortal=e,this._attachedRef=u,this.attached.emit(u),u}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return t.\u0275fac=function(e){return new(e||t)(W(ph),W(go),W(Zi))},t.\u0275dir=Xe({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[At]}),t})(),zh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})();const GO=u6();class S${constructor(i,e){this._viewportRuler=i,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const i=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=i.style.left||"",this._previousHTMLStyles.top=i.style.top||"",i.style.left=vs(-this._previousScrollPosition.left),i.style.top=vs(-this._previousScrollPosition.top),i.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const i=this._document.documentElement,n=i.style,r=this._document.body.style,s=n.scrollBehavior||"",u=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,i.classList.remove("cdk-global-scrollblock"),GO&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),GO&&(n.scrollBehavior=s,r.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class E${constructor(i,e,n,r){this._scrollDispatcher=i,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(i){this._overlayRef=i}enable(){if(this._scrollSubscription)return;const i=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=i.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=i.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class qO{enable(){}disable(){}attach(){}}function KS(t,i){return i.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function WO(t,i){return i.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class T${constructor(i,e,n,r){this._scrollDispatcher=i,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(i){this._overlayRef=i}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();KS(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let k$=(()=>{class t{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new qO,this.close=u=>new E$(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new S$(this._viewportRuler,this._document),this.reposition=u=>new T$(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=s}}return t.\u0275fac=function(e){return new(e||t)($e($O),$e(Om),$e(Ki),$e(Zi))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Mb{constructor(i){if(this.scrollStrategy=new qO,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,i){const e=Object.keys(i);for(const n of e)void 0!==i[n]&&(this[n]=i[n])}}}class A${constructor(i,e){this.connectionPair=i,this.scrollableViewProperties=e}}let ZO=(()=>{class t{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)($e(Zi))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),I$=(()=>{class t extends ZO{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let u=s.length-1;u>-1;u--)if(s[u]._keydownEvents.observers.length>0){const _=s[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>_.next(r)):_.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)($e(Zi),$e(Ki,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),R$=(()=>{class t extends ZO{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Uc(s)},this._clickListener=s=>{const u=Uc(s),_="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const b=this._attachedOverlays.slice();for(let S=b.length-1;S>-1;S--){const A=b[S];if(A._outsidePointerEvents.observers.length<1||!A.hasAttached())continue;if(A.overlayElement.contains(u)||A.overlayElement.contains(_))break;const B=A._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>B.next(s)):B.next(s)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return t.\u0275fac=function(e){return new(e||t)($e(Zi),$e(ys),$e(Ki,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),QS=(()=>{class t{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||CS()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(e),CS()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return t.\u0275fac=function(e){return new(e||t)($e(Zi),$e(ys))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class P${constructor(i,e,n,r,s,u,_,b,S){this._portalOutlet=i,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=u,this._document=_,this._location=b,this._outsideClickDispatcher=S,this._backdropElement=null,this._backdropClick=new St,this._attachments=new St,this._detachments=new St,this._locationChanges=ce.EMPTY,this._backdropClickHandler=A=>this._backdropClick.next(A),this._backdropTransitionendHandler=A=>{this._disposeBackdrop(A.target)},this._keydownEvents=new St,this._outsidePointerEvents=new St,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(i){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(i);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(jr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const i=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),i}dispose(){const i=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,i&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(i){i!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=i,this.hasAttached()&&(i.attach(this),this.updatePosition()))}updateSize(i){this._config={...this._config,...i},this._updateElementSize()}setDirection(i){this._config={...this._config,direction:i},this._updateElementDirection()}addPanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!0)}removePanelClass(i){this._pane&&this._toggleClasses(this._pane,i,!1)}getDirection(){const i=this._config.direction;return i?"string"==typeof i?i:i.value:"ltr"}updateScrollStrategy(i){i!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=i,this.hasAttached()&&(i.attach(this),i.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const i=this._pane.style;i.width=vs(this._config.width),i.height=vs(this._config.height),i.minWidth=vs(this._config.minWidth),i.minHeight=vs(this._config.minHeight),i.maxWidth=vs(this._config.maxWidth),i.maxHeight=vs(this._config.maxHeight)}_togglePointerEvents(i){this._pane.style.pointerEvents=i?"":"none"}_attachBackdrop(){const i="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(i)})}):this._backdropElement.classList.add(i)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const i=this._backdropElement;!i||(i.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{i.addEventListener("transitionend",this._backdropTransitionendHandler)}),i.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(i)},500)))}_toggleClasses(i,e,n){const r=Aw(e||[]).filter(s=>!!s);r.length&&(n?i.classList.add(...r):i.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const i=this._ngZone.onStable.pipe(wn(wt(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),i.unsubscribe())})})}_disposeScrollStrategy(){const i=this._scrollStrategy;i&&(i.disable(),i.detach&&i.detach())}_disposeBackdrop(i){i&&(i.removeEventListener("click",this._backdropClickHandler),i.removeEventListener("transitionend",this._backdropTransitionendHandler),i.remove(),this._backdropElement===i&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const YO="cdk-overlay-connected-position-bounding-box",O$=/([A-Za-z%]+)$/;class XO{constructor(i,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new St,this._resizeSubscription=ce.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(i)}get positions(){return this._preferredPositions}attach(i){this._validatePositions(),i.hostElement.classList.add(YO),this._overlayRef=i,this._boundingBox=i.hostElement,this._pane=i.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const i=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let u;for(let _ of this._preferredPositions){let b=this._getOriginPoint(i,r,_),S=this._getOverlayPoint(b,e,_),A=this._getOverlayFit(S,e,n,_);if(A.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(_,b);this._canFitWithFlexibleDimensions(A,S,n)?s.push({position:_,origin:b,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(b,_)}):(!u||u.overlayFit.visibleArea<A.visibleArea)&&(u={overlayFit:A,overlayPoint:S,originPoint:b,position:_,overlayRect:e})}if(s.length){let _=null,b=-1;for(const S of s){const A=S.boundingBoxRect.width*S.boundingBoxRect.height*(S.position.weight||1);A>b&&(b=A,_=S)}return this._isPushed=!1,void this._applyPosition(_.position,_.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Fm(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(YO),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const i=this._lastPosition;if(i){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,i);this._applyPosition(i,e)}else this.apply()}withScrollableContainers(i){return this._scrollables=i,this}withPositions(i){return this._preferredPositions=i,-1===i.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(i){return this._viewportMargin=i,this}withFlexibleDimensions(i=!0){return this._hasFlexibleDimensions=i,this}withGrowAfterOpen(i=!0){return this._growAfterOpen=i,this}withPush(i=!0){return this._canPush=i,this}withLockedPosition(i=!0){return this._positionLocked=i,this}setOrigin(i){return this._origin=i,this}withDefaultOffsetX(i){return this._offsetX=i,this}withDefaultOffsetY(i){return this._offsetY=i,this}withTransformOriginOn(i){return this._transformOriginSelector=i,this}_getOriginPoint(i,e,n){let r,s;if("center"==n.originX)r=i.left+i.width/2;else{const u=this._isRtl()?i.right:i.left,_=this._isRtl()?i.left:i.right;r="start"==n.originX?u:_}return e.left<0&&(r-=e.left),s="center"==n.originY?i.top+i.height/2:"top"==n.originY?i.top:i.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(i,e,n){let r,s;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:i.x+r,y:i.y+s}}_getOverlayFit(i,e,n,r){const s=QO(e);let{x:u,y:_}=i,b=this._getOffset(r,"x"),S=this._getOffset(r,"y");b&&(u+=b),S&&(_+=S);let X=0-_,re=_+s.height-n.height,_e=this._subtractOverflows(s.width,0-u,u+s.width-n.width),Le=this._subtractOverflows(s.height,X,re),Ue=_e*Le;return{visibleArea:Ue,isCompletelyWithinViewport:s.width*s.height===Ue,fitsInViewportVertically:Le===s.height,fitsInViewportHorizontally:_e==s.width}}_canFitWithFlexibleDimensions(i,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,s=n.right-e.x,u=KO(this._overlayRef.getConfig().minHeight),_=KO(this._overlayRef.getConfig().minWidth),S=i.fitsInViewportHorizontally||null!=_&&_<=s;return(i.fitsInViewportVertically||null!=u&&u<=r)&&S}return!1}_pushOverlayOnScreen(i,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:i.x+this._previousPushAmount.x,y:i.y+this._previousPushAmount.y};const r=QO(e),s=this._viewportRect,u=Math.max(i.x+r.width-s.width,0),_=Math.max(i.y+r.height-s.height,0),b=Math.max(s.top-n.top-i.y,0),S=Math.max(s.left-n.left-i.x,0);let A=0,B=0;return A=r.width<=s.width?S||-u:i.x<this._viewportMargin?s.left-n.left-i.x:0,B=r.height<=s.height?b||-_:i.y<this._viewportMargin?s.top-n.top-i.y:0,this._previousPushAmount={x:A,y:B},{x:i.x+A,y:i.y+B}}_applyPosition(i,e){if(this._setTransformOrigin(i),this._setOverlayElementStyles(e,i),this._setBoundingBoxStyles(e,i),i.panelClass&&this._addPanelClasses(i.panelClass),this._lastPosition=i,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new A$(i,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(i){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=i.overlayY;n="center"===i.overlayX?"center":this._isRtl()?"start"===i.overlayX?"right":"left":"start"===i.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(i,e){const n=this._viewportRect,r=this._isRtl();let s,u,_,A,B,X;if("top"===e.overlayY)u=i.y,s=n.height-u+this._viewportMargin;else if("bottom"===e.overlayY)_=n.height-i.y+2*this._viewportMargin,s=n.height-_+this._viewportMargin;else{const re=Math.min(n.bottom-i.y+n.top,i.y),_e=this._lastBoundingBoxSize.height;s=2*re,u=i.y-re,s>_e&&!this._isInitialRender&&!this._growAfterOpen&&(u=i.y-_e/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)X=n.width-i.x+this._viewportMargin,A=i.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)B=i.x,A=n.right-i.x;else{const re=Math.min(n.right-i.x+n.left,i.x),_e=this._lastBoundingBoxSize.width;A=2*re,B=i.x-re,A>_e&&!this._isInitialRender&&!this._growAfterOpen&&(B=i.x-_e/2)}return{top:u,left:B,bottom:_,right:X,width:A,height:s}}_setBoundingBoxStyles(i,e){const n=this._calculateBoundingBoxRect(i,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;r.height=vs(n.height),r.top=vs(n.top),r.bottom=vs(n.bottom),r.width=vs(n.width),r.left=vs(n.left),r.right=vs(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=vs(s)),u&&(r.maxWidth=vs(u))}this._lastBoundingBoxSize=n,Fm(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Fm(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Fm(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(i,e){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(r){const A=this._viewportRuler.getViewportScrollPosition();Fm(n,this._getExactOverlayY(e,i,A)),Fm(n,this._getExactOverlayX(e,i,A))}else n.position="static";let _="",b=this._getOffset(e,"x"),S=this._getOffset(e,"y");b&&(_+=`translateX(${b}px) `),S&&(_+=`translateY(${S}px)`),n.transform=_.trim(),u.maxHeight&&(r?n.maxHeight=vs(u.maxHeight):s&&(n.maxHeight="")),u.maxWidth&&(r?n.maxWidth=vs(u.maxWidth):s&&(n.maxWidth="")),Fm(this._pane.style,n)}_getExactOverlayY(i,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,i);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===i.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=vs(s.y),r}_getExactOverlayX(i,e,n){let u,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,i);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),u=this._isRtl()?"end"===i.overlayX?"left":"right":"end"===i.overlayX?"right":"left","right"===u?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=vs(s.x),r}_getScrollVisibility(){const i=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:WO(i,n),isOriginOutsideView:KS(i,n),isOverlayClipped:WO(e,n),isOverlayOutsideView:KS(e,n)}}_subtractOverflows(i,...e){return e.reduce((n,r)=>n-Math.max(r,0),i)}_getNarrowedViewportRect(){const i=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+i-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:i-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(i,e){return"x"===e?i.offsetX??this._offsetX:i.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(i){this._pane&&Aw(i).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(i=>{this._pane.classList.remove(i)}),this._appliedPanelClasses=[])}_getOriginRect(){const i=this._origin;if(i instanceof Ci)return i.nativeElement.getBoundingClientRect();if(i instanceof Element)return i.getBoundingClientRect();const e=i.width||0,n=i.height||0;return{top:i.y,bottom:i.y+n,left:i.x,right:i.x+e,height:n,width:e}}}function Fm(t,i){for(let e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}function KO(t){if("number"!=typeof t&&null!=t){const[i,e]=t.split(O$);return e&&"px"!==e?null:parseFloat(i)}return t||null}function QO(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const JO="cdk-global-overlay-wrapper";class F${constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(i){const e=i.getConfig();this._overlayRef=i,this._width&&!e.width&&i.updateSize({width:this._width}),this._height&&!e.height&&i.updateSize({height:this._height}),i.hostElement.classList.add(JO),this._isDisposed=!1}top(i=""){return this._bottomOffset="",this._topOffset=i,this._alignItems="flex-start",this}left(i=""){return this._rightOffset="",this._leftOffset=i,this._justifyContent="flex-start",this}bottom(i=""){return this._topOffset="",this._bottomOffset=i,this._alignItems="flex-end",this}right(i=""){return this._leftOffset="",this._rightOffset=i,this._justifyContent="flex-end",this}width(i=""){return this._overlayRef?this._overlayRef.updateSize({width:i}):this._width=i,this}height(i=""){return this._overlayRef?this._overlayRef.updateSize({height:i}):this._height=i,this}centerHorizontally(i=""){return this.left(i),this._justifyContent="center",this}centerVertically(i=""){return this.top(i),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:u,maxHeight:_}=n,b=!("100%"!==r&&"100vw"!==r||u&&"100%"!==u&&"100vw"!==u),S=!("100%"!==s&&"100vh"!==s||_&&"100%"!==_&&"100vh"!==_);i.position=this._cssPosition,i.marginLeft=b?"0":this._leftOffset,i.marginTop=S?"0":this._topOffset,i.marginBottom=this._bottomOffset,i.marginRight=this._rightOffset,b?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=S?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const i=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(JO),n.justifyContent=n.alignItems=i.marginTop=i.marginBottom=i.marginLeft=i.marginRight=i.position="",this._overlayRef=null,this._isDisposed=!0}}let L$=(()=>{class t{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new F$}flexibleConnectedTo(e){return new XO(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)($e(Om),$e(Zi),$e(ys),$e(QS))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),B$=0,Wl=(()=>{class t{constructor(e,n,r,s,u,_,b,S,A,B,X){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=u,this._injector=_,this._ngZone=b,this._document=S,this._directionality=A,this._location=B,this._outsideClickDispatcher=X}create(e){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),u=new Mb(e);return u.direction=u.direction||this._directionality.value,new P$(s,n,r,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+B$++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(u_)),new D$(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)($e(k$),$e(QS),$e(ph),$e(L$),$e(I$),$e(no),$e(Ki),$e(Zi),$e(Ks),$e(Mv),$e(R$))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();const N$=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],eF=new tt("cdk-connected-overlay-scroll-strategy");let tF=(()=>{class t{constructor(e){this.elementRef=e}}return t.\u0275fac=function(e){return new(e||t)(W(Ci))},t.\u0275dir=Xe({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),t})(),iF=(()=>{class t{constructor(e,n,r,s,u){this._overlay=e,this._dir=u,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=ce.EMPTY,this._attachSubscription=ce.EMPTY,this._detachSubscription=ce.EMPTY,this._positionSubscription=ce.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Ht,this.positionChange=new Ht,this.attach=new Ht,this.detach=new Ht,this.overlayKeydown=new Ht,this.overlayOutsideClick=new Ht,this._templatePortal=new wb(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=si(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=si(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=si(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=si(e)}get push(){return this._push}set push(e){this._push=si(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=N$);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!zs(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new Mb({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof tF?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(M2(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(W(Wl),W(mo),W(go),W(eF),W(Ks,8))},t.\u0275dir=Xe({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[R]}),t})();const V$={provide:eF,deps:[Wl],useFactory:function z$(t){return()=>t.scrollStrategies.reposition()}};let Vh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[Wl,V$],imports:[[R_,zh,zw],zw]}),t})();function Vw(t){return t&&"function"==typeof t.connect}class nF{applyChanges(i,e,n,r,s){i.forEachOperation((u,_,b)=>{let S,A;if(null==u.previousIndex){const B=n(u,_,b);S=e.createEmbeddedView(B.templateRef,B.context,B.index),A=1}else null==b?(e.remove(_),A=3):(S=e.get(_),e.move(S,b),A=2);s&&s({context:S?.context,operation:A,record:u})})}detach(){}}class Db{constructor(i=!1,e,n=!0){this._multiple=i,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new St,e&&e.length&&(i?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...i){this._verifyValueAssignment(i),i.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...i){this._verifyValueAssignment(i),i.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(i){this.isSelected(i)?this.deselect(i):this.select(i)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(i){return this._selection.has(i)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(i){this._multiple&&this.selected&&this._selected.sort(i)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(i){this.isSelected(i)||(this._multiple||this._unmarkAll(),this._selection.add(i),this._emitChanges&&this._selectedToEmit.push(i))}_unmarkSelected(i){this.isSelected(i)&&(this._selection.delete(i),this._emitChanges&&this._deselectedToEmit.push(i))}_unmarkAll(){this.isEmpty()||this._selection.forEach(i=>this._unmarkSelected(i))}_verifyValueAssignment(i){}}const Sb=new tt("_ViewRepeater"),H$=["trigger"],$$=["panel"];function G$(t,i){if(1&t&&(H(0,"span",8),ge(1),U()),2&t){const e=Me();q(1),Lt(e.placeholder)}}function q$(t,i){if(1&t&&(H(0,"span",12),ge(1),U()),2&t){const e=Me(2);q(1),Lt(e.triggerValue)}}function W$(t,i){1&t&&gr(0,0,["*ngSwitchCase","true"])}function Z$(t,i){1&t&&(H(0,"span",9),Pe(1,q$,2,1,"span",10),Pe(2,W$,1,0,"ng-content",11),U()),2&t&&(le("ngSwitch",!!Me().customTrigger),q(2),le("ngSwitchCase",!0))}function Y$(t,i){if(1&t){const e=Tn();H(0,"div",13)(1,"div",14,15),Dt("@transformPanel.done",function(r){return Jt(e),pi(Me()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return Jt(e),pi(Me()._handleKeydown(r))}),gr(3,1),U()()}if(2&t){const e=Me();le("@transformPanelWrap",void 0),q(1),dM("mat-select-panel ",e._getPanelTheme(),""),Zs("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),le("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),Ti("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const X$=[[["mat-select-trigger"]],"*"],K$=["mat-select-trigger","*"],oF={transformPanelWrap:_o("transformPanelWrap",[Vn("* => void",E_("@transformPanel",[S_()],{optional:!0}))]),transformPanel:_o("transformPanel",[Cn("void",ii({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Cn("showing",ii({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Cn("showing-multiple",ii({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Vn("void => *",Kn("120ms cubic-bezier(0, 0, 0.2, 1)")),Vn("* => void",Kn("100ms 25ms linear",ii({opacity:0})))])};let sF=0;const lF=new tt("mat-select-scroll-strategy"),tG=new tt("MAT_SELECT_CONFIG"),iG={provide:lF,deps:[Wl],useFactory:function eG(t){return()=>t.scrollStrategies.reposition()}};class nG{constructor(i,e){this.source=i,this.value=e}}const rG=Nh(Im(Am(zS(class{constructor(t,i,e,n,r){this._elementRef=t,this._defaultErrorStateMatcher=i,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}})))),oG=new tt("MatSelectTrigger");let sG=(()=>{class t extends rG{constructor(e,n,r,s,u,_,b,S,A,B,X,re,_e,Le){super(u,s,b,S,B),this._viewportRuler=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=_,this._parentFormField=A,this._liveAnnouncer=_e,this._defaultOptions=Le,this._panelOpen=!1,this._compareWith=(Ue,it)=>Ue===it,this._uid="mat-select-"+sF++,this._triggerAriaLabelledBy=null,this._destroy=new St,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+sF++,this._panelDoneAnimatingStream=new St,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=Pv(()=>{const Ue=this.options;return Ue?Ue.changes.pipe(Bs(Ue),Pa(()=>wt(...Ue.map(it=>it.onSelectionChange)))):this._ngZone.onStable.pipe(jr(1),Pa(()=>this.optionSelectionChanges))}),this.openedChange=new Ht,this._openedStream=this.openedChange.pipe(To(Ue=>Ue),li(()=>{})),this._closedStream=this.openedChange.pipe(To(Ue=>!Ue),li(()=>{})),this.selectionChange=new Ht,this.valueChange=new Ht,this.ngControl&&(this.ngControl.valueAccessor=this),null!=Le?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=Le.typeaheadDebounceInterval),this._scrollStrategyFactory=re,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(X)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Oa.required)??!1}set required(e){this._required=si(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=si(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=si(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=$o(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Db(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(AS(),wn(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(wn(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(Bs(null),wn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const n=e.keyCode,r=40===n||38===n||37===n||39===n,s=13===n||32===n,u=this._keyManager;if(!u.isTyping()&&s&&!zs(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const _=this.selected;u.onKeydown(e);const b=this.selected;b&&_!==b&&this._liveAnnouncer.announce(b.viewValue,1e4)}}_handleOpenKeydown(e){const n=this._keyManager,r=e.keyCode,s=40===r||38===r,u=n.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(u||13!==r&&32!==r||!n.activeItem||zs(e))if(!u&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const _=this.options.some(b=>!b.disabled&&!b.selected);this.options.forEach(b=>{b.disabled||(_?b.select():b.deselect())})}else{const _=n.activeItemIndex;n.onKeydown(e),this._multiple&&s&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==_&&n.activeItem._selectViaInteraction()}else e.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(jr(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new A6(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(wn(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(wn(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=wt(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(wn(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),wt(...this.options.map(n=>n._stateChanges)).pipe(wn(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,n){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,e):e.indexOf(n)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let n=null;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return t.\u0275fac=function(e){return new(e||t)(W(Om),W(Jn),W(Ki),W(Jp),W(Ci),W(Ks,8),W(C_,8),W(zu,8),W(vb,8),W(Ad,10),Vr("tabindex"),W(lF),W(Y6),W(tG,8))},t.\u0275dir=Xe({type:t,viewQuery:function(e,n){if(1&e&&(kn(H$,5),kn($$,5),kn(iF,5)),2&e){let r;$t(r=Gt())&&(n.trigger=r.first),$t(r=Gt())&&(n.panel=r.first),$t(r=Gt())&&(n._overlayDir=r.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[At,R]}),t})(),Uw=(()=>{class t extends sG{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,n,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*e-n+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(wn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(jr(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const n=HS(e,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===n?0:function IO(t,i,e,n){return t<e?t:t+i>e+n?Math.max(0,t-n+i):e}((e+n)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new nG(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let u;if(this.multiple)u=40;else if(this.disableOptionCentering)u=16;else{let S=this._selectionModel.selected[0]||this.options.first;u=S&&S.group?32:16}r||(u*=-1);const _=0-(e.left+u-(r?s:0)),b=e.right+u-n.width+(r?0:s);_>0?u+=_+8:b>0&&(u-=b+8),this._overlayDir.offsetX=Math.round(u),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,n,r){const s=this._getItemHeight(),u=(s-this._triggerRect.height)/2,_=Math.floor(256/s);let b;return this.disableOptionCentering?0:(b=0===this._scrollTop?e*s:this._scrollTop===r?(e-(this._getItemCount()-_))*s+(s-(this._getItemCount()*s-256)%s):n-s/2,Math.round(-1*b-u))}_checkOverlayWithinViewport(e){const n=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,u=r.height-this._triggerRect.bottom-8,_=Math.abs(this._offsetY),S=Math.min(this._getItemCount()*n,256)-_-this._triggerRect.height;S>u?this._adjustPanelUp(S,u):_>s?this._adjustPanelDown(_,s,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,n){const r=Math.round(e-n);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,n,r){const s=Math.round(e-n);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),n=this._getItemCount(),r=Math.min(n*e,256),u=n*e-r;let _;_=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),_+=HS(_,this.options,this.optionGroups);const b=r/2;this._scrollTop=this._calculateOverlayScroll(_,b,u),this._offsetY=this._calculateOverlayOffsetY(_,b,u),this._checkOverlayWithinViewport(u)}_getOriginBasedOnOption(){const e=this._getItemHeight(),n=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-n+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275cmp=wi({type:t,selectors:[["mat-select"]],contentQueries:function(e,n,r){if(1&e&&(An(r,oG,5),An(r,fb,5),An(r,kO,5)),2&e){let s;$t(s=Gt())&&(n.customTrigger=s.first),$t(s=Gt())&&(n.options=s),$t(s=Gt())&&(n.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,n){1&e&&Dt("keydown",function(s){return n._handleKeydown(s)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&e&&(Ti("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-describedby",n._ariaDescribedby||null)("aria-activedescendant",n._getAriaActiveDescendant()),bn("mat-select-disabled",n.disabled)("mat-select-invalid",n.errorState)("mat-select-required",n.required)("mat-select-empty",n.empty)("mat-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[di([{provide:yb,useExisting:t},{provide:TO,useExisting:t}]),At],ngContentSelectors:K$,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,n){if(1&e&&(Qo(X$),H(0,"div",0,1),Dt("click",function(){return n.toggle()}),H(3,"div",2),Pe(4,G$,2,1,"span",3),Pe(5,Z$,3,2,"span",4),U(),H(6,"div",5),bt(7,"div",6),U()(),Pe(8,Y$,4,14,"ng-template",7),Dt("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&e){const r=Zn(1);Ti("aria-owns",n.panelOpen?n.id+"-panel":null),q(3),le("ngSwitch",n.empty),Ti("id",n._valueId),q(1),le("ngSwitchCase",!0),q(1),le("ngSwitchCase",!1),q(3),le("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayMinWidth",null==n._triggerRect?null:n._triggerRect.width)("cdkConnectedOverlayOffsetY",n._offsetY)}},dependencies:[tF,Vc,Bu,h_,iF,Ev],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[oF.transformPanelWrap,oF.transformPanel]},changeDetection:0}),t})(),cF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[iG],imports:[[gs,Vh,Fw,yi],Hu,qS,Fw,yi]}),t})();const dF=new Set;let L_,aG=(()=>{class t{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):cG}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function lG(t){if(!dF.has(t))try{L_||(L_=document.createElement("style"),L_.setAttribute("type","text/css"),document.head.appendChild(L_)),L_.sheet&&(L_.sheet.insertRule(`@media ${t} {body{ }}`,0),dF.add(t))}catch(i){console.error(i)}}(e),this._matchMedia(e)}}return t.\u0275fac=function(e){return new(e||t)($e(ys))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function cG(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let dG=(()=>{class t{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new St}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return uF(Aw(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=p_(uF(Aw(e)).map(u=>this._registerQuery(u).observable));return s=Rv(s.pipe(jr(1)),s.pipe(nO(1),kS(0))),s.pipe(li(u=>{const _={matches:!1,breakpoints:{}};return u.forEach(({matches:b,query:S})=>{_.matches=_.matches||b,_.breakpoints[S]=b}),_}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),s={observable:new $i(u=>{const _=b=>this._zone.run(()=>u.next(b));return n.addListener(_),()=>{n.removeListener(_)}}).pipe(Bs(n),li(({matches:u})=>({query:e,matches:u})),wn(this._destroySubject)),mql:n};return this._queries.set(e,s),s}}return t.\u0275fac=function(e){return new(e||t)($e(aG),$e(Ki))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function uF(t){return t.map(i=>i.split(",")).reduce((i,e)=>i.concat(e)).map(i=>i.trim())}const hG=["tooltip"],hF="tooltip-panel",pF=Rd({passive:!0}),fF=new tt("mat-tooltip-scroll-strategy"),gG={provide:fF,deps:[Wl],useFactory:function mG(t){return()=>t.scrollStrategies.reposition({scrollThrottle:20})}},_G=new tt("mat-tooltip-default-options",{providedIn:"root",factory:function yG(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let vG=(()=>{class t{constructor(e,n,r,s,u,_,b,S,A,B,X,re){this._overlay=e,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=u,this._platform=_,this._ariaDescriber=b,this._focusMonitor=S,this._dir=B,this._defaultOptions=X,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new St,this._scrollStrategy=A,this._document=re,X&&(X.position&&(this.position=X.position),X.touchGestures&&(this.touchGestures=X.touchGestures)),B.change.pipe(wn(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=si(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=$o(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=$o(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(wn(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{e.removeEventListener(n,r,pF)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const n=this._createOverlay();this._detach(),this._portal=this._portal||new O_(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=n.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(wn(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const e=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),n=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(e);return n.positionChanges.pipe(wn(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:n,panelClass:`${this._cssClassPrefix}-${hF}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(wn(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(wn(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(wn(this._destroyed)).subscribe(r=>{this._isTooltipVisible()&&27===r.keyCode&&!zs(r)&&(r.preventDefault(),r.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const n=e.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n||"below"==n?r={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&e||"right"==n&&!e?r={originX:"start",originY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(r={originX:"end",originY:"center"});const{x:s,y:u}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:u}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n?r={overlayX:"center",overlayY:"bottom"}:"below"==n?r={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&e||"right"==n&&!e?r={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:u}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:u}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(jr(1),wn(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:n}}_updateCurrentPositionClass(e){const{overlayY:n,originX:r,originY:s}=e;let u;if(u="center"===n?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===n&&"top"===s?"above":"below",u!==this._currentPosition){const _=this._overlayRef;if(_){const b=`${this._cssClassPrefix}-${hF}-`;_.removePanelClass(b+this._currentPosition),_.addPanelClass(b+u)}this._currentPosition=u}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",n=>{const r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",n],["touchcancel",n])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,pF)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const n=this._elementRef.nativeElement,r=n.style;("on"===e||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===e||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return t.\u0275fac=function(e){ml()},t.\u0275dir=Xe({type:t,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),t})(),bG=(()=>{class t extends vG{constructor(e,n,r,s,u,_,b,S,A,B,X,re){super(e,n,r,s,u,_,b,S,A,B,X,re),this._tooltipComponent=wG}}return t.\u0275fac=function(e){return new(e||t)(W(Wl),W(Ci),W($O),W(go),W(Ki),W(ys),W(k6),W(Od),W(fF),W(Ks,8),W(_G,8),W(Zi))},t.\u0275dir=Xe({type:t,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[At]}),t})(),xG=(()=>{class t{constructor(e,n){this._changeDetectorRef=e,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new St,this._animationsDisabled="NoopAnimations"===n}show(e){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(e?s:r),n.classList.add(e?r:s),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const u=getComputedStyle(n);("0s"===u.getPropertyValue("animation-duration")||"none"===u.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}}return t.\u0275fac=function(e){return new(e||t)(W(Jn),W(Ia,8))},t.\u0275dir=Xe({type:t}),t})(),wG=(()=>{class t extends xG{constructor(e,n,r){super(e,r),this._breakpointObserver=n,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return t.\u0275fac=function(e){return new(e||t)(W(Jn),W(dG),W(Ia,8))},t.\u0275cmp=wi({type:t,selectors:[["mat-tooltip-component"]],viewQuery:function(e,n){if(1&e&&kn(hG,7),2&e){let r;$t(r=Gt())&&(n._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,n){1&e&&Dt("mouseleave",function(s){return n._handleMouseLeave(s)}),2&e&&Zs("zoom",n.isVisible()?1:null)},features:[At],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(e,n){if(1&e&&(H(0,"div",0,1),Dt("animationend",function(s){return n._handleAnimationEnd(s)}),bM(2,"async"),ge(3),U()),2&e){let r;bn("mat-tooltip-handset",null==(r=xM(2,4,n._isHandset))?null:r.matches),le("ngClass",n.tooltipClass),q(3),Lt(n.message)}},dependencies:[Ev,jI],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}\n"],encapsulation:2,changeDetection:0}),t})(),mF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[gG],imports:[[hb,gs,Vh,yi],yi,Hu]}),t})();function CG(t,i){if(1&t&&(H(0,"mat-option",19),ge(1),U()),2&t){const e=i.$implicit;le("value",e),q(1),Yn(" ",e," ")}}function MG(t,i){if(1&t){const e=Tn();H(0,"mat-form-field",16)(1,"mat-select",17),Dt("selectionChange",function(r){return Jt(e),pi(Me(2)._changePageSize(r.value))}),Pe(2,CG,2,2,"mat-option",18),U()()}if(2&t){const e=Me(2);le("appearance",e._formFieldAppearance)("color",e.color),q(1),le("value",e.pageSize)("disabled",e.disabled)("aria-label",e._intl.itemsPerPageLabel),q(1),le("ngForOf",e._displayedPageSizeOptions)}}function DG(t,i){if(1&t&&(H(0,"div",20),ge(1),U()),2&t){const e=Me(2);q(1),Lt(e.pageSize)}}function SG(t,i){if(1&t&&(H(0,"div",12)(1,"div",13),ge(2),U(),Pe(3,MG,3,6,"mat-form-field",14),Pe(4,DG,2,1,"div",15),U()),2&t){const e=Me();q(2),Yn(" ",e._intl.itemsPerPageLabel," "),q(1),le("ngIf",e._displayedPageSizeOptions.length>1),q(1),le("ngIf",e._displayedPageSizeOptions.length<=1)}}function EG(t,i){if(1&t){const e=Tn();H(0,"button",21),Dt("click",function(){return Jt(e),pi(Me().firstPage())}),As(),H(1,"svg",7),bt(2,"path",22),U()()}if(2&t){const e=Me();le("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),Ti("aria-label",e._intl.firstPageLabel)}}function TG(t,i){if(1&t){const e=Tn();As(),m(),H(0,"button",23),Dt("click",function(){return Jt(e),pi(Me().lastPage())}),As(),H(1,"svg",7),bt(2,"path",24),U()()}if(2&t){const e=Me();le("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),Ti("aria-label",e._intl.lastPageLabel)}}let Hw=(()=>{class t{constructor(){this.changes=new St,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,n,r)=>{if(0==r||0==n)return`0 of ${r}`;const s=e*n;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+n,r):s+n} of ${r}`}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const AG={provide:Hw,deps:[[new la,new ul,Hw]],useFactory:function kG(t){return t||new Hw}},RG=new tt("MAT_PAGINATOR_DEFAULT_OPTIONS"),PG=Am(aH(class{}));let OG=(()=>{class t extends PG{constructor(e,n,r){if(super(),this._intl=e,this._changeDetectorRef=n,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.page=new Ht,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){const{pageSize:s,pageSizeOptions:u,hidePageSize:_,showFirstLastButtons:b}=r;null!=s&&(this._pageSize=s),null!=u&&(this._pageSizeOptions=u),null!=_&&(this._hidePageSize=_),null!=b&&(this._showFirstLastButtons=b)}}get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max($o(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=$o(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max($o(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(n=>$o(n)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=si(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=si(e)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const r=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,n)=>e-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return t.\u0275fac=function(e){ml()},t.\u0275dir=Xe({type:t,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons"},outputs:{page:"page"},features:[At]}),t})(),B_=(()=>{class t extends OG{constructor(e,n,r){super(e,n,r),r&&null!=r.formFieldAppearance&&(this._formFieldAppearance=r.formFieldAppearance)}}return t.\u0275fac=function(e){return new(e||t)(W(Hw),W(Jn),W(RG,8))},t.\u0275cmp=wi({type:t,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[At],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,n){1&e&&(H(0,"div",0)(1,"div",1),Pe(2,SG,5,3,"div",2),H(3,"div",3)(4,"div",4),ge(5),U(),Pe(6,EG,3,5,"button",5),H(7,"button",6),Dt("click",function(){return n.previousPage()}),As(),H(8,"svg",7),bt(9,"path",8),U()(),m(),H(10,"button",9),Dt("click",function(){return n.nextPage()}),As(),H(11,"svg",7),bt(12,"path",10),U()(),Pe(13,TG,3,5,"button",11),U()()()),2&e&&(q(2),le("ngIf",!n.hidePageSize),q(3),Yn(" ",n._intl.getRangeLabel(n.pageIndex,n.pageSize,n.length)," "),q(1),le("ngIf",n.showFirstLastButtons),q(1),le("matTooltip",n._intl.previousPageLabel)("matTooltipDisabled",n._previousButtonsDisabled())("matTooltipPosition","above")("disabled",n._previousButtonsDisabled()),Ti("aria-label",n._intl.previousPageLabel),q(3),le("matTooltip",n._intl.nextPageLabel)("matTooltipDisabled",n._nextButtonsDisabled())("matTooltipPosition","above")("disabled",n._nextButtonsDisabled()),Ti("aria-label",n._intl.nextPageLabel),q(3),le("ngIf",n.showFirstLastButtons))},dependencies:[bb,Uw,fb,ef,Gl,Ph,bG],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}\n"],encapsulation:2,changeDetection:0}),t})(),FG=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[AG],imports:[[gs,mb,cF,mF,yi]]}),t})();const LG=[[["caption"]],[["colgroup"],["col"]]],BG=["caption","colgroup, col"];function eE(t){return class extends t{constructor(...i){super(...i),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(i){const e=this._sticky;this._sticky=si(i),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const i=this._hasStickyChanged;return this._hasStickyChanged=!1,i}resetStickyChanged(){this._hasStickyChanged=!1}}}const N_=new tt("CDK_TABLE");let z_=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(W(mo))},t.\u0275dir=Xe({type:t,selectors:[["","cdkCellDef",""]]}),t})(),V_=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(W(mo))},t.\u0275dir=Xe({type:t,selectors:[["","cdkHeaderCellDef",""]]}),t})(),$w=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(W(mo))},t.\u0275dir=Xe({type:t,selectors:[["","cdkFooterCellDef",""]]}),t})();class jG{}const UG=eE(jG);let jh=(()=>{class t extends UG{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const n=this._stickyEnd;this._stickyEnd=si(e),this._hasStickyChanged=n!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return t.\u0275fac=function(e){return new(e||t)(W(N_,8))},t.\u0275dir=Xe({type:t,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,n,r){if(1&e&&(An(r,z_,5),An(r,V_,5),An(r,$w,5)),2&e){let s;$t(s=Gt())&&(n.cell=s.first),$t(s=Gt())&&(n.headerCell=s.first),$t(s=Gt())&&(n.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[di([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),At]}),t})();class tE{constructor(i,e){e.nativeElement.classList.add(...i._columnCssClassName)}}let iE=(()=>{class t extends tE{constructor(e,n){super(e,n)}}return t.\u0275fac=function(e){return new(e||t)(W(jh),W(Ci))},t.\u0275dir=Xe({type:t,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[At]}),t})(),nE=(()=>{class t extends tE{constructor(e,n){if(super(e,n),1===e._table?._elementRef.nativeElement.nodeType){const r=e._table._elementRef.nativeElement.getAttribute("role");n.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}}return t.\u0275fac=function(e){return new(e||t)(W(jh),W(Ci))},t.\u0275dir=Xe({type:t,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[At]}),t})();class _F{constructor(){this.tasks=[],this.endTasks=[]}}const rE=new tt("_COALESCED_STYLE_SCHEDULER");let yF=(()=>{class t{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new St}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new _F,this._getScheduleObservable().pipe(wn(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new _F;for(const n of e.tasks)n();for(const n of e.endTasks)n()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?vr(Promise.resolve(void 0)):this._ngZone.onStable.pipe(jr(1))}}return t.\u0275fac=function(e){return new(e||t)($e(Ki))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})(),oE=(()=>{class t{constructor(e,n){this.template=e,this._differs=n}ngOnChanges(e){if(!this._columnsDiffer){const n=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(n).create(),this._columnsDiffer.diff(n)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof Tb?e.headerCell.template:this instanceof kb?e.footerCell.template:e.cell.template}}return t.\u0275fac=function(e){return new(e||t)(W(mo),W(Bc))},t.\u0275dir=Xe({type:t,features:[R]}),t})();class HG extends oE{}const $G=eE(HG);let Tb=(()=>{class t extends $G{constructor(e,n,r){super(e,n),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return t.\u0275fac=function(e){return new(e||t)(W(mo),W(Bc),W(N_,8))},t.\u0275dir=Xe({type:t,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[At,R]}),t})();class GG extends oE{}const qG=eE(GG);let kb=(()=>{class t extends qG{constructor(e,n,r){super(e,n),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return t.\u0275fac=function(e){return new(e||t)(W(mo),W(Bc),W(N_,8))},t.\u0275dir=Xe({type:t,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[At,R]}),t})(),Gw=(()=>{class t extends oE{constructor(e,n,r){super(e,n),this._table=r}}return t.\u0275fac=function(e){return new(e||t)(W(mo),W(Bc),W(N_,8))},t.\u0275dir=Xe({type:t,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[At]}),t})(),Uh=(()=>{class t{constructor(e){this._viewContainer=e,t.mostRecentCellOutlet=this}ngOnDestroy(){t.mostRecentCellOutlet===this&&(t.mostRecentCellOutlet=null)}}return t.mostRecentCellOutlet=null,t.\u0275fac=function(e){return new(e||t)(W(go))},t.\u0275dir=Xe({type:t,selectors:[["","cdkCellOutlet",""]]}),t})(),sE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=wi({type:t,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,n){1&e&&Ws(0,0)},dependencies:[Uh],encapsulation:2}),t})(),lE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=wi({type:t,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,n){1&e&&Ws(0,0)},dependencies:[Uh],encapsulation:2}),t})(),qw=(()=>{class t{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return t.\u0275fac=function(e){return new(e||t)(W(mo))},t.\u0275dir=Xe({type:t,selectors:[["ng-template","cdkNoDataRow",""]]}),t})();const vF=["top","bottom","left","right"];class WG{constructor(i,e,n,r,s=!0,u=!0,_){this._isNativeHtmlTable=i,this._stickCellCss=e,this.direction=n,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=u,this._positionListener=_,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(i,e){const n=[];for(const r of i)if(r.nodeType===r.ELEMENT_NODE){n.push(r);for(let s=0;s<r.children.length;s++)n.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of n)this._removeStickyStyle(r,e)})}updateStickyColumns(i,e,n,r=!0){if(!i.length||!this._isBrowser||!e.some(X=>X)&&!n.some(X=>X))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=i[0],u=s.children.length,_=this._getCellWidths(s,r),b=this._getStickyStartColumnPositions(_,e),S=this._getStickyEndColumnPositions(_,n),A=e.lastIndexOf(!0),B=n.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const X="rtl"===this.direction,re=X?"right":"left",_e=X?"left":"right";for(const Le of i)for(let Ue=0;Ue<u;Ue++){const it=Le.children[Ue];e[Ue]&&this._addStickyStyle(it,re,b[Ue],Ue===A),n[Ue]&&this._addStickyStyle(it,_e,S[Ue],Ue===B)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===A?[]:_.slice(0,A+1).map((Le,Ue)=>e[Ue]?Le:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===B?[]:_.slice(B).map((Le,Ue)=>n[Ue+B]?Le:null).reverse()}))})}stickRows(i,e,n){if(!this._isBrowser)return;const r="bottom"===n?i.slice().reverse():i,s="bottom"===n?e.slice().reverse():e,u=[],_=[],b=[];for(let A=0,B=0;A<r.length;A++){if(!s[A])continue;u[A]=B;const X=r[A];b[A]=this._isNativeHtmlTable?Array.from(X.children):[X];const re=X.getBoundingClientRect().height;B+=re,_[A]=re}const S=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let A=0;A<r.length;A++){if(!s[A])continue;const B=u[A],X=A===S;for(const re of b[A])this._addStickyStyle(re,n,B,X)}"top"===n?this._positionListener?.stickyHeaderRowsUpdated({sizes:_,offsets:u,elements:b}):this._positionListener?.stickyFooterRowsUpdated({sizes:_,offsets:u,elements:b})})}updateStickyFooterContainer(i,e){if(!this._isNativeHtmlTable)return;const n=i.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(r=>!r)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0,!1)})}_removeStickyStyle(i,e){for(const r of e)i.style[r]="",i.classList.remove(this._borderCellCss[r]);vF.some(r=>-1===e.indexOf(r)&&i.style[r])?i.style.zIndex=this._getCalculatedZIndex(i):(i.style.zIndex="",this._needsPositionStickyOnElement&&(i.style.position=""),i.classList.remove(this._stickCellCss))}_addStickyStyle(i,e,n,r){i.classList.add(this._stickCellCss),r&&i.classList.add(this._borderCellCss[e]),i.style[e]=`${n}px`,i.style.zIndex=this._getCalculatedZIndex(i),this._needsPositionStickyOnElement&&(i.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(i){const e={top:100,bottom:10,left:1,right:1};let n=0;for(const r of vF)i.style[r]&&(n+=e[r]);return n?`${n}`:""}_getCellWidths(i,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const n=[],r=i.children;for(let s=0;s<r.length;s++)n.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=n,n}_getStickyStartColumnPositions(i,e){const n=[];let r=0;for(let s=0;s<i.length;s++)e[s]&&(n[s]=r,r+=i[s]);return n}_getStickyEndColumnPositions(i,e){const n=[];let r=0;for(let s=i.length;s>0;s--)e[s]&&(n[s]=r,r+=i[s]);return n}}const cE=new tt("CDK_SPL");let Ww=(()=>{class t{constructor(e,n){this.viewContainer=e,this.elementRef=n}}return t.\u0275fac=function(e){return new(e||t)(W(go),W(Ci))},t.\u0275dir=Xe({type:t,selectors:[["","rowOutlet",""]]}),t})(),Zw=(()=>{class t{constructor(e,n){this.viewContainer=e,this.elementRef=n}}return t.\u0275fac=function(e){return new(e||t)(W(go),W(Ci))},t.\u0275dir=Xe({type:t,selectors:[["","headerRowOutlet",""]]}),t})(),Yw=(()=>{class t{constructor(e,n){this.viewContainer=e,this.elementRef=n}}return t.\u0275fac=function(e){return new(e||t)(W(go),W(Ci))},t.\u0275dir=Xe({type:t,selectors:[["","footerRowOutlet",""]]}),t})(),Xw=(()=>{class t{constructor(e,n){this.viewContainer=e,this.elementRef=n}}return t.\u0275fac=function(e){return new(e||t)(W(go),W(Ci))},t.\u0275dir=Xe({type:t,selectors:[["","noDataRowOutlet",""]]}),t})(),Kw=(()=>{class t{constructor(e,n,r,s,u,_,b,S,A,B,X,re){this._differs=e,this._changeDetectorRef=n,this._elementRef=r,this._dir=u,this._platform=b,this._viewRepeater=S,this._coalescedStyleScheduler=A,this._viewportRuler=B,this._stickyPositioningListener=X,this._ngZone=re,this._onDestroy=new St,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Ht,this.viewChange=new Ys({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=_,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=si(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=si(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,n)=>this.trackBy?this.trackBy(n.dataIndex,n.data):n),this._viewportRuler.change().pipe(wn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const n=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||n,this._forceRecalculateCellWidths=n,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),Vw(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const n=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,n,(r,s,u)=>this._getEmbeddedViewArgs(r.item,u),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{n.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&Ki.isInAngularZone()?this._ngZone.onStable.pipe(jr(1),wn(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=e.length?"":"none");const s=this._headerRowDefs.map(u=>u.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(u=>u.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=e.length?"":"none");const s=this._footerRowDefs.map(u=>u.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(u=>u.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),n=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...n,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,u)=>{this._addStickyColumnStyles([s],this._headerRowDefs[u])}),this._rowDefs.forEach(s=>{const u=[];for(let _=0;_<n.length;_++)this._renderRows[_].rowDef===s&&u.push(n[_]);this._addStickyColumnStyles(u,s)}),r.forEach((s,u)=>{this._addStickyColumnStyles([s],this._footerRowDefs[u])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],n=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const u=this._getRenderRowsForData(s,r,n.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let _=0;_<u.length;_++){let b=u[_];const S=this._cachedRenderRowsMap.get(b.data);S.has(b.rowDef)?S.get(b.rowDef).push(b):S.set(b.rowDef,[b]),e.push(b)}}return e}_getRenderRowsForData(e,n,r){return this._getRowDefs(e,n).map(u=>{const _=r&&r.has(u)?r.get(u):[];if(_.length){const b=_.shift();return b.dataIndex=n,b}return{data:e,rowDef:u,dataIndex:n}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Qw(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(n=>{this._columnDefsByName.has(n.name),this._columnDefsByName.set(n.name,n)})}_cacheRowDefs(){this._headerRowDefs=Qw(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Qw(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Qw(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(n=>!n.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(u,_)=>u||!!_.getColumnsDiff(),n=this._rowDefs.reduce(e,!1);n&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),n||r||s}_switchDataSource(e){this._data=[],Vw(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;Vw(this.dataSource)?e=this.dataSource.connect(this):function JS(t){return!!t&&(t instanceof $i||Oe(t.lift)&&Oe(t.subscribe))}(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=ui(this.dataSource)),this._renderChangeSubscription=e.pipe(wn(this._onDestroy)).subscribe(n=>{this._data=n||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,n)=>this._renderRow(this._headerRowOutlet,e,n)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,n)=>this._renderRow(this._footerRowOutlet,e,n)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,n){const r=Array.from(n.columns||[]).map(_=>this._columnDefsByName.get(_)),s=r.map(_=>_.sticky),u=r.map(_=>_.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,u,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const n=[];for(let r=0;r<e.viewContainer.length;r++){const s=e.viewContainer.get(r);n.push(s.rootNodes[0])}return n}_getRowDefs(e,n){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(n,e));else{let s=this._rowDefs.find(u=>u.when&&u.when(n,e))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(e,n){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:n}}_renderRow(e,n,r,s={}){const u=e.viewContainer.createEmbeddedView(n.template,s,r);return this._renderCellTemplateForItem(n,s),u}_renderCellTemplateForItem(e,n){for(let r of this._getCellTemplates(e))Uh.mostRecentCellOutlet&&Uh.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,n);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let n=0,r=e.length;n<r;n++){const u=e.get(n).context;u.count=r,u.first=0===n,u.last=n===r-1,u.even=n%2==0,u.odd=!u.even,this.multiTemplateDataRows?(u.dataIndex=this._renderRows[n].dataIndex,u.renderIndex=n):u.index=this._renderRows[n].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,n=>{const r=this._columnDefsByName.get(n);return e.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),n=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of n){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const u of r.outlets)s.appendChild(u.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(n,r)=>n||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new WG(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:ui()).pipe(wn(this._onDestroy)).subscribe(n=>{this._stickyStyler.direction=n,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(n=>!n._table||n._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const n=0===this._rowOutlet.viewContainer.length;if(n===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(n){const s=r.createEmbeddedView(e.templateRef),u=s.rootNodes[0];1===s.rootNodes.length&&u?.nodeType===this._document.ELEMENT_NODE&&(u.setAttribute("role","row"),u.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=n}}return t.\u0275fac=function(e){return new(e||t)(W(Bc),W(Jn),W(Ci),Vr("role"),W(Ks,8),W(Zi),W(ys),W(Sb),W(rE),W(Om),W(cE,12),W(Ki,8))},t.\u0275cmp=wi({type:t,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,n,r){if(1&e&&(An(r,qw,5),An(r,jh,5),An(r,Gw,5),An(r,Tb,5),An(r,kb,5)),2&e){let s;$t(s=Gt())&&(n._noDataRow=s.first),$t(s=Gt())&&(n._contentColumnDefs=s),$t(s=Gt())&&(n._contentRowDefs=s),$t(s=Gt())&&(n._contentHeaderRowDefs=s),$t(s=Gt())&&(n._contentFooterRowDefs=s)}},viewQuery:function(e,n){if(1&e&&(kn(Ww,7),kn(Zw,7),kn(Yw,7),kn(Xw,7)),2&e){let r;$t(r=Gt())&&(n._rowOutlet=r.first),$t(r=Gt())&&(n._headerRowOutlet=r.first),$t(r=Gt())&&(n._footerRowOutlet=r.first),$t(r=Gt())&&(n._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,n){2&e&&bn("cdk-table-fixed-layout",n.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[di([{provide:N_,useExisting:t},{provide:Sb,useClass:nF},{provide:rE,useClass:yF},{provide:cE,useValue:null}])],ngContentSelectors:BG,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,n){1&e&&(Qo(LG),gr(0),gr(1,1),Ws(2,0)(3,1)(4,2)(5,3))},dependencies:[Zw,Ww,Xw,Yw],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),t})();function Qw(t,i){return t.concat(Array.from(i))}let xF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[zw]]}),t})();const YG=[[["caption"]],[["colgroup"],["col"]]],XG=["caption","colgroup, col"];let Jw=(()=>{class t extends Kw{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275cmp=wi({type:t,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,n){2&e&&bn("mat-table-fixed-layout",n.fixedLayout)},exportAs:["matTable"],features:[di([{provide:Sb,useClass:nF},{provide:Kw,useExisting:t},{provide:N_,useExisting:t},{provide:rE,useClass:yF},{provide:cE,useValue:null}]),At],ngContentSelectors:XG,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,n){1&e&&(Qo(YG),gr(0),gr(1,1),Ws(2,0)(3,1)(4,2)(5,3))},dependencies:[Zw,Ww,Xw,Yw],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),t})(),Ab=(()=>{class t extends z_{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["","matCellDef",""]],features:[di([{provide:z_,useExisting:t}]),At]}),t})(),Ib=(()=>{class t extends V_{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["","matHeaderCellDef",""]],features:[di([{provide:V_,useExisting:t}]),At]}),t})(),Rb=(()=>{class t extends jh{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[di([{provide:jh,useExisting:t},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:t}]),At]}),t})(),Pb=(()=>{class t extends iE{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[At]}),t})(),Ob=(()=>{class t extends nE{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[At]}),t})(),e1=(()=>{class t extends Tb{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[di([{provide:Tb,useExisting:t}]),At]}),t})(),t1=(()=>{class t extends Gw{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[di([{provide:Gw,useExisting:t}]),At]}),t})(),n1=(()=>{class t extends sE{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275cmp=wi({type:t,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[di([{provide:sE,useExisting:t}]),At],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,n){1&e&&Ws(0,0)},dependencies:[Uh],encapsulation:2}),t})(),r1=(()=>{class t extends lE{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275cmp=wi({type:t,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[di([{provide:lE,useExisting:t}]),At],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,n){1&e&&Ws(0,0)},dependencies:[Uh],encapsulation:2}),t})(),a7=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[xF,yi],yi]}),t})();class dE extends class c7 extends class j${}{constructor(i=[]){super(),this._renderData=new Ys([]),this._filter=new Ys(""),this._internalPageChanges=new St,this._renderChangesSubscription=null,this.sortingDataAccessor=(e,n)=>{const r=e[n];if(rO(r)){const s=Number(r);return s<9007199254740991?s:r}return r},this.sortData=(e,n)=>{const r=n.active,s=n.direction;return r&&""!=s?e.sort((u,_)=>{let b=this.sortingDataAccessor(u,r),S=this.sortingDataAccessor(_,r);const A=typeof b,B=typeof S;A!==B&&("number"===A&&(b+=""),"number"===B&&(S+=""));let X=0;return null!=b&&null!=S?b>S?X=1:b<S&&(X=-1):null!=b?X=1:null!=S&&(X=-1),X*("asc"==s?1:-1)}):e},this.filterPredicate=(e,n)=>{const r=Object.keys(e).reduce((u,_)=>u+e[_]+"\u25ec","").toLowerCase(),s=n.trim().toLowerCase();return-1!=r.indexOf(s)},this._data=new Ys(i),this._updateChangeSubscription()}get data(){return this._data.value}set data(i){i=Array.isArray(i)?i:[],this._data.next(i),this._renderChangesSubscription||this._filterData(i)}get filter(){return this._filter.value}set filter(i){this._filter.next(i),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(i){this._sort=i,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(i){this._paginator=i,this._updateChangeSubscription()}_updateChangeSubscription(){const i=this._sort?wt(this._sort.sortChange,this._sort.initialized):ui(null),e=this._paginator?wt(this._paginator.page,this._internalPageChanges,this._paginator.initialized):ui(null),r=p_([this._data,this._filter]).pipe(li(([_])=>this._filterData(_))),s=p_([r,i]).pipe(li(([_])=>this._orderData(_))),u=p_([s,e]).pipe(li(([_])=>this._pageData(_)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=u.subscribe(_=>this._renderData.next(_))}_filterData(i){return this.filteredData=null==this.filter||""===this.filter?i:i.filter(e=>this.filterPredicate(e,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(i){return this.sort?this.sortData(i.slice(),this.sort):i}_pageData(i){if(!this.paginator)return i;const e=this.paginator.pageIndex*this.paginator.pageSize;return i.slice(e,e+this.paginator.pageSize)}_updatePaginator(i){Promise.resolve().then(()=>{const e=this.paginator;if(e&&(e.length=i,e.pageIndex>0)){const n=Math.ceil(e.length/e.pageSize)-1||0,r=Math.min(e.pageIndex,n);r!==e.pageIndex&&(e.pageIndex=r,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}}{}let o1=(()=>{class t{constructor(e){this.http=e,this.token="",this.headers=null,this.options=null,this.token=localStorage.getItem("token"),this.headers=new Ja({Authorization:`Bearer ${this.token}`}),this.options={headers:this.headers},this.baseUrl=Vu_baseUrl}createHeader(){this.token="",this.headers=null,this.options=null,this.token=localStorage.getItem("token"),this.headers=new Ja({Authorization:`Bearer ${this.token}`}),this.options={headers:this.headers},this.baseUrl=Vu_baseUrl}crearsolicitud(e){return this.createHeader(),this.http.post(`${this.baseUrl}solicitud/create`,e,this.options)}getSolicitudesByUsuario(e){return this.createHeader(),this.http.post(`${this.baseUrl}solicitud/agricultor`,e,this.options)}getSolicitudesByEstado(e){return this.createHeader(),this.http.post(`${this.baseUrl}solicitud/estado`,e,this.options)}validarSolicitud(e){return this.createHeader(),this.http.post(`${this.baseUrl}solicitud/validate`,e,this.options)}actualizarSolicitud(e){return this.createHeader(),this.http.put(`${this.baseUrl}solicitud/update`,e,this.options)}actualizarSolicitudAgricultor(e){return this.createHeader(),this.http.put(`${this.baseUrl}solicitud/update/agricultor`,e,this.options)}consultarDisponibilidadParcialidades(e){return this.createHeader(),this.http.post(`${this.baseUrl}parcialidades/cantidad`,e,this.options)}crearParcialidad(e){return this.createHeader(),this.http.post(`${this.baseUrl}parcialidades/create`,e,this.options)}obtenerParcialidadesRevisionPesoCabal(e){return this.createHeader(),this.http.post(`${this.baseUrl}parcialidades/revision`,e,this.options)}validarFaltantesSobrantes(e){return this.createHeader(),this.http.post(`${this.baseUrl}solicitud/faltantes/sobrantes`,e,this.options)}crearAnexo(e){return this.createHeader(),this.http.post(`${this.baseUrl}anexos/create`,e,this.options)}crearRechazo(e){return this.createHeader(),this.http.post(`${this.baseUrl}rechazos/create`,e,this.options)}}return t.\u0275fac=function(e){return new(e||t)($e(Cm))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),s1=(()=>{class t{constructor(e){this.http=e,this.token="",this.headers=null,this.options=null,this.token=localStorage.getItem("token"),this.headers=new Ja({Authorization:`Bearer ${this.token}`}),this.options={headers:this.headers},this.baseUrl=Vu_baseUrl}createHeader(){this.token="",this.headers=null,this.options=null,this.token=localStorage.getItem("token"),this.headers=new Ja({Authorization:`Bearer ${this.token}`}),this.options={headers:this.headers},this.baseUrl=Vu_baseUrl}crearCuenta(e){return this.createHeader(),this.http.post(`${this.baseUrl}cuentas/create`,e,this.options)}actualizarCuenta(e){return this.createHeader(),this.http.put(`${this.baseUrl}cuentas/update`,e,this.options)}}return t.\u0275fac=function(e){return new(e||t)($e(Cm))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function d7(t,i){1&t&&gr(0)}const u7=["*"];let wF=(()=>{class t{constructor(e){this._elementRef=e}focus(){this._elementRef.nativeElement.focus()}}return t.\u0275fac=function(e){return new(e||t)(W(Ci))},t.\u0275dir=Xe({type:t,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"]}),t})(),CF=(()=>{class t{constructor(e){this.template=e}}return t.\u0275fac=function(e){return new(e||t)(W(mo))},t.\u0275dir=Xe({type:t,selectors:[["","cdkStepLabel",""]]}),t})(),h7=0;const MF=new tt("STEPPER_GLOBAL_OPTIONS");let uE=(()=>{class t{constructor(e,n){this._stepper=e,this.interacted=!1,this.interactedStream=new Ht,this._editable=!0,this._optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=n||{},this._displayDefaultIndicatorType=!1!==this._stepperOptions.displayDefaultIndicatorType}get editable(){return this._editable}set editable(e){this._editable=si(e)}get optional(){return this._optional}set optional(e){this._optional=si(e)}get completed(){return this._completedOverride??this._getDefaultCompleted()}set completed(e){this._completedOverride=si(e)}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return this._customError??this._getDefaultError()}set hasError(e){this._customError=si(e)}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}select(){this._stepper.selected=this}reset(){this.interacted=!1,null!=this._completedOverride&&(this._completedOverride=!1),null!=this._customError&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??null!=this._customError}}return t.\u0275fac=function(e){return new(e||t)(W(en(()=>j_)),W(MF,8))},t.\u0275cmp=wi({type:t,selectors:[["cdk-step"]],contentQueries:function(e,n,r){if(1&e&&An(r,CF,5),2&e){let s;$t(s=Gt())&&(n.stepLabel=s.first)}},viewQuery:function(e,n){if(1&e&&kn(mo,7),2&e){let r;$t(r=Gt())&&(n.content=r.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],state:"state",editable:"editable",optional:"optional",completed:"completed",hasError:"hasError"},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],features:[R],ngContentSelectors:u7,decls:1,vars:0,template:function(e,n){1&e&&(Qo(),Pe(0,d7,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),t})(),j_=(()=>{class t{constructor(e,n,r,s){this._dir=e,this._changeDetectorRef=n,this._elementRef=r,this._destroyed=new St,this.steps=new Hp,this._sortedHeaders=new Hp,this._linear=!1,this._selectedIndex=0,this.selectionChange=new Ht,this._orientation="horizontal",this._groupId=h7++}get linear(){return this._linear}set linear(e){this._linear=si(e)}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){const n=$o(e);this.steps&&this._steps?(this._isValidIndex(n),this.selected?._markAsInteracted(),this._selectedIndex!==n&&!this._anyControlsInvalidOrPending(n)&&(n>=this._selectedIndex||this.steps.toArray()[n].editable)&&this._updateSelectedItemIndex(n)):this._selectedIndex=n}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(e){this.selectedIndex=e&&this.steps?this.steps.toArray().indexOf(e):-1}get orientation(){return this._orientation}set orientation(e){this._orientation=e,this._keyManager&&this._keyManager.withVerticalOrientation("vertical"===e)}ngAfterContentInit(){this._steps.changes.pipe(Bs(this._steps),wn(this._destroyed)).subscribe(e=>{this.steps.reset(e.filter(n=>n._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe(Bs(this._stepHeader),wn(this._destroyed)).subscribe(e=>{this._sortedHeaders.reset(e.toArray().sort((n,r)=>n._elementRef.nativeElement.compareDocumentPosition(r._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new PS(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation("vertical"===this._orientation),(this._dir?this._dir.change:ui()).pipe(Bs(this._layoutDirection()),wn(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(e=>e.reset()),this._stateChanged()}_getStepLabelId(e){return`cdk-step-label-${this._groupId}-${e}`}_getStepContentId(e){return`cdk-step-content-${this._groupId}-${e}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(e){const n=e-this._selectedIndex;return n<0?"rtl"===this._layoutDirection()?"next":"previous":n>0?"rtl"===this._layoutDirection()?"previous":"next":"current"}_getIndicatorType(e,n="number"){const r=this.steps.toArray()[e],s=this._isCurrentStep(e);return r._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(r,s):this._getGuidelineLogic(r,s,n)}_getDefaultIndicatorLogic(e,n){return e._showError()&&e.hasError&&!n?"error":!e.completed||n?"number":e.editable?"edit":"done"}_getGuidelineLogic(e,n,r="number"){return e._showError()&&e.hasError&&!n?"error":e.completed&&!n?"done":e.completed&&n?r:e.editable&&n?"edit":r}_isCurrentStep(e){return this._selectedIndex===e}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(e){const n=this.steps.toArray();this.selectionChange.emit({selectedIndex:e,previouslySelectedIndex:this._selectedIndex,selectedStep:n[e],previouslySelectedStep:n[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(e):this._keyManager.updateActiveItem(e),this._selectedIndex=e,this._stateChanged()}_onKeydown(e){const n=zs(e),r=e.keyCode,s=this._keyManager;null==s.activeItemIndex||n||32!==r&&13!==r?s.onKeydown(e):(this.selectedIndex=s.activeItemIndex,e.preventDefault())}_anyControlsInvalidOrPending(e){return!!(this._linear&&e>=0)&&this.steps.toArray().slice(0,e).some(n=>{const r=n.stepControl;return(r?r.invalid||r.pending||!n.interacted:!n.completed)&&!n.optional&&!n._completedOverride})}_layoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_containsFocus(){const e=this._elementRef.nativeElement,n=A_();return e===n||e.contains(n)}_isValidIndex(e){return e>-1&&(!this.steps||e<this.steps.length)}}return t.\u0275fac=function(e){return new(e||t)(W(Ks,8),W(Jn),W(Ci),W(Zi))},t.\u0275dir=Xe({type:t,selectors:[["","cdkStepper",""]],contentQueries:function(e,n,r){if(1&e&&(An(r,uE,5),An(r,wF,5)),2&e){let s;$t(s=Gt())&&(n._steps=s),$t(s=Gt())&&(n._stepHeader=s)}},inputs:{linear:"linear",selectedIndex:"selectedIndex",selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange"},exportAs:["cdkStepper"]}),t})(),p7=(()=>{class t{constructor(e){this._stepper=e,this.type="submit"}}return t.\u0275fac=function(e){return new(e||t)(W(j_))},t.\u0275dir=Xe({type:t,selectors:[["button","cdkStepperNext",""]],hostVars:1,hostBindings:function(e,n){1&e&&Dt("click",function(){return n._stepper.next()}),2&e&&Ya("type",n.type)},inputs:{type:"type"}}),t})(),f7=(()=>{class t{constructor(e){this._stepper=e,this.type="button"}}return t.\u0275fac=function(e){return new(e||t)(W(j_))},t.\u0275dir=Xe({type:t,selectors:[["button","cdkStepperPrevious",""]],hostVars:1,hostBindings:function(e,n){1&e&&Dt("click",function(){return n._stepper.previous()}),2&e&&Ya("type",n.type)},inputs:{type:"type"}}),t})(),DF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[R_]]}),t})();const m7=["*"];let a1;function Fb(t){return function g7(){if(void 0===a1&&(a1=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(a1=t.trustedTypes.createPolicy("angular#components",{createHTML:i=>i}))}return a1}()?.createHTML(t)||t}function SF(t){return Error(`Unable to find icon with the name "${t}"`)}function EF(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function TF(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class Lm{constructor(i,e,n){this.url=i,this.svgText=e,this.options=n}}let l1=(()=>{class t{constructor(e,n,r,s){this._httpClient=e,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,s){return this._addSvgIconConfig(e,n,new Lm(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,s){const u=this._sanitizer.sanitize(pr.HTML,r);if(!u)throw TF(r);const _=Fb(u);return this._addSvgIconConfig(e,n,new Lm("",_,s))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new Lm(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){const s=this._sanitizer.sanitize(pr.HTML,n);if(!s)throw TF(n);const u=Fb(s);return this._addSvgIconSetConfig(e,new Lm("",u,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(pr.RESOURCE_URL,e);if(!n)throw EF(e);const r=this._cachedIconsByUrl.get(n);return r?ui(c1(r)):this._loadSvgIconFromConfig(new Lm(e,null)).pipe(es(s=>this._cachedIconsByUrl.set(n,s)),li(s=>c1(s)))}getNamedSvgIcon(e,n=""){const r=kF(n,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const u=this._iconSetConfigs.get(n);return u?this._getSvgFromIconSetConfigs(e,u):f_(SF(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ui(c1(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(li(n=>c1(n)))}_getSvgFromIconSetConfigs(e,n){const r=this._extractIconWithNameFromAnySet(e,n);return r?ui(r):PR(n.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(Oh(_=>{const S=`Loading icon set URL: ${this._sanitizer.sanitize(pr.RESOURCE_URL,u.url)} failed: ${_.message}`;return this._errorHandler.handleError(new Error(S)),ui(null)})))).pipe(li(()=>{const u=this._extractIconWithNameFromAnySet(e,n);if(!u)throw SF(e);return u}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const u=this._svgElementFromConfig(s),_=this._extractSvgIconFromSet(u,e,s.options);if(_)return _}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(es(n=>e.svgText=n),li(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ui(null):this._fetchIcon(e).pipe(es(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){const s=e.querySelector(`[id="${n}"]`);if(!s)return null;const u=s.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,r);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),r);const _=this._svgElementFromString(Fb("<svg></svg>"));return _.appendChild(u),this._setSvgAttributes(_,r)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const n=this._svgElementFromString(Fb("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:u,value:_}=r[s];"id"!==u&&n.setAttribute(u,_)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){const{url:n,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function _7(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const u=this._sanitizer.sanitize(pr.RESOURCE_URL,n);if(!u)throw EF(n);const _=this._inProgressUrlFetches.get(u);if(_)return _;const b=this._httpClient.get(u,{responseType:"text",withCredentials:s}).pipe(li(S=>Fb(S)),qx(()=>this._inProgressUrlFetches.delete(u)),on());return this._inProgressUrlFetches.set(u,b),b}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(kF(e,n),r),this}_addSvgIconSetConfig(e,n){const r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,e);if(s)return v7(s)?new Lm(s.url,null,s.options):new Lm(s,null)}}}return t.\u0275fac=function(e){return new(e||t)($e(Cm,8),$e(Iv),$e(Zi,8),$e(md))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function c1(t){return t.cloneNode(!0)}function kF(t,i){return t+":"+i}function v7(t){return!(!t.url||!t.options)}const b7=ju(class{constructor(t){this._elementRef=t}}),x7=new tt("mat-icon-location",{providedIn:"root",factory:function w7(){const t=qn(Zi),i=t?t.location:null;return{getPathname:()=>i?i.pathname+i.search:""}}}),AF=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],C7=AF.map(t=>`[${t}]`).join(", "),M7=/^url\(['"]?#(.*?)['"]?\)$/;let Lb=(()=>{class t extends b7{constructor(e,n,r,s,u){super(e),this._iconRegistry=n,this._location=s,this._errorHandler=u,this._inline=!1,this._currentIconFetch=ce.EMPTY,r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=si(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=e.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();n!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),n&&e.classList.add(n),this._previousFontSetClass=n),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(u=>{s.setAttribute(u.name,`url('${e}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(C7),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)AF.forEach(u=>{const _=n[s],b=_.getAttribute(u),S=b?b.match(M7):null;if(S){let A=r.get(_);A||(A=[],r.set(_,A)),A.push({name:u,value:S[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(jr(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(l1),Vr("aria-hidden"),W(x7),W(md))},t.\u0275cmp=wi({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,n){2&e&&(Ti("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),bn("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[At],ngContentSelectors:m7,decls:1,vars:0,template:function(e,n){1&e&&(Qo(),gr(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),IF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[yi],yi]}),t})();function D7(t,i){if(1&t&&Ws(0,8),2&t){const e=Me();le("ngTemplateOutlet",e.iconOverrides[e.state])("ngTemplateOutletContext",e._getIconContext())}}function S7(t,i){if(1&t&&(H(0,"span",13),ge(1),U()),2&t){const e=Me(2);q(1),Lt(e._getDefaultTextForState(e.state))}}function E7(t,i){if(1&t&&(H(0,"span",14),ge(1),U()),2&t){const e=Me(2);q(1),Lt(e._intl.completedLabel)}}function T7(t,i){if(1&t&&(H(0,"span",14),ge(1),U()),2&t){const e=Me(2);q(1),Lt(e._intl.editableLabel)}}function k7(t,i){if(1&t&&(H(0,"mat-icon",13),ge(1),U()),2&t){const e=Me(2);q(1),Lt(e._getDefaultTextForState(e.state))}}function A7(t,i){if(1&t&&(Wa(0,9),Pe(1,S7,2,1,"span",10),Pe(2,E7,2,1,"span",11),Pe(3,T7,2,1,"span",11),Pe(4,k7,2,1,"mat-icon",12),Za()),2&t){const e=Me();le("ngSwitch",e.state),q(1),le("ngSwitchCase","number"),q(1),le("ngIf","done"===e.state),q(1),le("ngIf","edit"===e.state)}}function I7(t,i){if(1&t&&(H(0,"div",15),Ws(1,16),U()),2&t){const e=Me();q(1),le("ngTemplateOutlet",e._templateLabel().template)}}function R7(t,i){if(1&t&&(H(0,"div",15),ge(1),U()),2&t){const e=Me();q(1),Lt(e.label)}}function P7(t,i){if(1&t&&(H(0,"div",17),ge(1),U()),2&t){const e=Me();q(1),Lt(e._intl.optionalLabel)}}function O7(t,i){if(1&t&&(H(0,"div",18),ge(1),U()),2&t){const e=Me();q(1),Lt(e.errorMessage)}}function F7(t,i){}function L7(t,i){if(1&t&&(gr(0),Pe(1,F7,0,0,"ng-template",0)),2&t){const e=Me();q(1),le("cdkPortalOutlet",e._portal)}}const B7=["*"];function N7(t,i){1&t&&bt(0,"div",9)}const RF=function(t,i){return{step:t,i}};function z7(t,i){if(1&t&&(Wa(0),Ws(1,7),Pe(2,N7,1,0,"div",8),Za()),2&t){const e=i.$implicit,n=i.index,r=i.last;Me(2);const s=Zn(4);q(1),le("ngTemplateOutlet",s)("ngTemplateOutletContext",vM(3,RF,e,n)),q(1),le("ngIf",!r)}}function V7(t,i){if(1&t){const e=Tn();H(0,"div",10),Dt("@horizontalStepTransition.done",function(r){return Jt(e),pi(Me(2)._animationDone.next(r))}),Ws(1,11),U()}if(2&t){const e=i.$implicit,n=i.index,r=Me(2);le("@horizontalStepTransition",r._getAnimationDirection(n))("id",r._getStepContentId(n)),Ti("aria-labelledby",r._getStepLabelId(n))("aria-expanded",r.selectedIndex===n),q(1),le("ngTemplateOutlet",e.content)}}function j7(t,i){if(1&t&&(Wa(0),H(1,"div",3),Pe(2,z7,3,6,"ng-container",4),U(),H(3,"div",5),Pe(4,V7,2,5,"div",6),U(),Za()),2&t){const e=Me();q(2),le("ngForOf",e.steps),q(2),le("ngForOf",e.steps)}}function U7(t,i){if(1&t){const e=Tn();H(0,"div",13),Ws(1,7),H(2,"div",14)(3,"div",15),Dt("@verticalStepTransition.done",function(r){return Jt(e),pi(Me(2)._animationDone.next(r))}),H(4,"div",16),Ws(5,11),U()()()()}if(2&t){const e=i.$implicit,n=i.index,r=i.last,s=Me(2),u=Zn(4);q(1),le("ngTemplateOutlet",u)("ngTemplateOutletContext",vM(9,RF,e,n)),q(1),bn("mat-stepper-vertical-line",!r),q(1),le("@verticalStepTransition",s._getAnimationDirection(n))("id",s._getStepContentId(n)),Ti("aria-labelledby",s._getStepLabelId(n))("aria-expanded",s.selectedIndex===n),q(2),le("ngTemplateOutlet",e.content)}}function H7(t,i){if(1&t&&(Wa(0),Pe(1,U7,6,12,"div",12),Za()),2&t){const e=Me();q(1),le("ngForOf",e.steps)}}function $7(t,i){if(1&t){const e=Tn();H(0,"mat-step-header",17),Dt("click",function(){return pi(Jt(e).step.select())})("keydown",function(r){return Jt(e),pi(Me()._onKeydown(r))}),U()}if(2&t){const e=i.step,n=i.i,r=Me();bn("mat-horizontal-stepper-header","horizontal"===r.orientation)("mat-vertical-stepper-header","vertical"===r.orientation),le("tabIndex",r._getFocusIndex()===n?0:-1)("id",r._getStepLabelId(n))("index",n)("state",r._getIndicatorType(n,e.state))("label",e.stepLabel||e.label)("selected",r.selectedIndex===n)("active",r._stepIsNavigable(n,e))("optional",e.optional)("errorMessage",e.errorMessage)("iconOverrides",r._iconOverrides)("disableRipple",r.disableRipple||!r._stepIsNavigable(n,e))("color",e.color||r.color),Ti("aria-posinset",n+1)("aria-setsize",r.steps.length)("aria-controls",r._getStepContentId(n))("aria-selected",r.selectedIndex==n)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null)("aria-disabled",!r._stepIsNavigable(n,e)||null)}}let U_=(()=>{class t extends CF{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["","matStepLabel",""]],features:[At]}),t})(),d1=(()=>{class t{constructor(){this.changes=new St,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const q7={provide:d1,deps:[[new la,new ul,d1]],useFactory:function G7(t){return t||new d1}},W7=ju(class extends wF{constructor(i){super(i)}},"primary");let PF=(()=>{class t extends W7{constructor(e,n,r,s){super(r),this._intl=e,this._focusMonitor=n,this._intlSubscription=e.changes.subscribe(()=>s.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,n){e?this._focusMonitor.focusVia(this._elementRef,e,n):this._elementRef.nativeElement.focus(n)}_stringLabel(){return this.label instanceof U_?null:this.label}_templateLabel(){return this.label instanceof U_?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(e){return"number"==e?`${this.index+1}`:"edit"==e?"create":"error"==e?"warning":e}}return t.\u0275fac=function(e){return new(e||t)(W(d1),W(Od),W(Ci),W(Jn))},t.\u0275cmp=wi({type:t,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],inputs:{color:"color",state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple"},features:[At],decls:10,vars:19,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content",3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],[3,"ngSwitch",4,"ngSwitchDefault"],[1,"mat-step-label"],["class","mat-step-text-label",4,"ngIf"],["class","mat-step-optional",4,"ngIf"],["class","mat-step-sub-label-error",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],["aria-hidden","true",4,"ngSwitchCase"],["class","cdk-visually-hidden",4,"ngIf"],["aria-hidden","true",4,"ngSwitchDefault"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[1,"mat-step-text-label"],[3,"ngTemplateOutlet"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"]],template:function(e,n){1&e&&(bt(0,"div",0),H(1,"div")(2,"div",1),Pe(3,D7,1,2,"ng-container",2),Pe(4,A7,5,4,"ng-container",3),U()(),H(5,"div",4),Pe(6,I7,2,1,"div",5),Pe(7,R7,2,1,"div",5),Pe(8,P7,2,1,"div",6),Pe(9,O7,2,1,"div",7),U()),2&e&&(le("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disableRipple),q(1),dM("mat-step-icon-state-",n.state," mat-step-icon"),bn("mat-step-icon-selected",n.selected),q(1),le("ngSwitch",!(!n.iconOverrides||!n.iconOverrides[n.state])),q(1),le("ngSwitchCase",!0),q(2),bn("mat-step-label-active",n.active)("mat-step-label-selected",n.selected)("mat-step-label-error","error"==n.state),q(1),le("ngIf",n._templateLabel()),q(1),le("ngIf",n._stringLabel()),q(1),le("ngIf",n.optional&&"error"!=n.state),q(1),le("ngIf","error"==n.state))},dependencies:[Lb,Uu,Vc,Bu,oD,h_,Gl],styles:[".mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header.cdk-keyboard-focused,.cdk-high-contrast-active .mat-step-header.cdk-program-focused{outline:solid 3px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.mat-step-optional,.mat-step-sub-label-error{font-size:12px}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,changeDetection:0}),t})();const OF={horizontalStepTransition:_o("horizontalStepTransition",[Cn("previous",ii({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),Cn("current",ii({transform:"none",visibility:"inherit"})),Cn("next",ii({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),Vn("* => *",Kn("500ms cubic-bezier(0.35, 0, 0.25, 1)"))]),verticalStepTransition:_o("verticalStepTransition",[Cn("previous",ii({height:"0px",visibility:"hidden"})),Cn("next",ii({height:"0px",visibility:"hidden"})),Cn("current",ii({height:"*",visibility:"inherit"})),Vn("* <=> current",Kn("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])};let Z7=(()=>{class t{constructor(e){this.templateRef=e}}return t.\u0275fac=function(e){return new(e||t)(W(mo))},t.\u0275dir=Xe({type:t,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:["matStepperIcon","name"]}}),t})(),Y7=(()=>{class t{constructor(e){this._template=e}}return t.\u0275fac=function(e){return new(e||t)(W(mo))},t.\u0275dir=Xe({type:t,selectors:[["ng-template","matStepContent",""]]}),t})(),u1=(()=>{class t extends uE{constructor(e,n,r,s){super(e,s),this._errorStateMatcher=n,this._viewContainerRef=r,this._isSelected=ce.EMPTY}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe(Pa(()=>this._stepper.selectionChange.pipe(li(e=>e.selectedStep===this),Bs(this._stepper.selected===this)))).subscribe(e=>{e&&this._lazyContent&&!this._portal&&(this._portal=new wb(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(e,n){return this._errorStateMatcher.isErrorState(e,n)||!!(e&&e.invalid&&this.interacted)}}return t.\u0275fac=function(e){return new(e||t)(W(en(()=>h1)),W(Jp,4),W(go),W(MF,8))},t.\u0275cmp=wi({type:t,selectors:[["mat-step"]],contentQueries:function(e,n,r){if(1&e&&(An(r,U_,5),An(r,Y7,5)),2&e){let s;$t(s=Gt())&&(n.stepLabel=s.first),$t(s=Gt())&&(n._lazyContent=s.first)}},inputs:{color:"color"},exportAs:["matStep"],features:[di([{provide:Jp,useExisting:t},{provide:uE,useExisting:t}]),At],ngContentSelectors:B7,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(e,n){1&e&&(Qo(),Pe(0,L7,2,1,"ng-template"))},dependencies:[Cb],encapsulation:2,changeDetection:0}),t})(),FF=(()=>{class t extends j_{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,features:[At]}),t})(),X7=(()=>{class t extends FF{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["mat-horizontal-stepper"]],features:[At]}),t})(),K7=(()=>{class t extends FF{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["mat-vertical-stepper"]],features:[At]}),t})(),h1=(()=>{class t extends j_{constructor(e,n,r,s){super(e,n,r,s),this.steps=new Hp,this.animationDone=new Ht,this.labelPosition="end",this._iconOverrides={},this._animationDone=new St;const u=r.nativeElement.nodeName.toLowerCase();this.orientation="mat-vertical-stepper"===u?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:e,templateRef:n})=>this._iconOverrides[e]=n),this.steps.changes.pipe(wn(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe(AS((e,n)=>e.fromState===n.fromState&&e.toState===n.toState),wn(this._destroyed)).subscribe(e=>{"current"===e.toState&&this.animationDone.emit()})}_stepIsNavigable(e,n){return n.completed||this.selectedIndex===e||!this.linear}}return t.\u0275fac=function(e){return new(e||t)(W(Ks,8),W(Jn),W(Ci),W(Zi))},t.\u0275cmp=wi({type:t,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(e,n,r){if(1&e&&(An(r,u1,5),An(r,Z7,5)),2&e){let s;$t(s=Gt())&&(n._steps=s),$t(s=Gt())&&(n._icons=s)}},viewQuery:function(e,n){if(1&e&&kn(PF,5),2&e){let r;$t(r=Gt())&&(n._stepHeader=r)}},hostAttrs:["role","tablist"],hostVars:9,hostBindings:function(e,n){2&e&&(Ti("aria-orientation",n.orientation),bn("mat-stepper-horizontal","horizontal"===n.orientation)("mat-stepper-vertical","vertical"===n.orientation)("mat-stepper-label-position-end","horizontal"===n.orientation&&"end"==n.labelPosition)("mat-stepper-label-position-bottom","horizontal"===n.orientation&&"bottom"==n.labelPosition))},inputs:{selectedIndex:"selectedIndex",disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],features:[di([{provide:j_,useExisting:t},{provide:X7,useExisting:t},{provide:K7,useExisting:t}]),At],decls:5,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],["stepTemplate",""],[1,"mat-horizontal-stepper-header-container"],[4,"ngFor","ngForOf"],[1,"mat-horizontal-content-container"],["class","mat-horizontal-stepper-content","role","tabpanel",3,"id",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","mat-stepper-horizontal-line",4,"ngIf"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],["class","mat-step",4,"ngFor","ngForOf"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color","click","keydown"]],template:function(e,n){1&e&&(Wa(0,0),Pe(1,j7,5,2,"ng-container",1),Pe(2,H7,2,1,"ng-container",1),Za(),Pe(3,$7,1,23,"ng-template",null,2,DA)),2&e&&(le("ngSwitch",n.orientation),q(1),le("ngSwitchCase","horizontal"),q(1),le("ngSwitchCase","vertical"))},dependencies:[PF,Vc,Bu,Ph,oD,Gl],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content[aria-expanded=false]{height:0;overflow:hidden}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}\n'],encapsulation:2,data:{animation:[OF.horizontalStepTransition,OF.verticalStepTransition]},changeDetection:0}),t})(),hE=(()=>{class t extends p7{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["button","matStepperNext",""]],hostAttrs:[1,"mat-stepper-next"],hostVars:1,hostBindings:function(e,n){2&e&&Ya("type",n.type)},inputs:{type:"type"},features:[At]}),t})(),pE=(()=>{class t extends f7{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275dir=Xe({type:t,selectors:[["button","matStepperPrevious",""]],hostAttrs:[1,"mat-stepper-previous"],hostVars:1,hostBindings:function(e,n){2&e&&Ya("type",n.type)},inputs:{type:"type"},features:[At]}),t})(),Q7=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[q7,Jp],imports:[[yi,gs,zh,mb,DF,IF,Fd],yi]}),t})();const J7=["mat-calendar-body",""];function e9(t,i){if(1&t&&(H(0,"tr",2)(1,"td",3),ge(2),U()()),2&t){const e=Me();q(1),Zs("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Ti("colspan",e.numCols),q(1),Yn(" ",e.label," ")}}function t9(t,i){if(1&t&&(H(0,"td",3),ge(1),U()),2&t){const e=Me(2);Zs("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Ti("colspan",e._firstRowOffset),q(1),Yn(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function i9(t,i){if(1&t){const e=Tn();H(0,"td",7)(1,"button",8),Dt("click",function(r){const u=Jt(e).$implicit;return pi(Me(2)._cellClicked(u,r))}),H(2,"div",9),ge(3),U(),bt(4,"div",10),U()()}if(2&t){const e=i.$implicit,n=i.index,r=Me().index,s=Me();Zs("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),Ti("data-mat-row",r)("data-mat-col",n),q(1),bn("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",s._isActiveCell(r,n))("mat-calendar-body-range-start",s._isRangeStart(e.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",s._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(e.compareValue,r,n))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(e.compareValue,r,n))("mat-calendar-body-comparison-start",s._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",s._isInPreview(e.compareValue)),le("ngClass",e.cssClasses)("tabindex",s._isActiveCell(r,n)?0:-1),Ti("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",s._isSelected(e.compareValue))("aria-current",s.todayValue===e.compareValue?"date":null),q(1),bn("mat-calendar-body-selected",s._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",s.todayValue===e.compareValue),q(1),Yn(" ",e.displayValue," ")}}function n9(t,i){if(1&t&&(H(0,"tr",4),Pe(1,t9,2,6,"td",5),Pe(2,i9,5,47,"td",6),U()),2&t){const e=i.$implicit,n=i.index,r=Me();q(1),le("ngIf",0===n&&r._firstRowOffset),q(1),le("ngForOf",e)}}function r9(t,i){if(1&t&&(H(0,"th",5)(1,"span",6),ge(2),U(),H(3,"span",7),ge(4),U()()),2&t){const e=i.$implicit;q(2),Lt(e.long),q(2),Lt(e.narrow)}}const o9=["*"];function s9(t,i){}function a9(t,i){if(1&t){const e=Tn();H(0,"mat-month-view",5),Dt("activeDateChange",function(r){return Jt(e),pi(Me().activeDate=r)})("_userSelection",function(r){return Jt(e),pi(Me()._dateSelected(r))}),U()}if(2&t){const e=Me();le("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)}}function l9(t,i){if(1&t){const e=Tn();H(0,"mat-year-view",6),Dt("activeDateChange",function(r){return Jt(e),pi(Me().activeDate=r)})("monthSelected",function(r){return Jt(e),pi(Me()._monthSelectedInYearView(r))})("selectedChange",function(r){return Jt(e),pi(Me()._goToDateInView(r,"month"))}),U()}if(2&t){const e=Me();le("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function c9(t,i){if(1&t){const e=Tn();H(0,"mat-multi-year-view",7),Dt("activeDateChange",function(r){return Jt(e),pi(Me().activeDate=r)})("yearSelected",function(r){return Jt(e),pi(Me()._yearSelectedInMultiYearView(r))})("selectedChange",function(r){return Jt(e),pi(Me()._goToDateInView(r,"year"))}),U()}if(2&t){const e=Me();le("activeDate",e.activeDate)("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function d9(t,i){}const u9=["button"];function h9(t,i){1&t&&(As(),H(0,"svg",3),bt(1,"path",4),U())}const p9=[[["","matDatepickerToggleIcon",""]]],f9=["[matDatepickerToggleIcon]"];let Bb=(()=>{class t{constructor(){this.changes=new St,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,n){return`${e} \u2013 ${n}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class fE{constructor(i,e,n,r,s={},u=i,_){this.value=i,this.displayValue=e,this.ariaLabel=n,this.enabled=r,this.cssClasses=s,this.compareValue=u,this.rawValue=_}}let H_=(()=>{class t{constructor(e,n){this._elementRef=e,this._ngZone=n,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new Ht,this.previewChange=new Ht,this._enterHandler=r=>{if(this._skipNextFocus&&"focus"===r.type)this._skipNextFocus=!1;else if(r.target&&this.isRange){const s=this._getCellFromElement(r.target);s&&this._ngZone.run(()=>this.previewChange.emit({value:s.enabled?s:null,event:r}))}},this._leaveHandler=r=>{null!==this.previewEnd&&this.isRange&&r.target&&this._getCellFromElement(r.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:r}))},n.runOutsideAngular(()=>{const r=e.nativeElement;r.addEventListener("mouseenter",this._enterHandler,!0),r.addEventListener("focus",this._enterHandler,!0),r.addEventListener("mouseleave",this._leaveHandler,!0),r.addEventListener("blur",this._leaveHandler,!0)})}_cellClicked(e,n){e.enabled&&this.selectedValueChange.emit({value:e.value,event:n})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){const n=e.numCols,{rows:r,numCols:s}=this;(e.rows||n)&&(this._firstRowOffset=r&&r.length&&r[0].length?s-r[0].length:0),(e.cellAspectRatio||n||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/s+"%"),(n||!this._cellWidth)&&(this._cellWidth=100/s+"%")}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mouseenter",this._enterHandler,!0),e.removeEventListener("focus",this._enterHandler,!0),e.removeEventListener("mouseleave",this._leaveHandler,!0),e.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(e,n){let r=e*this.numCols+n;return e&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(jr(1)).subscribe(()=>{setTimeout(()=>{const n=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");n&&(e||(this._skipNextFocus=!0),n.focus())})})})}_isRangeStart(e){return mE(e,this.startValue,this.endValue)}_isRangeEnd(e){return gE(e,this.startValue,this.endValue)}_isInRange(e){return _E(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return mE(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,n,r){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let s=this.rows[n][r-1];if(!s){const u=this.rows[n-1];s=u&&u[u.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(e,n,r){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let s=this.rows[n][r+1];if(!s){const u=this.rows[n+1];s=u&&u[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(e){return gE(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return _E(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return mE(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return gE(e,this.previewStart,this.previewEnd)}_isInPreview(e){return _E(e,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(e){let n;if(LF(e)?n=e:LF(e.parentNode)&&(n=e.parentNode),n){const r=n.getAttribute("data-mat-row"),s=n.getAttribute("data-mat-col");if(r&&s)return this.rows[parseInt(r)][parseInt(s)]}return null}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(Ki))},t.\u0275cmp=wi({type:t,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange"},exportAs:["matCalendarBody"],features:[R],attrs:J7,decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(e,n){1&e&&(Pe(0,e9,3,6,"tr",0),Pe(1,n9,3,2,"tr",1)),2&e&&(le("ngIf",n._firstRowOffset<n.labelMinRequiredCells),q(1),le("ngForOf",n.rows))},dependencies:[Gl,Ph,Ev],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content{outline:dotted 2px}.cdk-high-contrast-active .cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected,.cdk-high-contrast-active .cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content.mat-calendar-body-selected{outline:solid 3px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}\n'],encapsulation:2,changeDetection:0}),t})();function LF(t){return"TD"===t.nodeName}function mE(t,i,e){return null!==e&&i!==e&&t<e&&t===i}function gE(t,i,e){return null!==i&&i!==e&&t>=i&&t===e}function _E(t,i,e,n){return n&&null!==i&&null!==e&&i!==e&&t>=i&&t<=e}class _l{constructor(i,e){this.start=i,this.end=e}}let tf=(()=>{class t{constructor(e,n){this.selection=e,this._adapter=n,this._selectionChanged=new St,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,n){const r=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:n,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}}return t.\u0275fac=function(e){ml()},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})(),m9=(()=>{class t extends tf{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const e=new t(this._adapter);return e.updateSelection(this.selection,this),e}}return t.\u0275fac=function(e){return new(e||t)($e(fa))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();const BF={provide:tf,deps:[[new la,new ul,tf],fa],useFactory:function _9(t,i){return t||new m9(i)}},p1=new tt("MAT_DATE_RANGE_SELECTION_STRATEGY");let NF=(()=>{class t{constructor(e,n,r,s,u){this._changeDetectorRef=e,this._dateFormats=n,this._dateAdapter=r,this._dir=s,this._rangeStrategy=u,this._rerenderSubscription=ce.EMPTY,this.selectedChange=new Ht,this._userSelection=new Ht,this.activeDateChange=new Ht,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){const n=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(n,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof _l?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Bs(null)).subscribe(()=>this._init())}ngOnChanges(e){const n=e.comparisonStart||e.comparisonEnd;n&&!n.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){const n=e.value,r=this._dateAdapter.getYear(this.activeDate),s=this._dateAdapter.getMonth(this.activeDate),u=this._dateAdapter.createDate(r,s,n);let _,b;this._selected instanceof _l?(_=this._getDateInCurrentMonth(this._selected.start),b=this._getDateInCurrentMonth(this._selected.end)):_=b=this._getDateInCurrentMonth(this._selected),(_!==n||b!==n)&&this.selectedChange.emit(u),this._userSelection.emit({value:u,event:e.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_handleCalendarBodyKeydown(e){const n=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&e.preventDefault());case 27:return void(null!=this._previewEnd&&!zs(e)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e}),e.preventDefault(),e.stopPropagation()));default:return}this._dateAdapter.compareDate(n,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_previewChanged({event:e,value:n}){if(this._rangeStrategy){const s=this._rangeStrategy.createPreview(n?n.rawValue:null,this.selected,e);this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end),this._changeDetectorRef.detectChanges()}}_initWeekdays(){const e=this._dateAdapter.getFirstDayOfWeek(),n=this._dateAdapter.getDayOfWeekNames("narrow");let s=this._dateAdapter.getDayOfWeekNames("long").map((u,_)=>({long:u,narrow:n[_]}));this._weekdays=s.slice(e).concat(s.slice(0,e))}_createWeekCells(){const e=this._dateAdapter.getNumDaysInMonth(this.activeDate),n=this._dateAdapter.getDateNames();this._weeks=[[]];for(let r=0,s=this._firstWeekOffset;r<e;r++,s++){7==s&&(this._weeks.push([]),s=0);const u=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),_=this._shouldEnableDate(u),b=this._dateAdapter.format(u,this._dateFormats.display.dateA11yLabel),S=this.dateClass?this.dateClass(u,"month"):void 0;this._weeks[this._weeks.length-1].push(new fE(r+1,n[r],b,_,S,this._getCellCompareValue(u),u))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,n){return!(!e||!n||this._dateAdapter.getMonth(e)!=this._dateAdapter.getMonth(n)||this._dateAdapter.getYear(e)!=this._dateAdapter.getYear(n))}_getCellCompareValue(e){if(e){const n=this._dateAdapter.getYear(e),r=this._dateAdapter.getMonth(e),s=this._dateAdapter.getDate(e);return new Date(n,r,s).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(e){e instanceof _l?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Jn),W(Rm,8),W(fa,8),W(Ks,8),W(p1,8))},t.\u0275cmp=wi({type:t,selectors:[["mat-month-view"]],viewQuery:function(e,n){if(1&e&&kn(H_,5),2&e){let r;$t(r=Gt())&&(n._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[R],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","previewChange","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:function(e,n){1&e&&(H(0,"table",0)(1,"thead",1)(2,"tr"),Pe(3,r9,5,2,"th",2),U(),H(4,"tr"),bt(5,"th",3),U()(),H(6,"tbody",4),Dt("selectedValueChange",function(s){return n._dateSelected(s)})("previewChange",function(s){return n._previewChanged(s)})("keyup",function(s){return n._handleCalendarBodyKeyup(s)})("keydown",function(s){return n._handleCalendarBodyKeydown(s)}),U()()),2&e&&(q(3),le("ngForOf",n._weekdays),q(3),le("label",n._monthLabel)("rows",n._weeks)("todayValue",n._todayDate)("startValue",n._rangeStart)("endValue",n._rangeEnd)("comparisonStart",n._comparisonRangeStart)("comparisonEnd",n._comparisonRangeEnd)("previewStart",n._previewStart)("previewEnd",n._previewEnd)("isRange",n._isRange)("labelMinRequiredCells",3)("activeCell",n._dateAdapter.getDate(n.activeDate)-1))},dependencies:[H_,Ph],encapsulation:2,changeDetection:0}),t})(),zF=(()=>{class t{constructor(e,n,r){this._changeDetectorRef=e,this._dateAdapter=n,this._dir=r,this._rerenderSubscription=ce.EMPTY,this.selectedChange=new Ht,this.yearSelected=new Ht,this.activeDateChange=new Ht,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let n=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),VF(this._dateAdapter,n,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof _l?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Bs(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const n=this._dateAdapter.getYear(this._activeDate)-Nb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let r=0,s=[];r<24;r++)s.push(n+r),4==s.length&&(this._years.push(s.map(u=>this._createCellForYear(u))),s=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){const n=e.value;this.yearSelected.emit(this._dateAdapter.createDate(n,0,1));let r=this._dateAdapter.getMonth(this.activeDate),s=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(n,r,1));this.selectedChange.emit(this._dateAdapter.createDate(n,r,Math.min(this._dateAdapter.getDate(this.activeDate),s)))}_handleCalendarBodyKeydown(e){const n=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-Nb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-Nb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-240:-24);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?240:24);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return Nb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_createCellForYear(e){const n=this._dateAdapter.createDate(e,0,1),r=this._dateAdapter.getYearName(n),s=this.dateClass?this.dateClass(n,"multi-year"):void 0;return new fE(e,r,r,this._shouldEnableYear(e),s)}_shouldEnableYear(e){if(null==e||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let r=this._dateAdapter.createDate(e,0,1);this._dateAdapter.getYear(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(e){if(this._selectedYear=null,e instanceof _l){const n=e.start||e.end;n&&(this._selectedYear=this._dateAdapter.getYear(n))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}}return t.\u0275fac=function(e){return new(e||t)(W(Jn),W(fa,8),W(Ks,8))},t.\u0275cmp=wi({type:t,selectors:[["mat-multi-year-view"]],viewQuery:function(e,n){if(1&e&&kn(H_,5),2&e){let r;$t(r=Gt())&&(n._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,n){1&e&&(H(0,"table",0)(1,"thead",1)(2,"tr"),bt(3,"th",2),U()(),H(4,"tbody",3),Dt("selectedValueChange",function(s){return n._yearSelected(s)})("keyup",function(s){return n._handleCalendarBodyKeyup(s)})("keydown",function(s){return n._handleCalendarBodyKeydown(s)}),U()()),2&e&&(q(4),le("rows",n._years)("todayValue",n._todayYear)("startValue",n._selectedYear)("endValue",n._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",n._getActiveCell()))},dependencies:[H_],encapsulation:2,changeDetection:0}),t})();function VF(t,i,e,n,r){const s=t.getYear(i),u=t.getYear(e),_=jF(t,n,r);return Math.floor((s-_)/24)===Math.floor((u-_)/24)}function Nb(t,i,e,n){return function x9(t,i){return(t%i+i)%i}(t.getYear(i)-jF(t,e,n),24)}function jF(t,i,e){let n=0;return e?n=t.getYear(e)-24+1:i&&(n=t.getYear(i)),n}let UF=(()=>{class t{constructor(e,n,r,s){this._changeDetectorRef=e,this._dateFormats=n,this._dateAdapter=r,this._dir=s,this._rerenderSubscription=ce.EMPTY,this.selectedChange=new Ht,this.monthSelected=new Ht,this.activeDateChange=new Ht,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(e){let n=this._activeDate;const r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(n)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){this._selected=e instanceof _l?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Bs(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){const n=e.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,1);this.monthSelected.emit(r);const s=this._dateAdapter.getNumDaysInMonth(r);this.selectedChange.emit(this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,Math.min(this._dateAdapter.getDate(this.activeDate),s)))}_handleCalendarBodyKeydown(e){const n=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCell(),e.preventDefault()}_handleCalendarBodyKeyup(e){(32===e.keyCode||13===e.keyCode)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(n=>n.map(r=>this._createCellForMonth(r,e[r]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_createCellForMonth(e,n){const r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),s=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),u=this.dateClass?this.dateClass(r,"year"):void 0;return new fE(e,n.toLocaleUpperCase(),s,this._shouldEnableMonth(e),u)}_shouldEnableMonth(e){const n=this._dateAdapter.getYear(this.activeDate);if(null==e||this._isYearAndMonthAfterMaxDate(n,e)||this._isYearAndMonthBeforeMinDate(n,e))return!1;if(!this.dateFilter)return!0;for(let s=this._dateAdapter.createDate(n,e,1);this._dateAdapter.getMonth(s)==e;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(e,n){if(this.maxDate){const r=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return e>r||e===r&&n>s}return!1}_isYearAndMonthBeforeMinDate(e,n){if(this.minDate){const r=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return e<r||e===r&&n<s}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(e){this._selectedMonth=e instanceof _l?this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._getMonthInCurrentYear(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Jn),W(Rm,8),W(fa,8),W(Ks,8))},t.\u0275cmp=wi({type:t,selectors:[["mat-year-view"]],viewQuery:function(e,n){if(1&e&&kn(H_,5),2&e){let r;$t(r=Gt())&&(n._matCalendarBody=r.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","keyup","keydown"]],template:function(e,n){1&e&&(H(0,"table",0)(1,"thead",1)(2,"tr"),bt(3,"th",2),U()(),H(4,"tbody",3),Dt("selectedValueChange",function(s){return n._monthSelected(s)})("keyup",function(s){return n._handleCalendarBodyKeyup(s)})("keydown",function(s){return n._handleCalendarBodyKeydown(s)}),U()()),2&e&&(q(4),le("label",n._yearLabel)("rows",n._months)("todayValue",n._todayMonth)("startValue",n._selectedMonth)("endValue",n._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",n._dateAdapter.getMonth(n.activeDate)))},dependencies:[H_],encapsulation:2,changeDetection:0}),t})(),w9=0,C9=(()=>{class t{constructor(e,n,r,s,u){this._intl=e,this.calendar=n,this._dateAdapter=r,this._dateFormats=s,this._buttonDescriptionId="mat-calendar-button-"+w9++,this.calendar.stateChanges.subscribe(()=>u.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const n=this._dateAdapter.getYear(this.calendar.activeDate)-Nb(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=n+24-1,s=this._dateAdapter.getYearName(this._dateAdapter.createDate(n,0,1)),u=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return this._intl.formatYearRange(s,u)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate)}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,n){return"month"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(n)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(n):"year"==this.calendar.currentView?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(n):VF(this._dateAdapter,e,n,this.calendar.minDate,this.calendar.maxDate)}}return t.\u0275fac=function(e){return new(e||t)(W(Bb),W(en(()=>bE)),W(fa,8),W(Rm,8),W(Jn))},t.\u0275cmp=wi({type:t,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:o9,decls:11,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["viewBox","0 0 10 5","focusable","false",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:function(e,n){1&e&&(Qo(),H(0,"div",0)(1,"div",1)(2,"button",2),Dt("click",function(){return n.currentPeriodClicked()}),H(3,"span"),ge(4),U(),As(),H(5,"svg",3),bt(6,"polygon",4),U()(),m(),bt(7,"div",5),gr(8),H(9,"button",6),Dt("click",function(){return n.previousClicked()}),U(),H(10,"button",7),Dt("click",function(){return n.nextClicked()}),U()()()),2&e&&(q(2),Ti("aria-label",n.periodButtonLabel)("aria-describedby",n._buttonDescriptionId),q(1),Ti("id",n._buttonDescriptionId),q(1),Lt(n.periodButtonText),q(1),bn("mat-calendar-invert","month"!==n.calendar.currentView),q(4),le("disabled",!n.previousEnabled()),Ti("aria-label",n.prevButtonLabel),q(1),le("disabled",!n.nextEnabled()),Ti("aria-label",n.nextButtonLabel))},dependencies:[ef],encapsulation:2,changeDetection:0}),t})(),bE=(()=>{class t{constructor(e,n,r,s){this._dateAdapter=n,this._dateFormats=r,this._changeDetectorRef=s,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new Ht,this.yearSelected=new Ht,this.monthSelected=new Ht,this.viewChanged=new Ht(!0),this._userSelection=new Ht,this.stateChanges=new St,this._intlChanges=e.changes.subscribe(()=>{s.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){this._selected=e instanceof _l?e:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){const n=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),n&&this.viewChanged.emit(n)}ngAfterContentInit(){this._calendarHeaderPortal=new O_(this.headerComponent||C9),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){const n=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,r=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,s=n||r||e.dateFilter;if(s&&!s.firstChange){const u=this._getCurrentViewComponent();u&&(this._changeDetectorRef.detectChanges(),u._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){const n=e.value;(this.selected instanceof _l||n&&!this._dateAdapter.sameDate(n,this.selected))&&this.selectedChange.emit(n),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,n){this.activeDate=e,this.currentView=n}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}return t.\u0275fac=function(e){return new(e||t)(W(Bb),W(fa,8),W(Rm,8),W(Jn))},t.\u0275cmp=wi({type:t,selectors:[["mat-calendar"]],viewQuery:function(e,n){if(1&e&&(kn(NF,5),kn(UF,5),kn(zF,5)),2&e){let r;$t(r=Gt())&&(n.monthView=r.first),$t(r=Gt())&&(n.yearView=r.first),$t(r=Gt())&&(n.multiYearView=r.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[di([BF]),R],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:function(e,n){1&e&&(Pe(0,s9,0,0,"ng-template",0),H(1,"div",1),Pe(2,a9,1,8,"mat-month-view",2),Pe(3,l9,1,6,"mat-year-view",3),Pe(4,c9,1,6,"mat-multi-year-view",4),U()),2&e&&(le("cdkPortalOutlet",n._calendarHeaderPortal),q(1),le("ngSwitch",n.currentView),q(1),le("ngSwitchCase","month"),q(1),le("ngSwitchCase","year"),q(1),le("ngSwitchCase","multi-year"))},dependencies:[NF,UF,zF,Cb,K6,Vc,Bu],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}\n'],encapsulation:2,changeDetection:0}),t})();const HF={transformPanel:_o("transformPanel",[Vn("void => enter-dropdown",Kn("120ms cubic-bezier(0, 0, 0.2, 1)",Mm([ii({opacity:0,transform:"scale(1, 0.8)"}),ii({opacity:1,transform:"scale(1, 1)"})]))),Vn("void => enter-dialog",Kn("150ms cubic-bezier(0, 0, 0.2, 1)",Mm([ii({opacity:0,transform:"scale(0.7)"}),ii({transform:"none",opacity:1})]))),Vn("* => void",Kn("100ms linear",ii({opacity:0})))]),fadeInCalendar:_o("fadeInCalendar",[Cn("void",ii({opacity:0})),Cn("enter",ii({opacity:1})),Vn("void => *",Kn("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let M9=0;const $F=new tt("mat-datepicker-scroll-strategy"),S9={provide:$F,deps:[Wl],useFactory:function D9(t){return()=>t.scrollStrategies.reposition()}},E9=ju(class{constructor(t){this._elementRef=t}});let T9=(()=>{class t extends E9{constructor(e,n,r,s,u,_){super(e),this._changeDetectorRef=n,this._globalModel=r,this._dateAdapter=s,this._rangeSelectionStrategy=u,this._subscriptions=new ce,this._animationDone=new St,this._actionsPortal=null,this._closeButtonText=_.closeCalendarLabel}ngOnInit(){this._model=this._actionsPortal?this._globalModel.clone():this._globalModel,this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){const n=this._model.selection,r=e.value,s=n instanceof _l;if(s&&this._rangeSelectionStrategy){const u=this._rangeSelectionStrategy.selectionFinished(r,n,e.event);this._model.updateSelection(u,this)}else r&&(s||!this._dateAdapter.sameDate(r,n))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(Jn),W(tf),W(fa),W(p1,8),W(Bb))},t.\u0275cmp=wi({type:t,selectors:[["mat-datepicker-content"]],viewQuery:function(e,n){if(1&e&&kn(bE,5),2&e){let r;$t(r=Gt())&&(n._calendar=r.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:function(e,n){1&e&&cx("@transformPanel.done",function(){return n._animationDone.next()}),2&e&&(ux("@transformPanel",n._animationState),bn("mat-datepicker-content-touch",n.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[At],decls:5,vars:24,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:function(e,n){if(1&e&&(H(0,"div",0)(1,"mat-calendar",1),Dt("yearSelected",function(s){return n.datepicker._selectYear(s)})("monthSelected",function(s){return n.datepicker._selectMonth(s)})("viewChanged",function(s){return n.datepicker._viewChanged(s)})("_userSelection",function(s){return n._handleUserSelection(s)}),U(),Pe(2,d9,0,0,"ng-template",2),H(3,"button",3),Dt("focus",function(){return n._closeButtonFocused=!0})("blur",function(){return n._closeButtonFocused=!1})("click",function(){return n.datepicker.close()}),ge(4),U()()),2&e){let r;bn("mat-datepicker-content-container-with-custom-header",n.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",n._actionsPortal),Ti("aria-modal",!0)("aria-labelledby",null!==(r=n._dialogLabelId)&&void 0!==r?r:void 0),q(1),le("id",n.datepicker.id)("ngClass",n.datepicker.panelClass)("startAt",n.datepicker.startAt)("startView",n.datepicker.startView)("minDate",n.datepicker._getMinDate())("maxDate",n.datepicker._getMaxDate())("dateFilter",n.datepicker._getDateFilter())("headerComponent",n.datepicker.calendarHeaderComponent)("selected",n._getSelected())("dateClass",n.datepicker.dateClass)("comparisonStart",n.comparisonStart)("comparisonEnd",n.comparisonEnd)("@fadeInCalendar","enter"),q(1),le("cdkPortalOutlet",n._actionsPortal),q(1),bn("cdk-visually-hidden",!n._closeButtonFocused),le("color",n.color||"primary"),q(1),Lt(n._closeButtonText)}},dependencies:[bE,ef,U6,Ev,Cb],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}\n"],encapsulation:2,data:{animation:[HF.transformPanel,HF.fadeInCalendar]},changeDetection:0}),t})(),GF=(()=>{class t{constructor(e,n,r,s,u,_,b){this._overlay=e,this._ngZone=n,this._viewContainerRef=r,this._dateAdapter=u,this._dir=_,this._model=b,this._inputStateChanges=ce.EMPTY,this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new Ht,this.monthSelected=new Ht,this.viewChanged=new Ht(!0),this.openedStream=new Ht,this.closedStream=new Ht,this._opened=!1,this.id="mat-datepicker-"+M9++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new St,this._scrollStrategy=s}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=si(e)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){const n=si(e);n!==this._disabled&&(this._disabled=n,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(e){this._restoreFocus=si(e)}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=function D6(t,i=/\s+/){const e=[];if(null!=t){const n=Array.isArray(t)?t:`${t}`.split(i);for(const r of n){const s=`${r}`.trim();s&&e.push(s)}}return e}(e)}get opened(){return this._opened}set opened(e){si(e)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(e){const n=e.xPosition||e.yPosition;if(n&&!n.firstChange&&this._overlayRef){const r=this._overlayRef.getConfig().positionStrategy;r instanceof XO&&(this._setConnectedPositions(r),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal=e}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null)}open(){this._opened||this.disabled||(this._focusedElementBeforeOpen=A_(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;if(this._componentRef){const n=this._componentRef.instance;n._startExitAnimation(),n._animationDone.pipe(jr(1)).subscribe(()=>this._destroyOverlay())}const e=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._actionsPortal=this._actionsPortal,e._dialogLabelId=this.datepickerInput.getOverlayLabelId()}_openOverlay(){this._destroyOverlay();const e=this.touchUi,n=new O_(T9,this._viewContainerRef),r=this._overlayRef=this._overlay.create(new Mb({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(e?"dialog":"popup")}));this._getCloseStream(r).subscribe(s=>{s&&s.preventDefault(),this.close()}),r.keydownEvents().subscribe(s=>{const u=s.keyCode;(38===u||40===u||37===u||39===u||33===u||34===u)&&s.preventDefault()}),this._componentRef=r.attach(n),this._forwardContentValues(this._componentRef.instance),e||this._ngZone.onStable.pipe(jr(1)).subscribe(()=>r.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){const n="end"===this.xPosition?"end":"start",r="start"===n?"end":"start",s="above"===this.yPosition?"bottom":"top",u="top"===s?"bottom":"top";return e.withPositions([{originX:n,originY:u,overlayX:n,overlayY:s},{originX:n,originY:s,overlayX:n,overlayY:u},{originX:r,originY:u,overlayX:r,overlayY:s},{originX:r,originY:s,overlayX:r,overlayY:u}])}_getCloseStream(e){return wt(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(To(n=>27===n.keyCode&&!zs(n)||this.datepickerInput&&zs(n,"altKey")&&38===n.keyCode)))}}return t.\u0275fac=function(e){return new(e||t)(W(Wl),W(Ki),W(go),W($F),W(fa,8),W(Ks,8),W(tf))},t.\u0275dir=Xe({type:t,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[R]}),t})(),xE=(()=>{class t extends GF{}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275cmp=wi({type:t,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[di([BF,{provide:GF,useExisting:t}]),At],decls:0,vars:0,template:function(e,n){},encapsulation:2,changeDetection:0}),t})();class f1{constructor(i,e){this.target=i,this.targetElement=e,this.value=this.target.value}}let k9=(()=>{class t{constructor(e,n,r){this._elementRef=e,this._dateAdapter=n,this._dateFormats=r,this.dateChange=new Ht,this.dateInput=new Ht,this.stateChanges=new St,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=ce.EMPTY,this._localeSubscription=ce.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=s=>{const u=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value));return!u||this._matchesFilter(u)?null:{matDatepickerFilter:!0}},this._minValidator=s=>{const u=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),_=this._getMinDate();return!_||!u||this._dateAdapter.compareDate(_,u)<=0?null:{matDatepickerMin:{min:_,actual:u}}},this._maxValidator=s=>{const u=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),_=this._getMaxDate();return!_||!u||this._dateAdapter.compareDate(_,u)>=0?null:{matDatepickerMax:{max:_,actual:u}}},this._lastValueValid=!1,this._localeSubscription=n.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){const n=si(e),r=this._elementRef.nativeElement;this._disabled!==n&&(this._disabled=n,this.stateChanges.next(void 0)),n&&this._isInitialized&&r.blur&&r.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(n=>{if(this._shouldHandleChangeEvent(n)){const r=this._getValueFromModel(n.selection);this._lastValueValid=this._isValidValue(r),this._cvaOnChange(r),this._onTouched(),this._formatValue(r),this.dateInput.emit(new f1(this,this._elementRef.nativeElement)),this.dateChange.emit(new f1(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){(function A9(t,i){const e=Object.keys(t);for(let n of e){const{previousValue:r,currentValue:s}=t[n];if(!i.isDateInstance(r)||!i.isDateInstance(s))return!0;if(!i.sameDate(r,s))return!0}return!1})(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){e.altKey&&40===e.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){const n=this._lastValueValid;let r=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(r),r=this._dateAdapter.getValidDateOrNull(r);const s=!this._dateAdapter.sameDate(r,this.value);!r||s?this._cvaOnChange(r):(e&&!this.value&&this._cvaOnChange(r),n!==this._lastValueValid&&this._validatorOnChange()),s&&(this._assignValue(r),this.dateInput.emit(new f1(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new f1(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=null!=e?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){const n=this._getDateFilter();return!n||n(e)}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(fa,8),W(Rm,8))},t.\u0275dir=Xe({type:t,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[R]}),t})();const I9={provide:Xs,useExisting:en(()=>zb),multi:!0},R9={provide:Ns,useExisting:en(()=>zb),multi:!0};let zb=(()=>{class t extends k9{constructor(e,n,r,s){super(e,n,r),this._formField=s,this._closedSubscription=ce.EMPTY,this._validator=Oa.compose(super._getValidators())}set matDatepicker(e){e&&(this._datepicker=e,this._closedSubscription=e.closedStream.subscribe(()=>this._onTouched()),this._registerModel(e.registerInput(this)))}get min(){return this._min}set min(e){const n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(n,this._min)||(this._min=n,this._validatorOnChange())}get max(){return this._max}set max(e){const n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(n,this._max)||(this._max=n,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(e){const n=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==n&&this._validatorOnChange()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(fa,8),W(Rm,8),W(vb,8))},t.\u0275dir=Xe({type:t,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(e,n){1&e&&Dt("input",function(s){return n._onInput(s.target.value)})("change",function(){return n._onChange()})("blur",function(){return n._onBlur()})("keydown",function(s){return n._onKeydown(s)}),2&e&&(Ya("disabled",n.disabled),Ti("aria-haspopup",n._datepicker?"dialog":null)("aria-owns",(null==n._datepicker?null:n._datepicker.opened)&&n._datepicker.id||null)("min",n.min?n._dateAdapter.toIso8601(n.min):null)("max",n.max?n._dateAdapter.toIso8601(n.max):null)("data-mat-calendar",n._datepicker?n._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[di([I9,R9,{provide:zO,useExisting:t}]),At]}),t})(),m1=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Xe({type:t,selectors:[["","matDatepickerToggleIcon",""]]}),t})(),wE=(()=>{class t{constructor(e,n,r){this._intl=e,this._changeDetectorRef=n,this._stateChanges=ce.EMPTY;const s=Number(r);this.tabIndex=s||0===s?s:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=si(e)}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.datepicker?this.datepicker.stateChanges:ui(),n=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:ui(),r=this.datepicker?wt(this.datepicker.openedStream,this.datepicker.closedStream):ui();this._stateChanges.unsubscribe(),this._stateChanges=wt(this._intl.changes,e,n,r).subscribe(()=>this._changeDetectorRef.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(W(Bb),W(Jn),Vr("tabindex"))},t.\u0275cmp=wi({type:t,selectors:[["mat-datepicker-toggle"]],contentQueries:function(e,n,r){if(1&e&&An(r,m1,5),2&e){let s;$t(s=Gt())&&(n._customIcon=s.first)}},viewQuery:function(e,n){if(1&e&&kn(u9,5),2&e){let r;$t(r=Gt())&&(n._button=r.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(e,n){1&e&&Dt("click",function(s){return n._open(s)}),2&e&&(Ti("tabindex",null)("data-mat-calendar",n.datepicker?n.datepicker.id:null),bn("mat-datepicker-toggle-active",n.datepicker&&n.datepicker.opened)("mat-accent",n.datepicker&&"accent"===n.datepicker.color)("mat-warn",n.datepicker&&"warn"===n.datepicker.color))},inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[R],ngContentSelectors:f9,decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(e,n){1&e&&(Qo(p9),H(0,"button",0,1),Pe(2,h9,2,0,"svg",2),gr(3),U()),2&e&&(le("disabled",n.disabled)("disableRipple",n.disableRipple),Ti("aria-haspopup",n.datepicker?"dialog":null)("aria-label",n.ariaLabel||n._intl.openCalendarLabel)("tabindex",n.disabled?-1:n.tabIndex),q(2),le("ngIf",!n._customIcon))},dependencies:[ef,Gl],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}\n"],encapsulation:2,changeDetection:0}),t})(),P9=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[Bb,S9],imports:[[gs,mb,Vh,hb,zh,yi],Hu]}),t})();var CE=Ke(949);const O9=["qrcElement"];let F9=(()=>{class t{constructor(e,n){this.renderer=e,this.sanitizer=n,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new Ht,this.context=null}ngOnChanges(){var e=this;return Wv(function*(){yield e.createQRCode()})()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(typeof e>"u"||""===e||"null"===e||null===e):!(typeof e>"u")}toDataURL(e){return new Promise((n,r)=>{(0,CE.hz)(this.qrdata,e,(s,u)=>{s?r(s):n(u)})})}toCanvas(e,n){return new Promise((r,s)=>{(0,CE.rT)(e,this.qrdata,n,u=>{u?s(u):r("success")})})}toSVG(e){return new Promise((n,r)=>{(0,CE.toString)(this.qrdata,e,(s,u)=>{s?r(s):n(u)})})}renderElement(e){for(const n of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,n);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){var e=this;return Wv(function*(){e.version&&e.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),e.version=40):e.version&&e.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),e.version=1):void 0!==e.version&&isNaN(e.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),e.version=void 0);try{if(!e.isValidQrCodeText(e.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");e.isValidQrCodeText(e.qrdata)&&""===e.qrdata&&(e.qrdata=" ");const n={color:{dark:e.colorDark,light:e.colorLight},errorCorrectionLevel:e.errorCorrectionLevel,margin:e.margin,scale:e.scale,version:e.version,width:e.width},r=e.imageSrc,s=e.imageHeight||40,u=e.imageWidth||40;switch(e.elementType){case"canvas":const _=e.renderer.createElement("canvas");e.context=_.getContext("2d"),e.toCanvas(_,n).then(()=>{if(e.ariaLabel&&e.renderer.setAttribute(_,"aria-label",`${e.ariaLabel}`),e.title&&e.renderer.setAttribute(_,"title",`${e.title}`),r&&e.context){e.centerImage=new Image(u,s),r!==e.centerImage.src&&(e.centerImage.src=r),s!==e.centerImage.height&&(e.centerImage.height=s),u!==e.centerImage.width&&(e.centerImage.width=u);const A=e.centerImage;A&&(A.onload=()=>{e.context?.drawImage(A,_.width/2-u/2,_.height/2-s/2,u,s)})}e.renderElement(_),e.emitQRCodeURL(_)}).catch(A=>{console.error("[angularx-qrcode] canvas error:",A)});break;case"svg":const b=e.renderer.createElement("div");e.toSVG(n).then(A=>{e.renderer.setProperty(b,"innerHTML",A);const B=b.firstChild;e.renderer.setAttribute(B,"height",`${e.width}`),e.renderer.setAttribute(B,"width",`${e.width}`),e.renderElement(B),e.emitQRCodeURL(B)}).catch(A=>{console.error("[angularx-qrcode] svg error:",A)});break;default:const S=e.renderer.createElement("img");e.toDataURL(n).then(A=>{e.alt&&S.setAttribute("alt",e.alt),e.ariaLabel&&S.setAttribute("aria-label",e.ariaLabel),S.setAttribute("src",A),e.title&&S.setAttribute("title",e.title),e.renderElement(S),e.emitQRCodeURL(S)}).catch(A=>{console.error("[angularx-qrcode] img/url error:",A)})}}catch(n){console.error("[angularx-qrcode] Error generating QR Code:",n.message)}})()}emitQRCodeURL(e){const n=e.constructor.name;if(n===SVGSVGElement.name){const u=new Blob([e.outerHTML],{type:"image/svg+xml"}),_=URL.createObjectURL(u),b=this.sanitizer.bypassSecurityTrustUrl(_);return void this.qrCodeURL.emit(b)}let r="";n===HTMLCanvasElement.name&&(r=e.toDataURL("image/png")),n===HTMLImageElement.name&&(r=e.src),fetch(r).then(s=>s.blob()).then(s=>URL.createObjectURL(s)).then(s=>this.sanitizer.bypassSecurityTrustUrl(s)).then(s=>{this.qrCodeURL.emit(s)}).catch(s=>{console.error("[angularx-qrcode] Error when fetching image/png URL: "+s)})}}return t.\u0275fac=function(e){return new(e||t)(W(Tc),W(Iv))},t.\u0275cmp=wi({type:t,selectors:[["qrcode"]],viewQuery:function(e,n){if(1&e&&kn(O9,7),2&e){let r;$t(r=Gt())&&(n.qrcElement=r.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[R],decls:2,vars:2,consts:[["qrcElement",""]],template:function(e,n){1&e&&bt(0,"div",null,0),2&e&&_r(n.cssClass)},encapsulation:2,changeDetection:0}),t})(),L9=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})();function B9(t,i){if(1&t){const e=Tn();H(0,"mat-card",57),Dt("click",function(){const s=Jt(e).$implicit;return pi(Me(2).openDialog(s.accion))}),H(1,"mat-icon",58),ge(2),U(),H(3,"mat-card-title",59),ge(4),U(),H(5,"mat-card-title",60),Dt("click",function(){Jt(e);const r=Me().$implicit;return pi(Me().openDialog(r))}),ge(6),U()()}if(2&t){const e=i.$implicit;q(2),Lt(e.icono),q(2),Lt(e.nombre),q(2),Lt(e.descripcion)}}function N9(t,i){if(1&t&&(H(0,"div")(1,"mat-card",54)(2,"div",23)(3,"mat-card-title",55),ge(4),U(),Pe(5,B9,7,3,"mat-card",56),U()()()),2&t){const e=i.$implicit;_r(e.class),q(4),Lt(e.tituloSeccion),q(1),le("ngForOf",e.opciones)}}function z9(t,i){1&t&&ge(0),2&t&&Lt(Me(2).$implicit.tituloStep)}function V9(t,i){1&t&&Pe(0,z9,1,1,"ng-template",65)}function j9(t,i){if(1&t&&(H(0,"mat-hint",74),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function U9(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",70)(2,"mat-label"),ge(3),U(),H(4,"input",71,72),Dt("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")})("keypress",function(r){Jt(e);const s=Me().$implicit,u=Me(2);return pi(1==s.keypress?u.soloNumeros(r):"")}),U(),Pe(6,j9,2,2,"mat-hint",73),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function H9(t,i){if(1&t&&(H(0,"mat-hint",74),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function $9(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field",75)(2,"mat-label"),ge(3),U(),H(4,"textarea",76,72),ge(6,"                                                    "),U(),Pe(7,H9,2,2,"mat-hint",73),U()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(3),le("ngIf",e.maxLength>0)}}function G9(t,i){if(1&t&&(H(0,"mat-hint",74),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function q9(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",70)(2,"mat-label"),ge(3),U(),H(4,"input",71,72),Dt("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")})("keypress",function(r){Jt(e);const s=Me(3).$implicit,u=Me(2);return pi(1==s.keypress?u.soloNumeros(r):"")}),U(),Pe(6,G9,2,2,"mat-hint",73),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function W9(t,i){if(1&t&&(H(0,"mat-option",80),ge(1),U()),2&t){const e=i.$implicit;le("value",e.id),q(1),Yn(" ",e.viewValue," ")}}function Z9(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field")(2,"mat-label"),ge(3),U(),H(4,"mat-select",78),Pe(5,W9,2,2,"mat-option",79),U()()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),q(1),le("ngForOf",e.seleccionable)}}function Y9(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field")(2,"mat-label"),ge(3),U(),bt(4,"input",81,72),H(6,"mat-datepicker-toggle",82)(7,"mat-icon",83),ge(8,"date_range"),U()(),bt(9,"mat-datepicker",null,84),U()()),2&t){const e=Zn(10),n=Me(3).$implicit;q(3),Lt(n.nombre),q(1),Fi("formControlName",n.id),le("matDatepicker",e),q(2),le("for",e)}}function X9(t,i){if(1&t&&(H(0,"div")(1,"div",67),Pe(2,q9,7,4,"div",68),Pe(3,Z9,6,3,"div",68),Pe(4,Y9,11,4,"div",68),U()()),2&t){const e=i.$implicit;q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","select"),q(1),le("ngSwitchCase","date")}}function K9(t,i){if(1&t&&(H(0,"div",77),Pe(1,X9,5,6,"div",14),U()),2&t){const e=Me().$implicit;_r(e.restclass),q(1),le("ngForOf",e.controlesComplemento)}}function Q9(t,i){if(1&t&&(H(0,"div",18)(1,"label",66)(2,"b"),ge(3),U()(),H(4,"div",67),Pe(5,U9,7,4,"div",68),Pe(6,$9,8,4,"div",68),U(),Pe(7,K9,2,3,"div",69),U()),2&t){const e=i.$implicit;q(3),Lt(e.nombrefila),q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","textarea"),q(1),le("ngIf",e.controlesComplemento)}}function J9(t,i){if(1&t&&(H(0,"mat-icon"),ge(1),U()),2&t){const e=Me().$implicit;q(1),Lt(e.icono)}}function eq(t,i){if(1&t){const e=Tn();H(0,"div",85)(1,"button",86),Dt("click",function(){return pi(Jt(e).$implicit.click())}),Pe(2,J9,2,1,"mat-icon",15),ge(3),U()()}if(2&t){const e=i.$implicit,n=Me(2);q(1),_r(e.class),le("disabled",n.controlesFormGroup.invalid),q(1),le("ngIf",e.icono),q(1),Yn(" ",e.nombre," ")}}function tq(t,i){1&t&&(H(0,"button",87),ge(1,"Regresar"),U())}function iq(t,i){1&t&&(H(0,"button",88),ge(1,"Siguiente"),U())}function nq(t,i){if(1&t&&(H(0,"mat-step"),Pe(1,V9,1,0,null,15),H(2,"div",18)(3,"div",19)(4,"form",20),Pe(5,Q9,8,7,"div",21),Pe(6,eq,4,5,"div",61),U()()(),H(7,"div",62),Pe(8,tq,2,0,"button",63),Pe(9,iq,2,0,"button",64),U()()),2&t){const e=i.$implicit,n=Me();q(1),le("ngIf",e.tituloStep),q(3),le("formGroup",n.controlesFormGroup),q(1),le("ngForOf",e.controles),q(1),le("ngForOf",n.botonesSecundarios),q(2),le("ngIf",e.previous),q(1),le("ngIf",e.next)}}function rq(t,i){if(1&t&&(H(0,"th",101),ge(1),U()),2&t){const e=Me(2).$implicit;q(1),Yn(" ",e.displayName," ")}}function oq(t,i){if(1&t&&(H(0,"td",102),ge(1),U()),2&t){const e=i.$implicit,n=Me(2).$implicit;q(1),Yn(" ",e[n.id]," ")}}function sq(t,i){1&t&&(H(0,"div"),Pe(1,rq,2,1,"th",99),Pe(2,oq,2,1,"td",100),U())}function aq(t,i){if(1&t&&(H(0,"th",101),ge(1),U()),2&t){const e=Me(2).$implicit;q(1),Yn(" ",e.displayName," ")}}function lq(t,i){if(1&t){const e=Tn();H(0,"span",103),Dt("click",function(){Jt(e);const r=Me().$implicit;return pi(Me(2).$implicit.secondAccion(r))}),ge(1),U()}if(2&t){const e=Me(3).$implicit;Fi("title",e.secondTitleAccion),q(1),Lt(e.secondIcon)}}function cq(t,i){if(1&t){const e=Tn();H(0,"td",102)(1,"span",103),Dt("click",function(){const s=Jt(e).$implicit;return pi(Me(2).$implicit.accion(s))}),ge(2),U(),Pe(3,lq,2,2,"span",104),H(4,"span",105),Dt("click",function(){const s=Jt(e).$implicit;return pi(Me(5).descargarQr(s))}),ge(5,"person_pin"),U()()}if(2&t){const e=i.$implicit,n=Me(2).$implicit;q(1),Fi("title",n.titleAccion),q(1),Lt(n.icono),q(1),le("ngIf",("Cuenta creada"===e.estado||"Pesaje iniciado"===e.estado||"Cuenta abierta"===e.estado)&&!0===e.parcialidadesCompletas)}}function dq(t,i){1&t&&(H(0,"div"),Pe(1,aq,2,1,"th",99),Pe(2,cq,6,3,"td",100),U())}function uq(t,i){if(1&t&&(Wa(0,97),H(1,"div",67),Pe(2,sq,3,0,"div",98),Pe(3,dq,3,0,"div",68),U(),Za()),2&t){const e=i.$implicit;Fi("matColumnDef",e.id),q(1),le("ngSwitch",e.id),q(2),le("ngSwitchCase","accion")}}function hq(t,i){1&t&&bt(0,"tr",106)}function pq(t,i){1&t&&bt(0,"tr",107)}function fq(t,i){if(1&t&&(H(0,"div",90)(1,"div",91)(2,"table",92),Pe(3,uq,4,3,"ng-container",93),Pe(4,hq,1,0,"tr",94),Pe(5,pq,1,0,"tr",95),U()(),bt(6,"mat-paginator",96),U()),2&t){const e=Me(2);q(2),le("dataSource",e.dataSource),q(1),le("ngForOf",e.columnsToDisplay),q(1),le("matHeaderRowDef",e.columnsChildrenIds),q(1),le("matRowDefColumns",e.columnsChildrenIds),q(1),le("length",e.dataSource.data.length)("pageSize",5)}}function mq(t,i){if(1&t&&(H(0,"div"),Pe(1,fq,7,6,"div",89),U()),2&t){const e=Me();q(1),le("ngIf",e.showTable)}}function gq(t,i){if(1&t&&(H(0,"mat-icon"),ge(1),U()),2&t){const e=Me().$implicit;q(1),Lt(e.icono)}}function _q(t,i){if(1&t){const e=Tn();H(0,"div")(1,"button",86),Dt("click",function(){return pi(Jt(e).$implicit.click())}),Pe(2,gq,2,1,"mat-icon",15),ge(3),U()()}if(2&t){const e=i.$implicit,n=Me();q(1),_r(e.class),le("disabled",e.disable&&n.controlesFormGroup.invalid),q(1),le("ngIf",e.icono),q(1),Yn(" ",e.nombre," ")}}function yq(t,i){if(1&t&&(H(0,"mat-hint",74),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function vq(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",70)(2,"mat-label"),ge(3),U(),H(4,"input",108,72),Dt("keypress",function(r){Jt(e);const s=Me().$implicit,u=Me();return pi(1==s.keypress?u.soloNumeros(r):"")})("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")}),U(),Pe(6,yq,2,2,"mat-hint",73),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function bq(t,i){if(1&t&&(H(0,"mat-hint",74),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function xq(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field",75)(2,"mat-label"),ge(3),U(),H(4,"textarea",76,72),ge(6,"                                             "),U(),Pe(7,bq,2,2,"mat-hint",73),U()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(3),le("ngIf",e.maxLength>0)}}function wq(t,i){if(1&t&&(H(0,"mat-hint",74),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function Cq(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",70)(2,"mat-label"),ge(3),U(),H(4,"input",109,72),Dt("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")}),U(),Pe(6,wq,2,2,"mat-hint",73),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function Mq(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field")(2,"mat-label"),ge(3),U(),bt(4,"input",81,72),H(6,"mat-datepicker-toggle",82)(7,"mat-icon",83),ge(8,"date_range"),U()(),bt(9,"mat-datepicker",null,110),U()()),2&t){const e=Zn(10),n=Me().$implicit;q(3),Lt(n.nombre),q(1),Fi("formControlName",n.id),le("matDatepicker",e),q(2),le("for",e)}}function Dq(t,i){if(1&t&&(H(0,"mat-hint",74),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function Sq(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field",75)(2,"mat-label"),ge(3),U(),H(4,"textarea",111,72),ge(6,"                                                     "),U(),Pe(7,Dq,2,2,"mat-hint",73),U()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(3),le("ngIf",e.maxLength>0)}}function Eq(t,i){if(1&t&&(H(0,"div")(1,"div",67),Pe(2,Cq,7,4,"div",68),Pe(3,Mq,11,4,"div",68),Pe(4,Sq,8,4,"div",68),U()()),2&t){const e=i.$implicit;q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","date"),q(1),le("ngSwitchCase","textarea")}}function Tq(t,i){if(1&t&&(H(0,"div",77),Pe(1,Eq,5,6,"div",14),U()),2&t){const e=Me().$implicit;_r(e.restclass),q(1),le("ngForOf",e.controlesComplemento)}}function kq(t,i){if(1&t&&(H(0,"div",18)(1,"label",66)(2,"b"),ge(3),U()(),H(4,"div",67),Pe(5,vq,7,4,"div",68),Pe(6,xq,8,4,"div",68),U(),Pe(7,Tq,2,3,"div",69),U()),2&t){const e=i.$implicit;q(3),Lt(e.nombrefila),q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","textarea"),q(1),le("ngIf",e.controlesComplemento)}}function Aq(t,i){if(1&t&&(H(0,"mat-icon"),ge(1),U()),2&t){const e=Me().$implicit;q(1),Lt(e.icono)}}function Iq(t,i){if(1&t){const e=Tn();H(0,"div")(1,"button",86),Dt("click",function(){return pi(Jt(e).$implicit.click())}),Pe(2,Aq,2,1,"mat-icon",15),ge(3),U()()}if(2&t){const e=i.$implicit,n=Me();q(1),_r(e.class),le("disabled",e.disabled&&n.controlesSecundariosFormGroup.invalid),q(1),le("ngIf",e.icono),q(1),Yn(" ",e.nombre," ")}}let Rq=(()=>{class t{constructor(e,n,r,s,u){this.spinner=e,this.loginService=n,this.router=r,this.solicitudesService=s,this.cuentasService=u,this.dataSource=new dE,this.columnsToDisplay=[],this.columnsChildrenIds=[],this.tituloFormulario="",this.tituloModalSecundario="",this.controlesModalSecundario=[],this.botonesModalSecundario=[],this.showTable=!1,this.myAngularxQrCode="beneficio-cafe",this.qrCodeDownloadLink="",this.controlesFormGroup=new Id({}),this.controlesSecundariosFormGroup=new Id({});const _=[];_.push({tituloSeccion:"",class:"carousel-item active",opciones:[{nombre:"Crear solicitud",descripcion:"Crear una solicitud al Beneficio del Cafe",icono:"library_add",accion:"crearSolicitud"},{nombre:"Solicitudes realizadas",descripcion:"Ver solicitudes en proceso",icono:"playlist_add_check",accion:"verSolicitudes"},{nombre:"Cerrar sesi\xf3n",descripcion:"Cerrar sesi\xf3n",icono:"power_settings_new",accion:"cerrarSesion"}]}),this.opcionesMenu=_}onChangeURL(e){this.qrCodeDownloadLink=e}descargarQr(e){this.myAngularxQrCode=e.piloto,$("#opcionesGenerales").modal("hide"),$("#verCarnetTransportista").modal("show"),console.log(e)}ngOnInit(){this.spinner.show(),"ROLE_UMG_BC_AGRICULTOR"!==localStorage.getItem("role")&&(this.spinner.hide(),this.router.navigate(["login"])),this.idUsuario=localStorage.getItem("idUser"),this.spinner.hide()}openDialog(e){switch(setTimeout(()=>this.dataSource.paginator=this.paginator),e){case"crearSolicitud":this.tituloFormulario="Creacion de Solicitud",$("#opcionesGenerales").modal("show");break;case"verSolicitudes":this.tituloFormulario="Ver solicitudes en proceso",$("#opcionesGenerales").modal("show");break;case"cerrarSesion":this.cerrarSesion()}this.generarControles(e)}generarControles(e){let n=[],r=[];switch(e){case"crearSolicitud":this.spinner.show(),n.push({tituloStep:"Informacion nueva solicitud",controles:[{id:"descripcion",nombrefila:"Descripci\xf3n solicitud",formControl:new Fa("",Oa.required),change:!1,tipo:"input",nombre:"Descripci\xf3n de la solicitud",maxLength:100,class:"col-8",restclass:"",divider:!0},{id:"placa",nombrefila:"Informaci\xf3n del transporte",formControl:new Fa("",Oa.required),change:!1,tipo:"input",nombre:"Placa del transporte",maxLength:15,class:"col-4",restclass:"col-4",divider:!0,controlesComplemento:[{id:"piloto",formControl:new Fa("",Oa.required),tipo:"input",nombre:"Licencia del piloto asignado",maxLength:15,class:"col-12",change:!1}]},{id:"parcialidades",nombrefila:"Parcialidades a enviar",formControl:new Fa("",Oa.required),change:!1,keypress:!0,tipo:"input",nombre:"Cantidad de parcialidades a enviar",maxLength:3,class:"col-4",restclass:"col-4",divider:!0}]}),r.push({nombre:"Cancelar",class:"btn-container mt-2",click:()=>this.cleanForm(),disable:!1},{nombre:"Guardar",icono:"save",class:"btn-container mt-2 ml-2",click:()=>this.crearSolicitud(),disable:!0}),this.spinner.hide();break;case"verSolicitudes":this.spinner.show(),this.columnsToDisplay=[{id:"descripcion",displayName:"Descripci\xf3n"},{id:"noCuenta",displayName:"No. Cuenta"},{id:"estado",displayName:"Estado solicitud"},{id:"accion",displayName:"Acci\xf3n",icono:"remove_red_eye",titleAccion:"Ver tracking",accion:u=>this.verTracking(u),secondIcon:"local_shipping",secondTitleAccion:"Enviar parcialidad",secondAccion:u=>this.ingresarParcialidad(u)}],this.columnsChildrenIds=["descripcion","noCuenta","estado","accion"],n.push({tituloStep:"Visualizacion solicitudes creadas",controles:[]}),this.solicitudesService.getSolicitudesByUsuario({usuario:this.idUsuario}).subscribe(u=>{this.showTable=!0,this.dataSource.data=u,console.log(u),setTimeout(()=>this.dataSource.paginator=this.paginator),this.spinner.hide()},u=>{this.spinner.hide()}),r.push({nombre:"Cerrar",class:"btn-container mt-2",click:()=>this.cleanForm(),disable:!1})}this.controles=n,this.botonesFooter=r,this.controles.forEach(s=>{s.controles.forEach(u=>{u.controlesComplemento&&u.controlesComplemento.forEach(_=>{this.controlesFormGroup.addControl(_.id,_.formControl)}),this.controlesFormGroup.addControl(u.id,u.formControl)})}),this.controlesFormGroup.updateValueAndValidity()}ingresarParcialidad(e){console.log(e),this.spinner.show(),this.tituloModalSecundario="Ingreso de parcialidades";let n=[];this.solicitudesService.consultarDisponibilidadParcialidades({solicitud:e.idSolicitud}).subscribe(s=>{this.controlesModalSecundario.push({id:"piloto",nombrefila:"Informacion transporte",formControl:new Fa({value:"",disabled:!0},Oa.required),tipo:"input",nombre:"Piloto",class:"col-5",restclass:"3",maxLength:15,controlesComplemento:[{id:"placa",formControl:new Fa({value:"",disabled:!0},Oa.required),tipo:"input",nombre:"Placa",class:"col-12"}]},{id:"peso",nombrefila:"Peso enviado",formControl:new Fa({value:"",disabled:!1},Oa.required),tipo:"input",nombre:"Peso de la parcialidad a enviar (medida en toneladas)",class:"col-5",restclass:"3",maxLength:3,keypress:!0,controlesComplemento:[{id:"noParcialidad",formControl:new Fa({value:"",disabled:!0}),tipo:"input",nombre:"N\xfamero de parcialidad",class:"col-12"}]}),this.controlesModalSecundario.forEach(u=>{u.controlesComplemento&&u.controlesComplemento.forEach(_=>{this.controlesSecundariosFormGroup.addControl(_.id,_.formControl)}),this.controlesSecundariosFormGroup.addControl(u.id,u.formControl)}),this.controlesSecundariosFormGroup.updateValueAndValidity(),this.controlesSecundariosFormGroup.get("placa")?.setValue(e.placa),this.controlesSecundariosFormGroup.get("piloto")?.setValue(e.piloto),this.controlesSecundariosFormGroup.get("noParcialidad")?.setValue(Number(s.message)+1),this.spinner.hide()},s=>{this.spinner.hide(),Ur().fire("Error","No fue posible realizar lo solicitado, por favor intentente en otro momento","error")}),n.push({nombre:"Regresar",icono:"arrow_back",class:"btn-container mt-2 ml-2",click:()=>this.regresar()},{nombre:"Enviar parcialidad",icono:"local_shipping",class:"btn-container mt-2 ml-2",click:()=>this.enviarParcialidad(e),disabled:!0}),this.botonesModalSecundario=n,$("#opcionesGenerales").modal("hide"),$("#modalSecundary").modal("show")}enviarParcialidad(e){this.spinner.show();let n={solicitud:e.idSolicitud,pesoEnviado:Number(this.controlesSecundariosFormGroup.get("peso")?.value),placa:e.placa,piloto:e.piloto,usuarioCreacion:this.idUsuario};this.solicitudesService.crearParcialidad(n).subscribe(r=>{let s={solicitud:e.idSolicitud,nuevoEstado:"55891e4a-ea98-11ed-a05b-0242ac120003",usuarioModificacion:this.idUsuario,fechaModificacion:new Date};1===Number(this.controlesSecundariosFormGroup.get("noParcialidad")?.value)?(this.solicitudesService.actualizarSolicitudAgricultor(s).subscribe(b=>{Ur().fire("Parcialidad enviada","Se envi\xf3 la parcialidad con \xe9xito al Beneficio del Caf\xe9","success"),this.spinner.hide(),$("#modalSecundary").modal("hide"),$("#opcionesGenerales").modal("hide"),this.cleanForm()},b=>{this.spinner.hide(),Ur().fire("Error","No fue posible realizar lo solicitado, por favor intentente en otro momento","error")}),this.cuentasService.actualizarCuenta({idCuenta:e.idCuenta,nuevoEstado:"55891e4a-ea98-11ed-a05b-0242ac120003",usuarioModificacion:this.idUsuario}).subscribe(b=>{this.spinner.hide()},b=>{this.spinner.hide(),Ur().fire("Error","No fue posible realizar lo solicitado, por favor intentente en otro momento","error")})):(Ur().fire("Parcialidad enviada","Se envi\xf3 la parcialidad con \xe9xito al Beneficio del Caf\xe9","success"),this.spinner.hide(),$("#modalSecundary").modal("hide"),$("#opcionesGenerales").modal("hide"))},r=>{this.spinner.hide(),Ur().fire("Error","No fue posible realizar lo solicitado, por favor intentente en otro momento","error")})}regresar(){this.botonesModalSecundario=[],this.controlesModalSecundario=[],Object.keys(this.controlesSecundariosFormGroup.controls).forEach(e=>{this.controlesSecundariosFormGroup.removeControl(e)}),this.controlesSecundariosFormGroup.updateValueAndValidity(),$("#detalleEsperaAprobacion").modal("hide"),$("#detalleCuentaCreada").modal("hide"),$("#modalSecundary").modal("hide"),$("#detalleCuentaAbierta").modal("hide"),$("#detallePesajeIniciado").modal("hide"),$("#detalleCuentaConfirmada").modal("hide"),$("#detalleCuentaCerrada").modal("hide"),$("#detallaSolicitudRechazada").modal("hide"),$("#verCarnetTransportista").modal("hide"),$("#opcionesGenerales").modal("show")}verTracking(e){switch(console.log(e.estado),e.estado){case"En espera de aprobacion":$("#opcionesGenerales").modal("hide"),$("#detalleEsperaAprobacion").modal("show");break;case"Cuenta creada":$("#opcionesGenerales").modal("hide"),$("#detalleCuentaCreada").modal("show");break;case"Cuenta abierta":$("#opcionesGenerales").modal("hide"),$("#detalleCuentaAbierta").modal("show");break;case"Pesaje iniciado":$("#opcionesGenerales").modal("hide"),$("#detallePesajeIniciado").modal("show");break;case"Cuenta cerrada":$("#opcionesGenerales").modal("hide"),$("#detalleCuentaCerrada").modal("show");break;case"Cuenta confirmada":$("#opcionesGenerales").modal("hide"),$("#detalleCuentaConfirmada").modal("show");break;case"Solicitud rechazada":$("#opcionesGenerales").modal("hide"),$("#detallaSolicitudRechazada").modal("show")}}crearSolicitud(){this.spinner.show();const e={descripcion:this.controlesFormGroup.get("descripcion")?.value,estadoSolicitiud:"58ec8186-e3fd-11ed-b5ea-0242ac120002",placa:this.controlesFormGroup.get("placa")?.value,cantidadParcialidades:this.controlesFormGroup.get("parcialidades")?.value,piloto:this.controlesFormGroup.get("piloto")?.value,usuarioCreacion:this.idUsuario,fechaCreacion:new Date};this.solicitudesService.crearsolicitud(e).subscribe(n=>{$("#opcionesGenerales").modal("hide"),this.cleanForm(),Ur().fire("Solicitud creada con exito",'Se cre\xf3 la solicitud exitosamente, puedes consultar el estado de la solicitud en el m\xf3dulo "Solicitudes Realizadas"',"success"),this.spinner.hide()},n=>{422===n.status?Ur().fire("Error","La placa o el piloto proporcionados no existen, por favor validar","info"):Ur().fire("Error","No fue posible crear la solicitud, por favor intentente en otro momento","error"),this.spinner.hide()})}cerrarSesion(){this.spinner.show(),setTimeout(()=>{localStorage.clear(),sessionStorage.clear(),this.spinner.hide(),this.router.navigate(["login"]),this.loginService.role="",this.loginService.id=""},800)}cleanForm(){this.botonesModalSecundario=[],this.controlesModalSecundario=[],Object.keys(this.controlesFormGroup.controls).forEach(e=>{this.controlesFormGroup.removeControl(e)}),Object.keys(this.controlesSecundariosFormGroup.controls).forEach(e=>{this.controlesSecundariosFormGroup.removeControl(e)}),this.controlesSecundariosFormGroup.updateValueAndValidity(),this.controlesFormGroup.updateValueAndValidity(),this.controles=[],this.botonesFooter=[],this.showTable=!1,this.dataSource.data=[],$("#opcionesGenerales").modal("hide")}soloNumeros(e){const n=e.keyCode||e.which,r=String.fromCharCode(n);let _=!1;for(const b in".")if(n==="."[b])return _=!0,!0;return!(-1==="0123456789".indexOf(r)&&!_)}}return t.\u0275fac=function(e){return new(e||t)(W(T_),W(D_),W(Ho),W(o1),W(s1))},t.\u0275cmp=wi({type:t,selectors:[["app-agricultor-main"]],viewQuery:function(e,n){if(1&e&&kn(B_,5),2&e){let r;$t(r=Gt())&&(n.paginator=r.first)}},decls:400,vars:13,consts:[[1,"card-body",2,"margin-top","2%","margin-left","3%","margin-right","3%"],[1,"titulo"],[1,"text-center","m-2","encabezado"],["data-interval","false",1,"carousel-inner"],[3,"class",4,"ngFor","ngForOf"],["id","opcionesGenerales","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","col-12"],[1,"titulo","top"],[1,"text-center","m-2","titulo"],[1,"modal-body"],[1,"container"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"modal-footer"],["id","modalSecundary","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],[1,"row"],[1,"col-12","mt-2"],[3,"formGroup"],["class","row",4,"ngFor","ngForOf"],["id","detalleEsperaAprobacion","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],[1,"row","d-flex","justify-content-center"],[1,"col-4"],[1,"centrarImg"],["src","../../../assets/img/esperar.gif","height","280px"],[1,"flexbox"],[1,"col-1"],["src","../../../assets/img/creada.png","height","70px"],["src","../../../assets/img/iniciado.png","height","70px"],["src","../../../assets/img/abierta.png","height","70px"],["src","../../../assets/img/finalizado.png","height","70px"],["src","../../../assets/img/cerrada.png","height","70px"],["src","../../../assets/img/confirmada.png","height","70px"],["mat-raised-button","",1,"btn-container","mt-2","ml-2",3,"click"],["id","detalleCuentaCreada","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],["src","../../../assets/img/esperar.png","height","70px"],["src","../../../assets/img/creada.gif","height","280px"],["id","detalleCuentaAbierta","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],["src","../../../assets/img/iniciado.gif","height","280px"],["id","detallePesajeIniciado","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],["src","../../../assets/img/abierta.gif","height","280px"],["id","detalleCuentaCerrada","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],["src","../../../assets/img/cerrada.gif","height","280px"],["id","detalleCuentaConfirmada","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],["src","../../../assets/img/confirmada.gif","height","280px"],["id","detallaSolicitudRechazada","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],["src","../../../assets/img/rechazado.gif","height","280px"],["id","verCarnetTransportista","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],[1,"col-3"],[3,"qrdata","width","errorCorrectionLevel","qrCodeURL"],["mat-raised-button","",1,"btn-container","mt-1","ml-4","mb-2"],["download","qrcode",2,"color","white",3,"href"],[1,"mt-5","backgroundIcons"],[2,"position","absolute"],["class","col-lg-2 col-md-4 col-sm-4 ml-5 mr-4 mb-3 mt-5 colorSecundario heightOptions d-flex justify-content-center","style","cursor: pointer","data-toggle","modal","data-target","#opcionesGenerales",3,"click",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#opcionesGenerales",1,"col-lg-2","col-md-4","col-sm-4","ml-5","mr-4","mb-3","mt-5","colorSecundario","heightOptions","d-flex","justify-content-center",2,"cursor","pointer",3,"click"],[1,"iconOptions","mt-3"],[1,"text-center","tituloCampo","textOptions",2,"margin-top","80px"],[1,"text-center","enlaces","textOptions",2,"margin-top","105px",3,"click"],["class","row d-flex justify-content-center mt-4",4,"ngFor","ngForOf"],[2,"text-align","right"],["mat-button","","matStepperPrevious","","class","botonesStepper mr-2",4,"ngIf"],["mat-button","","matStepperNext","","class","botonesStepper ml-2",4,"ngIf"],["matStepLabel",""],[1,"col-3","mt-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","col",3,"class",4,"ngIf"],[1,"col-12"],["matInput","","autocomplete","off",3,"formControlName","maxlength","change","keypress"],["campo",""],["align","end",4,"ngIf"],["align","end"],[1,"col-ms-12","col-md-12","col-lg-12"],["matInput","","autocomplete","off",3,"formControlName","maxlength"],[1,"col"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","readonly","",3,"matDatepicker","formControlName"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["picker",""],[1,"row","d-flex","justify-content-center","mt-4"],["mat-raised-button","",3,"disabled","click"],["mat-button","","matStepperPrevious","",1,"botonesStepper","mr-2"],["mat-button","","matStepperNext","",1,"botonesStepper","ml-2"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],[1,"table-responsive"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize"],[3,"matColumnDef"],[4,"ngSwitchDefault"],["mat-header-cell","","class","headerTable",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"headerTable"],["mat-cell",""],[1,"material-icons",2,"cursor","pointer",3,"title","click"],["class","material-icons","style","cursor: pointer;",3,"title","click",4,"ngIf"],["title","Descargar Carnet Transportista",1,"material-icons",2,"cursor","pointer",3,"click"],["mat-header-row",""],["mat-row","",1,"example-element-row"],["matInput","","autocomplete","off",3,"formControlName","maxlength","keypress","change"],["matInput","","autocomplete","off",3,"formControlName","maxlength","change"],["pickerSecundary",""],["matInput","","autocomplete","off",1,"tama\xf1oTextArea",3,"formControlName","maxlength"]],template:function(e,n){1&e&&(H(0,"div",0)(1,"div",1)(2,"mat-card-title",2),ge(3,"Bandeja del Agricultor"),U()(),H(4,"div",3),Pe(5,N9,6,4,"div",4),U()(),H(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h5",9)(11,"div",10)(12,"mat-card-title",11),ge(13),U()()()(),H(14,"div",12)(15,"div",13)(16,"mat-horizontal-stepper"),Pe(17,nq,10,6,"mat-step",14),U()(),Pe(18,mq,2,1,"div",15),H(19,"div",16),Pe(20,_q,4,5,"div",14),U()()()()(),H(21,"div",17)(22,"div",6)(23,"div",7)(24,"div",8)(25,"h5",9)(26,"div",10)(27,"mat-card-title",11),ge(28),U()()()(),H(29,"div",12)(30,"div",13)(31,"div",18)(32,"div",19)(33,"form",20),Pe(34,kq,8,7,"div",21),U()()()()(),H(35,"div",16),Pe(36,Iq,4,5,"div",14),U()()()(),H(37,"div",22)(38,"div",6)(39,"div",7)(40,"div",8)(41,"h5",9)(42,"div",10)(43,"mat-card-title",11),ge(44,"Ver tracking de solicitud"),U()()()(),H(45,"div",12)(46,"div",13)(47,"div",23)(48,"div",24)(49,"div",25),bt(50,"img",26),U(),H(51,"h2",27)(52,"b"),ge(53,"En espera de aprobacion"),U()()(),H(54,"div",28)(55,"div",25),bt(56,"img",29),U(),H(57,"h3",27),ge(58,"Cuenta creada"),U()(),H(59,"div",28)(60,"div",25),bt(61,"img",30),U(),H(62,"h3",27),ge(63,"Cuenta abierta"),U()(),H(64,"div",28)(65,"div",25),bt(66,"img",31),U(),H(67,"h3",27),ge(68,"Pesaje iniciado"),U()(),H(69,"div",28)(70,"div",25),bt(71,"img",32),U(),H(72,"h3",27),ge(73,"Pesaje finalizado"),U()(),H(74,"div",28)(75,"div",25),bt(76,"img",33),U(),H(77,"h3",27),ge(78,"Cuenta cerrada"),U()(),H(79,"div",28)(80,"div",25),bt(81,"img",34),U(),H(82,"h3",27),ge(83,"Cuenta confirmada"),U()()()(),H(84,"div",16)(85,"button",35),Dt("click",function(){return n.regresar()}),H(86,"mat-icon"),ge(87,"arrow_back"),U(),ge(88," Regresar "),U()()()()()(),H(89,"div",36)(90,"div",6)(91,"div",7)(92,"div",8)(93,"h5",9)(94,"div",10)(95,"mat-card-title",11),ge(96,"Ver tracking de solicitud"),U()()()(),H(97,"div",12)(98,"div",13)(99,"div",23)(100,"div",28)(101,"div",25),bt(102,"img",37),U(),H(103,"h3",27),ge(104,"En espera de aprobacion"),U()(),H(105,"div",24)(106,"div",25),bt(107,"img",38),U(),H(108,"h2",27)(109,"b"),ge(110,"Cuenta creada"),U()()(),H(111,"div",28)(112,"div",25),bt(113,"img",30),U(),H(114,"h3",27),ge(115,"Cuenta abierta"),U()(),H(116,"div",28)(117,"div",25),bt(118,"img",31),U(),H(119,"h3",27),ge(120,"Pesaje iniciado"),U()(),H(121,"div",28)(122,"div",25),bt(123,"img",32),U(),H(124,"h3",27),ge(125,"Pesaje finalizado"),U()(),H(126,"div",28)(127,"div",25),bt(128,"img",33),U(),H(129,"h3",27),ge(130,"Cuenta cerrada"),U()(),H(131,"div",28)(132,"div",25),bt(133,"img",34),U(),H(134,"h3",27),ge(135,"Cuenta confirmada"),U()()()(),H(136,"div",16)(137,"button",35),Dt("click",function(){return n.regresar()}),H(138,"mat-icon"),ge(139,"arrow_back"),U(),ge(140," Regresar "),U()()()()()(),H(141,"div",39)(142,"div",6)(143,"div",7)(144,"div",8)(145,"h5",9)(146,"div",10)(147,"mat-card-title",11),ge(148,"Ver tracking de solicitud"),U()()()(),H(149,"div",12)(150,"div",13)(151,"div",23)(152,"div",28)(153,"div",25),bt(154,"img",37),U(),H(155,"h3",27),ge(156,"En espera de aprobacion"),U()(),H(157,"div",28)(158,"div",25),bt(159,"img",29),U(),H(160,"h3",27),ge(161,"Cuenta creada"),U()(),H(162,"div",24)(163,"div",25),bt(164,"img",40),U(),H(165,"h2",27)(166,"b"),ge(167,"Cuenta abierta"),U()()(),H(168,"div",28)(169,"div",25),bt(170,"img",31),U(),H(171,"h3",27),ge(172,"Pesaje iniciado"),U()(),H(173,"div",28)(174,"div",25),bt(175,"img",32),U(),H(176,"h3",27),ge(177,"Pesaje finalizado"),U()(),H(178,"div",28)(179,"div",25),bt(180,"img",33),U(),H(181,"h3",27),ge(182,"Cuenta cerrada"),U()(),H(183,"div",28)(184,"div",25),bt(185,"img",34),U(),H(186,"h3",27),ge(187,"Cuenta confirmada"),U()()()(),H(188,"div",16)(189,"button",35),Dt("click",function(){return n.regresar()}),H(190,"mat-icon"),ge(191,"arrow_back"),U(),ge(192," Regresar "),U()()()()()(),H(193,"div",41)(194,"div",6)(195,"div",7)(196,"div",8)(197,"h5",9)(198,"div",10)(199,"mat-card-title",11),ge(200,"Ver tracking de solicitud"),U()()()(),H(201,"div",12)(202,"div",13)(203,"div",23)(204,"div",28)(205,"div",25),bt(206,"img",37),U(),H(207,"h3",27),ge(208,"En espera de aprobacion"),U()(),H(209,"div",28)(210,"div",25),bt(211,"img",29),U(),H(212,"h3",27),ge(213,"Cuenta creada"),U()(),H(214,"div",28)(215,"div",25),bt(216,"img",30),U(),H(217,"h3",27),ge(218,"Cuenta abierta"),U()(),H(219,"div",24)(220,"div",25),bt(221,"img",42),U(),H(222,"h2",27)(223,"b"),ge(224,"Pesaje iniciado"),U()()(),H(225,"div",28)(226,"div",25),bt(227,"img",32),U(),H(228,"h3",27),ge(229,"Pesaje finalizado"),U()(),H(230,"div",28)(231,"div",25),bt(232,"img",33),U(),H(233,"h3",27),ge(234,"Cuenta cerrada"),U()(),H(235,"div",28)(236,"div",25),bt(237,"img",34),U(),H(238,"h3",27),ge(239,"Cuenta confirmada"),U()()()(),H(240,"div",16)(241,"button",35),Dt("click",function(){return n.regresar()}),H(242,"mat-icon"),ge(243,"arrow_back"),U(),ge(244," Regresar "),U()()()()()(),H(245,"div",43)(246,"div",6)(247,"div",7)(248,"div",8)(249,"h5",9)(250,"div",10)(251,"mat-card-title",11),ge(252,"Ver tracking de solicitud"),U()()()(),H(253,"div",12)(254,"div",13)(255,"div",23)(256,"div",28)(257,"div",25),bt(258,"img",37),U(),H(259,"h3",27),ge(260,"En espera de aprobacion"),U()(),H(261,"div",28)(262,"div",25),bt(263,"img",29),U(),H(264,"h3",27),ge(265,"Cuenta creada"),U()(),H(266,"div",28)(267,"div",25),bt(268,"img",30),U(),H(269,"h3",27),ge(270,"Cuenta abierta"),U()(),H(271,"div",28)(272,"div",25),bt(273,"img",31),U(),H(274,"h3",27),ge(275,"Pesaje iniciado"),U()(),H(276,"div",28)(277,"div",25),bt(278,"img",32),U(),H(279,"h3",27),ge(280,"Pesaje finalizado"),U()(),H(281,"div",24)(282,"div",25),bt(283,"img",44),U(),H(284,"h2",27)(285,"b"),ge(286,"Cuenta cerrada"),U()()(),H(287,"div",28)(288,"div",25),bt(289,"img",34),U(),H(290,"h3",27),ge(291,"Cuenta confirmada"),U()()()(),H(292,"div",16)(293,"button",35),Dt("click",function(){return n.regresar()}),H(294,"mat-icon"),ge(295,"arrow_back"),U(),ge(296," Regresar "),U()()()()()(),H(297,"div",45)(298,"div",6)(299,"div",7)(300,"div",8)(301,"h5",9)(302,"div",10)(303,"mat-card-title",11),ge(304,"Ver tracking de solicitud"),U()()()(),H(305,"div",12)(306,"div",13)(307,"div",23)(308,"div",28)(309,"div",25),bt(310,"img",37),U(),H(311,"h3",27),ge(312,"En espera de aprobacion"),U()(),H(313,"div",28)(314,"div",25),bt(315,"img",29),U(),H(316,"h3",27),ge(317,"Cuenta creada"),U()(),H(318,"div",28)(319,"div",25),bt(320,"img",30),U(),H(321,"h3",27),ge(322,"Cuenta abierta"),U()(),H(323,"div",28)(324,"div",25),bt(325,"img",31),U(),H(326,"h3",27),ge(327,"Pesaje iniciado"),U()(),H(328,"div",28)(329,"div",25),bt(330,"img",32),U(),H(331,"h3",27),ge(332,"Pesaje finalizado"),U()(),H(333,"div",28)(334,"div",25),bt(335,"img",33),U(),H(336,"h3",27),ge(337,"Cuenta cerrada"),U()(),H(338,"div",24)(339,"div",25),bt(340,"img",46),U(),H(341,"h2",27)(342,"b"),ge(343,"Cuenta confirmada"),U()()()()(),H(344,"div",16)(345,"button",35),Dt("click",function(){return n.regresar()}),H(346,"mat-icon"),ge(347,"arrow_back"),U(),ge(348," Regresar "),U()()()()()(),H(349,"div",47)(350,"div",6)(351,"div",7)(352,"div",8)(353,"h5",9)(354,"div",10)(355,"mat-card-title",11),ge(356,"Ver tracking de solicitud"),U()()()(),H(357,"div",12)(358,"div",13)(359,"div",23)(360,"div",28)(361,"div",25),bt(362,"img",37),U(),H(363,"h3",27),ge(364,"En espera de aprobacion"),U()(),H(365,"div",24)(366,"div",25),bt(367,"img",48),U(),H(368,"h2",27)(369,"b"),ge(370,"Solicitud rechazada"),U()()()()(),H(371,"div",16)(372,"button",35),Dt("click",function(){return n.regresar()}),H(373,"mat-icon"),ge(374,"arrow_back"),U(),ge(375," Regresar "),U()()()()()(),H(376,"div",49)(377,"div",6)(378,"div",7)(379,"div",8)(380,"h5",9)(381,"div",10)(382,"mat-card-title",11),ge(383,"Carnet transportista asignado"),U()()()(),H(384,"div",12)(385,"div",13)(386,"div",23)(387,"div",50)(388,"div",25)(389,"qrcode",51),Dt("qrCodeURL",function(s){return n.onChangeURL(s)}),U()(),H(390,"button",52)(391,"mat-icon"),ge(392,"download"),U(),H(393,"a",53),ge(394,"Descargar carnet"),U()()()()(),H(395,"div",16)(396,"button",35),Dt("click",function(){return n.regresar()}),H(397,"mat-icon"),ge(398,"arrow_back"),U(),ge(399," Regresar "),U()()()()()()),2&e&&(q(5),le("ngForOf",n.opcionesMenu),q(8),Lt(n.tituloFormulario),q(4),le("ngForOf",n.controles),q(1),le("ngIf",n.showTable),q(2),le("ngForOf",n.botonesFooter),q(8),Lt(n.tituloModalSecundario),q(5),le("formGroup",n.controlesSecundariosFormGroup),q(1),le("ngForOf",n.controlesModalSecundario),q(2),le("ngForOf",n.botonesModalSecundario),q(353),le("qrdata",n.myAngularxQrCode)("width",256)("errorCorrectionLevel","M"),q(4),le("href",n.qrCodeDownloadLink,cg))},dependencies:[Ph,Gl,Vc,Bu,h_,fb,ef,_b,gb,u1,U_,h1,hE,pE,xE,zb,wE,m1,Lb,bb,$S,P_,GS,Lw,B_,Uw,Jw,Ib,e1,Rb,Ab,t1,Pb,Ob,n1,r1,eb,xm,Zv,Yv,tb,zu,M_,F9],styles:[".iconOptions[_ngcontent-%COMP%]{transform:scale(3);color:#fff;position:absolute}.textOptions[_ngcontent-%COMP%]{color:#fff;position:absolute}.backgroundIcons[_ngcontent-%COMP%]{background-color:#d1e8cf;height:50%}.carousel-control-prev-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23009be1' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E\");width:30px;height:48px}.carousel-control-next-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23009be1' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E\");width:30px;height:48px}label[_ngcontent-%COMP%]{text-align:right;display:block;padding:.5em 1.5em .5em 0}  .cdk-overlay-container{z-index:1200!important}  .mat-horizontal-stepper-header{pointer-events:none!important}  #header .mat-checkbox-frame{border-color:#fff!important}  .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#000!important;border-color:#fff!important}  .mat-checkbox-ripple .mat-ripple-element{background-color:#fff!important}  .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background{background-color:#000!important;border-color:#fff!important}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:whitesmoke}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-height:80px;font-weight:lighter;margin:8px 0}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.modal-body[_ngcontent-%COMP%]{max-height:calc(100vh - 200px);overflow-y:auto}.tama\\f1oTextArea[_ngcontent-%COMP%]{resize:vertical}.flexbox[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;margin-left:20px;color:#335930}.centrarImg[_ngcontent-%COMP%]{align-items:center;display:flex;height:250px;justify-content:center}"]}),t})(),ME=(()=>{class t{constructor(e){this.router=e}canActivate(e,n){{const r=localStorage.getItem("accessToken");return localStorage.getItem("role"),!!r||(this.router.navigate(["login"]),!1)}}}return t.\u0275fac=function(e){return new(e||t)($e(Ho))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Pq(t,i){if(1&t){const e=Tn();H(0,"mat-card",28),Dt("click",function(){const s=Jt(e).$implicit;return pi(Me(2).openDialog(s.accion))}),H(1,"mat-icon",29),ge(2),U(),H(3,"mat-card-title",30),ge(4),U(),H(5,"mat-card-title",31),Dt("click",function(){Jt(e);const r=Me().$implicit;return pi(Me().openDialog(r))}),ge(6),U()()}if(2&t){const e=i.$implicit;q(2),Lt(e.icono),q(2),Lt(e.nombre),q(2),Lt(e.descripcion)}}function Oq(t,i){if(1&t&&(H(0,"div")(1,"mat-card",24)(2,"div",25)(3,"mat-card-title",26),ge(4),U(),Pe(5,Pq,7,3,"mat-card",27),U()()()),2&t){const e=i.$implicit;_r(e.class),q(4),Lt(e.tituloSeccion),q(1),le("ngForOf",e.opciones)}}function Fq(t,i){1&t&&ge(0),2&t&&Lt(Me(2).$implicit.tituloStep)}function Lq(t,i){1&t&&Pe(0,Fq,1,1,"ng-template",36)}function Bq(t,i){if(1&t&&(H(0,"mat-hint",45),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function Nq(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",41)(2,"mat-label"),ge(3),U(),H(4,"input",42,43),Dt("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")})("keypress",function(r){Jt(e);const s=Me().$implicit,u=Me(2);return pi(1==s.keypress?u.soloNumeros(r):"")}),U(),Pe(6,Bq,2,2,"mat-hint",44),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function zq(t,i){if(1&t&&(H(0,"mat-hint",45),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function Vq(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field",46)(2,"mat-label"),ge(3),U(),H(4,"textarea",47,43),ge(6,"                                                    "),U(),Pe(7,zq,2,2,"mat-hint",44),U()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(3),le("ngIf",e.maxLength>0)}}function jq(t,i){if(1&t&&(H(0,"mat-option",50),ge(1),U()),2&t){const e=i.$implicit;le("value",e.id),q(1),Yn(" ",e.viewValue," ")}}function Uq(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field")(2,"mat-label"),ge(3),U(),H(4,"mat-select",48),Pe(5,jq,2,2,"mat-option",49),U()()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),q(1),le("ngForOf",e.seleccionable)}}function Hq(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field")(2,"mat-label"),ge(3),U(),bt(4,"input",51,43),H(6,"mat-datepicker-toggle",52)(7,"mat-icon",53),ge(8,"date_range"),U()(),bt(9,"mat-datepicker",null,54),U()()),2&t){const e=Zn(10),n=Me().$implicit;q(3),Lt(n.nombre),q(1),Fi("formControlName",n.id),le("matDatepicker",e),q(2),le("for",e)}}function $q(t,i){if(1&t&&(H(0,"mat-hint",45),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function Gq(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",41)(2,"mat-label"),ge(3),U(),H(4,"input",42,43),Dt("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")})("keypress",function(r){Jt(e);const s=Me(3).$implicit,u=Me(2);return pi(1==s.keypress?u.soloNumeros(r):"")}),U(),Pe(6,$q,2,2,"mat-hint",44),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function qq(t,i){if(1&t&&(H(0,"mat-option",50),ge(1),U()),2&t){const e=i.$implicit;le("value",e.id),q(1),Yn(" ",e.viewValue," ")}}function Wq(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field")(2,"mat-label"),ge(3),U(),H(4,"mat-select",48),Pe(5,qq,2,2,"mat-option",49),U()()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),q(1),le("ngForOf",e.seleccionable)}}function Zq(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field")(2,"mat-label"),ge(3),U(),bt(4,"input",51,43),H(6,"mat-datepicker-toggle",52)(7,"mat-icon",53),ge(8,"date_range"),U()(),bt(9,"mat-datepicker",null,54),U()()),2&t){const e=Zn(10),n=Me(3).$implicit;q(3),Lt(n.nombre),q(1),Fi("formControlName",n.id),le("matDatepicker",e),q(2),le("for",e)}}function Yq(t,i){if(1&t&&(H(0,"div")(1,"div",38),Pe(2,Gq,7,4,"div",39),Pe(3,Wq,6,3,"div",39),Pe(4,Zq,11,4,"div",39),U()()),2&t){const e=i.$implicit;q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","select"),q(1),le("ngSwitchCase","date")}}function Xq(t,i){if(1&t&&(H(0,"div",55),Pe(1,Yq,5,6,"div",14),U()),2&t){const e=Me().$implicit;_r(e.restclass),q(1),le("ngForOf",e.controlesComplemento)}}function Kq(t,i){if(1&t&&(H(0,"div",20)(1,"label",37)(2,"b"),ge(3),U()(),H(4,"div",38),Pe(5,Nq,7,4,"div",39),Pe(6,Vq,8,4,"div",39),Pe(7,Uq,6,3,"div",39),Pe(8,Hq,11,4,"div",39),U(),Pe(9,Xq,2,3,"div",40),U()),2&t){const e=i.$implicit;q(3),Lt(e.nombrefila),q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","textarea"),q(1),le("ngSwitchCase","select"),q(1),le("ngSwitchCase","date"),q(1),le("ngIf",e.controlesComplemento)}}function Qq(t,i){if(1&t&&(H(0,"mat-icon"),ge(1),U()),2&t){const e=Me().$implicit;q(1),Lt(e.icono)}}function Jq(t,i){if(1&t){const e=Tn();H(0,"div",56)(1,"button",57),Dt("click",function(){return pi(Jt(e).$implicit.click())}),Pe(2,Qq,2,1,"mat-icon",15),ge(3),U()()}if(2&t){const e=i.$implicit,n=Me(2);q(1),_r(e.class),le("disabled",n.controlesFormGroup.invalid),q(1),le("ngIf",e.icono),q(1),Yn(" ",e.nombre," ")}}function eW(t,i){1&t&&(H(0,"button",58),ge(1,"Regresar"),U())}function tW(t,i){1&t&&(H(0,"button",59),ge(1,"Siguiente"),U())}function iW(t,i){if(1&t&&(H(0,"mat-step"),Pe(1,Lq,1,0,null,15),H(2,"div",20)(3,"div",21)(4,"form",22),Pe(5,Kq,10,9,"div",23),Pe(6,Jq,4,5,"div",32),U()()(),H(7,"div",33),Pe(8,eW,2,0,"button",34),Pe(9,tW,2,0,"button",35),U()()),2&t){const e=i.$implicit,n=Me();q(1),le("ngIf",e.tituloStep),q(3),le("formGroup",n.controlesFormGroup),q(1),le("ngForOf",e.controles),q(1),le("ngForOf",n.botonesSecundarios),q(2),le("ngIf",e.previous),q(1),le("ngIf",e.next)}}function nW(t,i){if(1&t&&(H(0,"th",72),ge(1),U()),2&t){const e=Me(2).$implicit;q(1),Yn(" ",e.displayName," ")}}function rW(t,i){if(1&t&&(H(0,"td",73),ge(1),U()),2&t){const e=i.$implicit,n=Me(2).$implicit;q(1),Yn(" ",e[n.id]," ")}}function oW(t,i){1&t&&(H(0,"div"),Pe(1,nW,2,1,"th",70),Pe(2,rW,2,1,"td",71),U())}function sW(t,i){if(1&t&&(H(0,"th",72),ge(1),U()),2&t){const e=Me(2).$implicit;q(1),Yn(" ",e.displayName," ")}}function aW(t,i){if(1&t){const e=Tn();H(0,"td",73)(1,"span",74),Dt("click",function(){const s=Jt(e).$implicit;return pi(Me(2).$implicit.accion(s))}),ge(2),U()()}if(2&t){const e=Me(2).$implicit;q(1),Fi("title",e.titleAccion),q(1),Lt(e.icono)}}function lW(t,i){1&t&&(H(0,"div"),Pe(1,sW,2,1,"th",70),Pe(2,aW,3,2,"td",71),U())}function cW(t,i){if(1&t&&(Wa(0,68),H(1,"div",38),Pe(2,oW,3,0,"div",69),Pe(3,lW,3,0,"div",39),U(),Za()),2&t){const e=i.$implicit;Fi("matColumnDef",e.id),q(1),le("ngSwitch",e.id),q(2),le("ngSwitchCase","accion")}}function dW(t,i){1&t&&bt(0,"tr",75)}function uW(t,i){1&t&&bt(0,"tr",76)}function hW(t,i){if(1&t&&(H(0,"div",61)(1,"div",62)(2,"table",63),Pe(3,cW,4,3,"ng-container",64),Pe(4,dW,1,0,"tr",65),Pe(5,uW,1,0,"tr",66),U()(),bt(6,"mat-paginator",67),U()),2&t){const e=Me(2);q(2),le("dataSource",e.dataSource),q(1),le("ngForOf",e.columnsToDisplay),q(1),le("matHeaderRowDef",e.columnsChildrenIds),q(1),le("matRowDefColumns",e.columnsChildrenIds),q(1),le("length",e.dataSource.data.length)("pageSize",5)}}function pW(t,i){if(1&t&&(H(0,"div"),Pe(1,hW,7,6,"div",60),U()),2&t){const e=Me();q(1),le("ngIf",e.showTable)}}function fW(t,i){if(1&t&&(H(0,"mat-icon"),ge(1),U()),2&t){const e=Me().$implicit;q(1),Lt(e.icono)}}function mW(t,i){if(1&t){const e=Tn();H(0,"div")(1,"button",57),Dt("click",function(){return pi(Jt(e).$implicit.click())}),Pe(2,fW,2,1,"mat-icon",15),ge(3),U()()}if(2&t){const e=i.$implicit,n=Me();q(1),_r(e.class),le("disabled",e.disable&&n.controlesFormGroup.invalid),q(1),le("ngIf",e.icono),q(1),Yn(" ",e.nombre," ")}}function gW(t,i){if(1&t&&(H(0,"div",77),ge(1),U()),2&t){const e=Me();q(1),Yn(" ",e.complementoSolicitudValida," ")}}function _W(t,i){if(1&t&&(H(0,"div",78),ge(1),U()),2&t){const e=Me();q(1),Yn(" ",e.complementoSolicitudInvalida," ")}}function yW(t,i){if(1&t&&(H(0,"mat-hint",45),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function vW(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",41)(2,"mat-label"),ge(3),U(),H(4,"input",79,43),Dt("keypress",function(r){Jt(e);const s=Me().$implicit;return pi(1==s.keypress?s.keyPressAction(r):"")})("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")}),U(),Pe(6,yW,2,2,"mat-hint",44),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function bW(t,i){if(1&t&&(H(0,"mat-hint",45),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function xW(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field",46)(2,"mat-label"),ge(3),U(),H(4,"textarea",47,43),ge(6,"                                             "),U(),Pe(7,bW,2,2,"mat-hint",44),U()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(3),le("ngIf",e.maxLength>0)}}function wW(t,i){if(1&t&&(H(0,"mat-hint",45),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function CW(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",41)(2,"mat-label"),ge(3),U(),H(4,"input",80,43),Dt("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")}),U(),Pe(6,wW,2,2,"mat-hint",44),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function MW(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field")(2,"mat-label"),ge(3),U(),bt(4,"input",51,43),H(6,"mat-datepicker-toggle",52)(7,"mat-icon",53),ge(8,"date_range"),U()(),bt(9,"mat-datepicker",null,81),U()()),2&t){const e=Zn(10),n=Me().$implicit;q(3),Lt(n.nombre),q(1),Fi("formControlName",n.id),le("matDatepicker",e),q(2),le("for",e)}}function DW(t,i){if(1&t&&(H(0,"mat-hint",45),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function SW(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field",46)(2,"mat-label"),ge(3),U(),H(4,"textarea",82,43),ge(6,"                                                     "),U(),Pe(7,DW,2,2,"mat-hint",44),U()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(3),le("ngIf",e.maxLength>0)}}function EW(t,i){if(1&t&&(H(0,"div")(1,"div",38),Pe(2,CW,7,4,"div",39),Pe(3,MW,11,4,"div",39),Pe(4,SW,8,4,"div",39),U()()),2&t){const e=i.$implicit;q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","date"),q(1),le("ngSwitchCase","textarea")}}function TW(t,i){if(1&t&&(H(0,"div",55),Pe(1,EW,5,6,"div",14),U()),2&t){const e=Me().$implicit;_r(e.restclass),q(1),le("ngForOf",e.controlesComplemento)}}function kW(t,i){if(1&t&&(H(0,"div",20)(1,"label",37)(2,"b"),ge(3),U()(),H(4,"div",38),Pe(5,vW,7,4,"div",39),Pe(6,xW,8,4,"div",39),U(),Pe(7,TW,2,3,"div",40),U()),2&t){const e=i.$implicit;q(3),Lt(e.nombrefila),q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","textarea"),q(1),le("ngIf",e.controlesComplemento)}}function AW(t,i){if(1&t&&(H(0,"mat-icon"),ge(1),U()),2&t){const e=Me().$implicit;q(1),Lt(e.icono)}}function IW(t,i){if(1&t){const e=Tn();H(0,"div")(1,"button",57),Dt("click",function(){return pi(Jt(e).$implicit.click())}),Pe(2,AW,2,1,"mat-icon",15),ge(3),U()()}if(2&t){const e=i.$implicit,n=Me();q(1),_r(e.class),le("disabled",e.disabled&&n.controlesSecundariosFormGroup.invalid),q(1),le("ngIf",e.icono),q(1),Yn(" ",e.nombre," ")}}let RW=(()=>{class t{constructor(e,n,r,s,u){this.spinner=e,this.router=n,this.loginService=r,this.solicitudesService=s,this.cuentasService=u,this.dataSource=new dE,this.columnsToDisplay=[],this.columnsChildrenIds=[],this.tituloFormulario="",this.tituloModalSecundario="",this.controlesModalSecundario=[],this.botonesFooter=[],this.botonesSecundarios=[],this.botonesModalSecundario=[],this.showTable=!1,this.solicitudValida=!1,this.complementoSolicitudInvalida="",this.complementoSolicitudValida="",this.solicitud="",this.faltanteSobrante="",this.controlesFormGroup=new Id({}),this.controlesSecundariosFormGroup=new Id({});const _=[];_.push({tituloSeccion:"",class:"carousel-item active",opciones:[{nombre:"Solicitudes ingresadas",descripcion:"Solicitudes pendientes de aprobar",icono:"check_box",accion:"solicitudesPendientes"},{nombre:"Confirmar solicitudes",descripcion:"Solicitudes pendientes de confirmar",icono:"done_all",accion:"solicitudesConfirmar"},{nombre:"Cerrar sesi\xf3n",descripcion:"Cerrar sesi\xf3n",icono:"power_settings_new",accion:"cerrarSesion"}]}),this.opcionesMenu=_}ngOnInit(){this.spinner.show(),"ROLE_UMG_BC_BENEFICIO"!==localStorage.getItem("role")&&(this.spinner.hide(),this.router.navigate(["login"])),this.spinner.hide()}openDialog(e){switch(setTimeout(()=>this.dataSource.paginator=this.paginator),e){case"solicitudesPendientes":this.tituloFormulario="Revisi\xf3n de solicitudes ingresadas al Beneficio del Caf\xe9",$("#opcionesGenerales").modal("show");break;case"solicitudesConfirmar":this.tituloFormulario="Revisi\xf3n de solicitudes pendientes de confirmar",$("#opcionesGenerales").modal("show");break;case"cerrarSesion":this.cerrarSesion()}this.generarControles(e)}generarControles(e){let n=[],r=[];switch(e){case"solicitudesPendientes":this.showTable=!0,this.columnsToDisplay=[{id:"descripcion",displayName:"Descripci\xf3n"},{id:"placa",displayName:"Placa transporte"},{id:"piloto",displayName:"Licencia piloto"},{id:"accion",displayName:"Acci\xf3n",icono:"remove_red_eye",titleAccion:"Validar estado",accion:_=>this.validarEstado(_)}],this.columnsChildrenIds=["descripcion","placa","piloto","accion"],n.push({tituloStep:"Solicitudes pendientes de aprobar",controles:[]}),this.solicitudesService.getSolicitudesByEstado({estado:"58ec8186-e3fd-11ed-b5ea-0242ac120002"}).subscribe(_=>{this.showTable=!0,this.dataSource.data=_,setTimeout(()=>this.dataSource.paginator=this.paginator),this.spinner.hide()}),r.push({nombre:"Cerrar",class:"btn-container mt-2",click:()=>this.cleanForm(),disable:!1});break;case"solicitudesConfirmar":this.showTable=!0,this.columnsToDisplay=[{id:"descripcion",displayName:"Descripci\xf3n"},{id:"placa",displayName:"Placa transporte"},{id:"piloto",displayName:"Licencia piloto"},{id:"accion",displayName:"Acci\xf3n",icono:"remove_red_eye",titleAccion:"Validar estado",accion:_=>this.validarConfirmacionSolicitud(_)}],this.columnsChildrenIds=["descripcion","placa","piloto","accion"],n.push({tituloStep:"Solicitudes pendientes de confirmar",controles:[]}),this.solicitudesService.getSolicitudesByEstado({estado:"cb33b950-eac2-11ed-a05b-0242ac120003"}).subscribe(_=>{this.showTable=!0,this.dataSource.data=_,setTimeout(()=>this.dataSource.paginator=this.paginator),this.spinner.hide()}),r.push({nombre:"Cerrar",class:"btn-container mt-2",click:()=>this.cleanForm(),disable:!1})}this.controles=n,this.botonesFooter=r,this.controles.forEach(s=>{s.controles.forEach(u=>{u.controlesComplemento&&u.controlesComplemento.forEach(_=>{this.controlesFormGroup.addControl(_.id,_.formControl)}),this.controlesFormGroup.addControl(u.id,u.formControl)})}),this.controlesFormGroup.updateValueAndValidity()}validarConfirmacionSolicitud(e){this.spinner.show(),this.tituloModalSecundario="Validar faltantes y sobrantes de la solicitud";let n=[];this.solicitud=e.idSolicitud,this.solicitudesService.validarFaltantesSobrantes({solicitud:e.idSolicitud}).subscribe(s=>{s.data.valido?(this.solicitudValida=!0,this.complementoSolicitudValida=`El sistema determin\xf3 que el agricultor envi\xf3 un total de ${parseFloat(s.data.pesoIngresado).toFixed(2)}Tn y la empresa Peso Cabal registr\xf3 un total de ${parseFloat(s.data.pesoBascula).toFixed(2)}Tn, por lo que se determina que el Faltante o Sobrante corresponde al +-5% (Faltante valido: ${parseFloat(s.data.minimo).toFixed(2)}Tn, Sobrante valido: ${parseFloat(s.data.maximo).toFixed(2)}Tn)`,n.push({nombre:"Confirmar cuenta",icono:"check_circle",class:"btn-container mt-2 ml-2",click:()=>this.guardarConfirmacionCuenta(e)})):s.data.valido||(this.solicitudValida=!1,this.controlesModalSecundario.push({id:"observaciones",nombrefila:"Anexo por faltante o sobrante",formControl:new Fa({value:"",disabled:!1},Oa.required),tipo:"textarea",nombre:"Observaciones",class:"col-8",restclass:"0",maxlength:300}),"S"===s.data.faltanteSobrante?(this.faltanteSobrante="S",this.complementoSolicitudInvalida=`Este anexo es para indicarle que el sistema detecto un Sobrante de ${(s.data.pesoBascula-s.data.pesoIngresado).toFixed(2)}Tn, el total ingresado por el agricultor es: ${parseFloat(s.data.pesoIngresado).toFixed(2)}Tn y el total ingresado por Peso Cabal es: ${parseFloat(s.data.pesoBascula).toFixed(2)}Tn, debe indicarle al Beneficio del Caf\xe9 lo que quiere hacer con el sobrante.`):"F"===s.data.faltanteSobrante&&(this.faltanteSobrante="F",this.complementoSolicitudInvalida=`Este anexo es para indicarle que el sistema detecto un Faltante de ${(s.data.pesoIngresado-s.data.pesoBascula).toFixed(2)}Tn, el total ingresado por el agricultor es: ${parseFloat(s.data.pesoIngresado).toFixed(2)}Tn y el total ingresado por Peso Cabal es: ${parseFloat(s.data.pesoBascula).toFixed(2)}Tn, debe indicarle al Beneficio del Caf\xe9 lo que quiere hacer con el faltante.`),n.push({nombre:"Confirmar cuenta",icono:"check_circle",class:"btn-container mt-2 ml-2",click:()=>this.crearAnexo(e),disabled:!0}),this.controlesModalSecundario.forEach(u=>{u.controlesComplemento&&u.controlesComplemento.forEach(_=>{this.controlesSecundariosFormGroup.addControl(_.id,_.formControl)}),this.controlesSecundariosFormGroup.addControl(u.id,u.formControl)}),this.controlesSecundariosFormGroup.updateValueAndValidity(),this.controlesSecundariosFormGroup.get("observaciones")?.setValue(this.complementoSolicitudInvalida)),this.spinner.hide()}),n.push({nombre:"Regresar",icono:"arrow_back",class:"btn-container mt-2 ml-2",click:()=>this.regresar()}),this.botonesModalSecundario=n,$("#opcionesGenerales").modal("hide"),$("#modalSecundary").modal("show")}validarEstado(e){this.spinner.show(),this.tituloModalSecundario="Validar solicitud";let n=[];this.solicitud=e.idSolicitud,this.solicitudesService.validarSolicitud({solicitud:e.idSolicitud}).subscribe(s=>{200===s.code?(this.solicitudValida=!0,this.complementoSolicitudValida="Esta solicitud es v\xe1lida porque el piloto y transporte son permitidos dentro del Beneficio del Caf\xe9.",n.push({nombre:"Confirmar cuenta",icono:"check_circle",class:"btn-container mt-2 ml-2",click:()=>this.confirmarCuenta()})):412===s.code&&(this.solicitudValida=!1,this.controlesModalSecundario.push({id:"rechazo",nombrefila:"Motivo rechazo",formControl:new Fa({value:"",disabled:!1},Oa.required),tipo:"textarea",nombre:"Motivo del rechazo",class:"col-8",restclass:"0",maxlength:300}),n.push({nombre:"Rechazar solicitud",icono:"clear",class:"btn-container mt-2 ml-2",click:()=>this.rechazarSolicitud(),disabled:!0}),s.data.pilotoEstatus||s.data.transporteEstatus?s.data.pilotoEstatus?s.data.transporteEstatus||(this.complementoSolicitudInvalida="Esta solicitud es inv\xe1lida porque el transporte no es aceptado en el Beneficio del Cafe"):this.complementoSolicitudInvalida="Esta solicitud es inv\xe1lida porque el piloto no es aceptado en el Beneficio del Cafe":this.complementoSolicitudInvalida="Esta solicitud es inv\xe1lida porque el piloto y el transporte no son aceptados en el Beneficio del Cafe",this.controlesModalSecundario.forEach(u=>{u.controlesComplemento&&u.controlesComplemento.forEach(_=>{this.controlesSecundariosFormGroup.addControl(_.id,_.formControl)}),this.controlesSecundariosFormGroup.addControl(u.id,u.formControl)}),this.controlesSecundariosFormGroup.updateValueAndValidity(),this.controlesSecundariosFormGroup.get("rechazo")?.setValue(this.complementoSolicitudInvalida+", por lo tanto se rechaza")),this.spinner.hide()}),n.push({nombre:"Regresar",icono:"arrow_back",class:"btn-container mt-2 ml-2",click:()=>this.regresar()}),this.botonesModalSecundario=n,$("#opcionesGenerales").modal("hide"),$("#modalSecundary").modal("show")}rechazarSolicitud(){this.spinner.show();let e={solicitud:this.solicitud,nuevoEstado:"d9bd0038-eb05-11ed-a05b-0242ac120003",usuarioModificacion:localStorage.getItem("idUser"),fechaModificacion:new Date};this.solicitudesService.actualizarSolicitud(e).subscribe(r=>{Ur().fire({title:"Solicitud rechazada",html:"Se rechaz\xf3 la solicitud por no cumplir con los requisitos del Beneficio del Caf\xe9.",icon:"success"})},r=>{Ur().fire({title:"Error",html:"En este momento no fue posible realizar la accion, por favor intente en otro momento.",icon:"error"}),this.spinner.hide()});let n={solicitud:this.solicitud,observaciones:this.controlesSecundariosFormGroup.get("rechazo")?.value,usuarioCreacion:localStorage.getItem("idUser"),fechaCreacion:new Date};this.solicitudesService.crearRechazo(n).subscribe(r=>{this.spinner.hide()},r=>{Ur().fire({title:"Error",html:"En este momento no fue posible realizar la accion, por favor intente en otro momento.",icon:"error"}),this.spinner.hide()}),$("#opcionesGenerales").modal("hide"),$("#modalSecundary").modal("hide"),this.cleanForm()}confirmarCuenta(){this.spinner.show();const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let s=0;s<=14;s++)n+=e.charAt(Math.floor(Math.random()*e.length));let r={noCuenta:n,estado:"15757fb6-468b-44e1-a829-fa47bb2705e6",solicitud:this.solicitud,usuarioCreacion:localStorage.getItem("idUser")};this.cuentasService.crearCuenta(r).subscribe(s=>{let u={solicitud:this.solicitud,nuevoEstado:"15757fb6-468b-44e1-a829-fa47bb2705e6",usuarioModificacion:localStorage.getItem("idUser"),fechaModificacion:new Date};this.solicitudesService.actualizarSolicitud(u).subscribe(_=>{Ur().fire({title:"Confirmaci\xf3n de solicitud",html:`Se confirm\xf3 que la solicitud es v\xe1lida. Se cre\xf3 la cuenta: <b>${n}</b>  para trabajar este pedido.`,icon:"success"})},_=>{Ur().fire({title:"Error",html:"En este momento no fue posible realizar la accion, por favor intente en otro momento.",icon:"error"}),this.spinner.hide()}),this.spinner.hide()},s=>{Ur().fire({title:"Error",html:"En este momento no fue posible realizar la accion, por favor intente en otro momento.",icon:"error"}),this.spinner.hide()}),$("#modalSecundary").modal("hide"),this.cleanForm()}crearAnexo(e){this.spinner.show(),this.guardarConfirmacionCuenta(e);let n={solicitud:this.solicitud,observaciones:this.controlesSecundariosFormGroup.get("observaciones")?.value,sobranteFaltante:this.faltanteSobrante,usuarioCreacion:localStorage.getItem("idUser")};this.solicitudesService.crearAnexo(n).subscribe(r=>{this.spinner.hide()},r=>{Ur().fire({title:"Error",html:"En este momento no fue posible realizar la accion, por favor intente en otro momento.",icon:"error"}),this.spinner.hide()})}guardarConfirmacionCuenta(e){this.spinner.show();let n={solicitud:this.solicitud,nuevoEstado:"c5e2a590-eb00-11ed-a05b-0242ac120003",usuarioModificacion:localStorage.getItem("idUser"),fechaModificacion:new Date};this.solicitudesService.actualizarSolicitud(n).subscribe(s=>{Ur().fire({title:"Confirmaci\xf3n de cuenta",html:"Se confirm\xf3 la cuenta, gracias por usar el sistema de automatizaci\xf3n del proceso del Beneficio del Caf\xe9.",icon:"success"}),$("#opcionesGenerales").modal("hide"),$("#modalSecundary").modal("hide"),this.cleanForm()},s=>{Ur().fire({title:"Error",html:"En este momento no fue posible realizar la accion, por favor intente en otro momento.",icon:"error"}),this.spinner.hide()});let r={idCuenta:e.idCuenta,nuevoEstado:"c5e2a590-eb00-11ed-a05b-0242ac120003",usuarioModificacion:localStorage.getItem("idUser")};this.cuentasService.actualizarCuenta(r).subscribe(s=>{this.spinner.hide(),$("#opcionesGenerales").modal("hide"),$("#modalSecundary").modal("hide"),this.cleanForm()},s=>{this.spinner.hide(),Ur().fire("Error","No fue posible realizar lo solicitado, por favor intentente en otro momento","error")})}cleanForm(){this.botonesModalSecundario=[],this.controlesModalSecundario=[],Object.keys(this.controlesFormGroup.controls).forEach(e=>{this.controlesFormGroup.removeControl(e)}),Object.keys(this.controlesSecundariosFormGroup.controls).forEach(e=>{this.controlesSecundariosFormGroup.removeControl(e)}),this.controlesSecundariosFormGroup.updateValueAndValidity(),this.controlesFormGroup.updateValueAndValidity(),this.controles=[],this.botonesFooter=[],this.showTable=!1,this.dataSource.data=[],$("#opcionesGenerales").modal("hide")}cerrarSesion(){this.spinner.show(),setTimeout(()=>{localStorage.clear(),sessionStorage.clear(),this.spinner.hide(),this.router.navigate(["login"]),this.loginService.role=""},800)}soloNumeros(e){const n=e.keyCode||e.which,r=String.fromCharCode(n);let _=!1;for(const b in".")if(n==="."[b])return _=!0,!0;return!(-1==="01234567898".indexOf(r)&&!_)}regresar(){this.botonesModalSecundario=[],this.controlesModalSecundario=[],Object.keys(this.controlesSecundariosFormGroup.controls).forEach(e=>{this.controlesSecundariosFormGroup.removeControl(e)}),this.controlesSecundariosFormGroup.updateValueAndValidity(),$("#opcionesGenerales").modal("show"),$("#modalSecundary").modal("hide")}}return t.\u0275fac=function(e){return new(e||t)(W(T_),W(Ho),W(D_),W(o1),W(s1))},t.\u0275cmp=wi({type:t,selectors:[["app-beneficio-main"]],viewQuery:function(e,n){if(1&e&&kn(B_,5),2&e){let r;$t(r=Gt())&&(n.paginator=r.first)}},decls:39,vars:11,consts:[[1,"card-body",2,"margin-top","2%","margin-left","3%","margin-right","3%"],[1,"titulo"],[1,"text-center","m-2","encabezado"],["data-interval","false",1,"carousel-inner"],[3,"class",4,"ngFor","ngForOf"],["id","opcionesGenerales","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","col-12"],[1,"titulo","top"],[1,"text-center","m-2","titulo"],[1,"modal-body"],[1,"container"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"modal-footer"],["id","modalSecundary","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],["class","alert alert-success","role","alert",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"row"],[1,"col-12","mt-2"],[3,"formGroup"],["class","row",4,"ngFor","ngForOf"],[1,"mt-5","backgroundIcons"],[1,"row","d-flex","justify-content-center"],[2,"position","absolute"],["class","col-lg-2 col-md-4 col-sm-4 ml-5 mr-4 mb-3 mt-5 colorSecundario heightOptions d-flex justify-content-center","style","cursor: pointer","data-toggle","modal","data-target","#opcionesGenerales",3,"click",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#opcionesGenerales",1,"col-lg-2","col-md-4","col-sm-4","ml-5","mr-4","mb-3","mt-5","colorSecundario","heightOptions","d-flex","justify-content-center",2,"cursor","pointer",3,"click"],[1,"iconOptions","mt-3"],[1,"text-center","tituloCampo","textOptions",2,"margin-top","80px"],[1,"text-center","enlaces","textOptions",2,"margin-top","105px",3,"click"],["class","row d-flex justify-content-center mt-4",4,"ngFor","ngForOf"],[2,"text-align","right"],["mat-button","","matStepperPrevious","","class","botonesStepper mr-2",4,"ngIf"],["mat-button","","matStepperNext","","class","botonesStepper ml-2",4,"ngIf"],["matStepLabel",""],[1,"col-3","mt-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","col",3,"class",4,"ngIf"],[1,"col-12"],["matInput","","autocomplete","off",3,"formControlName","maxlength","change","keypress"],["campo",""],["align","end",4,"ngIf"],["align","end"],[1,"col-ms-12","col-md-12","col-lg-12"],["matInput","","autocomplete","off",3,"formControlName","maxlength"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","readonly","",3,"matDatepicker","formControlName"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["picker",""],[1,"col"],[1,"row","d-flex","justify-content-center","mt-4"],["mat-raised-button","",3,"disabled","click"],["mat-button","","matStepperPrevious","",1,"botonesStepper","mr-2"],["mat-button","","matStepperNext","",1,"botonesStepper","ml-2"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],[1,"table-responsive"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize"],[3,"matColumnDef"],[4,"ngSwitchDefault"],["mat-header-cell","","class","headerTable",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"headerTable"],["mat-cell",""],[1,"material-icons",2,"cursor","pointer",3,"title","click"],["mat-header-row",""],["mat-row","",1,"example-element-row"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],["matInput","","autocomplete","off",3,"formControlName","maxlength","keypress","change"],["matInput","","autocomplete","off",3,"formControlName","maxlength","change"],["pickerSecundary",""],["matInput","","autocomplete","off",1,"tama\xf1oTextArea",3,"formControlName","maxlength"]],template:function(e,n){1&e&&(H(0,"div",0)(1,"div",1)(2,"mat-card-title",2),ge(3,"Bandeja del Beneficio del Cafe"),U()(),H(4,"div",3),Pe(5,Oq,6,4,"div",4),U()(),H(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h5",9)(11,"div",10)(12,"mat-card-title",11),ge(13),U()()()(),H(14,"div",12)(15,"div",13)(16,"mat-horizontal-stepper"),Pe(17,iW,10,6,"mat-step",14),U()(),Pe(18,pW,2,1,"div",15),H(19,"div",16),Pe(20,mW,4,5,"div",14),U()()()()(),H(21,"div",17)(22,"div",6)(23,"div",7)(24,"div",8)(25,"h5",9)(26,"div",10)(27,"mat-card-title",11),ge(28),U()()()(),H(29,"div",12)(30,"div",13),Pe(31,gW,2,1,"div",18),Pe(32,_W,2,1,"div",19),H(33,"div",20)(34,"div",21)(35,"form",22),Pe(36,kW,8,7,"div",23),U()()()()(),H(37,"div",16),Pe(38,IW,4,5,"div",14),U()()()()),2&e&&(q(5),le("ngForOf",n.opcionesMenu),q(8),Lt(n.tituloFormulario),q(4),le("ngForOf",n.controles),q(1),le("ngIf",n.showTable),q(2),le("ngForOf",n.botonesFooter),q(8),Lt(n.tituloModalSecundario),q(3),le("ngIf",n.solicitudValida),q(1),le("ngIf",!n.solicitudValida),q(3),le("formGroup",n.controlesSecundariosFormGroup),q(1),le("ngForOf",n.controlesModalSecundario),q(2),le("ngForOf",n.botonesModalSecundario))},dependencies:[Ph,Gl,Vc,Bu,h_,fb,ef,_b,gb,u1,U_,h1,hE,pE,xE,zb,wE,m1,Lb,bb,$S,P_,GS,Lw,B_,Uw,Jw,Ib,e1,Rb,Ab,t1,Pb,Ob,n1,r1,eb,xm,Zv,Yv,tb,zu,M_],styles:[".iconOptions[_ngcontent-%COMP%]{transform:scale(3);color:#fff;position:absolute}.textOptions[_ngcontent-%COMP%]{color:#fff;position:absolute}.backgroundIcons[_ngcontent-%COMP%]{background-color:#d1e8cf;height:50%}.carousel-control-prev-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23009be1' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E\");width:30px;height:48px}.carousel-control-next-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23009be1' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E\");width:30px;height:48px}label[_ngcontent-%COMP%]{text-align:right;display:block;padding:.5em 1.5em .5em 0}  .cdk-overlay-container{z-index:1200!important}  .mat-horizontal-stepper-header{pointer-events:none!important}  #header .mat-checkbox-frame{border-color:#fff!important}  .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#000!important;border-color:#fff!important}  .mat-checkbox-ripple .mat-ripple-element{background-color:#fff!important}  .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background{background-color:#000!important;border-color:#fff!important}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:whitesmoke}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-height:80px;font-weight:lighter;margin:8px 0}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.modal-body[_ngcontent-%COMP%]{max-height:calc(100vh - 200px);overflow-y:auto}.tama\\f1oTextArea[_ngcontent-%COMP%]{resize:vertical}"]}),t})(),PW=(()=>{class t{constructor(e){this.http=e,this.baseUrl=Vu_baseUrl,this.userValid=!1,this.userLogged=""}createHeader(){this.token="",this.headers=null,this.options=null,this.token=localStorage.getItem("token"),this.headers=new Ja({Authorization:`Bearer ${this.token}`}),this.options={headers:this.headers},this.baseUrl=Vu_baseUrl}ingresarPeso(e){return this.createHeader(),this.http.post(`${this.baseUrl}pesos/create`,e,this.options)}actualizarParcialidadIngresada(e){return this.createHeader(),this.http.put(`${this.baseUrl}parcialidades/update`,e,this.options)}}return t.\u0275fac=function(e){return new(e||t)($e(Cm))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function OW(t,i){if(1&t){const e=Tn();H(0,"mat-card",26),Dt("click",function(){const s=Jt(e).$implicit;return pi(Me(2).openDialog(s.accion))}),H(1,"mat-icon",27),ge(2),U(),H(3,"mat-card-title",28),ge(4),U(),H(5,"mat-card-title",29),Dt("click",function(){Jt(e);const r=Me().$implicit;return pi(Me().openDialog(r))}),ge(6),U()()}if(2&t){const e=i.$implicit;q(2),Lt(e.icono),q(2),Lt(e.nombre),q(2),Lt(e.descripcion)}}function FW(t,i){if(1&t&&(H(0,"div")(1,"mat-card",22)(2,"div",23)(3,"mat-card-title",24),ge(4),U(),Pe(5,OW,7,3,"mat-card",25),U()()()),2&t){const e=i.$implicit;_r(e.class),q(4),Lt(e.tituloSeccion),q(1),le("ngForOf",e.opciones)}}function LW(t,i){1&t&&ge(0),2&t&&Lt(Me(2).$implicit.tituloStep)}function BW(t,i){1&t&&Pe(0,LW,1,1,"ng-template",34)}function NW(t,i){if(1&t&&(H(0,"mat-hint",43),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function zW(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",39)(2,"mat-label"),ge(3),U(),H(4,"input",40,41),Dt("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")})("keypress",function(r){Jt(e);const s=Me().$implicit,u=Me(2);return pi(1==s.keypress?u.soloNumeros(r):"")}),U(),Pe(6,NW,2,2,"mat-hint",42),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function VW(t,i){if(1&t&&(H(0,"mat-hint",43),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function jW(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",39)(2,"mat-label"),ge(3),U(),H(4,"input",40,41),Dt("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")})("keypress",function(r){Jt(e);const s=Me(3).$implicit,u=Me(2);return pi(1==s.keypress?u.soloNumeros(r):"")}),U(),Pe(6,VW,2,2,"mat-hint",42),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function UW(t,i){if(1&t&&(H(0,"mat-option",47),ge(1),U()),2&t){const e=i.$implicit;le("value",e.id),q(1),Yn(" ",e.viewValue," ")}}function HW(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field")(2,"mat-label"),ge(3),U(),H(4,"mat-select",45),Pe(5,UW,2,2,"mat-option",46),U()()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),q(1),le("ngForOf",e.seleccionable)}}function $W(t,i){if(1&t&&(H(0,"div")(1,"div",36),Pe(2,jW,7,4,"div",37),Pe(3,HW,6,3,"div",37),U()()),2&t){const e=i.$implicit;q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","select")}}function GW(t,i){if(1&t&&(H(0,"div",44),Pe(1,$W,4,5,"div",14),U()),2&t){const e=Me().$implicit;_r(e.restclass),q(1),le("ngForOf",e.controlesComplemento)}}function qW(t,i){if(1&t&&(H(0,"div",18)(1,"label",35)(2,"b"),ge(3),U()(),H(4,"div",36),Pe(5,zW,7,4,"div",37),U(),Pe(6,GW,2,3,"div",38),U()),2&t){const e=i.$implicit;q(3),Lt(e.nombrefila),q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngIf",e.controlesComplemento)}}function WW(t,i){if(1&t&&(H(0,"mat-icon"),ge(1),U()),2&t){const e=Me().$implicit;q(1),Lt(e.icono)}}function ZW(t,i){if(1&t){const e=Tn();H(0,"div",48)(1,"button",49),Dt("click",function(){return pi(Jt(e).$implicit.click())}),Pe(2,WW,2,1,"mat-icon",15),ge(3),U()()}if(2&t){const e=i.$implicit,n=Me(2);q(1),_r(e.class),le("disabled",n.controlesFormGroup.invalid),q(1),le("ngIf",e.icono),q(1),Yn(" ",e.nombre," ")}}function YW(t,i){1&t&&(H(0,"button",50),ge(1,"Regresar"),U())}function XW(t,i){1&t&&(H(0,"button",51),ge(1,"Siguiente"),U())}function KW(t,i){if(1&t&&(H(0,"mat-step"),Pe(1,BW,1,0,null,15),H(2,"div",18)(3,"div",19)(4,"form",20),Pe(5,qW,7,6,"div",21),Pe(6,ZW,4,5,"div",30),U()()(),H(7,"div",31),Pe(8,YW,2,0,"button",32),Pe(9,XW,2,0,"button",33),U()()),2&t){const e=i.$implicit,n=Me();q(1),le("ngIf",e.tituloStep),q(3),le("formGroup",n.controlesFormGroup),q(1),le("ngForOf",e.controles),q(1),le("ngForOf",n.botonesSecundarios),q(2),le("ngIf",e.previous),q(1),le("ngIf",e.next)}}function QW(t,i){if(1&t&&(H(0,"th",64),ge(1),U()),2&t){const e=Me(2).$implicit;q(1),Yn(" ",e.displayName," ")}}function JW(t,i){if(1&t&&(H(0,"td",65),ge(1),U()),2&t){const e=i.$implicit,n=Me(2).$implicit;q(1),Yn(" ",e[n.id]," ")}}function eZ(t,i){1&t&&(H(0,"div"),Pe(1,QW,2,1,"th",62),Pe(2,JW,2,1,"td",63),U())}function tZ(t,i){if(1&t&&(H(0,"th",64),ge(1),U()),2&t){const e=Me(2).$implicit;q(1),Yn(" ",e.displayName," ")}}function iZ(t,i){if(1&t){const e=Tn();H(0,"span",66),Dt("click",function(){Jt(e);const r=Me().$implicit;return pi(Me(2).$implicit.secondAccion(r))}),ge(1),U()}if(2&t){const e=Me(3).$implicit;Fi("title",e.secondTitleAccion),q(1),Lt(e.secondIcon)}}function nZ(t,i){if(1&t){const e=Tn();H(0,"td",65)(1,"span",66),Dt("click",function(){const s=Jt(e).$implicit;return pi(Me(2).$implicit.accion(s))}),ge(2),U(),Pe(3,iZ,2,2,"span",67),U()}if(2&t){const e=i.$implicit,n=Me(2).$implicit;q(1),Fi("title",n.titleAccion),q(1),Lt(n.icono),q(1),le("ngIf","Cuenta creada"===e.estado&&!0===e.parcialidadesCompletas)}}function rZ(t,i){1&t&&(H(0,"div"),Pe(1,tZ,2,1,"th",62),Pe(2,nZ,4,3,"td",63),U())}function oZ(t,i){if(1&t&&(Wa(0,60),H(1,"div",36),Pe(2,eZ,3,0,"div",61),Pe(3,rZ,3,0,"div",37),U(),Za()),2&t){const e=i.$implicit;Fi("matColumnDef",e.id),q(1),le("ngSwitch",e.id),q(2),le("ngSwitchCase","accion")}}function sZ(t,i){1&t&&bt(0,"tr",68)}function aZ(t,i){1&t&&bt(0,"tr",69)}function lZ(t,i){if(1&t&&(H(0,"div",53)(1,"div",54)(2,"table",55),Pe(3,oZ,4,3,"ng-container",56),Pe(4,sZ,1,0,"tr",57),Pe(5,aZ,1,0,"tr",58),U()(),bt(6,"mat-paginator",59),U()),2&t){const e=Me(2);q(2),le("dataSource",e.dataSource),q(1),le("ngForOf",e.columnsToDisplay),q(1),le("matHeaderRowDef",e.columnsChildrenIds),q(1),le("matRowDefColumns",e.columnsChildrenIds),q(1),le("length",e.dataSource.data.length)("pageSize",5)}}function cZ(t,i){if(1&t&&(H(0,"div"),Pe(1,lZ,7,6,"div",52),U()),2&t){const e=Me();q(1),le("ngIf",e.showTable)}}function dZ(t,i){if(1&t&&(H(0,"mat-icon"),ge(1),U()),2&t){const e=Me().$implicit;q(1),Lt(e.icono)}}function uZ(t,i){if(1&t){const e=Tn();H(0,"div")(1,"button",49),Dt("click",function(){return pi(Jt(e).$implicit.click())}),Pe(2,dZ,2,1,"mat-icon",15),ge(3),U()()}if(2&t){const e=i.$implicit,n=Me();q(1),_r(e.class),le("disabled",e.disable&&n.controlesFormGroup.invalid),q(1),le("ngIf",e.icono),q(1),Yn(" ",e.nombre," ")}}function hZ(t,i){if(1&t&&(H(0,"mat-hint",43),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function pZ(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",39)(2,"mat-label"),ge(3),U(),H(4,"input",70,41),Dt("keypress",function(r){Jt(e);const s=Me().$implicit,u=Me();return pi(1==s.keypress?u.soloNumeros(r):"")})("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")}),U(),Pe(6,hZ,2,2,"mat-hint",42),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function fZ(t,i){if(1&t&&(H(0,"mat-hint",43),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function mZ(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field",71)(2,"mat-label"),ge(3),U(),H(4,"textarea",72,41),ge(6,"                                             "),U(),Pe(7,fZ,2,2,"mat-hint",42),U()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(3),le("ngIf",e.maxLength>0)}}function gZ(t,i){if(1&t&&(H(0,"mat-hint",43),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function _Z(t,i){if(1&t){const e=Tn();H(0,"div")(1,"mat-form-field",39)(2,"mat-label"),ge(3),U(),H(4,"input",73,41),Dt("change",function(){Jt(e);const r=Me().$implicit;return pi(1==r.change?r.accion():"")}),U(),Pe(6,gZ,2,2,"mat-hint",42),U()()}if(2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(2),le("ngIf",e.maxLength>0)}}function yZ(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field")(2,"mat-label"),ge(3),U(),bt(4,"input",74,41),H(6,"mat-datepicker-toggle",75)(7,"mat-icon",76),ge(8,"date_range"),U()(),bt(9,"mat-datepicker",null,77),U()()),2&t){const e=Zn(10),n=Me().$implicit;q(3),Lt(n.nombre),q(1),Fi("formControlName",n.id),le("matDatepicker",e),q(2),le("for",e)}}function vZ(t,i){if(1&t&&(H(0,"mat-hint",43),ge(1),U()),2&t){Me();const e=Zn(5),n=Me().$implicit;q(1),jo(" ",e.value.length," / ",n.maxLength," ")}}function bZ(t,i){if(1&t&&(H(0,"div")(1,"mat-form-field",71)(2,"mat-label"),ge(3),U(),H(4,"textarea",78,41),ge(6,"                                                     "),U(),Pe(7,vZ,2,2,"mat-hint",42),U()()),2&t){const e=Me().$implicit;q(3),Lt(e.nombre),q(1),Fi("formControlName",e.id),Fi("maxlength",e.maxLength),q(3),le("ngIf",e.maxLength>0)}}function xZ(t,i){if(1&t&&(H(0,"div")(1,"div",36),Pe(2,_Z,7,4,"div",37),Pe(3,yZ,11,4,"div",37),Pe(4,bZ,8,4,"div",37),U()()),2&t){const e=i.$implicit;q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","date"),q(1),le("ngSwitchCase","textarea")}}function wZ(t,i){if(1&t&&(H(0,"div",44),Pe(1,xZ,5,6,"div",14),U()),2&t){const e=Me().$implicit;_r(e.restclass),q(1),le("ngForOf",e.controlesComplemento)}}function CZ(t,i){if(1&t&&(H(0,"div",18)(1,"label",35)(2,"b"),ge(3),U()(),H(4,"div",36),Pe(5,pZ,7,4,"div",37),Pe(6,mZ,8,4,"div",37),U(),Pe(7,wZ,2,3,"div",38),U()),2&t){const e=i.$implicit;q(3),Lt(e.nombrefila),q(1),_r(e.class),le("ngSwitch",e.tipo),q(1),le("ngSwitchCase","input"),q(1),le("ngSwitchCase","textarea"),q(1),le("ngIf",e.controlesComplemento)}}function MZ(t,i){if(1&t&&(H(0,"mat-icon"),ge(1),U()),2&t){const e=Me().$implicit;q(1),Lt(e.icono)}}function DZ(t,i){if(1&t){const e=Tn();H(0,"div")(1,"button",49),Dt("click",function(){return pi(Jt(e).$implicit.click())}),Pe(2,MZ,2,1,"mat-icon",15),ge(3),U()()}if(2&t){const e=i.$implicit,n=Me();q(1),_r(e.class),le("disabled",e.disabled&&n.controlesSecundariosFormGroup.invalid),q(1),le("ngIf",e.icono),q(1),Yn(" ",e.nombre," ")}}const SZ=[{path:"login",component:VO},{path:"agricultor-main",component:Rq,canActivate:[ME]},{path:"beneficio-main",component:RW,canActivate:[ME]},{path:"peso-cabal-main",component:(()=>{class t{constructor(e,n,r,s,u,_){this.spinner=e,this.router=n,this.loginService=r,this.solicitudesService=s,this.pesoCabalService=u,this.cuentasService=_,this.dataSource=new dE,this.columnsToDisplay=[],this.columnsChildrenIds=[],this.tituloFormulario="",this.tituloModalSecundario="",this.controlesModalSecundario=[],this.botonesModalSecundario=[],this.showTable=!1,this.controlesFormGroup=new Id({}),this.controlesSecundariosFormGroup=new Id({});const b=[];b.push({tituloSeccion:"",class:"carousel-item active",opciones:[{nombre:"Camiones por pesar",descripcion:"Camiones en espera de ser pesados",icono:"play_for_work",accion:"solicitudesPendientes"},{nombre:"Cerrar sesi\xf3n",descripcion:"Cerrar sesi\xf3n",icono:"power_settings_new",accion:"cerrarSesion"}]}),this.opcionesMenu=b}ngOnInit(){this.spinner.show(),"ROLE_UMG_BC_PESO_CABAL"!==localStorage.getItem("role")&&(this.spinner.hide(),this.router.navigate(["login"])),this.spinner.hide()}openDialog(e){switch(e){case"solicitudesPendientes":this.tituloFormulario="Revisi\xf3n de solicitudes ingresadas al Beneficio del Caf\xe9",$("#opcionesGenerales").modal("show");break;case"cerrarSesion":this.cerrarSesion();break;case"generarQr":this.generarQr()}this.generarControles(e)}generarQr(){return Wv(function*(){})()}generarControles(e){this.spinner.show();let n=[],r=[];"solicitudesPendientes"===e&&(this.showTable=!0,this.columnsToDisplay=[{id:"piloto",displayName:"Piloto enviado"},{id:"placa",displayName:"Placa transporte"},{id:"pesoEnviado",displayName:"Peso enviado"},{id:"accion",displayName:"Acci\xf3n",icono:"remove_red_eye",titleAccion:"Ver tracking",accion:u=>this.ingresarPeso(u)}],this.columnsChildrenIds=["piloto","placa","pesoEnviado","accion"],n.push({tituloStep:"Informacion nueva solicitud",controles:[]}),r.push({nombre:"Cerrar",class:"btn-container mt-2",click:()=>this.cleanForm(),disable:!1}),this.solicitudesService.obtenerParcialidadesRevisionPesoCabal({estado:!1}).subscribe(u=>{console.log(u),this.dataSource.data=u,this.spinner.hide()},u=>{this.spinner.hide()})),this.controles=n,this.botonesFooter=r,this.controles.forEach(s=>{s.controles.forEach(u=>{u.controlesComplemento&&u.controlesComplemento.forEach(_=>{this.controlesFormGroup.addControl(_.id,_.formControl)}),this.controlesFormGroup.addControl(u.id,u.formControl)})}),this.controlesFormGroup.updateValueAndValidity()}ingresarPeso(e){this.spinner.show(),this.tituloModalSecundario="Ingreso del pesaje en bascula";let n=[];this.controlesModalSecundario.push({id:"peso",nombrefila:"Peso recibido",formControl:new Fa({value:"",disabled:!1},Oa.required),tipo:"input",nombre:"Peso de la parcialidad recibida (medida en toneladas)",class:"col-8",restclass:"",maxLength:3,keypress:!0}),this.controlesModalSecundario.forEach(r=>{r.controlesComplemento&&r.controlesComplemento.forEach(s=>{this.controlesSecundariosFormGroup.addControl(s.id,s.formControl)}),this.controlesSecundariosFormGroup.addControl(r.id,r.formControl)}),this.controlesSecundariosFormGroup.updateValueAndValidity(),n.push({nombre:"Regresar",icono:"arrow_back",class:"btn-container mt-2 ml-2",click:()=>this.regresar()},{nombre:"Registrar peso",icono:"play_for_work",class:"btn-container mt-2 ml-2",click:()=>this.guardarIngresoPeso(e),disabled:!0}),this.botonesModalSecundario=n,$("#opcionesGenerales").modal("hide"),$("#modalSecundary").modal("show"),this.spinner.hide()}guardarIngresoPeso(e){this.spinner.show();let n={parcialidad:e.idParcialidad,peso:Number(this.controlesSecundariosFormGroup.get("peso")?.value),usuarioCreacion:localStorage.getItem("idUser")};this.pesoCabalService.ingresarPeso(n).subscribe(r=>{let s={idParcialidad:e.idParcialidad,nuevoEstado:!0,usuarioModificacion:localStorage.getItem("idUser")};this.pesoCabalService.actualizarParcialidadIngresada(s).subscribe(u=>{this.solicitudesService.consultarDisponibilidadParcialidades({solicitud:e.solicitud}).subscribe(b=>{if("1"===b.message){let S={solicitud:e.solicitud,nuevoEstado:"1ef988e7-4435-4a20-bb78-8b674eb3e589",usuarioModificacion:localStorage.getItem("idUser"),fechaModificacion:new Date};this.solicitudesService.actualizarSolicitud(S).subscribe(A=>{Ur().fire("Peso ingresado correctamente",'Se ingreso el peso correctamente, tambien se asigno el estado "Pesaje iniciado" a la solicitud',"success"),$("#modalSecundary").modal("hide"),$("#opcionesGenerales").modal("hide"),this.cleanForm(),this.spinner.hide()},A=>{Ur().fire("Error","No fue posible realizar lo solicitado, por favor intentente en otro momento","error"),this.spinner.hide()})}else this.solicitudesService.consultarDisponibilidadParcialidades({solicitud:e.solicitud}).subscribe(A=>{if(A.data)Ur().fire("Peso ingresado correctamente","Se ingreso el peso correctamente","success"),$("#modalSecundary").modal("hide"),$("#opcionesGenerales").modal("hide"),this.cleanForm(),this.spinner.hide();else{let B={solicitud:e.solicitud,nuevoEstado:"cb33b950-eac2-11ed-a05b-0242ac120003",usuarioModificacion:localStorage.getItem("idUser"),fechaModificacion:new Date};this.solicitudesService.actualizarSolicitud(B).subscribe(re=>{Ur().fire("Peso ingresado correctamente","Se ingreso el peso correctamente","success"),$("#modalSecundary").modal("hide"),$("#opcionesGenerales").modal("hide"),this.cleanForm(),this.spinner.hide()},re=>{Ur().fire("Error","No fue posible realizar lo solicitado, por favor intentente en otro momento","error"),this.spinner.hide()});let X={idCuenta:A.message,nuevoEstado:"cb33b950-eac2-11ed-a05b-0242ac120003",usuarioModificacion:localStorage.getItem("idUser")};this.cuentasService.actualizarCuenta(X).subscribe(re=>{Ur().fire("Peso ingresado correctamente","Se ingreso el peso correctamente","success"),this.spinner.hide(),$("#modalSecundary").modal("hide"),$("#opcionesGenerales").modal("hide"),this.cleanForm()})}})})},u=>{Ur().fire("Error","No fue posible realizar lo solicitado, por favor intentente en otro momento","error"),this.spinner.hide()})},r=>{Ur().fire("Error","No fue posible realizar lo solicitado, por favor intentente en otro momento","error"),this.spinner.hide()})}regresar(){this.botonesModalSecundario=[],this.controlesModalSecundario=[],Object.keys(this.controlesSecundariosFormGroup.controls).forEach(e=>{this.controlesSecundariosFormGroup.removeControl(e)}),this.controlesSecundariosFormGroup.updateValueAndValidity(),$("#modalSecundary").modal("hide"),$("#opcionesGenerales").modal("show")}cleanForm(){this.botonesModalSecundario=[],this.controlesModalSecundario=[],Object.keys(this.controlesFormGroup.controls).forEach(e=>{this.controlesFormGroup.removeControl(e)}),Object.keys(this.controlesSecundariosFormGroup.controls).forEach(e=>{this.controlesSecundariosFormGroup.removeControl(e)}),this.controlesSecundariosFormGroup.updateValueAndValidity(),this.controlesFormGroup.updateValueAndValidity(),this.controles=[],this.botonesFooter=[],this.showTable=!1,this.dataSource.data=[],$("#opcionesGenerales").modal("hide")}cerrarSesion(){this.spinner.show(),setTimeout(()=>{localStorage.clear(),sessionStorage.clear(),this.spinner.hide(),this.router.navigate(["login"]),this.loginService.role="",this.loginService.id=""},800)}soloNumeros(e){const n=e.keyCode||e.which,r=String.fromCharCode(n);let _=!1;for(const b in".")if(n==="."[b])return _=!0,!0;return!(-1==="0123456789".indexOf(r)&&!_)}}return t.\u0275fac=function(e){return new(e||t)(W(T_),W(Ho),W(D_),W(o1),W(PW),W(s1))},t.\u0275cmp=wi({type:t,selectors:[["app-peso-cabal-main"]],viewQuery:function(e,n){if(1&e&&kn(B_,5),2&e){let r;$t(r=Gt())&&(n.paginator=r.first)}},decls:37,vars:9,consts:[[1,"card-body",2,"margin-top","2%","margin-left","3%","margin-right","3%"],[1,"titulo"],[1,"text-center","m-2","encabezado"],["data-interval","false",1,"carousel-inner"],[3,"class",4,"ngFor","ngForOf"],["id","opcionesGenerales","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],["role","document",1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","col-12"],[1,"titulo","top"],[1,"text-center","m-2","titulo"],[1,"modal-body"],[1,"container"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"modal-footer"],["id","modalSecundary","tabindex","-1","role","dialog","aria-labelledby","myLargeModalLabel","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade","bd-example-modal-xl"],[1,"row"],[1,"col-12","mt-2"],[3,"formGroup"],["class","row",4,"ngFor","ngForOf"],[1,"mt-5","backgroundIcons"],[1,"row","d-flex","justify-content-center"],[2,"position","absolute"],["class","col-lg-2 col-md-4 col-sm-4 ml-5 mr-4 mb-3 mt-5 colorSecundario heightOptions d-flex justify-content-center","style","cursor: pointer","data-toggle","modal","data-target","#opcionesGenerales",3,"click",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#opcionesGenerales",1,"col-lg-2","col-md-4","col-sm-4","ml-5","mr-4","mb-3","mt-5","colorSecundario","heightOptions","d-flex","justify-content-center",2,"cursor","pointer",3,"click"],[1,"iconOptions","mt-3"],[1,"text-center","tituloCampo","textOptions",2,"margin-top","80px"],[1,"text-center","enlaces","textOptions",2,"margin-top","105px",3,"click"],["class","row d-flex justify-content-center mt-4",4,"ngFor","ngForOf"],[2,"text-align","right"],["mat-button","","matStepperPrevious","","class","botonesStepper mr-2",4,"ngIf"],["mat-button","","matStepperNext","","class","botonesStepper ml-2",4,"ngIf"],["matStepLabel",""],[1,"col-3","mt-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","col",3,"class",4,"ngIf"],[1,"col-12"],["matInput","","autocomplete","off",3,"formControlName","maxlength","change","keypress"],["campo",""],["align","end",4,"ngIf"],["align","end"],[1,"col"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"row","d-flex","justify-content-center","mt-4"],["mat-raised-button","",3,"disabled","click"],["mat-button","","matStepperPrevious","",1,"botonesStepper","mr-2"],["mat-button","","matStepperNext","",1,"botonesStepper","ml-2"],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],[1,"table-responsive"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"length","pageSize"],[3,"matColumnDef"],[4,"ngSwitchDefault"],["mat-header-cell","","class","headerTable",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",1,"headerTable"],["mat-cell",""],[1,"material-icons",2,"cursor","pointer",3,"title","click"],["class","material-icons","style","cursor: pointer;",3,"title","click",4,"ngIf"],["mat-header-row",""],["mat-row","",1,"example-element-row"],["matInput","","autocomplete","off",3,"formControlName","maxlength","keypress","change"],[1,"col-ms-12","col-md-12","col-lg-12"],["matInput","","autocomplete","off",3,"formControlName","maxlength"],["matInput","","autocomplete","off",3,"formControlName","maxlength","change"],["matInput","","readonly","",3,"matDatepicker","formControlName"],["matSuffix","",3,"for"],["matDatepickerToggleIcon",""],["pickerSecundary",""],["matInput","","autocomplete","off",1,"tama\xf1oTextArea",3,"formControlName","maxlength"]],template:function(e,n){1&e&&(H(0,"div",0)(1,"div",1)(2,"mat-card-title",2),ge(3,"Bandeja de Peso Cabal"),U()(),H(4,"div",3),Pe(5,FW,6,4,"div",4),U()(),H(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h5",9)(11,"div",10)(12,"mat-card-title",11),ge(13),U()()()(),H(14,"div",12)(15,"div",13)(16,"mat-horizontal-stepper"),Pe(17,KW,10,6,"mat-step",14),U()(),Pe(18,cZ,2,1,"div",15),H(19,"div",16),Pe(20,uZ,4,5,"div",14),U()()()()(),H(21,"div",17)(22,"div",6)(23,"div",7)(24,"div",8)(25,"h5",9)(26,"div",10)(27,"mat-card-title",11),ge(28),U()()()(),H(29,"div",12)(30,"div",13)(31,"div",18)(32,"div",19)(33,"form",20),Pe(34,CZ,8,7,"div",21),U()()()()(),H(35,"div",16),Pe(36,DZ,4,5,"div",14),U()()()()),2&e&&(q(5),le("ngForOf",n.opcionesMenu),q(8),Lt(n.tituloFormulario),q(4),le("ngForOf",n.controles),q(1),le("ngIf",n.showTable),q(2),le("ngForOf",n.botonesFooter),q(8),Lt(n.tituloModalSecundario),q(5),le("formGroup",n.controlesSecundariosFormGroup),q(1),le("ngForOf",n.controlesModalSecundario),q(2),le("ngForOf",n.botonesModalSecundario))},dependencies:[Ph,Gl,Vc,Bu,h_,fb,ef,_b,gb,u1,U_,h1,hE,pE,xE,zb,wE,m1,Lb,bb,$S,P_,GS,Lw,B_,Uw,Jw,Ib,e1,Rb,Ab,t1,Pb,Ob,n1,r1,eb,xm,Zv,Yv,tb,zu,M_],styles:[".iconOptions[_ngcontent-%COMP%]{transform:scale(3);color:#fff;position:absolute}.textOptions[_ngcontent-%COMP%]{color:#fff;position:absolute}.backgroundIcons[_ngcontent-%COMP%]{background-color:#d1e8cf;height:50%}.carousel-control-prev-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23009be1' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E\");width:30px;height:48px}.carousel-control-next-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23009be1' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E\");width:30px;height:48px}label[_ngcontent-%COMP%]{text-align:right;display:block;padding:.5em 1.5em .5em 0}  .cdk-overlay-container{z-index:1200!important}  .mat-horizontal-stepper-header{pointer-events:none!important}  #header .mat-checkbox-frame{border-color:#fff!important}  .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#000!important;border-color:#fff!important}  .mat-checkbox-ripple .mat-ripple-element{background-color:#fff!important}  .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background{background-color:#000!important;border-color:#fff!important}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:whitesmoke}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-height:80px;font-weight:lighter;margin:8px 0}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.modal-body[_ngcontent-%COMP%]{max-height:calc(100vh - 200px);overflow-y:auto}.tama\\f1oTextArea[_ngcontent-%COMP%]{resize:vertical}"]}),t})(),canActivate:[ME]},{path:"consulta-beneficio-cafe/:transportista",component:(()=>{class t{constructor(e,n,r){this.route=e,this.spinner=n,this.loginService=r}ngOnInit(){var e=this;this.spinner.show(),this.route.paramMap.subscribe(function(){var n=Wv(function*(r){e.licenciaTransportista=r.get("transportista"),e.loginService.getPiloto({licencia:e.licenciaTransportista}).subscribe(u=>{e.informacionPiloto=u,console.log(e.informacionPiloto),e.spinner.hide()})});return function(r){return n.apply(this,arguments)}}())}}return t.\u0275fac=function(e){return new(e||t)(W(Yp),W(T_),W(D_))},t.\u0275cmp=wi({type:t,selectors:[["app-informacion-publica"]],decls:43,vars:5,consts:[[1,"card-body",2,"margin-top","2%","margin-left","3%","margin-right","3%"],[1,"titulo"],[1,"text-center","m-2","encabezado"],["data-interval","false",1,"carousel-inner"],[1,"carousel-item","active"],[1,"mt-5","backgroundIcons"],[1,"row","d-flex","justify-content-center"],[1,"col-lg-2","col-md-4","col-sm-4","ml-5","mr-4","mb-3","mt-5","colorSecundario","heightOptions","d-flex","justify-content-center",2,"cursor","pointer"],[1,"iconOptions","mt-3"],[1,"text-center","tituloCampo","textOptions",2,"margin-top","80px"],[1,"text-center","enlaces","textOptions",2,"margin-top","105px"]],template:function(e,n){1&e&&(H(0,"div",0)(1,"div",1)(2,"mat-card-title",2),ge(3,"Consulta de Transportista"),U()(),H(4,"div",3)(5,"div",4)(6,"mat-card",5)(7,"div",6)(8,"mat-card",7)(9,"mat-icon",8),ge(10,"person_pin_circle"),U(),H(11,"mat-card-title",9),ge(12,"Nombre conductor"),U(),H(13,"mat-card-title",10),ge(14),U()(),H(15,"mat-card",7)(16,"mat-icon",8),ge(17,"email"),U(),H(18,"mat-card-title",9),ge(19,"Correo conductor"),U(),H(20,"mat-card-title",10),ge(21),U()(),H(22,"mat-card",7)(23,"mat-icon",8),ge(24,"phone_iphone"),U(),H(25,"mat-card-title",9),ge(26,"Celular"),U(),H(27,"mat-card-title",10),ge(28),U()(),H(29,"mat-card",7)(30,"mat-icon",8),ge(31,"picture_in_picture"),U(),H(32,"mat-card-title",9),ge(33,"Licencia"),U(),H(34,"mat-card-title",10),ge(35),U()(),H(36,"mat-card",7)(37,"mat-icon",8),ge(38,"accessibility"),U(),H(39,"mat-card-title",9),ge(40,"Estatus en Beneficio"),U(),H(41,"mat-card-title",10),ge(42),U()()()()()()()),2&e&&(q(14),Lt(n.informacionPiloto.nombre),q(7),Lt(n.informacionPiloto.correo),q(7),Lt(n.informacionPiloto.celular),q(7),Lt(n.informacionPiloto.licenciaPiloto),q(7),Lt(!0===n.informacionPiloto.permitidoEnBeneficio?"Transportista permitido":"Transportista no permitido"))},dependencies:[_b,gb,Lb],styles:[".iconOptions[_ngcontent-%COMP%]{transform:scale(3);color:#fff;position:absolute}.textOptions[_ngcontent-%COMP%]{color:#fff;position:absolute}.backgroundIcons[_ngcontent-%COMP%]{background-color:#d1e8cf;height:50%}.carousel-control-prev-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23009be1' viewBox='0 0 8 8'%3E%3Cpath d='M5.25 0l-4 4 4 4 1.5-1.5-2.5-2.5 2.5-2.5-1.5-1.5z'/%3E%3C/svg%3E\");width:30px;height:48px}.carousel-control-next-icon[_ngcontent-%COMP%]{background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23009be1' viewBox='0 0 8 8'%3E%3Cpath d='M2.75 0l-1.5 1.5 2.5 2.5-2.5 2.5 1.5 1.5 4-4-4-4z'/%3E%3C/svg%3E\");width:30px;height:48px}label[_ngcontent-%COMP%]{text-align:right;display:block;padding:.5em 1.5em .5em 0}  .cdk-overlay-container{z-index:1200!important}  .mat-horizontal-stepper-header{pointer-events:none!important}  #header .mat-checkbox-frame{border-color:#fff!important}  .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#000!important;border-color:#fff!important}  .mat-checkbox-ripple .mat-ripple-element{background-color:#fff!important}  .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background{background-color:#000!important;border-color:#fff!important}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:whitesmoke}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-height:80px;font-weight:lighter;margin:8px 0}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.modal-body[_ngcontent-%COMP%]{max-height:calc(100vh - 200px);overflow-y:auto}.tama\\f1oTextArea[_ngcontent-%COMP%]{resize:vertical}"]}),t})()},{path:"**",component:VO}];let EZ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[AR.forRoot(SZ),AR]}),t})(),TZ=(()=>{class t{constructor(){this.title="BeneficioCafe"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=wi({type:t,selectors:[["app-root"]],decls:4,vars:1,consts:[["bdColor","rgba(0, 0, 0, 0.8)","size","large","color","#fff","type","square-jelly-box",3,"fullScreen"],[2,"color","white"]],template:function(e,n){1&e&&(bt(0,"router-outlet"),H(1,"ngx-spinner",0)(2,"p",1),ge(3," Cargando... "),U()()),2&e&&(q(1),le("fullScreen",!1))},dependencies:[PD,l6],styles:[".headerTable[_ngcontent-%COMP%]{background-color:#2294b3;color:#fff;text-align:left;font-size:14px}table[_ngcontent-%COMP%]{text-align:justify;margin:auto;width:100%}"]}),t})();function qF(t){return new ft(3e3,!1)}function cY(){return typeof window<"u"&&typeof window.document<"u"}function DE(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function nf(t){switch(t.length){case 0:return new nb;case 1:return t[0];default:return new QP(t)}}function WF(t,i,e,n,r=new Map,s=new Map){const u=[],_=[];let b=-1,S=null;if(n.forEach(A=>{const B=A.get("offset"),X=B==b,re=X&&S||new Map;A.forEach((_e,Le)=>{let Ue=Le,it=_e;if("offset"!==Le)switch(Ue=i.normalizePropertyName(Ue,u),it){case"!":it=r.get(Le);break;case Bh:it=s.get(Le);break;default:it=i.normalizeStyleValue(Le,Ue,it,u)}re.set(Ue,it)}),X||_.push(re),S=re,b=B}),u.length)throw function KZ(t){return new ft(3502,!1)}();return _}function SE(t,i,e,n){switch(i){case"start":t.onStart(()=>n(e&&EE(e,"start",t)));break;case"done":t.onDone(()=>n(e&&EE(e,"done",t)));break;case"destroy":t.onDestroy(()=>n(e&&EE(e,"destroy",t)))}}function EE(t,i,e){const s=TE(t.element,t.triggerName,t.fromState,t.toState,i||t.phaseName,e.totalTime??t.totalTime,!!e.disabled),u=t._data;return null!=u&&(s._data=u),s}function TE(t,i,e,n,r="",s=0,u){return{element:t,triggerName:i,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!u}}function Yl(t,i,e){let n=t.get(i);return n||t.set(i,n=e),n}function ZF(t){const i=t.indexOf(":");return[t.substring(1,i),t.slice(i+1)]}let kE=(t,i)=>!1,YF=(t,i,e)=>[],XF=null;function AE(t){const i=t.parentNode||t.host;return i===XF?null:i}(DE()||typeof Element<"u")&&(cY()?(XF=(()=>document.documentElement)(),kE=(t,i)=>{for(;i;){if(i===t)return!0;i=AE(i)}return!1}):kE=(t,i)=>t.contains(i),YF=(t,i,e)=>{if(e)return Array.from(t.querySelectorAll(i));const n=t.querySelector(i);return n?[n]:[]});let Bm=null,KF=!1;const QF=kE,JF=YF;let eL=(()=>{class t{validateStyleProperty(e){return function uY(t){Bm||(Bm=function hY(){return typeof document<"u"?document.body:null}()||{},KF=!!Bm.style&&"WebkitAppearance"in Bm.style);let i=!0;return Bm.style&&!function dY(t){return"ebkit"==t.substring(1,6)}(t)&&(i=t in Bm.style,!i&&KF&&(i="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Bm.style)),i}(e)}matchesElement(e,n){return!1}containsElement(e,n){return QF(e,n)}getParentElement(e){return AE(e)}query(e,n,r){return JF(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,u,_=[],b){return new nb(r,s)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})(),IE=(()=>{class t{}return t.NOOP=new eL,t})();const RE="ng-enter",g1="ng-leave",_1="ng-trigger",y1=".ng-trigger",iL="ng-animating",PE=".ng-animating";function $h(t){if("number"==typeof t)return t;const i=t.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:OE(parseFloat(i[1]),i[2])}function OE(t,i){return"s"===i?1e3*t:t}function v1(t,i,e){return t.hasOwnProperty("duration")?t:function mY(t,i,e){let r,s=0,u="";if("string"==typeof t){const _=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===_)return i.push(qF()),{duration:0,delay:0,easing:""};r=OE(parseFloat(_[1]),_[2]);const b=_[3];null!=b&&(s=OE(parseFloat(b),_[4]));const S=_[5];S&&(u=S)}else r=t;if(!e){let _=!1,b=i.length;r<0&&(i.push(function kZ(){return new ft(3100,!1)}()),_=!0),s<0&&(i.push(function AZ(){return new ft(3101,!1)}()),_=!0),_&&i.splice(b,0,qF())}return{duration:r,delay:s,easing:u}}(t,i,e)}function Vb(t,i={}){return Object.keys(t).forEach(e=>{i[e]=t[e]}),i}function nL(t){const i=new Map;return Object.keys(t).forEach(e=>{i.set(e,t[e])}),i}function rf(t,i=new Map,e){if(e)for(let[n,r]of e)i.set(n,r);for(let[n,r]of t)i.set(n,r);return i}function oL(t,i,e){return e?i+":"+e+";":""}function sL(t){let i="";for(let e=0;e<t.style.length;e++){const n=t.style.item(e);i+=oL(0,n,t.style.getPropertyValue(n))}for(const e in t.style)t.style.hasOwnProperty(e)&&!e.startsWith("_")&&(i+=oL(0,vY(e),t.style[e]));t.setAttribute("style",i)}function $u(t,i,e){t.style&&(i.forEach((n,r)=>{const s=LE(r);e&&!e.has(r)&&e.set(r,t.style[s]),t.style[s]=n}),DE()&&sL(t))}function Nm(t,i){t.style&&(i.forEach((e,n)=>{const r=LE(n);t.style[r]=""}),DE()&&sL(t))}function jb(t){return Array.isArray(t)?1==t.length?t[0]:XP(t):t}const FE=new RegExp("{{\\s*(.+?)\\s*}}","g");function aL(t){let i=[];if("string"==typeof t){let e;for(;e=FE.exec(t);)i.push(e[1]);FE.lastIndex=0}return i}function Ub(t,i,e){const n=t.toString(),r=n.replace(FE,(s,u)=>{let _=i[u];return null==_&&(e.push(function RZ(t){return new ft(3003,!1)}()),_=""),_.toString()});return r==n?t:r}function b1(t){const i=[];let e=t.next();for(;!e.done;)i.push(e.value),e=t.next();return i}const yY=/-+([a-z0-9])/g;function LE(t){return t.replace(yY,(...i)=>i[1].toUpperCase())}function vY(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Xl(t,i,e){switch(i.type){case 7:return t.visitTrigger(i,e);case 0:return t.visitState(i,e);case 1:return t.visitTransition(i,e);case 2:return t.visitSequence(i,e);case 3:return t.visitGroup(i,e);case 4:return t.visitAnimate(i,e);case 5:return t.visitKeyframes(i,e);case 6:return t.visitStyle(i,e);case 8:return t.visitReference(i,e);case 9:return t.visitAnimateChild(i,e);case 10:return t.visitAnimateRef(i,e);case 11:return t.visitQuery(i,e);case 12:return t.visitStagger(i,e);default:throw function PZ(t){return new ft(3004,!1)}()}}function lL(t,i){return window.getComputedStyle(t)[i]}function DY(t,i){const e=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(n=>function SY(t,i,e){if(":"==t[0]){const b=function EY(t,i){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return i.push(function WZ(t){return new ft(3016,!1)}()),"* => *"}}(t,e);if("function"==typeof b)return void i.push(b);t=b}const n=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function qZ(t){return new ft(3015,!1)}()),i;const r=n[1],s=n[2],u=n[3];i.push(cL(r,u));"<"==s[0]&&!("*"==r&&"*"==u)&&i.push(cL(u,r))}(n,e,i)):e.push(t),e}const M1=new Set(["true","1"]),D1=new Set(["false","0"]);function cL(t,i){const e=M1.has(t)||D1.has(t),n=M1.has(i)||D1.has(i);return(r,s)=>{let u="*"==t||t==r,_="*"==i||i==s;return!u&&e&&"boolean"==typeof r&&(u=r?M1.has(t):D1.has(t)),!_&&n&&"boolean"==typeof s&&(_=s?M1.has(i):D1.has(i)),u&&_}}const TY=new RegExp("s*:selfs*,?","g");function BE(t,i,e,n){return new kY(t).build(i,e,n)}class kY{constructor(i){this._driver=i}build(i,e,n){const r=new RY(e);return this._resetContextStyleTimingState(r),Xl(this,jb(i),r)}_resetContextStyleTimingState(i){i.currentQuerySelector="",i.collectedStyles=new Map,i.collectedStyles.set("",new Map),i.currentTime=0}visitTrigger(i,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],u=[];return"@"==i.name.charAt(0)&&e.errors.push(function FZ(){return new ft(3006,!1)}()),i.definitions.forEach(_=>{if(this._resetContextStyleTimingState(e),0==_.type){const b=_,S=b.name;S.toString().split(/\s*,\s*/).forEach(A=>{b.name=A,s.push(this.visitState(b,e))}),b.name=S}else if(1==_.type){const b=this.visitTransition(_,e);n+=b.queryCount,r+=b.depCount,u.push(b)}else e.errors.push(function LZ(){return new ft(3007,!1)}())}),{type:7,name:i.name,states:s,transitions:u,queryCount:n,depCount:r,options:null}}visitState(i,e){const n=this.visitStyle(i.styles,e),r=i.options&&i.options.params||null;if(n.containsDynamicStyles){const s=new Set,u=r||{};n.styles.forEach(_=>{_ instanceof Map&&_.forEach(b=>{aL(b).forEach(S=>{u.hasOwnProperty(S)||s.add(S)})})}),s.size&&(b1(s.values()),e.errors.push(function BZ(t,i){return new ft(3008,!1)}()))}return{type:0,name:i.name,style:n,options:r?{params:r}:null}}visitTransition(i,e){e.queryCount=0,e.depCount=0;const n=Xl(this,jb(i.animation),e);return{type:1,matchers:DY(i.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:zm(i.options)}}visitSequence(i,e){return{type:2,steps:i.steps.map(n=>Xl(this,n,e)),options:zm(i.options)}}visitGroup(i,e){const n=e.currentTime;let r=0;const s=i.steps.map(u=>{e.currentTime=n;const _=Xl(this,u,e);return r=Math.max(r,e.currentTime),_});return e.currentTime=r,{type:3,steps:s,options:zm(i.options)}}visitAnimate(i,e){const n=function OY(t,i){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return NE(v1(t,i).duration,0,"");const e=t;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=NE(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=v1(e,i);return NE(r.duration,r.delay,r.easing)}(i.timings,e.errors);e.currentAnimateTimings=n;let r,s=i.styles?i.styles:ii({});if(5==s.type)r=this.visitKeyframes(s,e);else{let u=i.styles,_=!1;if(!u){_=!0;const S={};n.easing&&(S.easing=n.easing),u=ii(S)}e.currentTime+=n.duration+n.delay;const b=this.visitStyle(u,e);b.isEmptyStep=_,r=b}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(i,e){const n=this._makeStyleAst(i,e);return this._validateStyleAst(n,e),n}_makeStyleAst(i,e){const n=[],r=Array.isArray(i.styles)?i.styles:[i.styles];for(let _ of r)"string"==typeof _?_===Bh?n.push(_):e.errors.push(new ft(3002,!1)):n.push(nL(_));let s=!1,u=null;return n.forEach(_=>{if(_ instanceof Map&&(_.has("easing")&&(u=_.get("easing"),_.delete("easing")),!s))for(let b of _.values())if(b.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:u,offset:i.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(i,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),i.styles.forEach(u=>{"string"!=typeof u&&u.forEach((_,b)=>{const S=e.collectedStyles.get(e.currentQuerySelector),A=S.get(b);let B=!0;A&&(s!=r&&s>=A.startTime&&r<=A.endTime&&(e.errors.push(function zZ(t,i,e,n,r){return new ft(3010,!1)}()),B=!1),s=A.startTime),B&&S.set(b,{startTime:s,endTime:r}),e.options&&function _Y(t,i,e){const n=i.params||{},r=aL(t);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function IZ(t){return new ft(3001,!1)}())})}(_,e.options,e.errors)})})}visitKeyframes(i,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function VZ(){return new ft(3011,!1)}()),n;let s=0;const u=[];let _=!1,b=!1,S=0;const A=i.steps.map(it=>{const Rt=this._makeStyleAst(it,e);let rt=null!=Rt.offset?Rt.offset:function PY(t){if("string"==typeof t)return null;let i=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;i=parseFloat(n.get("offset")),n.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const e=t;i=parseFloat(e.get("offset")),e.delete("offset")}return i}(Rt.styles),ei=0;return null!=rt&&(s++,ei=Rt.offset=rt),b=b||ei<0||ei>1,_=_||ei<S,S=ei,u.push(ei),Rt});b&&e.errors.push(function jZ(){return new ft(3012,!1)}()),_&&e.errors.push(function UZ(){return new ft(3200,!1)}());const B=i.steps.length;let X=0;s>0&&s<B?e.errors.push(function HZ(){return new ft(3202,!1)}()):0==s&&(X=1/(B-1));const re=B-1,_e=e.currentTime,Le=e.currentAnimateTimings,Ue=Le.duration;return A.forEach((it,Rt)=>{const rt=X>0?Rt==re?1:X*Rt:u[Rt],ei=rt*Ue;e.currentTime=_e+Le.delay+ei,Le.duration=ei,this._validateStyleAst(it,e),it.offset=rt,n.styles.push(it)}),n}visitReference(i,e){return{type:8,animation:Xl(this,jb(i.animation),e),options:zm(i.options)}}visitAnimateChild(i,e){return e.depCount++,{type:9,options:zm(i.options)}}visitAnimateRef(i,e){return{type:10,animation:this.visitReference(i.animation,e),options:zm(i.options)}}visitQuery(i,e){const n=e.currentQuerySelector,r=i.options||{};e.queryCount++,e.currentQuery=i;const[s,u]=function AY(t){const i=!!t.split(/\s*,\s*/).find(e=>":self"==e);return i&&(t=t.replace(TY,"")),t=t.replace(/@\*/g,y1).replace(/@\w+/g,e=>y1+"-"+e.slice(1)).replace(/:animating/g,PE),[t,i]}(i.selector);e.currentQuerySelector=n.length?n+" "+s:s,Yl(e.collectedStyles,e.currentQuerySelector,new Map);const _=Xl(this,jb(i.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:u,animation:_,originalSelector:i.selector,options:zm(i.options)}}visitStagger(i,e){e.currentQuery||e.errors.push(function $Z(){return new ft(3013,!1)}());const n="full"===i.timings?{duration:0,delay:0,easing:"full"}:v1(i.timings,e.errors,!0);return{type:12,animation:Xl(this,jb(i.animation),e),timings:n,options:null}}}class RY{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function zm(t){return t?(t=Vb(t)).params&&(t.params=function IY(t){return t?Vb(t):null}(t.params)):t={},t}function NE(t,i,e){return{duration:t,delay:i,easing:e}}function zE(t,i,e,n,r,s,u=null,_=!1){return{type:1,element:t,keyframes:i,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:u,subTimeline:_}}class S1{constructor(){this._map=new Map}get(i){return this._map.get(i)||[]}append(i,e){let n=this._map.get(i);n||this._map.set(i,n=[]),n.push(...e)}has(i){return this._map.has(i)}clear(){this._map.clear()}}const BY=new RegExp(":enter","g"),zY=new RegExp(":leave","g");function VE(t,i,e,n,r,s=new Map,u=new Map,_,b,S=[]){return(new VY).buildKeyframes(t,i,e,n,r,s,u,_,b,S)}class VY{buildKeyframes(i,e,n,r,s,u,_,b,S,A=[]){S=S||new S1;const B=new jE(i,e,S,r,s,A,[]);B.options=b;const X=b.delay?$h(b.delay):0;B.currentTimeline.delayNextStep(X),B.currentTimeline.setStyles([u],null,B.errors,b),Xl(this,n,B);const re=B.timelines.filter(_e=>_e.containsAnimation());if(re.length&&_.size){let _e;for(let Le=re.length-1;Le>=0;Le--){const Ue=re[Le];if(Ue.element===e){_e=Ue;break}}_e&&!_e.allowOnlyTimelineStyles()&&_e.setStyles([_],null,B.errors,b)}return re.length?re.map(_e=>_e.buildKeyframes()):[zE(e,[],[],[],0,X,"",!1)]}visitTrigger(i,e){}visitState(i,e){}visitTransition(i,e){}visitAnimateChild(i,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(i.options),s=e.currentTimeline.currentTime,u=this._visitSubInstructions(n,r,r.options);s!=u&&e.transformIntoNewTimeline(u)}e.previousNode=i}visitAnimateRef(i,e){const n=e.createSubContext(i.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([i.options,i.animation.options],e,n),this.visitReference(i.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=i}_applyAnimationRefDelays(i,e,n){for(const r of i){const s=r?.delay;if(s){const u="number"==typeof s?s:$h(Ub(s,r?.params??{},e.errors));n.delayNextStep(u)}}}_visitSubInstructions(i,e,n){let s=e.currentTimeline.currentTime;const u=null!=n.duration?$h(n.duration):null,_=null!=n.delay?$h(n.delay):null;return 0!==u&&i.forEach(b=>{const S=e.appendInstructionToTimeline(b,u,_);s=Math.max(s,S.duration+S.delay)}),s}visitReference(i,e){e.updateOptions(i.options,!0),Xl(this,i.animation,e),e.previousNode=i}visitSequence(i,e){const n=e.subContextCount;let r=e;const s=i.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=E1);const u=$h(s.delay);r.delayNextStep(u)}i.steps.length&&(i.steps.forEach(u=>Xl(this,u,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=i}visitGroup(i,e){const n=[];let r=e.currentTimeline.currentTime;const s=i.options&&i.options.delay?$h(i.options.delay):0;i.steps.forEach(u=>{const _=e.createSubContext(i.options);s&&_.delayNextStep(s),Xl(this,u,_),r=Math.max(r,_.currentTimeline.currentTime),n.push(_.currentTimeline)}),n.forEach(u=>e.currentTimeline.mergeTimelineCollectedStyles(u)),e.transformIntoNewTimeline(r),e.previousNode=i}_visitTiming(i,e){if(i.dynamic){const n=i.strValue;return v1(e.params?Ub(n,e.params,e.errors):n,e.errors)}return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,e){const n=e.currentAnimateTimings=this._visitTiming(i.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=i.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=i}visitStyle(i,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||i.easing;i.isEmptyStep?n.applyEmptyStep(s):n.setStyles(i.styles,s,e.errors,e.options),e.previousNode=i}visitKeyframes(i,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,_=e.createSubContext().currentTimeline;_.easing=n.easing,i.styles.forEach(b=>{_.forwardTime((b.offset||0)*s),_.setStyles(b.styles,b.easing,e.errors,e.options),_.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(_),e.transformIntoNewTimeline(r+s),e.previousNode=i}visitQuery(i,e){const n=e.currentTimeline.currentTime,r=i.options||{},s=r.delay?$h(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=E1);let u=n;const _=e.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=_.length;let b=null;_.forEach((S,A)=>{e.currentQueryIndex=A;const B=e.createSubContext(i.options,S);s&&B.delayNextStep(s),S===e.element&&(b=B.currentTimeline),Xl(this,i.animation,B),B.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,B.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(u),b&&(e.currentTimeline.mergeTimelineCollectedStyles(b),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=i}visitStagger(i,e){const n=e.parentContext,r=e.currentTimeline,s=i.timings,u=Math.abs(s.duration),_=u*(e.currentQueryTotal-1);let b=u*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":b=_-b;break;case"full":b=n.currentStaggerTime}const A=e.currentTimeline;b&&A.delayNextStep(b);const B=A.currentTime;Xl(this,i.animation,e),e.previousNode=i,n.currentStaggerTime=r.currentTime-B+(r.startTime-n.currentTimeline.startTime)}}const E1={};class jE{constructor(i,e,n,r,s,u,_,b){this._driver=i,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=u,this.timelines=_,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=E1,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=b||new T1(this._driver,e,0),_.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,e){if(!i)return;const n=i;let r=this.options;null!=n.duration&&(r.duration=$h(n.duration)),null!=n.delay&&(r.delay=$h(n.delay));const s=n.params;if(s){let u=r.params;u||(u=this.options.params={}),Object.keys(s).forEach(_=>{(!e||!u.hasOwnProperty(_))&&(u[_]=Ub(s[_],u,this.errors))})}}_copyOptions(){const i={};if(this.options){const e=this.options.params;if(e){const n=i.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return i}createSubContext(i=null,e,n){const r=e||this.element,s=new jE(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(i),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(i){return this.previousNode=E1,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,e,n){const r={duration:e??i.duration,delay:this.currentTimeline.currentTime+(n??0)+i.delay,easing:""},s=new jY(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,r,i.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,e,n,r,s,u){let _=[];if(r&&_.push(this.element),i.length>0){i=(i=i.replace(BY,"."+this._enterClassName)).replace(zY,"."+this._leaveClassName);let S=this._driver.query(this.element,i,1!=n);0!==n&&(S=n<0?S.slice(S.length+n,S.length):S.slice(0,n)),_.push(...S)}return!s&&0==_.length&&u.push(function GZ(t){return new ft(3014,!1)}()),_}}class T1{constructor(i,e,n,r){this._driver=i,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(i){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+i),e&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,e){return this.applyStylesToKeyframe(),new T1(this._driver,i,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,e){this._localTimelineStyles.set(i,e),this._globalTimelineStyles.set(i,e),this._styleSummary.set(i,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&this._previousKeyframe.set("easing",i);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||Bh),this._currentKeyframe.set(e,Bh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},u=function UY(t,i){const e=new Map;let n;return t.forEach(r=>{if("*"===r){n=n||i.keys();for(let s of n)e.set(s,Bh)}else rf(r,e)}),e}(i,this._globalTimelineStyles);for(let[_,b]of u){const S=Ub(b,s,n);this._pendingStyles.set(_,S),this._localTimelineStyles.has(_)||this._backFill.set(_,this._globalTimelineStyles.get(_)??Bh),this._updateStyle(_,S)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((i,e)=>{this._currentKeyframe.set(e,i)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,i)}))}snapshotCurrentStyles(){for(let[i,e]of this._localTimelineStyles)this._pendingStyles.set(i,e),this._updateStyle(i,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const i=[];for(let e in this._currentKeyframe)i.push(e);return i}mergeTimelineCollectedStyles(i){i._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const i=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((_,b)=>{const S=rf(_,new Map,this._backFill);S.forEach((A,B)=>{"!"===A?i.add(B):A===Bh&&e.add(B)}),n||S.set("offset",b/this.duration),r.push(S)});const s=i.size?b1(i.values()):[],u=e.size?b1(e.values()):[];if(n){const _=r[0],b=new Map(_);_.set("offset",0),b.set("offset",1),r=[_,b]}return zE(this.element,r,s,u,this.duration,this.startTime,this.easing,!1)}}class jY extends T1{constructor(i,e,n,r,s,u,_=!1){super(i,e,u.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=_,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],u=n+e,_=e/u,b=rf(i[0]);b.set("offset",0),s.push(b);const S=rf(i[0]);S.set("offset",hL(_)),s.push(S);const A=i.length-1;for(let B=1;B<=A;B++){let X=rf(i[B]);const re=X.get("offset");X.set("offset",hL((e+re*n)/u)),s.push(X)}n=u,e=0,r="",i=s}return zE(this.element,i,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function hL(t,i=3){const e=Math.pow(10,i-1);return Math.round(t*e)/e}class UE{}const HY=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class $Y extends UE{normalizePropertyName(i,e){return LE(i)}normalizeStyleValue(i,e,n,r){let s="";const u=n.toString().trim();if(HY.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const _=n.match(/^[+-]?[\d\.]+([a-z]*)$/);_&&0==_[1].length&&r.push(function OZ(t,i){return new ft(3005,!1)}())}return u+s}}function pL(t,i,e,n,r,s,u,_,b,S,A,B,X){return{type:0,element:t,triggerName:i,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:u,timelines:_,queriedElements:b,preStyleProps:S,postStyleProps:A,totalTime:B,errors:X}}const HE={};class fL{constructor(i,e,n){this._triggerName=i,this.ast=e,this._stateStyles=n}match(i,e,n,r){return function GY(t,i,e,n,r){return t.some(s=>s(i,e,n,r))}(this.ast.matchers,i,e,n,r)}buildStyles(i,e,n){let r=this._stateStyles.get("*");return void 0!==i&&(r=this._stateStyles.get(i?.toString())||r),r?r.buildStyles(e,n):new Map}build(i,e,n,r,s,u,_,b,S,A){const B=[],X=this.ast.options&&this.ast.options.params||HE,_e=this.buildStyles(n,_&&_.params||HE,B),Le=b&&b.params||HE,Ue=this.buildStyles(r,Le,B),it=new Set,Rt=new Map,rt=new Map,ei="void"===r,Fn={params:qY(Le,X),delay:this.ast.options?.delay},ar=A?[]:VE(i,e,this.ast.animation,s,u,_e,Ue,Fn,S,B);let ko=0;if(ar.forEach(Ql=>{ko=Math.max(Ql.duration+Ql.delay,ko)}),B.length)return pL(e,this._triggerName,n,r,ei,_e,Ue,[],[],Rt,rt,ko,B);ar.forEach(Ql=>{const Jl=Ql.element,q_=Yl(Rt,Jl,new Set);Ql.preStyleProps.forEach(Ld=>q_.add(Ld));const qh=Yl(rt,Jl,new Set);Ql.postStyleProps.forEach(Ld=>qh.add(Ld)),Jl!==e&&it.add(Jl)});const Kl=b1(it.values());return pL(e,this._triggerName,n,r,ei,_e,Ue,ar,Kl,Rt,rt,ko)}}function qY(t,i){const e=Vb(i);for(const n in t)t.hasOwnProperty(n)&&null!=t[n]&&(e[n]=t[n]);return e}class WY{constructor(i,e,n){this.styles=i,this.defaultParams=e,this.normalizer=n}buildStyles(i,e){const n=new Map,r=Vb(this.defaultParams);return Object.keys(i).forEach(s=>{const u=i[s];null!==u&&(r[s]=u)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((u,_)=>{u&&(u=Ub(u,r,e));const b=this.normalizer.normalizePropertyName(_,e);u=this.normalizer.normalizeStyleValue(_,b,u,e),n.set(b,u)})}),n}}class YY{constructor(i,e,n){this.name=i,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new WY(r.style,r.options&&r.options.params||{},n))}),mL(this.states,"true","1"),mL(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new fL(i,r,this.states))}),this.fallbackTransition=function XY(t,i,e){return new fL(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,_)=>!0],options:null,queryCount:0,depCount:0},i)}(i,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,e,n,r){return this.transitionFactories.find(u=>u.match(i,e,n,r))||null}matchStyles(i,e,n){return this.fallbackTransition.buildStyles(i,e,n)}}function mL(t,i,e){t.has(i)?t.has(e)||t.set(e,t.get(i)):t.has(e)&&t.set(i,t.get(e))}const KY=new S1;class QY{constructor(i,e,n){this.bodyNode=i,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(i,e){const n=[],s=BE(this._driver,e,n,[]);if(n.length)throw function QZ(t){return new ft(3503,!1)}();this._animations.set(i,s)}_buildPlayer(i,e,n){const r=i.element,s=WF(0,this._normalizer,0,i.keyframes,e,n);return this._driver.animate(r,s,i.duration,i.delay,i.easing,[],!0)}create(i,e,n={}){const r=[],s=this._animations.get(i);let u;const _=new Map;if(s?(u=VE(this._driver,e,s,RE,g1,new Map,new Map,n,KY,r),u.forEach(A=>{const B=Yl(_,A.element,new Map);A.postStyleProps.forEach(X=>B.set(X,null))})):(r.push(function JZ(){return new ft(3300,!1)}()),u=[]),r.length)throw function eY(t){return new ft(3504,!1)}();_.forEach((A,B)=>{A.forEach((X,re)=>{A.set(re,this._driver.computeStyle(B,re,Bh))})});const S=nf(u.map(A=>{const B=_.get(A.element);return this._buildPlayer(A,new Map,B)}));return this._playersById.set(i,S),S.onDestroy(()=>this.destroy(i)),this.players.push(S),S}destroy(i){const e=this._getPlayer(i);e.destroy(),this._playersById.delete(i);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(i){const e=this._playersById.get(i);if(!e)throw function tY(t){return new ft(3301,!1)}();return e}listen(i,e,n,r){const s=TE(e,"","","");return SE(this._getPlayer(i),n,s,r),()=>{}}command(i,e,n,r){if("register"==n)return void this.register(i,r[0]);if("create"==n)return void this.create(i,e,r[0]||{});const s=this._getPlayer(i);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(i)}}}const gL="ng-animate-queued",$E="ng-animate-disabled",nX=[],_L={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},rX={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Gc="__ng_removed";class GE{constructor(i,e=""){this.namespaceId=e;const n=i&&i.hasOwnProperty("value");if(this.value=function lX(t){return t??null}(n?i.value:i),n){const s=Vb(i);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(i){const e=i.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Hb="void",qE=new GE(Hb);class oX{constructor(i,e,n){this.id=i,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,qc(e,this._hostClassName)}listen(i,e,n,r){if(!this._triggers.has(e))throw function iY(t,i){return new ft(3302,!1)}();if(null==n||0==n.length)throw function nY(t){return new ft(3303,!1)}();if(!function cX(t){return"start"==t||"done"==t}(n))throw function rY(t,i){return new ft(3400,!1)}();const s=Yl(this._elementListeners,i,[]),u={name:e,phase:n,callback:r};s.push(u);const _=Yl(this._engine.statesByElement,i,new Map);return _.has(e)||(qc(i,_1),qc(i,_1+"-"+e),_.set(e,qE)),()=>{this._engine.afterFlush(()=>{const b=s.indexOf(u);b>=0&&s.splice(b,1),this._triggers.has(e)||_.delete(e)})}}register(i,e){return!this._triggers.has(i)&&(this._triggers.set(i,e),!0)}_getTrigger(i){const e=this._triggers.get(i);if(!e)throw function oY(t){return new ft(3401,!1)}();return e}trigger(i,e,n,r=!0){const s=this._getTrigger(e),u=new WE(this.id,e,i);let _=this._engine.statesByElement.get(i);_||(qc(i,_1),qc(i,_1+"-"+e),this._engine.statesByElement.set(i,_=new Map));let b=_.get(e);const S=new GE(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&b&&S.absorbOptions(b.options),_.set(e,S),b||(b=qE),S.value!==Hb&&b.value===S.value){if(!function hX(t,i){const e=Object.keys(t),n=Object.keys(i);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!i.hasOwnProperty(s)||t[s]!==i[s])return!1}return!0}(b.params,S.params)){const Le=[],Ue=s.matchStyles(b.value,b.params,Le),it=s.matchStyles(S.value,S.params,Le);Le.length?this._engine.reportError(Le):this._engine.afterFlush(()=>{Nm(i,Ue),$u(i,it)})}return}const X=Yl(this._engine.playersByElement,i,[]);X.forEach(Le=>{Le.namespaceId==this.id&&Le.triggerName==e&&Le.queued&&Le.destroy()});let re=s.matchTransition(b.value,S.value,i,S.params),_e=!1;if(!re){if(!r)return;re=s.fallbackTransition,_e=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:e,transition:re,fromState:b,toState:S,player:u,isFallbackTransition:_e}),_e||(qc(i,gL),u.onStart(()=>{$_(i,gL)})),u.onDone(()=>{let Le=this.players.indexOf(u);Le>=0&&this.players.splice(Le,1);const Ue=this._engine.playersByElement.get(i);if(Ue){let it=Ue.indexOf(u);it>=0&&Ue.splice(it,1)}}),this.players.push(u),X.push(u),u}deregister(i){this._triggers.delete(i),this._engine.statesByElement.forEach(e=>e.delete(i)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);const e=this._engine.playersByElement.get(i);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,e){const n=this._engine.driver.query(i,y1,!0);n.forEach(r=>{if(r[Gc])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(u=>u.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(i,e,n,r){const s=this._engine.statesByElement.get(i),u=new Map;if(s){const _=[];if(s.forEach((b,S)=>{if(u.set(S,b.value),this._triggers.has(S)){const A=this.trigger(i,S,Hb,r);A&&_.push(A)}}),_.length)return this._engine.markElementAsRemoved(this.id,i,!0,e,u),n&&nf(_).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){const e=this._elementListeners.get(i),n=this._engine.statesByElement.get(i);if(e&&n){const r=new Set;e.forEach(s=>{const u=s.name;if(r.has(u))return;r.add(u);const b=this._triggers.get(u).fallbackTransition,S=n.get(u)||qE,A=new GE(Hb),B=new WE(this.id,u,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:u,transition:b,fromState:S,toState:A,player:B,isFallbackTransition:!0})})}}removeNode(i,e){const n=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,e),this.triggerLeaveAnimation(i,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(i):[];if(s&&s.length)r=!0;else{let u=i;for(;u=u.parentNode;)if(n.statesByElement.get(u)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(i),r)n.markElementAsRemoved(this.id,i,!1,e);else{const s=i[Gc];(!s||s===_L)&&(n.afterFlush(()=>this.clearElementCache(i)),n.destroyInnerAnimations(i),n._onRemovalComplete(i,e))}}insertNode(i,e){qc(i,this._hostClassName)}drainQueuedTransitions(i){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,u=this._elementListeners.get(s);u&&u.forEach(_=>{if(_.name==n.triggerName){const b=TE(s,n.triggerName,n.fromState.value,n.toState.value);b._data=i,SE(n.player,_.phase,b,_.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,u=r.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(i){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}elementContainsData(i){let e=!1;return this._elementListeners.has(i)&&(e=!0),e=!!this._queue.find(n=>n.element===i)||e,e}}class sX{constructor(i,e,n){this.bodyNode=i,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(i,e){this.onRemovalComplete(i,e)}get queuedPlayers(){const i=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&i.push(n)})}),i}createNamespace(i,e){const n=new oX(i,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[i]=n}_balanceNamespaceList(i,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let u=!1,_=this.driver.getParentElement(e);for(;_;){const b=r.get(_);if(b){const S=n.indexOf(b);n.splice(S+1,0,i),u=!0;break}_=this.driver.getParentElement(_)}u||n.unshift(i)}else n.push(i);return r.set(e,i),i}register(i,e){let n=this._namespaceLookup[i];return n||(n=this.createNamespace(i,e)),n}registerTrigger(i,e,n){let r=this._namespaceLookup[i];r&&r.register(e,n)&&this.totalAnimations++}destroy(i,e){if(!i)return;const n=this._fetchNamespace(i);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[i];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){const e=new Set,n=this.statesByElement.get(i);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(i,e,n,r){if(k1(e)){const s=this._fetchNamespace(i);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(i,e,n,r){if(!k1(e))return;const s=e[Gc];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(e);u>=0&&this.collectedLeaveElements.splice(u,1)}if(i){const u=this._fetchNamespace(i);u&&u.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,e){e?this.disabledNodes.has(i)||(this.disabledNodes.add(i),qc(i,$E)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),$_(i,$E))}removeNode(i,e,n,r){if(k1(e)){const s=i?this._fetchNamespace(i):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(i,e,!1,r),n){const u=this.namespacesByHostElement.get(e);u&&u.id!==i&&u.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(i,e,n,r,s){this.collectedLeaveElements.push(e),e[Gc]={namespaceId:i,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(i,e,n,r,s){return k1(e)?this._fetchNamespace(i).listen(e,n,r,s):()=>{}}_buildInstruction(i,e,n,r,s){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,n,r,i.fromState.options,i.toState.options,e,s)}destroyInnerAnimations(i){let e=this.driver.query(i,y1,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(i,PE,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(i){const e=this.playersByElement.get(i);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(i){const e=this.playersByQueriedElement.get(i);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return nf(this.players).onDone(()=>i());i()})}processLeaveNode(i){const e=i[Gc];if(e&&e.setForRemoval){if(i[Gc]=_L,e.namespaceId){this.destroyInnerAnimations(i);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(i)}this._onRemovalComplete(i,e.setForRemoval)}i.classList?.contains($E)&&this.markElementAsDisabled(i,!1),this.driver.query(i,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(i=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)qc(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,i)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?nf(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(i){throw function sY(t){return new ft(3402,!1)}()}_flushAnimations(i,e){const n=new S1,r=[],s=new Map,u=[],_=new Map,b=new Map,S=new Map,A=new Set;this.disabledNodes.forEach(Mi=>{A.add(Mi);const Yi=this.driver.query(Mi,".ng-animate-queued",!0);for(let un=0;un<Yi.length;un++)A.add(Yi[un])});const B=this.bodyNode,X=Array.from(this.statesByElement.keys()),re=bL(X,this.collectedEnterElements),_e=new Map;let Le=0;re.forEach((Mi,Yi)=>{const un=RE+Le++;_e.set(Yi,un),Mi.forEach(yr=>qc(yr,un))});const Ue=[],it=new Set,Rt=new Set;for(let Mi=0;Mi<this.collectedLeaveElements.length;Mi++){const Yi=this.collectedLeaveElements[Mi],un=Yi[Gc];un&&un.setForRemoval&&(Ue.push(Yi),it.add(Yi),un.hasAnimation?this.driver.query(Yi,".ng-star-inserted",!0).forEach(yr=>it.add(yr)):Rt.add(Yi))}const rt=new Map,ei=bL(X,Array.from(it));ei.forEach((Mi,Yi)=>{const un=g1+Le++;rt.set(Yi,un),Mi.forEach(yr=>qc(yr,un))}),i.push(()=>{re.forEach((Mi,Yi)=>{const un=_e.get(Yi);Mi.forEach(yr=>$_(yr,un))}),ei.forEach((Mi,Yi)=>{const un=rt.get(Yi);Mi.forEach(yr=>$_(yr,un))}),Ue.forEach(Mi=>{this.processLeaveNode(Mi)})});const Fn=[],ar=[];for(let Mi=this._namespaceList.length-1;Mi>=0;Mi--)this._namespaceList[Mi].drainQueuedTransitions(e).forEach(un=>{const yr=un.player,Qs=un.element;if(Fn.push(yr),this.collectedEnterElements.length){const La=Qs[Gc];if(La&&La.setForMove){if(La.previousTriggersValues&&La.previousTriggersValues.has(un.triggerName)){const jm=La.previousTriggersValues.get(un.triggerName),Zc=this.statesByElement.get(un.element);if(Zc&&Zc.has(un.triggerName)){const N1=Zc.get(un.triggerName);N1.value=jm,Zc.set(un.triggerName,N1)}}return void yr.destroy()}}const qu=!B||!this.driver.containsElement(B,Qs),ec=rt.get(Qs),lf=_e.get(Qs),Ao=this._buildInstruction(un,n,lf,ec,qu);if(Ao.errors&&Ao.errors.length)return void ar.push(Ao);if(qu)return yr.onStart(()=>Nm(Qs,Ao.fromStyles)),yr.onDestroy(()=>$u(Qs,Ao.toStyles)),void r.push(yr);if(un.isFallbackTransition)return yr.onStart(()=>Nm(Qs,Ao.fromStyles)),yr.onDestroy(()=>$u(Qs,Ao.toStyles)),void r.push(yr);const vB=[];Ao.timelines.forEach(La=>{La.stretchStartingKeyframe=!0,this.disabledNodes.has(La.element)||vB.push(La)}),Ao.timelines=vB,n.append(Qs,Ao.timelines),u.push({instruction:Ao,player:yr,element:Qs}),Ao.queriedElements.forEach(La=>Yl(_,La,[]).push(yr)),Ao.preStyleProps.forEach((La,jm)=>{if(La.size){let Zc=b.get(jm);Zc||b.set(jm,Zc=new Set),La.forEach((N1,dT)=>Zc.add(dT))}}),Ao.postStyleProps.forEach((La,jm)=>{let Zc=S.get(jm);Zc||S.set(jm,Zc=new Set),La.forEach((N1,dT)=>Zc.add(dT))})});if(ar.length){const Mi=[];ar.forEach(Yi=>{Mi.push(function aY(t,i){return new ft(3505,!1)}())}),Fn.forEach(Yi=>Yi.destroy()),this.reportError(Mi)}const ko=new Map,Kl=new Map;u.forEach(Mi=>{const Yi=Mi.element;n.has(Yi)&&(Kl.set(Yi,Yi),this._beforeAnimationBuild(Mi.player.namespaceId,Mi.instruction,ko))}),r.forEach(Mi=>{const Yi=Mi.element;this._getPreviousPlayers(Yi,!1,Mi.namespaceId,Mi.triggerName,null).forEach(yr=>{Yl(ko,Yi,[]).push(yr),yr.destroy()})});const Ql=Ue.filter(Mi=>wL(Mi,b,S)),Jl=new Map;vL(Jl,this.driver,Rt,S,Bh).forEach(Mi=>{wL(Mi,b,S)&&Ql.push(Mi)});const qh=new Map;re.forEach((Mi,Yi)=>{vL(qh,this.driver,new Set(Mi),b,"!")}),Ql.forEach(Mi=>{const Yi=Jl.get(Mi),un=qh.get(Mi);Jl.set(Mi,new Map([...Array.from(Yi?.entries()??[]),...Array.from(un?.entries()??[])]))});const Ld=[],W_=[],Z_={};u.forEach(Mi=>{const{element:Yi,player:un,instruction:yr}=Mi;if(n.has(Yi)){if(A.has(Yi))return un.onDestroy(()=>$u(Yi,yr.toStyles)),un.disabled=!0,un.overrideTotalTime(yr.totalTime),void r.push(un);let Qs=Z_;if(Kl.size>1){let ec=Yi;const lf=[];for(;ec=ec.parentNode;){const Ao=Kl.get(ec);if(Ao){Qs=Ao;break}lf.push(ec)}lf.forEach(Ao=>Kl.set(Ao,Qs))}const qu=this._buildAnimation(un.namespaceId,yr,ko,s,qh,Jl);if(un.setRealPlayer(qu),Qs===Z_)Ld.push(un);else{const ec=this.playersByElement.get(Qs);ec&&ec.length&&(un.parentPlayer=nf(ec)),r.push(un)}}else Nm(Yi,yr.fromStyles),un.onDestroy(()=>$u(Yi,yr.toStyles)),W_.push(un),A.has(Yi)&&r.push(un)}),W_.forEach(Mi=>{const Yi=s.get(Mi.element);if(Yi&&Yi.length){const un=nf(Yi);Mi.setRealPlayer(un)}}),r.forEach(Mi=>{Mi.parentPlayer?Mi.syncPlayerEvents(Mi.parentPlayer):Mi.destroy()});for(let Mi=0;Mi<Ue.length;Mi++){const Yi=Ue[Mi],un=Yi[Gc];if($_(Yi,g1),un&&un.hasAnimation)continue;let yr=[];if(_.size){let qu=_.get(Yi);qu&&qu.length&&yr.push(...qu);let ec=this.driver.query(Yi,PE,!0);for(let lf=0;lf<ec.length;lf++){let Ao=_.get(ec[lf]);Ao&&Ao.length&&yr.push(...Ao)}}const Qs=yr.filter(qu=>!qu.destroyed);Qs.length?dX(this,Yi,Qs):this.processLeaveNode(Yi)}return Ue.length=0,Ld.forEach(Mi=>{this.players.push(Mi),Mi.onDone(()=>{Mi.destroy();const Yi=this.players.indexOf(Mi);this.players.splice(Yi,1)}),Mi.play()}),Ld}elementContainsData(i,e){let n=!1;const r=e[Gc];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(i).elementContainsData(e)||n}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,e,n,r,s){let u=[];if(e){const _=this.playersByQueriedElement.get(i);_&&(u=_)}else{const _=this.playersByElement.get(i);if(_){const b=!s||s==Hb;_.forEach(S=>{S.queued||!b&&S.triggerName!=r||u.push(S)})}}return(n||r)&&(u=u.filter(_=>!(n&&n!=_.namespaceId||r&&r!=_.triggerName))),u}_beforeAnimationBuild(i,e,n){const s=e.element,u=e.isRemovalTransition?void 0:i,_=e.isRemovalTransition?void 0:e.triggerName;for(const b of e.timelines){const S=b.element,A=S!==s,B=Yl(n,S,[]);this._getPreviousPlayers(S,A,u,_,e.toState).forEach(re=>{const _e=re.getRealPlayer();_e.beforeDestroy&&_e.beforeDestroy(),re.destroy(),B.push(re)})}Nm(s,e.fromStyles)}_buildAnimation(i,e,n,r,s,u){const _=e.triggerName,b=e.element,S=[],A=new Set,B=new Set,X=e.timelines.map(_e=>{const Le=_e.element;A.add(Le);const Ue=Le[Gc];if(Ue&&Ue.removedBeforeQueried)return new nb(_e.duration,_e.delay);const it=Le!==b,Rt=function uX(t){const i=[];return xL(t,i),i}((n.get(Le)||nX).map(ko=>ko.getRealPlayer())).filter(ko=>!!ko.element&&ko.element===Le),rt=s.get(Le),ei=u.get(Le),Fn=WF(0,this._normalizer,0,_e.keyframes,rt,ei),ar=this._buildPlayer(_e,Fn,Rt);if(_e.subTimeline&&r&&B.add(Le),it){const ko=new WE(i,_,Le);ko.setRealPlayer(ar),S.push(ko)}return ar});S.forEach(_e=>{Yl(this.playersByQueriedElement,_e.element,[]).push(_e),_e.onDone(()=>function aX(t,i,e){let n=t.get(i);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&t.delete(i)}return n}(this.playersByQueriedElement,_e.element,_e))}),A.forEach(_e=>qc(_e,iL));const re=nf(X);return re.onDestroy(()=>{A.forEach(_e=>$_(_e,iL)),$u(b,e.toStyles)}),B.forEach(_e=>{Yl(r,_e,[]).push(re)}),re}_buildPlayer(i,e,n){return e.length>0?this.driver.animate(i.element,e,i.duration,i.delay,i.easing,n):new nb(i.duration,i.delay)}}class WE{constructor(i,e,n){this.namespaceId=i,this.triggerName=e,this.element=n,this._player=new nb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>SE(i,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){const e=this._player;e.triggerCallback&&i.onStart(()=>e.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,e){Yl(this._queuedCallbacks,i,[]).push(e)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){const e=this._player;e.triggerCallback&&e.triggerCallback(i)}}function k1(t){return t&&1===t.nodeType}function yL(t,i){const e=t.style.display;return t.style.display=i??"none",e}function vL(t,i,e,n,r){const s=[];e.forEach(b=>s.push(yL(b)));const u=[];n.forEach((b,S)=>{const A=new Map;b.forEach(B=>{const X=i.computeStyle(S,B,r);A.set(B,X),(!X||0==X.length)&&(S[Gc]=rX,u.push(S))}),t.set(S,A)});let _=0;return e.forEach(b=>yL(b,s[_++])),u}function bL(t,i){const e=new Map;if(t.forEach(_=>e.set(_,[])),0==i.length)return e;const r=new Set(i),s=new Map;function u(_){if(!_)return 1;let b=s.get(_);if(b)return b;const S=_.parentNode;return b=e.has(S)?S:r.has(S)?1:u(S),s.set(_,b),b}return i.forEach(_=>{const b=u(_);1!==b&&e.get(b).push(_)}),e}function qc(t,i){t.classList?.add(i)}function $_(t,i){t.classList?.remove(i)}function dX(t,i,e){nf(e).onDone(()=>t.processLeaveNode(i))}function xL(t,i){for(let e=0;e<t.length;e++){const n=t[e];n instanceof QP?xL(n.players,i):i.push(n)}}function wL(t,i,e){const n=e.get(t);if(!n)return!1;let r=i.get(t);return r?n.forEach(s=>r.add(s)):i.set(t,n),e.delete(t),!0}class A1{constructor(i,e,n){this.bodyNode=i,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new sX(i,e,n),this._timelineEngine=new QY(i,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(i,e,n,r,s){const u=i+"-"+r;let _=this._triggerCache[u];if(!_){const b=[],A=BE(this._driver,s,b,[]);if(b.length)throw function XZ(t,i){return new ft(3404,!1)}();_=function ZY(t,i,e){return new YY(t,i,e)}(r,A,this._normalizer),this._triggerCache[u]=_}this._transitionEngine.registerTrigger(e,r,_)}register(i,e){this._transitionEngine.register(i,e)}destroy(i,e){this._transitionEngine.destroy(i,e)}onInsert(i,e,n,r){this._transitionEngine.insertNode(i,e,n,r)}onRemove(i,e,n,r){this._transitionEngine.removeNode(i,e,r||!1,n)}disableAnimations(i,e){this._transitionEngine.markElementAsDisabled(i,e)}process(i,e,n,r){if("@"==n.charAt(0)){const[s,u]=ZF(n);this._timelineEngine.command(s,e,u,r)}else this._transitionEngine.trigger(i,e,n,r)}listen(i,e,n,r,s){if("@"==n.charAt(0)){const[u,_]=ZF(n);return this._timelineEngine.listen(u,e,_,s)}return this._transitionEngine.listen(i,e,n,r,s)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let fX=(()=>{class t{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=t.initialStylesByElement.get(e);s||t.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&$u(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($u(this._element,this._initialStyles),this._endStyles&&($u(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Nm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Nm(this._element,this._endStyles),this._endStyles=null),$u(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function ZE(t){let i=null;return t.forEach((e,n)=>{(function mX(t){return"display"===t||"position"===t})(n)&&(i=i||new Map,i.set(n,e))}),i}class CL{constructor(i,e,n,r){this.element=i,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(i){const e=[];return i.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(i,e,n){return i.animate(this._convertKeyframesToObject(e),n)}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const i=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&i.set(r,this._finished?n:lL(this.element,r))}),this.currentSnapshot=i}triggerCallback(i){const e="start"===i?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class gX{validateStyleProperty(i){return!0}validateAnimatableStyleProperty(i){return!0}matchesElement(i,e){return!1}containsElement(i,e){return QF(i,e)}getParentElement(i){return AE(i)}query(i,e,n){return JF(i,e,n)}computeStyle(i,e,n){return window.getComputedStyle(i)[e]}animate(i,e,n,r,s,u=[]){const b={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(b.easing=s);const S=new Map,A=u.filter(re=>re instanceof CL);(function bY(t,i){return 0===t||0===i})(n,r)&&A.forEach(re=>{re.currentSnapshot.forEach((_e,Le)=>S.set(Le,_e))});let B=function gY(t){return t.length?t[0]instanceof Map?t:t.map(i=>nL(i)):[]}(e).map(re=>rf(re));B=function xY(t,i,e){if(e.size&&i.length){let n=i[0],r=[];if(e.forEach((s,u)=>{n.has(u)||r.push(u),n.set(u,s)}),r.length)for(let s=1;s<i.length;s++){let u=i[s];r.forEach(_=>u.set(_,lL(t,_)))}}return i}(i,B,S);const X=function pX(t,i){let e=null,n=null;return Array.isArray(i)&&i.length?(e=ZE(i[0]),i.length>1&&(n=ZE(i[i.length-1]))):i instanceof Map&&(e=ZE(i)),e||n?new fX(t,e,n):null}(i,B);return new CL(i,B,b,X)}}let _X=(()=>{class t extends YP{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:uo.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?XP(e):e;return ML(this._renderer,null,n,"register",[r]),new yX(n,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)($e(Mu),$e(Zi))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();class yX extends class J8{}{constructor(i,e){super(),this._id=i,this._renderer=e}create(i,e){return new vX(this._id,i,e||{},this._renderer)}}class vX{constructor(i,e,n,r){this.id=i,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(i,e){return this._renderer.listen(this.element,`@@${this.id}:${i}`,e)}_command(i,...e){return ML(this._renderer,this.element,this.id,i,e)}onDone(i){this._listen("done",i)}onStart(i){this._listen("start",i)}onDestroy(i){this._listen("destroy",i)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(i){this._command("setPosition",i)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ML(t,i,e,n,r){return t.setProperty(i,`@@${e}:${n}`,r)}const DL="@.disabled";let bX=(()=>{class t{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,u)=>{const _=u?.parentNode(s);_&&u.removeChild(_,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let A=this._rendererCache.get(s);return A||(A=new SL("",s,this.engine),this._rendererCache.set(s,A)),A}const u=n.id,_=n.id+"-"+this._currentId;this._currentId++,this.engine.register(_,e);const b=A=>{Array.isArray(A)?A.forEach(b):this.engine.registerTrigger(u,_,e,A.name,A)};return n.data.animation.forEach(b),new xX(this,_,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,_]=s;u(_)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)($e(Mu),$e(A1),$e(Ki))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})();class SL{constructor(i,e,n){this.namespaceId=i,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,e){this.delegate.appendChild(i,e),this.engine.onInsert(this.namespaceId,e,i,!1)}insertBefore(i,e,n,r=!0){this.delegate.insertBefore(i,e,n),this.engine.onInsert(this.namespaceId,e,i,r)}removeChild(i,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,n,r){this.delegate.setAttribute(i,e,n,r)}removeAttribute(i,e,n){this.delegate.removeAttribute(i,e,n)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,n,r){this.delegate.setStyle(i,e,n,r)}removeStyle(i,e,n){this.delegate.removeStyle(i,e,n)}setProperty(i,e,n){"@"==e.charAt(0)&&e==DL?this.disableAnimations(i,!!n):this.delegate.setProperty(i,e,n)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,n){return this.delegate.listen(i,e,n)}disableAnimations(i,e){this.engine.disableAnimations(i,e)}}class xX extends SL{constructor(i,e,n,r){super(e,n,r),this.factory=i,this.namespaceId=e}setProperty(i,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==DL?this.disableAnimations(i,n=void 0===n||!!n):this.engine.process(this.namespaceId,i,e.slice(1),n):this.delegate.setProperty(i,e,n)}listen(i,e,n){if("@"==e.charAt(0)){const r=function wX(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(i);let s=e.slice(1),u="";return"@"!=s.charAt(0)&&([s,u]=function CX(t){const i=t.indexOf(".");return[t.substring(0,i),t.slice(i+1)]}(s)),this.engine.listen(this.namespaceId,r,s,u,_=>{this.factory.scheduleListenerCallback(_._data||-1,n,_)})}return this.delegate.listen(i,e,n)}}const EL=[{provide:YP,useClass:_X},{provide:UE,useFactory:function DX(){return new $Y}},{provide:A1,useClass:(()=>{class t extends A1{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)($e(Zi),$e(IE),$e(UE),$e(u_))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})()},{provide:Mu,useFactory:function SX(t,i,e){return new bX(t,i,e)},deps:[Hx,A1,Ki]}],YE=[{provide:IE,useFactory:()=>new gX},{provide:Ia,useValue:"BrowserAnimations"},...EL],TL=[{provide:IE,useClass:eL},{provide:Ia,useValue:"NoopAnimations"},...EL];let EX=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?TL:YE}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:YE,imports:[h2]}),t})(),kL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})(),TX=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})();function XE(t,i,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];r?t.setProperty(n,r,e?.has(n)?"important":""):t.removeProperty(n)}return t}function G_(t,i){const e=i?"":"none";XE(t.style,{"touch-action":i?"":"none","-webkit-user-drag":i?"":"none","-webkit-tap-highlight-color":i?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function AL(t,i,e){XE(t.style,{position:i?"":"fixed",top:i?"":"0",opacity:i?"":"0",left:i?"":"-999em"},e)}function R1(t,i){return i&&"none"!=i?t+" "+i:t}function IL(t){const i=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*i}function KE(t,i){return t.getPropertyValue(i).split(",").map(n=>n.trim())}function QE(t){const i=t.getBoundingClientRect();return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.width,height:i.height,x:i.x,y:i.y}}function JE(t,i,e){const{top:n,bottom:r,left:s,right:u}=t;return e>=n&&e<=r&&i>=s&&i<=u}function $b(t,i,e){t.top+=i,t.bottom=t.top+t.height,t.left+=e,t.right=t.left+t.width}function RL(t,i,e,n){const{top:r,right:s,bottom:u,left:_,width:b,height:S}=t,A=b*i,B=S*i;return n>r-B&&n<u+B&&e>_-A&&e<s+A}class PL{constructor(i){this._document=i,this.positions=new Map}clear(){this.positions.clear()}cache(i){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),i.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:QE(e)})})}handleScroll(i){const e=Uc(i),n=this.positions.get(e);if(!n)return null;const r=n.scrollPosition;let s,u;if(e===this._document){const S=this.getViewportScrollPosition();s=S.top,u=S.left}else s=e.scrollTop,u=e.scrollLeft;const _=r.top-s,b=r.left-u;return this.positions.forEach((S,A)=>{S.clientRect&&e!==A&&e.contains(A)&&$b(S.clientRect,_,b)}),r.top=s,r.left=u,{top:_,left:b}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function OL(t){const i=t.cloneNode(!0),e=i.querySelectorAll("[id]"),n=t.nodeName.toLowerCase();i.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===n?BL(t,i):("input"===n||"select"===n||"textarea"===n)&&LL(t,i),FL("canvas",t,i,BL),FL("input, textarea, select",t,i,LL),i}function FL(t,i,e,n){const r=i.querySelectorAll(t);if(r.length){const s=e.querySelectorAll(t);for(let u=0;u<r.length;u++)n(r[u],s[u])}}let IX=0;function LL(t,i){"file"!==i.type&&(i.value=t.value),"radio"===i.type&&i.name&&(i.name=`mat-clone-${i.name}-${IX++}`)}function BL(t,i){const e=i.getContext("2d");if(e)try{e.drawImage(t,0,0)}catch{}}const NL=Rd({passive:!0}),P1=Rd({passive:!1}),eT=new Set(["position"]);class PX{constructor(i,e,n,r,s,u){this._config=e,this._document=n,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=u,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new St,this._pointerMoveSubscription=ce.EMPTY,this._pointerUpSubscription=ce.EMPTY,this._scrollSubscription=ce.EMPTY,this._resizeSubscription=ce.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new St,this.started=new St,this.released=new St,this.ended=new St,this.entered=new St,this.exited=new St,this.dropped=new St,this.moved=this._moveEvents,this._pointerDown=_=>{if(this.beforeStarted.next(),this._handles.length){const b=this._getTargetHandle(_);b&&!this._disabledHandles.has(b)&&!this.disabled&&this._initializeDragSequence(b,_)}else this.disabled||this._initializeDragSequence(this._rootElement,_)},this._pointerMove=_=>{const b=this._getPointerPositionOnPage(_);if(!this._hasStartedDragging){if(Math.abs(b.x-this._pickupPositionOnPage.x)+Math.abs(b.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const re=Date.now()>=this._dragStartTime+this._getDragStartDelay(_),_e=this._dropContainer;if(!re)return void this._endDragSequence(_);(!_e||!_e.isDragging()&&!_e.isReceiving())&&(_.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(_)))}return}_.preventDefault();const S=this._getConstrainedPointerPosition(b);if(this._hasMoved=!0,this._lastKnownPointerPosition=b,this._updatePointerDirectionDelta(S),this._dropContainer)this._updateActiveDropContainer(S,b);else{const A=this._activeTransform;A.x=S.x-this._pickupPositionOnPage.x+this._passiveTransform.x,A.y=S.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(A.x,A.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:S,event:_,distance:this._getDragDistance(S),delta:this._pointerDirectionDelta})})},this._pointerUp=_=>{this._endDragSequence(_)},this._nativeDragStart=_=>{if(this._handles.length){const b=this._getTargetHandle(_);b&&!this._disabledHandles.has(b)&&!this.disabled&&_.preventDefault()}else this.disabled||_.preventDefault()},this.withRootElement(i).withParent(e.parentDragRef||null),this._parentPositions=new PL(n),u.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(i){const e=si(i);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(n=>G_(n,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(i){this._handles=i.map(n=>ts(n)),this._handles.forEach(n=>G_(n,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&e.add(n)}),this._disabledHandles=e,this}withPreviewTemplate(i){return this._previewTemplate=i,this}withPlaceholderTemplate(i){return this._placeholderTemplate=i,this}withRootElement(i){const e=ts(i);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,P1),e.addEventListener("touchstart",this._pointerDown,NL),e.addEventListener("dragstart",this._nativeDragStart,P1)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(i){return this._boundaryElement=i?ts(i):null,this._resizeSubscription.unsubscribe(),i&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(i){return this._parentDragRef=i,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(i){!this._disabledHandles.has(i)&&this._handles.indexOf(i)>-1&&(this._disabledHandles.add(i),G_(i,!0))}enableHandle(i){this._disabledHandles.has(i)&&(this._disabledHandles.delete(i),G_(i,this.disabled))}withDirection(i){return this._direction=i,this}_withDropContainer(i){this._dropContainer=i}getFreeDragPosition(){const i=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:i.x,y:i.y}}setFreeDragPosition(i){return this._activeTransform={x:0,y:0},this._passiveTransform.x=i.x,this._passiveTransform.y=i.y,this._dropContainer||this._applyRootElementTransform(i.x,i.y),this}withPreviewContainer(i){return this._previewContainer=i,this}_sortFromLastPointerPosition(){const i=this._lastKnownPointerPosition;i&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(i),i)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(i){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(i),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(i);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(i){Gb(i)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const n=this._rootElement,r=n.parentNode,s=this._placeholder=this._createPlaceholderElement(),u=this._anchor=this._anchor||this._document.createComment(""),_=this._getShadowRoot();r.insertBefore(u,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),AL(n,!1,eT),this._document.body.appendChild(r.replaceChild(s,n)),this._getPreviewInsertionPoint(r,_).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(i,e){this._parentDragRef&&e.stopPropagation();const n=this.isDragging(),r=Gb(e),s=!r&&0!==e.button,u=this._rootElement,_=Uc(e),b=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),S=r?FS(e):OS(e);if(_&&_.draggable&&"mousedown"===e.type&&e.preventDefault(),n||s||b||S)return;if(this._handles.length){const X=u.style;this._rootElementTapHighlight=X.webkitTapHighlightColor||"",X.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(X=>this._updateOnScroll(X)),this._boundaryElement&&(this._boundaryRect=QE(this._boundaryElement));const A=this._previewTemplate;this._pickupPositionInElement=A&&A.template&&!A.matchSize?{x:0,y:0}:this._getPointerPositionInElement(i,e);const B=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:B.x,y:B.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(i){AL(this._rootElement,!0,eT),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,n=e.getItemIndex(this),r=this._getPointerPositionOnPage(i),s=this._getDragDistance(r),u=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:u,distance:s,dropPoint:r}),e.drop(this,n,this._initialIndex,this._initialContainer,u,s,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:i,y:e},{x:n,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,i,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(i,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,i,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,r),this._dropContainer._sortItem(this,i,e,this._pointerDirectionDelta),this._applyPreviewTransform(i-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const i=this._previewTemplate,e=this.previewClass,n=i?i.template:null;let r;if(n&&i){const s=i.matchSize?this._rootElement.getBoundingClientRect():null,u=i.viewContainer.createEmbeddedView(n,i.context);u.detectChanges(),r=VL(u,this._document),this._previewRef=u,i.matchSize?jL(r,s):r.style.transform=O1(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const s=this._rootElement;r=OL(s),jL(r,s.getBoundingClientRect()),this._initialTransform&&(r.style.transform=this._initialTransform)}return XE(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},eT),G_(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>r.classList.add(s)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const i=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(i.left,i.top);const e=function AX(t){const i=getComputedStyle(t),e=KE(i,"transition-property"),n=e.find(_=>"transform"===_||"all"===_);if(!n)return 0;const r=e.indexOf(n),s=KE(i,"transition-duration"),u=KE(i,"transition-delay");return IL(s[r])+IL(u[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const r=u=>{(!u||Uc(u)===this._preview&&"transform"===u.propertyName)&&(this._preview?.removeEventListener("transitionend",r),n(),clearTimeout(s))},s=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const i=this._placeholderTemplate,e=i?i.template:null;let n;return e?(this._placeholderRef=i.viewContainer.createEmbeddedView(e,i.context),this._placeholderRef.detectChanges(),n=VL(this._placeholderRef,this._document)):n=OL(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(i,e){const n=this._rootElement.getBoundingClientRect(),r=i===this._rootElement?null:i,s=r?r.getBoundingClientRect():n,u=Gb(e)?e.targetTouches[0]:e,_=this._getViewportScrollPosition();return{x:s.left-n.left+(u.pageX-s.left-_.left),y:s.top-n.top+(u.pageY-s.top-_.top)}}_getPointerPositionOnPage(i){const e=this._getViewportScrollPosition(),n=Gb(i)?i.touches[0]||i.changedTouches[0]||{pageX:0,pageY:0}:i,r=n.pageX-e.left,s=n.pageY-e.top;if(this._ownerSVGElement){const u=this._ownerSVGElement.getScreenCTM();if(u){const _=this._ownerSVGElement.createSVGPoint();return _.x=r,_.y=s,_.matrixTransform(u.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(i){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:r}=this.constrainPosition?this.constrainPosition(i,this):i;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:u}=this._pickupPositionInElement,_=this._boundaryRect,{width:b,height:S}=this._getPreviewRect(),A=_.top+u,B=_.bottom-(S-u);n=zL(n,_.left+s,_.right-(b-s)),r=zL(r,A,B)}return{x:n,y:r}}_updatePointerDirectionDelta(i){const{x:e,y:n}=i,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,u=Math.abs(e-s.x),_=Math.abs(n-s.y);return u>this._config.pointerDirectionChangeThreshold&&(r.x=e>s.x?1:-1,s.x=e),_>this._config.pointerDirectionChangeThreshold&&(r.y=n>s.y?1:-1,s.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const i=this._handles.length>0||!this.isDragging();i!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=i,G_(this._rootElement,i))}_removeRootElementListeners(i){i.removeEventListener("mousedown",this._pointerDown,P1),i.removeEventListener("touchstart",this._pointerDown,NL),i.removeEventListener("dragstart",this._nativeDragStart,P1)}_applyRootElementTransform(i,e){const n=O1(i,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=R1(n,this._initialTransform)}_applyPreviewTransform(i,e){const n=this._previewTemplate?.template?void 0:this._initialTransform,r=O1(i,e);this._preview.style.transform=R1(r,n)}_getDragDistance(i){const e=this._pickupPositionOnPage;return e?{x:i.x-e.x,y:i.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:i,y:e}=this._passiveTransform;if(0===i&&0===e||this.isDragging()||!this._boundaryElement)return;const n=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===r.width&&0===r.height)return;const s=n.left-r.left,u=r.right-n.right,_=n.top-r.top,b=r.bottom-n.bottom;n.width>r.width?(s>0&&(i+=s),u>0&&(i-=u)):i=0,n.height>r.height?(_>0&&(e+=_),b>0&&(e-=b)):e=0,(i!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:i})}_getDragStartDelay(i){const e=this.dragStartDelay;return"number"==typeof e?e:Gb(i)?e.touch:e?e.mouse:0}_updateOnScroll(i){const e=this._parentPositions.handleScroll(i);if(e){const n=Uc(i);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&$b(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Tw(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(i,e){const n=this._previewContainer||"global";if("parent"===n)return i;if("global"===n){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return ts(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(i){return this._handles.find(e=>i.target&&(i.target===e||e.contains(i.target)))}}function O1(t,i){return`translate3d(${Math.round(t)}px, ${Math.round(i)}px, 0)`}function zL(t,i,e){return Math.max(i,Math.min(e,t))}function Gb(t){return"t"===t.type[0]}function VL(t,i){const e=t.rootNodes;if(1===e.length&&e[0].nodeType===i.ELEMENT_NODE)return e[0];const n=i.createElement("div");return e.forEach(r=>n.appendChild(r)),n}function jL(t,i){t.style.width=`${i.width}px`,t.style.height=`${i.height}px`,t.style.transform=O1(i.left,i.top)}function qb(t,i){return Math.max(0,Math.min(i,t))}class FX{constructor(i,e,n,r,s){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new St,this.entered=new St,this.exited=new St,this.dropped=new St,this.sorted=new St,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=ce.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new St,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function kX(t=0,i=db){return t<0&&(t=0),ZS(t,t,i)}(0,jO).pipe(wn(this._stopScrollTimers)).subscribe(()=>{const u=this._scrollNode,_=this.autoScrollStep;1===this._verticalScrollDirection?u.scrollBy(0,-_):2===this._verticalScrollDirection&&u.scrollBy(0,_),1===this._horizontalScrollDirection?u.scrollBy(-_,0):2===this._horizontalScrollDirection&&u.scrollBy(_,0)})},this.element=ts(i),this._document=n,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new PL(n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(i,e,n,r){let s;this._draggingStarted(),null==r?(s=this.sortingDisabled?this._draggables.indexOf(i):-1,-1===s&&(s=this._getItemIndexFromPointerPosition(i,e,n))):s=r;const u=this._activeDraggables,_=u.indexOf(i),b=i.getPlaceholderElement();let S=u[s];if(S===i&&(S=u[s+1]),!S&&(null==s||-1===s||s<u.length-1)&&this._shouldEnterAsFirstChild(e,n)&&(S=u[0]),_>-1&&u.splice(_,1),S&&!this._dragDropRegistry.isDragging(S)){const A=S.getRootElement();A.parentElement.insertBefore(b,A),u.splice(s,0,i)}else ts(this.element).appendChild(b),u.push(i);b.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:i,container:this,currentIndex:this.getItemIndex(i)})}exit(i){this._reset(),this.exited.next({item:i,container:this})}drop(i,e,n,r,s,u,_){this._reset(),this.dropped.next({item:i,currentIndex:e,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:s,distance:u,dropPoint:_})}withItems(i){const e=this._draggables;return this._draggables=i,i.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===i.indexOf(r))?this._reset():this._cacheItems()),this}withDirection(i){return this._direction=i,this}connectedTo(i){return this._siblings=i.slice(),this}withOrientation(i){return this._orientation=i,this}withScrollableParents(i){const e=ts(this.element);return this._scrollableElements=-1===i.indexOf(e)?[e,...i]:i.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(i){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===i):this._draggables.indexOf(i)}isReceiving(){return this._activeSiblings.size>0}_sortItem(i,e,n,r){if(this.sortingDisabled||!this._clientRect||!RL(this._clientRect,.05,e,n))return;const s=this._itemPositions,u=this._getItemIndexFromPointerPosition(i,e,n,r);if(-1===u&&s.length>0)return;const _="horizontal"===this._orientation,b=s.findIndex(Ue=>Ue.drag===i),S=s[u],B=S.clientRect,X=b>u?1:-1,re=this._getItemOffsetPx(s[b].clientRect,B,X),_e=this._getSiblingOffsetPx(b,s,X),Le=s.slice();(function OX(t,i,e){const n=qb(i,t.length-1),r=qb(e,t.length-1);if(n===r)return;const s=t[n],u=r<n?-1:1;for(let _=n;_!==r;_+=u)t[_]=t[_+u];t[r]=s})(s,b,u),this.sorted.next({previousIndex:b,currentIndex:u,container:this,item:i}),s.forEach((Ue,it)=>{if(Le[it]===Ue)return;const Rt=Ue.drag===i,rt=Rt?re:_e,ei=Rt?i.getPlaceholderElement():Ue.drag.getRootElement();Ue.offset+=rt,_?(ei.style.transform=R1(`translate3d(${Math.round(Ue.offset)}px, 0, 0)`,Ue.initialTransform),$b(Ue.clientRect,0,rt)):(ei.style.transform=R1(`translate3d(0, ${Math.round(Ue.offset)}px, 0)`,Ue.initialTransform),$b(Ue.clientRect,rt,0))}),this._previousSwap.overlaps=JE(B,e,n),this._previousSwap.drag=S.drag,this._previousSwap.delta=_?r.x:r.y}_startScrollingIfNecessary(i,e){if(this.autoScrollDisabled)return;let n,r=0,s=0;if(this._parentPositions.positions.forEach((u,_)=>{_===this._document||!u.clientRect||n||RL(u.clientRect,.05,i,e)&&([r,s]=function LX(t,i,e,n){const r=$L(i,n),s=GL(i,e);let u=0,_=0;if(r){const b=t.scrollTop;1===r?b>0&&(u=1):t.scrollHeight-b>t.clientHeight&&(u=2)}if(s){const b=t.scrollLeft;1===s?b>0&&(_=1):t.scrollWidth-b>t.clientWidth&&(_=2)}return[u,_]}(_,u.clientRect,i,e),(r||s)&&(n=_))}),!r&&!s){const{width:u,height:_}=this._viewportRuler.getViewportSize(),b={width:u,height:_,top:0,right:u,bottom:_,left:0};r=$L(b,e),s=GL(b,i),n=window}n&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=n,(r||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const i=ts(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=i.msScrollSnapType||i.scrollSnapType||"",i.scrollSnapType=i.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const i=ts(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(i).clientRect}_cacheItemPositions(){const i="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const n=e.getVisibleElement();return{drag:e,offset:0,initialTransform:n.style.transform||"",clientRect:QE(n)}}).sort((e,n)=>i?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1;const i=ts(this.element).style;i.scrollSnapType=i.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{const n=e.getRootElement();if(n){const r=this._itemPositions.find(s=>s.drag===e)?.initialTransform;n.style.transform=r||""}}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(i,e,n){const r="horizontal"===this._orientation,s=e[i].clientRect,u=e[i+-1*n];let _=s[r?"width":"height"]*n;if(u){const b=r?"left":"top",S=r?"right":"bottom";-1===n?_-=u.clientRect[b]-s[S]:_+=s[b]-u.clientRect[S]}return _}_getItemOffsetPx(i,e,n){const r="horizontal"===this._orientation;let s=r?e.left-i.left:e.top-i.top;return-1===n&&(s+=r?e.width-i.width:e.height-i.height),s}_shouldEnterAsFirstChild(i,e){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,r="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){const u=n[n.length-1].clientRect;return r?i>=u.right:e>=u.bottom}{const u=n[0].clientRect;return r?i<=u.left:e<=u.top}}_getItemIndexFromPointerPosition(i,e,n,r){const s="horizontal"===this._orientation,u=this._itemPositions.findIndex(({drag:_,clientRect:b})=>{if(_===i)return!1;if(r){const S=s?r.x:r.y;if(_===this._previousSwap.drag&&this._previousSwap.overlaps&&S===this._previousSwap.delta)return!1}return s?e>=Math.floor(b.left)&&e<Math.floor(b.right):n>=Math.floor(b.top)&&n<Math.floor(b.bottom)});return-1!==u&&this.sortPredicate(u,i,this)?u:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(i,e){return null!=this._clientRect&&JE(this._clientRect,i,e)}_getSiblingContainerFromPosition(i,e,n){return this._siblings.find(r=>r._canReceive(i,e,n))}_canReceive(i,e,n){if(!this._clientRect||!JE(this._clientRect,e,n)||!this.enterPredicate(i,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,n);if(!r)return!1;const s=ts(this.element);return r===s||s.contains(r)}_startReceiving(i,e){const n=this._activeSiblings;!n.has(i)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(n.add(i),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(i){this._activeSiblings.delete(i),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(i=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(i);e&&(this._itemPositions.forEach(({clientRect:n})=>{$b(n,e.top,e.left)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const i=Tw(ts(this.element));this._cachedShadowRoot=i||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const i=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,i))}}function $L(t,i){const{top:e,bottom:n,height:r}=t,s=.05*r;return i>=e-s&&i<=e+s?1:i>=n-s&&i<=n+s?2:0}function GL(t,i){const{left:e,right:n,width:r}=t,s=.05*r;return i>=e-s&&i<=e+s?1:i>=n-s&&i<=n+s?2:0}const F1=Rd({passive:!1,capture:!0});let BX=(()=>{class t{constructor(e,n){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new St,this.pointerUp=new St,this.scroll=new St,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=n}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,F1)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,F1)}startDragging(e,n){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=n.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:F1}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:F1}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,u)=>{this._document.addEventListener(u,s.handler,s.options)})})}}stopDragging(e){const n=this._activeDragInstances.indexOf(e);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const n=[this.scroll];return e&&e!==this._document&&n.push(new $i(r=>this._ngZone.runOutsideAngular(()=>{const u=_=>{this._activeDragInstances.length&&r.next(_)};return e.addEventListener("scroll",u,!0),()=>{e.removeEventListener("scroll",u,!0)}}))),wt(...n)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,n)=>{this._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}}return t.\u0275fac=function(e){return new(e||t)($e(Ki),$e(Zi))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const NX={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let zX=(()=>{class t{constructor(e,n,r,s){this._document=e,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(e,n=NX){return new PX(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new FX(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return t.\u0275fac=function(e){return new(e||t)($e(Zi),$e(Ki),$e(Om),$e(BX))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),VX=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[zX],imports:[Hu]}),t})(),qL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})();const XX={provide:new tt("mat-autocomplete-scroll-strategy"),deps:[Wl],useFactory:function YX(t){return()=>t.scrollStrategies.reposition()}};let eK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[XX],imports:[[Vh,Fw,yi,gs],Hu,Fw,yi]}),t})(),tK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[hb,yi],yi]}),t})(),iK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[Vh,yi,zh],yi]}),t})(),cK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[yi,Fd],yi]}),t})(),tB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})(),xK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[Fd,yi,ub,tB],yi,tB]}),t})();const oB=new tt("mat-chips-default-options");let OK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[Jp,{provide:oB,useValue:{separatorKeyCodes:[13]}}],imports:[[yi]]}),t})();function FK(t,i){}class oT{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const LK={dialogContainer:_o("dialogContainer",[Cn("void, exit",ii({opacity:0,transform:"scale(0.7)"})),Cn("enter",ii({transform:"none"})),Vn("* => enter",Sw([Kn("150ms cubic-bezier(0, 0, 0.2, 1)",ii({transform:"none",opacity:1})),E_("@*",S_(),{optional:!0})])),Vn("* => void, * => exit",Sw([Kn("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",ii({opacity:0})),E_("@*",S_(),{optional:!0})]))])};let BK=(()=>{class t extends XS{constructor(e,n,r,s,u,_,b,S){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=r,this._config=u,this._interactivityChecker=_,this._ngZone=b,this._focusMonitor=S,this._animationStateChanged=new Ht,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=A=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(A)),this._ariaLabelledBy=u.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=A_())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=A_(),r=this._elementRef.nativeElement;(!n||n===this._document.body||n===r||r.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=A_();return e===n||e.contains(n)}}return t.\u0275fac=function(e){return new(e||t)(W(Ci),W(fO),W(Jn),W(Zi,8),W(oT),W(uO),W(Ki),W(Od))},t.\u0275dir=Xe({type:t,viewQuery:function(e,n){if(1&e&&kn(Cb,7),2&e){let r;$t(r=Gt())&&(n._portalOutlet=r.first)}},features:[At]}),t})(),NK=(()=>{class t extends BK{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return t.\u0275fac=function(){let i;return function(n){return(i||(i=Yt(t)))(n||t)}}(),t.\u0275cmp=wi({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&cx("@dialogContainer.start",function(s){return n._onAnimationStart(s)})("@dialogContainer.done",function(s){return n._onAnimationDone(s)}),2&e&&(Ya("id",n._id),Ti("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),ux("@dialogContainer",n._state))},features:[At],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&Pe(0,FK,0,0,"ng-template",0)},dependencies:[Cb],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[LK.dialogContainer]}}),t})(),zK=0;class VK{constructor(i,e,n="mat-dialog-"+zK++){this._overlayRef=i,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new St,this._afterClosed=new St,this._beforeClosed=new St,this._state=0,e._id=n,e._animationStateChanged.pipe(To(r=>"opened"===r.state),jr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(To(r=>"closed"===r.state),jr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),i.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),i.keydownEvents().pipe(To(r=>27===r.keyCode&&!this.disableClose&&!zs(r))).subscribe(r=>{r.preventDefault(),sB(this,"keyboard")}),i.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():sB(this,"mouse")})}close(i){this._result=i,this._containerInstance._animationStateChanged.pipe(To(e=>"closing"===e.state),jr(1)).subscribe(e=>{this._beforeClosed.next(i),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(i){let e=this._getPositionStrategy();return i&&(i.left||i.right)?i.left?e.left(i.left):e.right(i.right):e.centerHorizontally(),i&&(i.top||i.bottom)?i.top?e.top(i.top):e.bottom(i.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(i="",e=""){return this._overlayRef.updateSize({width:i,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(i){return this._overlayRef.addPanelClass(i),this}removePanelClass(i){return this._overlayRef.removePanelClass(i),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function sB(t,i,e){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=i),t.close(e)}const jK=new tt("MatDialogData"),UK=new tt("mat-dialog-default-options"),aB=new tt("mat-dialog-scroll-strategy"),$K={provide:aB,deps:[Wl],useFactory:function HK(t){return()=>t.scrollStrategies.block()}};let GK=(()=>{class t{constructor(e,n,r,s,u,_,b,S,A,B){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=u,this._dialogRefConstructor=b,this._dialogContainerType=S,this._dialogDataToken=A,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new St,this._afterOpenedAtThisLevel=new St,this._ariaHiddenElements=new Map,this.afterAllClosed=Pv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Bs(void 0))),this._scrollStrategy=_}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){n=function WK(t,i){return{...i,...t}}(n,this._defaultOptions||new oT),n.id&&this.getDialogById(n.id);const r=this._createOverlay(n),s=this._attachDialogContainer(r,n),u=this._attachDialogContent(e,s,r,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(u),u.afterClosed().subscribe(()=>this._removeOpenDialog(u)),this.afterOpened.next(u),s._initializeWithAttachedContent(),u}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new Mb({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const s=no.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:oT,useValue:n}]}),u=new O_(this._dialogContainerType,n.viewContainerRef,s,n.componentFactoryResolver);return e.attach(u).instance}_attachDialogContent(e,n,r,s){const u=new this._dialogRefConstructor(r,n,s.id);if(e instanceof mo)n.attachTemplatePortal(new wb(e,null,{$implicit:s.data,dialogRef:u}));else{const _=this._createInjector(s,u,n),b=n.attachComponentPortal(new O_(e,s.viewContainerRef,_,s.componentFactoryResolver));u.componentInstance=b.instance}return u.updateSize(s.width,s.height).updatePosition(s.position),u}_createInjector(e,n,r){const s=e&&e.viewContainerRef&&e.viewContainerRef.injector,u=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!s||!s.get(Ks,null,zi.Optional))&&u.push({provide:Ks,useValue:{value:e.direction,change:ui()}}),no.create({parent:s||this._injector,providers:u})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){let s=n[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return t.\u0275fac=function(e){ml()},t.\u0275dir=Xe({type:t}),t})(),qK=(()=>{class t extends GK{constructor(e,n,r,s,u,_,b,S){super(e,n,s,_,b,u,VK,NK,jK,S)}}return t.\u0275fac=function(e){return new(e||t)($e(Wl),$e(no),$e(Mv,8),$e(UK,8),$e(aB),$e(t,12),$e(QS),$e(Ia,8))},t.\u0275prov=Tt({token:t,factory:t.\u0275fac}),t})(),ZK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[qK,$K],imports:[[Vh,zh,yi],yi]}),t})(),lB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[yi],yi]}),t})(),YK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[gs,yi,kL,zh]]}),t})(),QK=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[Ow,yi],Ow,yi]}),t})(),hQ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[Ow,Fd,yi,US,gs],Ow,yi,US,lB]}),t})();const gQ={provide:new tt("mat-menu-scroll-strategy"),deps:[Wl],useFactory:function mQ(t){return()=>t.scrollStrategies.reposition()}};let _Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[gQ],imports:[[gs,yi,Fd,Vh],Hu,yi]}),t})(),vQ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[gs,yi],yi]}),t})();function bQ(t,i){if(1&t&&(As(),bt(0,"circle",4)),2&t){const e=Me(),n=Zn(1);Zs("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(n)),Ti("r",e._getCircleRadius())}}function xQ(t,i){if(1&t&&(As(),bt(0,"circle",4)),2&t){const e=Me(),n=Zn(1);Zs("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(n)),Ti("r",e._getCircleRadius())}}const CQ=ju(class{constructor(t){this._elementRef=t}},"primary"),MQ=new tt("mat-progress-spinner-default-options",{providedIn:"root",factory:function DQ(){return{diameter:100}}});class sf extends CQ{constructor(i,e,n,r,s,u,_,b){super(i),this._document=n,this._diameter=100,this._value=0,this._resizeSubscription=ce.EMPTY,this.mode="determinate";const S=sf._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),S.has(n.head)||S.set(n.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===i.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),e.isBrowser&&e.SAFARI&&_&&u&&b&&(this._resizeSubscription=_.change(150).subscribe(()=>{"indeterminate"===this.mode&&b.run(()=>u.markForCheck())}))}get diameter(){return this._diameter}set diameter(i){this._diameter=$o(i),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(i){this._strokeWidth=$o(i)}get value(){return"determinate"===this.mode?this._value:0}set value(i){this._value=Math.max(0,Math.min(100,$o(i)))}ngOnInit(){const i=this._elementRef.nativeElement;this._styleRoot=Tw(i)||this._document.head,this._attachStyleNode(),i.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const i=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${i} ${i}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(i){const e=50*(i.currentScale??1);return`${e}% ${e}%`}_attachStyleNode(){const i=this._styleRoot,e=this._diameter,n=sf._diameters;let r=n.get(i);if(!r||!r.has(e)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),i.appendChild(s),r||(r=new Set,n.set(i,r)),r.add(e)}}_getAnimationText(){const i=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*i).replace(/END_VALUE/g,""+.2*i).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}sf._diameters=new WeakMap,sf.\u0275fac=function(i){return new(i||sf)(W(Ci),W(ys),W(Zi,8),W(Ia,8),W(MQ),W(Jn),W(Om),W(Ki))},sf.\u0275cmp=wi({type:sf,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(i,e){2&i&&(Ti("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),Zs("width",e.diameter,"px")("height",e.diameter,"px"),bn("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[At],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(i,e){1&i&&(As(),H(0,"svg",0,1),Pe(2,bQ,1,11,"circle",2),Pe(3,xQ,1,9,"circle",3),U()),2&i&&(Zs("width",e.diameter,"px")("height",e.diameter,"px"),le("ngSwitch","indeterminate"===e.mode),Ti("viewBox",e._getViewBox()),q(2),le("ngSwitchCase",!0),q(1),le("ngSwitchCase",!1))},dependencies:[Vc,Bu],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let EQ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[yi,gs],yi]}),t})(),VQ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[Fd,yi],yi]}),t})(),UQ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[gs,yi,Hu],Hu,yi]}),t})(),JQ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[gs,yi],yi]}),t})(),yB=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({}),t})(),pJ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[yB,Fd,yi,ub],yB,yi]}),t})(),gJ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[Vh,zh,gs,mb,yi],yi]}),t})(),lT=(()=>{class t{constructor(){this.changes=new St}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Tt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const vJ={provide:lT,deps:[[new la,new ul,lT]],useFactory:function yJ(t){return t||new lT}};let bJ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({providers:[vJ],imports:[[gs,yi]]}),t})(),DJ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[gs,yi,zh,Fd,ub,hb],yi]}),t})(),SJ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[yi],yi]}),t})(),OJ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[[qL,yi],yi]}),t})(),FJ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t}),t.\u0275inj=jt({imports:[hb,kL,TX,DF,xF,qL,VX,eK,tK,iK,mb,cK,kH,xK,OK,Q7,P9,ZK,lB,YK,QK,IF,d$,hQ,_Q,xO,FG,vQ,EQ,VQ,Fd,cF,UQ,JQ,pJ,gJ,bJ,a7,DJ,SJ,mF,OJ,Vh,zh,zw]}),t})(),LJ=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Ut({type:t,bootstrap:[TZ]}),t.\u0275inj=jt({providers:[D_,UI,s1,o1],imports:[h2,EZ,EX,Q8,xO,FJ,uS,c6,L9]}),t})();var BJ=Ke(898);if(Ke.n(BJ)().accessToken="pk.eyJ1IjoiZWlyYXltdW4iLCJhIjoiY2w5ZG9vejhrNG1rMDNwdDVtanp0dmxuMiJ9.EBHCyXlDR8fonaAVzYG5jw",!navigator.geolocation)throw alert("El navegador no soporta la geolocalizacion"),new Error("Navegador no soporta la Geolocation");(function Rz(){cI=!1})(),n4().bootstrapModule(LJ).catch(t=>console.error(t))},949:(_n,Be,Ke)=>{const he=Ke(602),Fe=Ke(92),p=Ke(360),ce=Ke(851);function We(Je,Ie,ht,ai,Bi){const xt=[].slice.call(arguments,1),Xt=xt.length,Vi="function"==typeof xt[Xt-1];if(!Vi&&!he())throw new Error("Callback required as last argument");if(!Vi){if(Xt<1)throw new Error("Too few arguments provided");return 1===Xt?(ht=Ie,Ie=ai=void 0):2===Xt&&!Ie.getContext&&(ai=ht,ht=Ie,Ie=void 0),new Promise(function(sn,mn){try{const vi=Fe.create(ht,ai);sn(Je(vi,Ie,ai))}catch(vi){mn(vi)}})}if(Xt<2)throw new Error("Too few arguments provided");2===Xt?(Bi=ht,ht=Ie,Ie=ai=void 0):3===Xt&&(Ie.getContext&&typeof Bi>"u"?(Bi=ai,ai=void 0):(Bi=ai,ai=ht,ht=Ie,Ie=void 0));try{const sn=Fe.create(ht,ai);Bi(null,Je(sn,Ie,ai))}catch(sn){Bi(sn)}}Be.rT=We.bind(null,p.render),Be.hz=We.bind(null,p.renderToDataURL),Be.toString=We.bind(null,function(Je,Ie,ht){return ce.render(Je,ht)})},602:_n=>{_n.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},222:(_n,Be,Ke)=>{const Oe=Ke(696).getSymbolSize;Be.getRowColCoords=function(Fe){if(1===Fe)return[];const p=Math.floor(Fe/7)+2,ce=Oe(Fe),We=145===ce?26:2*Math.ceil((ce-13)/(2*p-2)),Je=[ce-7];for(let Ie=1;Ie<p-1;Ie++)Je[Ie]=Je[Ie-1]-We;return Je.push(6),Je.reverse()},Be.getPositions=function(Fe){const p=[],ce=Be.getRowColCoords(Fe),We=ce.length;for(let Je=0;Je<We;Je++)for(let Ie=0;Ie<We;Ie++)0===Je&&0===Ie||0===Je&&Ie===We-1||Je===We-1&&0===Ie||p.push([ce[Je],ce[Ie]]);return p}},352:(_n,Be,Ke)=>{const Oe=Ke(812),he=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Fe(p){this.mode=Oe.ALPHANUMERIC,this.data=p}Fe.getBitsLength=function(ce){return 11*Math.floor(ce/2)+ce%2*6},Fe.prototype.getLength=function(){return this.data.length},Fe.prototype.getBitsLength=function(){return Fe.getBitsLength(this.data.length)},Fe.prototype.write=function(ce){let We;for(We=0;We+2<=this.data.length;We+=2){let Je=45*he.indexOf(this.data[We]);Je+=he.indexOf(this.data[We+1]),ce.put(Je,11)}this.data.length%2&&ce.put(he.indexOf(this.data[We]),6)},_n.exports=Fe},39:_n=>{function Be(){this.buffer=[],this.length=0}Be.prototype={get:function(Ke){const Oe=Math.floor(Ke/8);return 1==(this.buffer[Oe]>>>7-Ke%8&1)},put:function(Ke,Oe){for(let he=0;he<Oe;he++)this.putBit(1==(Ke>>>Oe-he-1&1))},getLengthInBits:function(){return this.length},putBit:function(Ke){const Oe=Math.floor(this.length/8);this.buffer.length<=Oe&&this.buffer.push(0),Ke&&(this.buffer[Oe]|=128>>>this.length%8),this.length++}},_n.exports=Be},834:_n=>{function Be(Ke){if(!Ke||Ke<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=Ke,this.data=new Uint8Array(Ke*Ke),this.reservedBit=new Uint8Array(Ke*Ke)}Be.prototype.set=function(Ke,Oe,he,Fe){const p=Ke*this.size+Oe;this.data[p]=he,Fe&&(this.reservedBit[p]=!0)},Be.prototype.get=function(Ke,Oe){return this.data[Ke*this.size+Oe]},Be.prototype.xor=function(Ke,Oe,he){this.data[Ke*this.size+Oe]^=he},Be.prototype.isReserved=function(Ke,Oe){return this.reservedBit[Ke*this.size+Oe]},_n.exports=Be},79:(_n,Be,Ke)=>{const Oe=Ke(419),he=Ke(812);function Fe(p){this.mode=he.BYTE,"string"==typeof p&&(p=Oe(p)),this.data=new Uint8Array(p)}Fe.getBitsLength=function(ce){return 8*ce},Fe.prototype.getLength=function(){return this.data.length},Fe.prototype.getBitsLength=function(){return Fe.getBitsLength(this.data.length)},Fe.prototype.write=function(p){for(let ce=0,We=this.data.length;ce<We;ce++)p.put(this.data[ce],8)},_n.exports=Fe},539:(_n,Be,Ke)=>{const Oe=Ke(508),he=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Fe=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Be.getBlocksCount=function(ce,We){switch(We){case Oe.L:return he[4*(ce-1)+0];case Oe.M:return he[4*(ce-1)+1];case Oe.Q:return he[4*(ce-1)+2];case Oe.H:return he[4*(ce-1)+3];default:return}},Be.getTotalCodewordsCount=function(ce,We){switch(We){case Oe.L:return Fe[4*(ce-1)+0];case Oe.M:return Fe[4*(ce-1)+1];case Oe.Q:return Fe[4*(ce-1)+2];case Oe.H:return Fe[4*(ce-1)+3];default:return}}},508:(_n,Be)=>{Be.L={bit:1},Be.M={bit:0},Be.Q={bit:3},Be.H={bit:2},Be.isValid=function(he){return he&&typeof he.bit<"u"&&he.bit>=0&&he.bit<4},Be.from=function(he,Fe){if(Be.isValid(he))return he;try{return function Ke(Oe){if("string"!=typeof Oe)throw new Error("Param is not a string");switch(Oe.toLowerCase()){case"l":case"low":return Be.L;case"m":case"medium":return Be.M;case"q":case"quartile":return Be.Q;case"h":case"high":return Be.H;default:throw new Error("Unknown EC Level: "+Oe)}}(he)}catch{return Fe}}},832:(_n,Be,Ke)=>{const Oe=Ke(696).getSymbolSize;Be.getPositions=function(p){const ce=Oe(p);return[[0,0],[ce-7,0],[0,ce-7]]}},95:(_n,Be,Ke)=>{const Oe=Ke(696),p=Oe.getBCHDigit(1335);Be.getEncodedBits=function(We,Je){const Ie=We.bit<<3|Je;let ht=Ie<<10;for(;Oe.getBCHDigit(ht)-p>=0;)ht^=1335<<Oe.getBCHDigit(ht)-p;return 21522^(Ie<<10|ht)}},48:(_n,Be)=>{const Ke=new Uint8Array(512),Oe=new Uint8Array(256);(function(){let Fe=1;for(let p=0;p<255;p++)Ke[p]=Fe,Oe[Fe]=p,Fe<<=1,256&Fe&&(Fe^=285);for(let p=255;p<512;p++)Ke[p]=Ke[p-255]})(),Be.log=function(Fe){if(Fe<1)throw new Error("log("+Fe+")");return Oe[Fe]},Be.exp=function(Fe){return Ke[Fe]},Be.mul=function(Fe,p){return 0===Fe||0===p?0:Ke[Oe[Fe]+Oe[p]]}},101:(_n,Be,Ke)=>{const Oe=Ke(812),he=Ke(696);function Fe(p){this.mode=Oe.KANJI,this.data=p}Fe.getBitsLength=function(ce){return 13*ce},Fe.prototype.getLength=function(){return this.data.length},Fe.prototype.getBitsLength=function(){return Fe.getBitsLength(this.data.length)},Fe.prototype.write=function(p){let ce;for(ce=0;ce<this.data.length;ce++){let We=he.toSJIS(this.data[ce]);if(We>=33088&&We<=40956)We-=33088;else{if(!(We>=57408&&We<=60351))throw new Error("Invalid SJIS character: "+this.data[ce]+"\nMake sure your charset is UTF-8");We-=49472}We=192*(We>>>8&255)+(255&We),p.put(We,13)}},_n.exports=Fe},456:(_n,Be)=>{Be.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function Oe(he,Fe,p){switch(he){case Be.Patterns.PATTERN000:return(Fe+p)%2==0;case Be.Patterns.PATTERN001:return Fe%2==0;case Be.Patterns.PATTERN010:return p%3==0;case Be.Patterns.PATTERN011:return(Fe+p)%3==0;case Be.Patterns.PATTERN100:return(Math.floor(Fe/2)+Math.floor(p/3))%2==0;case Be.Patterns.PATTERN101:return Fe*p%2+Fe*p%3==0;case Be.Patterns.PATTERN110:return(Fe*p%2+Fe*p%3)%2==0;case Be.Patterns.PATTERN111:return(Fe*p%3+(Fe+p)%2)%2==0;default:throw new Error("bad maskPattern:"+he)}}Be.isValid=function(Fe){return null!=Fe&&""!==Fe&&!isNaN(Fe)&&Fe>=0&&Fe<=7},Be.from=function(Fe){return Be.isValid(Fe)?parseInt(Fe,10):void 0},Be.getPenaltyN1=function(Fe){const p=Fe.size;let ce=0,We=0,Je=0,Ie=null,ht=null;for(let ai=0;ai<p;ai++){We=Je=0,Ie=ht=null;for(let Bi=0;Bi<p;Bi++){let xt=Fe.get(ai,Bi);xt===Ie?We++:(We>=5&&(ce+=We-5+3),Ie=xt,We=1),xt=Fe.get(Bi,ai),xt===ht?Je++:(Je>=5&&(ce+=Je-5+3),ht=xt,Je=1)}We>=5&&(ce+=We-5+3),Je>=5&&(ce+=Je-5+3)}return ce},Be.getPenaltyN2=function(Fe){const p=Fe.size;let ce=0;for(let We=0;We<p-1;We++)for(let Je=0;Je<p-1;Je++){const Ie=Fe.get(We,Je)+Fe.get(We,Je+1)+Fe.get(We+1,Je)+Fe.get(We+1,Je+1);(4===Ie||0===Ie)&&ce++}return 3*ce},Be.getPenaltyN3=function(Fe){const p=Fe.size;let ce=0,We=0,Je=0;for(let Ie=0;Ie<p;Ie++){We=Je=0;for(let ht=0;ht<p;ht++)We=We<<1&2047|Fe.get(Ie,ht),ht>=10&&(1488===We||93===We)&&ce++,Je=Je<<1&2047|Fe.get(ht,Ie),ht>=10&&(1488===Je||93===Je)&&ce++}return 40*ce},Be.getPenaltyN4=function(Fe){let p=0;const ce=Fe.data.length;for(let Je=0;Je<ce;Je++)p+=Fe.data[Je];return 10*Math.abs(Math.ceil(100*p/ce/5)-10)},Be.applyMask=function(Fe,p){const ce=p.size;for(let We=0;We<ce;We++)for(let Je=0;Je<ce;Je++)p.isReserved(Je,We)||p.xor(Je,We,Oe(Fe,Je,We))},Be.getBestMask=function(Fe,p){const ce=Object.keys(Be.Patterns).length;let We=0,Je=1/0;for(let Ie=0;Ie<ce;Ie++){p(Ie),Be.applyMask(Ie,Fe);const ht=Be.getPenaltyN1(Fe)+Be.getPenaltyN2(Fe)+Be.getPenaltyN3(Fe)+Be.getPenaltyN4(Fe);Be.applyMask(Ie,Fe),ht<Je&&(Je=ht,We=Ie)}return We}},812:(_n,Be,Ke)=>{const Oe=Ke(502),he=Ke(840);Be.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},Be.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},Be.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},Be.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},Be.MIXED={bit:-1},Be.getCharCountIndicator=function(ce,We){if(!ce.ccBits)throw new Error("Invalid mode: "+ce);if(!Oe.isValid(We))throw new Error("Invalid version: "+We);return We>=1&&We<10?ce.ccBits[0]:We<27?ce.ccBits[1]:ce.ccBits[2]},Be.getBestModeForData=function(ce){return he.testNumeric(ce)?Be.NUMERIC:he.testAlphanumeric(ce)?Be.ALPHANUMERIC:he.testKanji(ce)?Be.KANJI:Be.BYTE},Be.toString=function(ce){if(ce&&ce.id)return ce.id;throw new Error("Invalid mode")},Be.isValid=function(ce){return ce&&ce.bit&&ce.ccBits},Be.from=function(ce,We){if(Be.isValid(ce))return ce;try{return function Fe(p){if("string"!=typeof p)throw new Error("Param is not a string");switch(p.toLowerCase()){case"numeric":return Be.NUMERIC;case"alphanumeric":return Be.ALPHANUMERIC;case"kanji":return Be.KANJI;case"byte":return Be.BYTE;default:throw new Error("Unknown mode: "+p)}}(ce)}catch{return We}}},753:(_n,Be,Ke)=>{const Oe=Ke(812);function he(Fe){this.mode=Oe.NUMERIC,this.data=Fe.toString()}he.getBitsLength=function(p){return 10*Math.floor(p/3)+(p%3?p%3*3+1:0)},he.prototype.getLength=function(){return this.data.length},he.prototype.getBitsLength=function(){return he.getBitsLength(this.data.length)},he.prototype.write=function(p){let ce,We,Je;for(ce=0;ce+3<=this.data.length;ce+=3)We=this.data.substr(ce,3),Je=parseInt(We,10),p.put(Je,10);const Ie=this.data.length-ce;Ie>0&&(We=this.data.substr(ce),Je=parseInt(We,10),p.put(Je,3*Ie+1))},_n.exports=he},333:(_n,Be,Ke)=>{const Oe=Ke(48);Be.mul=function(Fe,p){const ce=new Uint8Array(Fe.length+p.length-1);for(let We=0;We<Fe.length;We++)for(let Je=0;Je<p.length;Je++)ce[We+Je]^=Oe.mul(Fe[We],p[Je]);return ce},Be.mod=function(Fe,p){let ce=new Uint8Array(Fe);for(;ce.length-p.length>=0;){const We=ce[0];for(let Ie=0;Ie<p.length;Ie++)ce[Ie]^=Oe.mul(p[Ie],We);let Je=0;for(;Je<ce.length&&0===ce[Je];)Je++;ce=ce.slice(Je)}return ce},Be.generateECPolynomial=function(Fe){let p=new Uint8Array([1]);for(let ce=0;ce<Fe;ce++)p=Be.mul(p,new Uint8Array([1,Oe.exp(ce)]));return p}},92:(_n,Be,Ke)=>{const Oe=Ke(696),he=Ke(508),Fe=Ke(39),p=Ke(834),ce=Ke(222),We=Ke(832),Je=Ke(456),Ie=Ke(539),ht=Ke(496),ai=Ke(199),Bi=Ke(95),xt=Ke(812),Xt=Ke(735);function Et(Wt,Ni,bi){const ni=Wt.size,Ii=Bi.getEncodedBits(Ni,bi);let Si,hi;for(Si=0;Si<15;Si++)hi=1==(Ii>>Si&1),Wt.set(Si<6?Si:Si<8?Si+1:ni-15+Si,8,hi,!0),Wt.set(8,Si<8?ni-Si-1:Si<9?15-Si-1+1:15-Si-1,hi,!0);Wt.set(ni-8,8,1,!0)}function Ar(Wt,Ni,bi,ni){let Ii;if(Array.isArray(Wt))Ii=Xt.fromArray(Wt);else{if("string"!=typeof Wt)throw new Error("Invalid data");{let Hr=Ni;if(!Hr){const $i=Xt.rawSplit(Wt);Hr=ai.getBestVersionForData($i,bi)}Ii=Xt.fromString(Wt,Hr||40)}}const Si=ai.getBestVersionForData(Ii,bi);if(!Si)throw new Error("The amount of data is too big to be stored in a QR Code");if(Ni){if(Ni<Si)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+Si+".\n")}else Ni=Si;const hi=function Di(Wt,Ni,bi){const ni=new Fe;bi.forEach(function(Ai){ni.put(Ai.mode.bit,4),ni.put(Ai.getLength(),xt.getCharCountIndicator(Ai.mode,Wt)),Ai.write(ni)});const hi=8*(Oe.getSymbolTotalCodewords(Wt)-Ie.getTotalCodewordsCount(Wt,Ni));for(ni.getLengthInBits()+4<=hi&&ni.put(0,4);ni.getLengthInBits()%8!=0;)ni.putBit(0);const ki=(hi-ni.getLengthInBits())/8;for(let Ai=0;Ai<ki;Ai++)ni.put(Ai%2?17:236,8);return function ur(Wt,Ni,bi){const ni=Oe.getSymbolTotalCodewords(Ni),Si=ni-Ie.getTotalCodewordsCount(Ni,bi),hi=Ie.getBlocksCount(Ni,bi),Ai=hi-ni%hi,Hr=Math.floor(ni/hi),$i=Math.floor(Si/hi),Js=$i+1,lr=Hr-$i,so=new ht(lr);let Go=0;const St=new Array(hi),Io=new Array(hi);let is=0;const Pn=new Uint8Array(Wt.buffer);for(let qo=0;qo<hi;qo++){const an=qo<Ai?$i:Js;St[qo]=Pn.slice(Go,Go+an),Io[qo]=so.encode(St[qo]),Go+=an,is=Math.max(is,an)}const Qi=new Uint8Array(ni);let li,tr,Wr=0;for(li=0;li<is;li++)for(tr=0;tr<hi;tr++)li<St[tr].length&&(Qi[Wr++]=St[tr][li]);for(li=0;li<lr;li++)for(tr=0;tr<hi;tr++)Qi[Wr++]=Io[tr][li];return Qi}(ni,Wt,Ni)}(Ni,bi,Ii),ki=Oe.getSymbolSize(Ni),Ai=new p(ki);return function Vi(Wt,Ni){const bi=Wt.size,ni=We.getPositions(Ni);for(let Ii=0;Ii<ni.length;Ii++){const Si=ni[Ii][0],hi=ni[Ii][1];for(let ki=-1;ki<=7;ki++)if(!(Si+ki<=-1||bi<=Si+ki))for(let Ai=-1;Ai<=7;Ai++)hi+Ai<=-1||bi<=hi+Ai||Wt.set(Si+ki,hi+Ai,ki>=0&&ki<=6&&(0===Ai||6===Ai)||Ai>=0&&Ai<=6&&(0===ki||6===ki)||ki>=2&&ki<=4&&Ai>=2&&Ai<=4,!0)}}(Ai,Ni),function sn(Wt){const Ni=Wt.size;for(let bi=8;bi<Ni-8;bi++){const ni=bi%2==0;Wt.set(bi,6,ni,!0),Wt.set(6,bi,ni,!0)}}(Ai),function mn(Wt,Ni){const bi=ce.getPositions(Ni);for(let ni=0;ni<bi.length;ni++){const Ii=bi[ni][0],Si=bi[ni][1];for(let hi=-2;hi<=2;hi++)for(let ki=-2;ki<=2;ki++)Wt.set(Ii+hi,Si+ki,-2===hi||2===hi||-2===ki||2===ki||0===hi&&0===ki,!0)}}(Ai,Ni),Et(Ai,bi,0),Ni>=7&&function vi(Wt,Ni){const bi=Wt.size,ni=ai.getEncodedBits(Ni);let Ii,Si,hi;for(let ki=0;ki<18;ki++)Ii=Math.floor(ki/3),Si=ki%3+bi-8-3,hi=1==(ni>>ki&1),Wt.set(Ii,Si,hi,!0),Wt.set(Si,Ii,hi,!0)}(Ai,Ni),function zt(Wt,Ni){const bi=Wt.size;let ni=-1,Ii=bi-1,Si=7,hi=0;for(let ki=bi-1;ki>0;ki-=2)for(6===ki&&ki--;;){for(let Ai=0;Ai<2;Ai++)if(!Wt.isReserved(Ii,ki-Ai)){let Hr=!1;hi<Ni.length&&(Hr=1==(Ni[hi]>>>Si&1)),Wt.set(Ii,ki-Ai,Hr),Si--,-1===Si&&(hi++,Si=7)}if(Ii+=ni,Ii<0||bi<=Ii){Ii-=ni,ni=-ni;break}}}(Ai,hi),isNaN(ni)&&(ni=Je.getBestMask(Ai,Et.bind(null,Ai,bi))),Je.applyMask(ni,Ai),Et(Ai,bi,ni),{modules:Ai,version:Ni,errorCorrectionLevel:bi,maskPattern:ni,segments:Ii}}Be.create=function(Ni,bi){if(typeof Ni>"u"||""===Ni)throw new Error("No input text");let Ii,Si,ni=he.M;return typeof bi<"u"&&(ni=he.from(bi.errorCorrectionLevel,he.M),Ii=ai.from(bi.version),Si=Je.from(bi.maskPattern),bi.toSJISFunc&&Oe.setToSJISFunction(bi.toSJISFunc)),Ar(Ni,Ii,ni,Si)}},496:(_n,Be,Ke)=>{const Oe=Ke(333);function he(Fe){this.genPoly=void 0,this.degree=Fe,this.degree&&this.initialize(this.degree)}he.prototype.initialize=function(p){this.degree=p,this.genPoly=Oe.generateECPolynomial(this.degree)},he.prototype.encode=function(p){if(!this.genPoly)throw new Error("Encoder not initialized");const ce=new Uint8Array(p.length+this.degree);ce.set(p);const We=Oe.mod(ce,this.genPoly),Je=this.degree-We.length;if(Je>0){const Ie=new Uint8Array(this.degree);return Ie.set(We,Je),Ie}return We},_n.exports=he},840:(_n,Be)=>{let he="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";he=he.replace(/u/g,"\\u");const Fe="(?:(?![A-Z0-9 $%*+\\-./:]|"+he+")(?:.|[\r\n]))+";Be.KANJI=new RegExp(he,"g"),Be.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Be.BYTE=new RegExp(Fe,"g"),Be.NUMERIC=new RegExp("[0-9]+","g"),Be.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const p=new RegExp("^"+he+"$"),ce=new RegExp("^[0-9]+$"),We=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Be.testKanji=function(Ie){return p.test(Ie)},Be.testNumeric=function(Ie){return ce.test(Ie)},Be.testAlphanumeric=function(Ie){return We.test(Ie)}},735:(_n,Be,Ke)=>{const Oe=Ke(812),he=Ke(753),Fe=Ke(352),p=Ke(79),ce=Ke(101),We=Ke(840),Je=Ke(696),Ie=Ke(901);function ht(vi){return unescape(encodeURIComponent(vi)).length}function ai(vi,Et,zt){const Di=[];let ur;for(;null!==(ur=vi.exec(zt));)Di.push({data:ur[0],index:ur.index,mode:Et,length:ur[0].length});return Di}function Bi(vi){const Et=ai(We.NUMERIC,Oe.NUMERIC,vi),zt=ai(We.ALPHANUMERIC,Oe.ALPHANUMERIC,vi);let Di,ur;return Je.isKanjiModeEnabled()?(Di=ai(We.BYTE,Oe.BYTE,vi),ur=ai(We.KANJI,Oe.KANJI,vi)):(Di=ai(We.BYTE_KANJI,Oe.BYTE,vi),ur=[]),Et.concat(zt,Di,ur).sort(function(Wt,Ni){return Wt.index-Ni.index}).map(function(Wt){return{data:Wt.data,mode:Wt.mode,length:Wt.length}})}function xt(vi,Et){switch(Et){case Oe.NUMERIC:return he.getBitsLength(vi);case Oe.ALPHANUMERIC:return Fe.getBitsLength(vi);case Oe.KANJI:return ce.getBitsLength(vi);case Oe.BYTE:return p.getBitsLength(vi)}}function mn(vi,Et){let zt;const Di=Oe.getBestModeForData(vi);if(zt=Oe.from(Et,Di),zt!==Oe.BYTE&&zt.bit<Di.bit)throw new Error('"'+vi+'" cannot be encoded with mode '+Oe.toString(zt)+".\n Suggested mode is: "+Oe.toString(Di));switch(zt===Oe.KANJI&&!Je.isKanjiModeEnabled()&&(zt=Oe.BYTE),zt){case Oe.NUMERIC:return new he(vi);case Oe.ALPHANUMERIC:return new Fe(vi);case Oe.KANJI:return new ce(vi);case Oe.BYTE:return new p(vi)}}Be.fromArray=function(Et){return Et.reduce(function(zt,Di){return"string"==typeof Di?zt.push(mn(Di,null)):Di.data&&zt.push(mn(Di.data,Di.mode)),zt},[])},Be.fromString=function(Et,zt){const ur=function Vi(vi){const Et=[];for(let zt=0;zt<vi.length;zt++){const Di=vi[zt];switch(Di.mode){case Oe.NUMERIC:Et.push([Di,{data:Di.data,mode:Oe.ALPHANUMERIC,length:Di.length},{data:Di.data,mode:Oe.BYTE,length:Di.length}]);break;case Oe.ALPHANUMERIC:Et.push([Di,{data:Di.data,mode:Oe.BYTE,length:Di.length}]);break;case Oe.KANJI:Et.push([Di,{data:Di.data,mode:Oe.BYTE,length:ht(Di.data)}]);break;case Oe.BYTE:Et.push([{data:Di.data,mode:Oe.BYTE,length:ht(Di.data)}])}}return Et}(Bi(Et,Je.isKanjiModeEnabled())),Ar=function sn(vi,Et){const zt={},Di={start:{}};let ur=["start"];for(let Ar=0;Ar<vi.length;Ar++){const Wt=vi[Ar],Ni=[];for(let bi=0;bi<Wt.length;bi++){const ni=Wt[bi],Ii=""+Ar+bi;Ni.push(Ii),zt[Ii]={node:ni,lastCount:0},Di[Ii]={};for(let Si=0;Si<ur.length;Si++){const hi=ur[Si];zt[hi]&&zt[hi].node.mode===ni.mode?(Di[hi][Ii]=xt(zt[hi].lastCount+ni.length,ni.mode)-xt(zt[hi].lastCount,ni.mode),zt[hi].lastCount+=ni.length):(zt[hi]&&(zt[hi].lastCount=ni.length),Di[hi][Ii]=xt(ni.length,ni.mode)+4+Oe.getCharCountIndicator(ni.mode,Et))}}ur=Ni}for(let Ar=0;Ar<ur.length;Ar++)Di[ur[Ar]].end=0;return{map:Di,table:zt}}(ur,zt),Wt=Ie.find_path(Ar.map,"start","end"),Ni=[];for(let bi=1;bi<Wt.length-1;bi++)Ni.push(Ar.table[Wt[bi]].node);return Be.fromArray(function Xt(vi){return vi.reduce(function(Et,zt){const Di=Et.length-1>=0?Et[Et.length-1]:null;return Di&&Di.mode===zt.mode?(Et[Et.length-1].data+=zt.data,Et):(Et.push(zt),Et)},[])}(Ni))},Be.rawSplit=function(Et){return Be.fromArray(Bi(Et,Je.isKanjiModeEnabled()))}},696:(_n,Be)=>{let Ke;const Oe=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Be.getSymbolSize=function(Fe){if(!Fe)throw new Error('"version" cannot be null or undefined');if(Fe<1||Fe>40)throw new Error('"version" should be in range from 1 to 40');return 4*Fe+17},Be.getSymbolTotalCodewords=function(Fe){return Oe[Fe]},Be.getBCHDigit=function(he){let Fe=0;for(;0!==he;)Fe++,he>>>=1;return Fe},Be.setToSJISFunction=function(Fe){if("function"!=typeof Fe)throw new Error('"toSJISFunc" is not a valid function.');Ke=Fe},Be.isKanjiModeEnabled=function(){return typeof Ke<"u"},Be.toSJIS=function(Fe){return Ke(Fe)}},502:(_n,Be)=>{Be.isValid=function(Oe){return!isNaN(Oe)&&Oe>=1&&Oe<=40}},199:(_n,Be,Ke)=>{const Oe=Ke(696),he=Ke(539),Fe=Ke(508),p=Ke(812),ce=Ke(502),Je=Oe.getBCHDigit(7973);function ht(xt,Xt){return p.getCharCountIndicator(xt,Xt)+4}function ai(xt,Xt){let Vi=0;return xt.forEach(function(sn){Vi+=ht(sn.mode,Xt)+sn.getBitsLength()}),Vi}Be.from=function(Xt,Vi){return ce.isValid(Xt)?parseInt(Xt,10):Vi},Be.getCapacity=function(Xt,Vi,sn){if(!ce.isValid(Xt))throw new Error("Invalid QR Code version");typeof sn>"u"&&(sn=p.BYTE);const Et=8*(Oe.getSymbolTotalCodewords(Xt)-he.getTotalCodewordsCount(Xt,Vi));if(sn===p.MIXED)return Et;const zt=Et-ht(sn,Xt);switch(sn){case p.NUMERIC:return Math.floor(zt/10*3);case p.ALPHANUMERIC:return Math.floor(zt/11*2);case p.KANJI:return Math.floor(zt/13);default:return Math.floor(zt/8)}},Be.getBestVersionForData=function(Xt,Vi){let sn;const mn=Fe.from(Vi,Fe.M);if(Array.isArray(Xt)){if(Xt.length>1)return function Bi(xt,Xt){for(let Vi=1;Vi<=40;Vi++)if(ai(xt,Vi)<=Be.getCapacity(Vi,Xt,p.MIXED))return Vi}(Xt,mn);if(0===Xt.length)return 1;sn=Xt[0]}else sn=Xt;return function Ie(xt,Xt,Vi){for(let sn=1;sn<=40;sn++)if(Xt<=Be.getCapacity(sn,Vi,xt))return sn}(sn.mode,sn.getLength(),mn)},Be.getEncodedBits=function(Xt){if(!ce.isValid(Xt)||Xt<7)throw new Error("Invalid QR Code version");let Vi=Xt<<12;for(;Oe.getBCHDigit(Vi)-Je>=0;)Vi^=7973<<Oe.getBCHDigit(Vi)-Je;return Xt<<12|Vi}},360:(_n,Be,Ke)=>{const Oe=Ke(506);Be.render=function(ce,We,Je){let Ie=Je,ht=We;typeof Ie>"u"&&(!We||!We.getContext)&&(Ie=We,We=void 0),We||(ht=function Fe(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),Ie=Oe.getOptions(Ie);const ai=Oe.getImageWidth(ce.modules.size,Ie),Bi=ht.getContext("2d"),xt=Bi.createImageData(ai,ai);return Oe.qrToImageData(xt.data,ce,Ie),function he(p,ce,We){p.clearRect(0,0,ce.width,ce.height),ce.style||(ce.style={}),ce.height=We,ce.width=We,ce.style.height=We+"px",ce.style.width=We+"px"}(Bi,ht,ai),Bi.putImageData(xt,0,0),ht},Be.renderToDataURL=function(ce,We,Je){let Ie=Je;return typeof Ie>"u"&&(!We||!We.getContext)&&(Ie=We,We=void 0),Ie||(Ie={}),Be.render(ce,We,Ie).toDataURL(Ie.type||"image/png",(Ie.rendererOpts||{}).quality)}},851:(_n,Be,Ke)=>{const Oe=Ke(506);function he(ce,We){const Je=ce.a/255,Ie=We+'="'+ce.hex+'"';return Je<1?Ie+" "+We+'-opacity="'+Je.toFixed(2).slice(1)+'"':Ie}function Fe(ce,We,Je){let Ie=ce+We;return typeof Je<"u"&&(Ie+=" "+Je),Ie}Be.render=function(We,Je,Ie){const ht=Oe.getOptions(Je),ai=We.modules.size,Bi=We.modules.data,xt=ai+2*ht.margin,Xt=ht.color.light.a?"<path "+he(ht.color.light,"fill")+' d="M0 0h'+xt+"v"+xt+'H0z"/>':"",Vi="<path "+he(ht.color.dark,"stroke")+' d="'+function p(ce,We,Je){let Ie="",ht=0,ai=!1,Bi=0;for(let xt=0;xt<ce.length;xt++){const Xt=Math.floor(xt%We),Vi=Math.floor(xt/We);!Xt&&!ai&&(ai=!0),ce[xt]?(Bi++,xt>0&&Xt>0&&ce[xt-1]||(Ie+=ai?Fe("M",Xt+Je,.5+Vi+Je):Fe("m",ht,0),ht=0,ai=!1),Xt+1<We&&ce[xt+1]||(Ie+=Fe("h",Bi),Bi=0)):ht++}return Ie}(Bi,ai,ht.margin)+'"/>',vi='<svg xmlns="http://www.w3.org/2000/svg" '+(ht.width?'width="'+ht.width+'" height="'+ht.width+'" ':"")+'viewBox="0 0 '+xt+" "+xt+'" shape-rendering="crispEdges">'+Xt+Vi+"</svg>\n";return"function"==typeof Ie&&Ie(null,vi),vi}},506:(_n,Be)=>{function Ke(Oe){if("number"==typeof Oe&&(Oe=Oe.toString()),"string"!=typeof Oe)throw new Error("Color should be defined as hex string");let he=Oe.slice().replace("#","").split("");if(he.length<3||5===he.length||he.length>8)throw new Error("Invalid hex color: "+Oe);(3===he.length||4===he.length)&&(he=Array.prototype.concat.apply([],he.map(function(p){return[p,p]}))),6===he.length&&he.push("F","F");const Fe=parseInt(he.join(""),16);return{r:Fe>>24&255,g:Fe>>16&255,b:Fe>>8&255,a:255&Fe,hex:"#"+he.slice(0,6).join("")}}Be.getOptions=function(he){he||(he={}),he.color||(he.color={});const p=he.width&&he.width>=21?he.width:void 0;return{width:p,scale:p?4:he.scale||4,margin:typeof he.margin>"u"||null===he.margin||he.margin<0?4:he.margin,color:{dark:Ke(he.color.dark||"#000000ff"),light:Ke(he.color.light||"#ffffffff")},type:he.type,rendererOpts:he.rendererOpts||{}}},Be.getScale=function(he,Fe){return Fe.width&&Fe.width>=he+2*Fe.margin?Fe.width/(he+2*Fe.margin):Fe.scale},Be.getImageWidth=function(he,Fe){const p=Be.getScale(he,Fe);return Math.floor((he+2*Fe.margin)*p)},Be.qrToImageData=function(he,Fe,p){const ce=Fe.modules.size,We=Fe.modules.data,Je=Be.getScale(ce,p),Ie=Math.floor((ce+2*p.margin)*Je),ht=p.margin*Je,ai=[p.color.light,p.color.dark];for(let Bi=0;Bi<Ie;Bi++)for(let xt=0;xt<Ie;xt++){let Xt=4*(Bi*Ie+xt),Vi=p.color.light;Bi>=ht&&xt>=ht&&Bi<Ie-ht&&xt<Ie-ht&&(Vi=ai[We[Math.floor((Bi-ht)/Je)*ce+Math.floor((xt-ht)/Je)]?1:0]),he[Xt++]=Vi.r,he[Xt++]=Vi.g,he[Xt++]=Vi.b,he[Xt]=Vi.a}}},901:_n=>{"use strict";var Be={single_source_shortest_paths:function(Ke,Oe,he){var Fe={},p={};p[Oe]=0;var We,Je,Ie,ht,ai,xt,ce=Be.PriorityQueue.make();for(ce.push(Oe,0);!ce.empty();)for(Ie in ht=(We=ce.pop()).cost,ai=Ke[Je=We.value]||{})ai.hasOwnProperty(Ie)&&(xt=ht+ai[Ie],(typeof p[Ie]>"u"||p[Ie]>xt)&&(p[Ie]=xt,ce.push(Ie,xt),Fe[Ie]=Je));if(typeof he<"u"&&typeof p[he]>"u"){var sn=["Could not find a path from ",Oe," to ",he,"."].join("");throw new Error(sn)}return Fe},extract_shortest_path_from_predecessor_list:function(Ke,Oe){for(var he=[],Fe=Oe;Fe;)he.push(Fe),Fe=Ke[Fe];return he.reverse(),he},find_path:function(Ke,Oe,he){var Fe=Be.single_source_shortest_paths(Ke,Oe,he);return Be.extract_shortest_path_from_predecessor_list(Fe,he)},PriorityQueue:{make:function(Ke){var Fe,Oe=Be.PriorityQueue,he={};for(Fe in Ke=Ke||{},Oe)Oe.hasOwnProperty(Fe)&&(he[Fe]=Oe[Fe]);return he.queue=[],he.sorter=Ke.sorter||Oe.default_sorter,he},default_sorter:function(Ke,Oe){return Ke.cost-Oe.cost},push:function(Ke,Oe){this.queue.push({value:Ke,cost:Oe}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};_n.exports=Be},419:_n=>{"use strict";_n.exports=function(Ke){for(var Oe=[],he=Ke.length,Fe=0;Fe<he;Fe++){var p=Ke.charCodeAt(Fe);if(p>=55296&&p<=56319&&he>Fe+1){var ce=Ke.charCodeAt(Fe+1);ce>=56320&&ce<=57343&&(p=1024*(p-55296)+ce-56320+65536,Fe+=1)}p<128?Oe.push(p):p<2048?(Oe.push(p>>6|192),Oe.push(63&p|128)):p<55296||p>=57344&&p<65536?(Oe.push(p>>12|224),Oe.push(p>>6&63|128),Oe.push(63&p|128)):p>=65536&&p<=1114111?(Oe.push(p>>18|240),Oe.push(p>>12&63|128),Oe.push(p>>6&63|128),Oe.push(63&p|128)):Oe.push(239,191,189)}return new Uint8Array(Oe).buffer}},898:function(_n){_n.exports=function(){"use strict";var Be,Ke,Oe;function he(p,ce){if(Be)if(Ke){var We="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+Be+")(sharedChunk); ("+Ke+")(sharedChunk); self.onerror = null;",Je={};Be(Je),Oe=ce(Je),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(Oe.workerUrl=window.URL.createObjectURL(new Blob([We],{type:"text/javascript"})))}else Ke=ce;else Be=ce}return he(0,function(p){var ce=typeof self<"u"?self:{},We=Je;function Je(l,o,a,d){this.cx=3*l,this.bx=3*(a-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(d-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=d,this.p2x=a,this.p2y=d}Je.prototype.sampleCurveX=function(l){return((this.ax*l+this.bx)*l+this.cx)*l},Je.prototype.sampleCurveY=function(l){return((this.ay*l+this.by)*l+this.cy)*l},Je.prototype.sampleCurveDerivativeX=function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},Je.prototype.solveCurveX=function(l,o){var a,d,f,g,v;for(void 0===o&&(o=1e-6),f=l,v=0;v<8;v++){if(g=this.sampleCurveX(f)-l,Math.abs(g)<o)return f;var x=this.sampleCurveDerivativeX(f);if(Math.abs(x)<1e-6)break;f-=g/x}if((f=l)<(a=0))return a;if(f>(d=1))return d;for(;a<d;){if(g=this.sampleCurveX(f),Math.abs(g-l)<o)return f;l>g?a=f:d=f,f=.5*(d-a)+a}return f},Je.prototype.solve=function(l,o){return this.sampleCurveY(this.solveCurveX(l,o))};var Ie=ht;function ht(l,o){this.x=l,this.y=o}ht.prototype={clone:function(){return new ht(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,o){return this.clone()._rotateAround(l,o)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var o=l.x-this.x,a=l.y-this.y;return o*o+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,o){return Math.atan2(this.x*o-this.y*l,this.x*l+this.y*o)},_matMult:function(l){var o=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=o,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var o=Math.cos(l),a=Math.sin(l),d=a*this.x+o*this.y;return this.x=o*this.x-a*this.y,this.y=d,this},_rotateAround:function(l,o){var a=Math.cos(l),d=Math.sin(l),f=o.y+d*(this.x-o.x)+a*(this.y-o.y);return this.x=o.x+a*(this.x-o.x)-d*(this.y-o.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ht.convert=function(l){return l instanceof ht?l:Array.isArray(l)?new ht(l[0],l[1]):l};const ai=Math.PI/180,Bi=180/Math.PI;function xt(l){return l*ai}function Xt(l){return l*Bi}const Vi=[[0,0],[1,0],[1,1],[0,1]];function sn(l){if(l<=0)return 0;if(l>=1)return 1;const o=l*l,a=o*l;return 4*(l<.5?a:3*(l-o)+a-.75)}function mn(l,o,a,d){const f=new We(l,o,a,d);return function(g){return f.solve(g)}}const vi=mn(.25,.1,.25,1);function Et(l,o,a){return Math.min(a,Math.max(o,l))}function zt(l,o,a){return(a=Et((a-l)/(o-l),0,1))*a*(3-2*a)}function Di(l,o,a){const d=a-o,f=((l-o)%d+d)%d+o;return f===o?a:f}function ur(l,o,a){if(!l.length)return a(null,[]);let d=l.length;const f=new Array(l.length);let g=null;l.forEach((v,x)=>{o(v,(M,D)=>{M&&(g=M),f[x]=D,0==--d&&a(g,f)})})}function Ar(l){const o=[];for(const a in l)o.push(l[a]);return o}function Wt(l,...o){for(const a of o)for(const d in a)l[d]=a[d];return l}let Ni=1;function bi(){return Ni++}function ni(){return function l(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()}function Ii(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function Si(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)}function hi(l,o){l.forEach(a=>{o[a]&&(o[a]=o[a].bind(o))})}function ki(l,o){return-1!==l.indexOf(o,l.length-o.length)}function Ai(l,o,a){const d={};for(const f in l)d[f]=o.call(a||this,l[f],f,l);return d}function Hr(l,o,a){const d={};for(const f in l)o.call(a||this,l[f],f,l)&&(d[f]=l[f]);return d}function $i(l){return Array.isArray(l)?l.map($i):"object"==typeof l&&l?Ai(l,$i):l}const Js={};function lr(l){Js[l]||(typeof console<"u"&&console.warn(l),Js[l]=!0)}function so(l,o,a){return(a.y-l.y)*(o.x-l.x)>(o.y-l.y)*(a.x-l.x)}function Go(l){let o=0;for(let a,d,f=0,g=l.length,v=g-1;f<g;v=f++)a=l[f],d=l[v],o+=(d.x-a.x)*(a.y+d.y);return o}function St(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Io(l){const o={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,d,f,g)=>{const v=f||g;return o[d]=!v||v.toLowerCase(),""}),o["max-age"]){const a=parseInt(o["max-age"],10);isNaN(a)?delete o["max-age"]:o["max-age"]=a}return o}let is=null;function Pn(l){if(null==is){const o=l.navigator?l.navigator.userAgent:null;is=!!l.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return is}function Qi(l){try{const o=ce[l];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}}function Wr(l,o){return[l[4*o],l[4*o+1],l[4*o+2],l[4*o+3]]}const li=ce.performance;function tr(l){const o=l?l.url.toString():void 0;return li.getEntriesByName(o)}let an,Ba,xn,ao;const lo={now:()=>void 0!==xn?xn:ce.performance.now(),setNow(l){xn=l},restoreNow(){xn=void 0},frame(l){const o=ce.requestAnimationFrame(l);return{cancel:()=>ce.cancelAnimationFrame(o)}},getImageData(l,o=0){const{width:a,height:d}=l;ao||(ao=ce.document.createElement("canvas"));const f=ao.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return(a>ao.width||d>ao.height)&&(ao.width=a,ao.height=d),f.clearRect(-o,-o,a+2*o,d+2*o),f.drawImage(l,0,0,a,d),f.getImageData(-o,-o,a+2*o,d+2*o)},resolveURL:l=>(an||(an=ce.document.createElement("a")),an.href=l,an.href),get devicePixelRatio(){return ce.devicePixelRatio},get prefersReducedMotion(){return!!ce.matchMedia&&(null==Ba&&(Ba=ce.matchMedia("(prefers-reduced-motion: reduce)")),Ba.matches)}};let ea;const Li={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==ea){const l=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{ea=null!=process.env.API_URL_REGEX?new RegExp(process.env.API_URL_REGEX):l}catch{ea=l}}return ea},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ir={supported:!1,testSupport:function(l){!Qr&&bs&&(Yc?Xc(l):Na=l)}};let Na,bs,Qr=!1,Yc=!1;function Xc(l){const o=l.createTexture();l.bindTexture(l.TEXTURE_2D,o);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,bs),l.isContextLost())return;Ir.supported=!0}catch{}l.deleteTexture(o),Qr=!0}ce.document&&(bs=ce.document.createElement("img"),bs.onload=function(){Na&&Xc(Na),Na=null,Yc=!0},bs.onerror=function(){Qr=!0,Na=null},bs.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Kc="01",$r="NO_ACCESS_TOKEN";function ma(l){return 0===l.indexOf("mapbox:")}function tc(l){return Li.API_URL_REGEX.test(l)}const yn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Vs(l){const o=l.match(yn);if(!o)throw new Error("Unable to parse URL object");return{protocol:o[1],authority:o[2],path:o[3]||"/",params:o[4]?o[4].split("&"):[]}}function za(l){const o=l.params.length?`?${l.params.join("&")}`:"";return`${l.protocol}://${l.authority}${l.path}${o}`}function Bd(l){if(!l)return null;const o=l.split(".");if(!o||3!==o.length)return null;try{return JSON.parse(decodeURIComponent(ce.atob(o[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Nd{constructor(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(o){const a=Bd(Li.ACCESS_TOKEN);let d="";return d=a&&a.u?ce.btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(f,g)=>String.fromCharCode(Number("0x"+g)))):Li.ACCESS_TOKEN||"",o?`mapbox.eventData.${o}:${d}`:`mapbox.eventData:${d}`}fetchEventData(){const o=Qi("localStorage"),a=this.getStorageKey(),d=this.getStorageKey("uuid");if(o)try{const f=ce.localStorage.getItem(a);f&&(this.eventData=JSON.parse(f));const g=ce.localStorage.getItem(d);g&&(this.anonId=g)}catch{lr("Unable to read from LocalStorage")}}saveEventData(){const o=Qi("localStorage"),a=this.getStorageKey(),d=this.getStorageKey("uuid");if(o)try{ce.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&ce.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{lr("Unable to write to LocalStorage")}}processRequests(o){}postEvent(o,a,d,f){if(!Li.EVENTS_URL)return;const g=Vs(Li.EVENTS_URL);g.params.push(`access_token=${f||Li.ACCESS_TOKEN||""}`);const v={event:this.type,created:new Date(o).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.10.0",skuId:Kc,userId:this.anonId},x=a?Wt(v,a):v,M={url:za(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=ut(M,D=>{this.pendingRequest=null,d(D),this.saveEventData(),this.processRequests(f)})}queueRequest(o,a){this.queue.push(o),this.processRequests(a)}}const zd=new class extends Nd{constructor(l){super("appUserTurnstile"),this._customAccessToken=l}postTurnstileEvent(l,o){Li.EVENTS_URL&&Li.ACCESS_TOKEN&&Array.isArray(l)&&l.some(a=>ma(a)||tc(a))&&this.queueRequest(Date.now(),o)}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const o=Bd(Li.ACCESS_TOKEN),a=o?o.u:Li.ACCESS_TOKEN;let d=a!==this.eventData.tokenU;Si(this.anonId)||(this.anonId=ni(),d=!0);const f=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),v=new Date(f),x=(f-this.eventData.lastSuccess)/864e5;d=d||x>=1||x<-1||g.getDate()!==v.getDate()}else d=!0;d?this.postEvent(f,{"enabled.telemetry":!1},g=>{g||(this.eventData.lastSuccess=f,this.eventData.tokenU=a)},l):this.processRequests()}},ga=zd.postTurnstileEvent.bind(zd),Vd=new class extends Nd{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(l,o,a,d){this.skuToken=o,this.errorCb=d,Li.EVENTS_URL&&(a||Li.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},a):this.errorCb(new Error($r)))}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;const{id:o,timestamp:a}=this.queue.shift();o&&this.success[o]||(this.anonId||this.fetchEventData(),Si(this.anonId)||(this.anonId=ni()),this.postEvent(a,{skuToken:this.skuToken},d=>{d?this.errorCb(d):o&&(this.success[o]=!0)},l))}},ic=Vd.postMapLoadEvent.bind(Vd),Qc=new class extends Nd{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(l,o,a,d){if(!Li.API_URL||!Li.SESSION_PATH)return;const f=Vs(Li.API_URL+Li.SESSION_PATH);f.params.push(`sku=${o||""}`),f.params.push(`access_token=${d||Li.ACCESS_TOKEN||""}`);const g={url:za(f),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Ct(g,v=>{this.pendingRequest=null,a(v),this.saveEventData(),this.processRequests(d)})}getSessionAPI(l,o,a,d){this.skuToken=o,this.errorCb=d,Li.SESSION_PATH&&Li.API_URL&&(a||Li.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},a):this.errorCb(new Error($r)))}processRequests(l){if(this.pendingRequest||0===this.queue.length)return;const{id:o,timestamp:a}=this.queue.shift();o&&this.success[o]||this.getSession(a,this.skuToken,d=>{d?this.errorCb(d):o&&(this.success[o]=!0)},l)}},jd=Qc.getSessionAPI.bind(Qc),Va=new Set;let js,nc=500,Jc=50,Jr={};function rc(l){const o=Y(l);let a,d;o&&o.forEach(g=>{const v=g.split("=");"language"===v[0]?a=v[1]:"worldview"===v[0]&&(d=v[1])});let f="mapbox-tiles";return a&&(f+=`-${a}`),d&&(f+=`-${d}`),f}function de(){try{return ce.caches}catch{}}function j(l){const o=de();o&&!Jr[l]&&(Jr[l]=o.open(l))}function Y(l){const o=l.indexOf("?");return o>0?l.slice(o+1).split("&"):[]}function ae(l){const o=l.indexOf("?");if(o<0)return l;const a=Y(l).filter(d=>{const f=d.split("=");return"language"===f[0]||"worldview"===f[0]});return a.length?`${l.slice(0,o)}?${a.join("&")}`:l.slice(0,o)}let me=1/0;const ke={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ke);class Ve extends Error{constructor(o,a,d){401===a&&tc(d)&&(o+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(o),this.status=a,this.url=d}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ne=St()?()=>self.worker&&self.worker.referrer:()=>("blob:"===ce.location.protocol?ce.parent:ce).location.href,Ae=function(l,o){if(!(/^file:/.test(a=l.url)||/^file:/.test(Ne())&&!/^\w+:/.test(a))){if(ce.fetch&&ce.Request&&ce.AbortController&&ce.Request.prototype.hasOwnProperty("signal"))return function(d,f){const g=new ce.AbortController,v=new ce.Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:Ne(),signal:g.signal});let x=!1,M=!1;const D=(k=v.url).indexOf("sku=")>0&&tc(k);var k;"json"===d.type&&v.headers.set("Accept","application/json");const P=(z,V,K)=>{if(M)return;if(z&&"SecurityError"!==z.message&&lr(z),V&&K)return O(V);const J=Date.now();ce.fetch(v).then(ue=>{if(ue.ok){const xe=D?ue.clone():null;return O(ue,xe,J)}return f(new Ve(ue.statusText,ue.status,d.url))}).catch(ue=>{20!==ue.code&&f(new Error(ue.message))})},O=(z,V,K)=>{("arrayBuffer"===d.type?z.arrayBuffer():"json"===d.type?z.json():z.text()).then(J=>{M||(V&&K&&function(ue,xe,fe){const ye=rc(ue.url);if(j(ye),!Jr[ye])return;const Te={status:xe.status,statusText:xe.statusText,headers:new ce.Headers};xe.headers.forEach((Ge,nt)=>Te.headers.set(nt,Ge));const we=Io(xe.headers.get("Cache-Control")||"");if(we["no-store"])return;we["max-age"]&&Te.headers.set("Expires",new Date(fe+1e3*we["max-age"]).toUTCString());const qe=Te.headers.get("Expires");qe&&(new Date(qe).getTime()-fe<42e4||function(Ge,nt){if(void 0===js)try{new Response(new ReadableStream),js=!0}catch{js=!1}js?nt(Ge.body):Ge.blob().then(nt)}(xe,Ge=>{const nt=new ce.Response(Ge,Te);j(ye),Jr[ye]&&Jr[ye].then(Mt=>Mt.put(ae(ue.url),nt)).catch(Mt=>lr(Mt.message))}))}(v,V,K),x=!0,f(null,J,z.headers.get("Cache-Control"),z.headers.get("Expires")))}).catch(J=>{M||f(new Error(J.message))})};return D?function(z,V){const K=rc(z.url);if(j(K),!Jr[K])return V(null);const J=ae(z.url);Jr[K].then(ue=>{ue.match(J).then(xe=>{const fe=function(ye){if(!ye)return!1;const Te=new Date(ye.headers.get("Expires")||0),we=Io(ye.headers.get("Cache-Control")||"");return Te>Date.now()&&!we["no-cache"]}(xe);ue.delete(J),fe&&ue.put(J,xe.clone()),V(null,xe,fe)}).catch(V)}).catch(V)}(v,P):P(null,null),{cancel:()=>{M=!0,x||g.abort()}}}(l,o);if(St()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,o,void 0,!0)}var a;return function(d,f){const g=new ce.XMLHttpRequest;g.open(d.method||"GET",d.url,!0),"arrayBuffer"===d.type&&(g.responseType="arraybuffer");for(const v in d.headers)g.setRequestHeader(v,d.headers[v]);return"json"===d.type&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials="include"===d.credentials,g.onerror=()=>{f(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||0===g.status)&&null!==g.response){let v=g.response;if("json"===d.type)try{v=JSON.parse(g.response)}catch(x){return f(x)}f(null,v,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else f(new Ve(g.statusText,g.status,d.url))},g.send(d.body),{cancel:()=>g.abort()}}(l,o)},je=function(l,o){return Ae(Wt(l,{type:"arrayBuffer"}),o)},ut=function(l,o){return Ae(Wt(l,{method:"POST"}),o)},Ct=function(l,o){return Ae(Wt(l,{method:"GET"}),o)};function pt(l){const o=ce.document.createElement("a");return o.href=l,o.protocol===ce.document.location.protocol&&o.host===ce.document.location.host}const ti="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ei,ri;Ei=[],ri=0;const _i=function(l,o){if(Ir.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),ri>=Li.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:l,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return Ei.push(g),g}ri++;let a=!1;const d=()=>{if(!a)for(a=!0,ri--;Ei.length&&ri<Li.MAX_PARALLEL_IMAGE_REQUESTS;){const g=Ei.shift(),{requestParameters:v,callback:x,cancelled:M}=g;M||(g.cancel=_i(v,x).cancel)}},f=je(l,(g,v,x,M)=>{d(),g?o(g):v&&(ce.createImageBitmap?function(D,k){const P=new ce.Blob([new Uint8Array(D)],{type:"image/png"});ce.createImageBitmap(P).then(O=>{k(null,O)}).catch(O=>{k(new Error(`Could not load image because of ${O.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(D,k)=>o(D,k,x,M)):function(D,k){const P=new ce.Image,O=ce.URL;P.onload=()=>{k(null,P),O.revokeObjectURL(P.src),P.onload=null,ce.requestAnimationFrame(()=>{P.src=ti})},P.onerror=()=>k(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const z=new ce.Blob([new Uint8Array(D)],{type:"image/png"});P.src=D.byteLength?O.createObjectURL(z):ti}(v,(D,k)=>o(D,k,x,M)))});return{cancel:()=>{f.cancel(),d()}}};function Gi(l,o,a){a[l]&&-1!==a[l].indexOf(o)||(a[l]=a[l]||[],a[l].push(o))}function In(l,o,a){if(a&&a[l]){const d=a[l].indexOf(o);-1!==d&&a[l].splice(d,1)}}class qi{constructor(o,a={}){Wt(this,a),this.type=o}}class Hn extends qi{constructor(o,a={}){super("error",Wt({error:o},a))}}class mi{on(o,a){return this._listeners=this._listeners||{},Gi(o,a,this._listeners),this}off(o,a){return In(o,a,this._listeners),In(o,a,this._oneTimeListeners),this}once(o,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Gi(o,a,this._oneTimeListeners),this):new Promise(d=>this.once(o,d))}fire(o,a){"string"==typeof o&&(o=new qi(o,a||{}));const d=o.type;if(this.listens(d)){o.target=this;const f=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const x of f)x.call(this,o);const g=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const x of g)In(d,x,this._oneTimeListeners),x.call(this,o);const v=this._eventedParent;v&&(Wt(o,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),v.fire(o))}else o instanceof Hn&&console.error(o.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,a){return this._eventedParent=o,this._eventedParentData=a,this}}var Qe=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ns(l,...o){for(const a of o)for(const d in a)l[d]=a[d];return l}function Rr(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function el(l){if(Array.isArray(l))return l.map(el);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const o={};for(const a in l)o[a]=el(l[a]);return o}return Rr(l)}class Ud extends Error{constructor(o,a){super(a),this.message=a,this.key=o}}var xs=Ud;class Hd{constructor(o,a=[]){this.parent=o,this.bindings={};for(const[d,f]of a)this.bindings[d]=f}concat(o){return new Hd(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}var Wh=Hd;const vr={kind:"null"},wt={kind:"number"},on={kind:"string"},Ji={kind:"boolean"},Mn={kind:"color"},ws={kind:"object"},Qt={kind:"value"},tl={kind:"collator"},oc={kind:"formatted"},en={kind:"resolvedImage"};function xi(l,o){return{kind:"array",itemType:l,N:o}}function hr(l){if("array"===l.kind){const o=hr(l.itemType);return"number"==typeof l.N?`array<${o}, ${l.N}>`:"value"===l.itemType.kind?"array":`array<${o}>`}return l.kind}const Zh=[vr,wt,on,Ji,Mn,oc,ws,xi(Qt),en];function ft(l,o){if("error"===o.kind)return null;if("array"===l.kind){if("array"===o.kind&&(0===o.N&&"value"===o.itemType.kind||!ft(l.itemType,o.itemType))&&("number"!=typeof l.N||l.N===o.N))return null}else{if(l.kind===o.kind)return null;if("value"===l.kind)for(const a of Zh)if(!ft(a,o))return null}return`Expected ${hr(l)} but found ${hr(o)} instead.`}function yl(l,o){return o.some(a=>a.kind===l.kind)}function Ri(l,o){return o.some(a=>"null"===a?null===l:"array"===a?Array.isArray(l):"object"===a?l&&!Array.isArray(l)&&"object"==typeof l:a===typeof l)}function Ln(l){var o={exports:{}};return l(o,o.exports),o.exports}var il=Ln(function(l,o){var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function d(x){return(x=Math.round(x))<0?0:x>255?255:x}function f(x){return d("%"===x[x.length-1]?parseFloat(x)/100*255:parseInt(x))}function g(x){return(M="%"===x[x.length-1]?parseFloat(x)/100:parseFloat(x))<0?0:M>1?1:M;var M}function v(x,M,D){return D<0?D+=1:D>1&&(D-=1),6*D<1?x+(M-x)*D*6:2*D<1?M:3*D<2?x+(M-x)*(2/3-D)*6:x}try{o.parseCSSColor=function(x){var M,D=x.replace(/ /g,"").toLowerCase();if(D in a)return a[D].slice();if("#"===D[0])return 4===D.length?(M=parseInt(D.substr(1),16))>=0&&M<=4095?[(3840&M)>>4|(3840&M)>>8,240&M|(240&M)>>4,15&M|(15&M)<<4,1]:null:7===D.length&&(M=parseInt(D.substr(1),16))>=0&&M<=16777215?[(16711680&M)>>16,(65280&M)>>8,255&M,1]:null;var k=D.indexOf("("),P=D.indexOf(")");if(-1!==k&&P+1===D.length){var O=D.substr(0,k),z=D.substr(k+1,P-(k+1)).split(","),V=1;switch(O){case"rgba":if(4!==z.length)return null;V=g(z.pop());case"rgb":return 3!==z.length?null:[f(z[0]),f(z[1]),f(z[2]),V];case"hsla":if(4!==z.length)return null;V=g(z.pop());case"hsl":if(3!==z.length)return null;var K=(parseFloat(z[0])%360+360)%360/360,J=g(z[1]),ue=g(z[2]),xe=ue<=.5?ue*(J+1):ue+J-ue*J,fe=2*ue-xe;return[d(255*v(fe,xe,K+1/3)),d(255*v(fe,xe,K)),d(255*v(fe,xe,K-1/3)),V];default:return null}}return null}}catch{}});class Ro{constructor(o,a,d,f=1){this.r=o,this.g=a,this.b=d,this.a=f}static parse(o){if(!o)return;if(o instanceof Ro)return o;if("string"!=typeof o)return;const a=il.parseCSSColor(o);return a?new Ro(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[o,a,d,f]=this.toArray();return`rgba(${Math.round(o)},${Math.round(a)},${Math.round(d)},${f})`}toArray(){const{r:o,g:a,b:d,a:f}=this;return 0===f?[0,0,0,0]:[255*o/f,255*a/f,255*d/f,f]}toArray01(){const{r:o,g:a,b:d,a:f}=this;return 0===f?[0,0,0,0]:[o/f,a/f,d/f,f]}toArray01PremultipliedAlpha(){const{r:o,g:a,b:d,a:f}=this;return[o,a,d,f]}}Ro.black=new Ro(0,0,0,1),Ro.white=new Ro(1,1,1,1),Ro.transparent=new Ro(0,0,0,0),Ro.red=new Ro(1,0,0,1),Ro.blue=new Ro(0,0,1,1);var $n=Ro;class sc{constructor(o,a,d){this.sensitivity=o?a?"variant":"case":a?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,a){return this.collator.compare(o,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class yo{constructor(o,a,d,f,g){this.text=o.normalize?o.normalize():o,this.image=a,this.scale=d,this.fontStack=f,this.textColor=g}}class Cs{constructor(o){this.sections=o}static fromString(o){return new Cs([new yo(o,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(o=>0!==o.text.length||o.image&&0!==o.image.name.length)}static factory(o){return o instanceof Cs?o:Cs.fromString(o)}toString(){return 0===this.sections.length?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const a of this.sections){if(a.image){o.push(["image",a.image.name]);continue}o.push(a.text);const d={};a.fontStack&&(d["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(d["font-scale"]=a.scale),a.textColor&&(d["text-color"]=["rgba"].concat(a.textColor.toArray())),o.push(d)}return o}}class rs{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new rs({name:o,available:!1}):null}serialize(){return["image",this.name]}}function Yh(l,o,a,d){return"number"==typeof l&&l>=0&&l<=255&&"number"==typeof o&&o>=0&&o<=255&&"number"==typeof a&&a>=0&&a<=255?void 0===d||"number"==typeof d&&d>=0&&d<=1?null:`Invalid rgba value [${[l,o,a,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof d?[l,o,a,d]:[l,o,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Po(l){if(null===l||"string"==typeof l||"boolean"==typeof l||"number"==typeof l||l instanceof $n||l instanceof sc||l instanceof Cs||l instanceof rs)return!0;if(Array.isArray(l)){for(const o of l)if(!Po(o))return!1;return!0}if("object"==typeof l){for(const o in l)if(!Po(l[o]))return!1;return!0}return!1}function Cr(l){if(null===l)return vr;if("string"==typeof l)return on;if("boolean"==typeof l)return Ji;if("number"==typeof l)return wt;if(l instanceof $n)return Mn;if(l instanceof sc)return tl;if(l instanceof Cs)return oc;if(l instanceof rs)return en;if(Array.isArray(l)){const o=l.length;let a;for(const d of l){const f=Cr(d);if(a){if(a===f)continue;a=Qt;break}a=f}return xi(a||Qt,o)}return ws}function $d(l){const o=typeof l;return null===l?"":"string"===o||"number"===o||"boolean"===o?String(l):l instanceof $n||l instanceof Cs||l instanceof rs?l.toString():JSON.stringify(l)}class Wu{constructor(o,a){this.type=o,this.value=a}static parse(o,a){if(2!==o.length)return a.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Po(o[1]))return a.error("invalid value");const d=o[1];let f=Cr(d);const g=a.expectedType;return"array"!==f.kind||0!==f.N||!g||"array"!==g.kind||"number"==typeof g.N&&0!==g.N||(f=g),new Wu(f,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof $n?["rgba"].concat(this.value.toArray()):this.value instanceof Cs?this.value.serialize():this.value}}var Gd=Wu,co=class{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}};const qd={string:on,number:wt,boolean:Ji,object:ws};class Zu{constructor(o,a){this.type=o,this.args=a}static parse(o,a){if(o.length<2)return a.error("Expected at least one argument.");let d,f=1;const g=o[0];if("array"===g){let x,M;if(o.length>2){const D=o[1];if("string"!=typeof D||!(D in qd)||"object"===D)return a.error('The item type argument of "array" must be one of string, number, boolean',1);x=qd[D],f++}else x=Qt;if(o.length>3){if(null!==o[2]&&("number"!=typeof o[2]||o[2]<0||o[2]!==Math.floor(o[2])))return a.error('The length argument to "array" must be a positive integer literal',2);M=o[2],f++}d=xi(x,M)}else d=qd[g];const v=[];for(;f<o.length;f++){const x=a.parse(o[f],f,Qt);if(!x)return null;v.push(x)}return new Zu(d,v)}evaluate(o){for(let a=0;a<this.args.length;a++){const d=this.args[a].evaluate(o);if(!ft(this.type,Cr(d)))return d;if(a===this.args.length-1)throw new co(`Expected value to be of type ${hr(this.type)}, but found ${hr(Cr(d))} instead.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,a=[o.kind];if("array"===o.kind){const d=o.itemType;if("string"===d.kind||"number"===d.kind||"boolean"===d.kind){a.push(d.kind);const f=o.N;("number"==typeof f||this.args.length>1)&&a.push(f)}}return a.concat(this.args.map(d=>d.serialize()))}}var ta=Zu;class vo{constructor(o){this.type=oc,this.sections=o}static parse(o,a){if(o.length<2)return a.error("Expected at least one argument.");const d=o[1];if(!Array.isArray(d)&&"object"==typeof d)return a.error("First argument must be an image or text section.");const f=[];let g=!1;for(let v=1;v<=o.length-1;++v){const x=o[v];if(g&&"object"==typeof x&&!Array.isArray(x)){g=!1;let M=null;if(x["font-scale"]&&(M=a.parse(x["font-scale"],1,wt),!M))return null;let D=null;if(x["text-font"]&&(D=a.parse(x["text-font"],1,xi(on)),!D))return null;let k=null;if(x["text-color"]&&(k=a.parse(x["text-color"],1,Mn),!k))return null;const P=f[f.length-1];P.scale=M,P.font=D,P.textColor=k}else{const M=a.parse(o[v],1,Qt);if(!M)return null;const D=M.type.kind;if("string"!==D&&"value"!==D&&"null"!==D&&"resolvedImage"!==D)return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,f.push({content:M,scale:null,font:null,textColor:null})}}return new vo(f)}evaluate(o){return new Cs(this.sections.map(a=>{const d=a.content.evaluate(o);return Cr(d)===en?new yo("",d,null,null,null):new yo($d(d),null,a.scale?a.scale.evaluate(o):null,a.font?a.font.evaluate(o).join(","):null,a.textColor?a.textColor.evaluate(o):null)}))}eachChild(o){for(const a of this.sections)o(a.content),a.scale&&o(a.scale),a.font&&o(a.font),a.textColor&&o(a.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const a of this.sections){o.push(a.content.serialize());const d={};a.scale&&(d["font-scale"]=a.scale.serialize()),a.font&&(d["text-font"]=a.font.serialize()),a.textColor&&(d["text-color"]=a.textColor.serialize()),o.push(d)}return o}}class jn{constructor(o){this.type=en,this.input=o}static parse(o,a){if(2!==o.length)return a.error("Expected two arguments.");const d=a.parse(o[1],1,on);return d?new jn(d):a.error("No image name provided.")}evaluate(o){const a=this.input.evaluate(o),d=rs.fromString(a);return d&&o.availableImages&&(d.available=o.availableImages.indexOf(a)>-1),d}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Um={"to-boolean":Ji,"to-color":Mn,"to-number":wt,"to-string":on};class Xh{constructor(o,a){this.type=o,this.args=a}static parse(o,a){if(o.length<2)return a.error("Expected at least one argument.");const d=o[0];if(("to-boolean"===d||"to-string"===d)&&2!==o.length)return a.error("Expected one argument.");const f=Um[d],g=[];for(let v=1;v<o.length;v++){const x=a.parse(o[v],v,Qt);if(!x)return null;g.push(x)}return new Xh(f,g)}evaluate(o){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(o));if("color"===this.type.kind){let a,d;for(const f of this.args){if(a=f.evaluate(o),d=null,a instanceof $n)return a;if("string"==typeof a){const g=o.parseColor(a);if(g)return g}else if(Array.isArray(a)&&(d=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Yh(a[0],a[1],a[2],a[3]),!d))return new $n(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new co(d||`Could not parse color from value '${"string"==typeof a?a:String(JSON.stringify(a))}'`)}if("number"===this.type.kind){let a=null;for(const d of this.args){if(a=d.evaluate(o),null===a)return 0;const f=Number(a);if(!isNaN(f))return f}throw new co(`Could not convert ${JSON.stringify(a)} to number.`)}return"formatted"===this.type.kind?Cs.fromString($d(this.args[0].evaluate(o))):"resolvedImage"===this.type.kind?rs.fromString($d(this.args[0].evaluate(o))):$d(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if("formatted"===this.type.kind)return new vo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new jn(this.args[0]).serialize();const o=[`to-${this.type.kind}`];return this.eachChild(a=>{o.push(a.serialize())}),o}}var ac=Xh;const Tt=["Unknown","Point","LineString","Polygon"];var Wd=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Tt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const l=this.featureDistanceData.center,o=this.featureDistanceData.scale,{x:a,y:d}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*o-l[0])+this.featureDistanceData.bearing[1]*(d*o-l[1])}return 0}parseColor(l){let o=this._parseColorCache[l];return o||(o=this._parseColorCache[l]=$n.parse(l)),o}};class jt{constructor(o,a,d,f){this.name=o,this.type=a,this._evaluate=d,this.args=f}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,a){const d=o[0],f=jt.definitions[d];if(!f)return a.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(f)?f[0]:f.type,v=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,x=v.filter(([D])=>!Array.isArray(D)||D.length===o.length-1);let M=null;for(const[D,k]of x){M=new _a(a.registry,a.path,null,a.scope);const P=[];let O=!1;for(let z=1;z<o.length;z++){const V=o[z],K=Array.isArray(D)?D[z-1]:D.type,J=M.parse(V,1+P.length,K);if(!J){O=!0;break}P.push(J)}if(!O)if(Array.isArray(D)&&D.length!==P.length)M.error(`Expected ${D.length} arguments, but found ${P.length} instead.`);else{for(let z=0;z<P.length;z++){const V=Array.isArray(D)?D[z]:D.type,K=P[z];M.concat(z+1).checkSubtype(V,K.type)}if(0===M.errors.length)return new jt(d,g,k,P)}}if(1===x.length)a.errors.push(...M.errors);else{const D=(x.length?x:v).map(([P])=>{return O=P,Array.isArray(O)?`(${O.map(hr).join(", ")})`:`(${hr(O.type)}...)`;var O}).join(" | "),k=[];for(let P=1;P<o.length;P++){const O=a.parse(o[P],1+k.length);if(!O)return null;k.push(hr(O.type))}a.error(`Expected arguments of type ${D}, but found (${k.join(", ")}) instead.`)}return null}static register(o,a){jt.definitions=a;for(const d in a)o[d]=jt}}var os=jt;class Zd{constructor(o,a,d){this.type=tl,this.locale=d,this.caseSensitive=o,this.diacriticSensitive=a}static parse(o,a){if(2!==o.length)return a.error("Expected one argument.");const d=o[1];if("object"!=typeof d||Array.isArray(d))return a.error("Collator options argument must be an object.");const f=a.parse(void 0!==d["case-sensitive"]&&d["case-sensitive"],1,Ji);if(!f)return null;const g=a.parse(void 0!==d["diacritic-sensitive"]&&d["diacritic-sensitive"],1,Ji);if(!g)return null;let v=null;return d.locale&&(v=a.parse(d.locale,1,on),!v)?null:new Zd(f,g,v)}evaluate(o){return new sc(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}const Ms=8192;function Yu(l,o){l[0]=Math.min(l[0],o[0]),l[1]=Math.min(l[1],o[1]),l[2]=Math.max(l[2],o[0]),l[3]=Math.max(l[3],o[1])}function Yd(l,o){return!(l[0]<=o[0]||l[2]>=o[2]||l[1]<=o[1]||l[3]>=o[3])}function Kh(l,o){const a=(180+l[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,f=Math.pow(2,o.z);return[Math.round(a*f*Ms),Math.round(d*f*Ms)]}function ed(l,o,a){const d=l[0]-o[0],f=l[1]-o[1],g=l[0]-a[0],v=l[1]-a[1];return d*v-g*f==0&&d*g<=0&&f*v<=0}function vl(l,o){let a=!1;for(let v=0,x=o.length;v<x;v++){const M=o[v];for(let D=0,k=M.length;D<k-1;D++){if(ed(l,M[D],M[D+1]))return!1;(f=M[D])[1]>(d=l)[1]!=(g=M[D+1])[1]>d[1]&&d[0]<(g[0]-f[0])*(d[1]-f[1])/(g[1]-f[1])+f[0]&&(a=!a)}}var d,f,g;return a}function lc(l,o){for(let a=0;a<o.length;a++)if(vl(l,o[a]))return!0;return!1}function Qh(l,o,a,d){const f=d[0]-a[0],g=d[1]-a[1],v=(l[0]-a[0])*g-f*(l[1]-a[1]),x=(o[0]-a[0])*g-f*(o[1]-a[1]);return v>0&&x<0||v<0&&x>0}function zi(l,o,a){for(const D of a)for(let k=0;k<D.length-1;++k)if((x=[(v=D[k+1])[0]-(g=D[k])[0],v[1]-g[1]])[0]*(M=[(f=o)[0]-(d=l)[0],f[1]-d[1]])[1]-x[1]*M[0]!=0&&Qh(d,f,g,v)&&Qh(g,v,d,f))return!0;var d,f,g,v,x,M;return!1}function Xd(l,o){for(let a=0;a<l.length;++a)if(!vl(l[a],o))return!1;for(let a=0;a<l.length-1;++a)if(zi(l[a],l[a+1],o))return!1;return!0}function cf(l,o){for(let a=0;a<o.length;a++)if(Xd(l,o[a]))return!0;return!1}function Br(l,o,a){const d=[];for(let f=0;f<l.length;f++){const g=[];for(let v=0;v<l[f].length;v++){const x=Kh(l[f][v],a);Yu(o,x),g.push(x)}d.push(g)}return d}function Kd(l,o,a){const d=[];for(let f=0;f<l.length;f++){const g=Br(l[f],o,a);d.push(g)}return d}function Jh(l,o,a,d){if(l[0]<a[0]||l[0]>a[2]){const f=.5*d;let g=l[0]-a[0]>f?-d:a[0]-l[0]>f?d:0;0===g&&(g=l[0]-a[2]>f?-d:a[2]-l[0]>f?d:0),l[0]+=g}Yu(o,l)}function Wo(l,o,a,d){const f=Math.pow(2,d.z)*Ms,g=[d.x*Ms,d.y*Ms],v=[];if(!l)return v;for(const x of l)for(const M of x){const D=[M.x+g[0],M.y+g[1]];Jh(D,o,a,f),v.push(D)}return v}function Ds(l,o,a,d){const f=Math.pow(2,d.z)*Ms,g=[d.x*Ms,d.y*Ms],v=[];if(!l)return v;for(const M of l){const D=[];for(const k of M){const P=[k.x+g[0],k.y+g[1]];Yu(o,P),D.push(P)}v.push(D)}if(o[2]-o[0]<=f/2){(x=o)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const M of v)for(const D of M)Jh(D,o,a,f)}var x;return v}class td{constructor(o,a){this.type=Ji,this.geojson=o,this.geometries=a}static parse(o,a){if(2!==o.length)return a.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Po(o[1])){const d=o[1];if("FeatureCollection"===d.type)for(let f=0;f<d.features.length;++f){const g=d.features[f].geometry.type;if("Polygon"===g||"MultiPolygon"===g)return new td(d,d.features[f].geometry)}else if("Feature"===d.type){const f=d.geometry.type;if("Polygon"===f||"MultiPolygon"===f)return new td(d,d.geometry)}else if("Polygon"===d.type||"MultiPolygon"===d.type)return new td(d,d)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(null!=o.geometry()&&null!=o.canonicalID()){if("Point"===o.geometryType())return function(a,d){const f=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=a.canonicalID();if(!v)return!1;if("Polygon"===d.type){const x=Br(d.coordinates,g,v),M=Wo(a.geometry(),f,g,v);if(!Yd(f,g))return!1;for(const D of M)if(!vl(D,x))return!1}if("MultiPolygon"===d.type){const x=Kd(d.coordinates,g,v),M=Wo(a.geometry(),f,g,v);if(!Yd(f,g))return!1;for(const D of M)if(!lc(D,x))return!1}return!0}(o,this.geometries);if("LineString"===o.geometryType())return function(a,d){const f=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=a.canonicalID();if(!v)return!1;if("Polygon"===d.type){const x=Br(d.coordinates,g,v),M=Ds(a.geometry(),f,g,v);if(!Yd(f,g))return!1;for(const D of M)if(!Xd(D,x))return!1}if("MultiPolygon"===d.type){const x=Kd(d.coordinates,g,v),M=Ds(a.geometry(),f,g,v);if(!Yd(f,g))return!1;for(const D of M)if(!cf(D,x))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Xu=td;function uo(l){if(l instanceof os&&("get"===l.name&&1===l.args.length||"feature-state"===l.name||"has"===l.name&&1===l.args.length||"properties"===l.name||"geometry-type"===l.name||"id"===l.name||/^filter-/.test(l.name))||l instanceof Xu)return!1;let o=!0;return l.eachChild(a=>{o&&!uo(a)&&(o=!1)}),o}function Bn(l){if(l instanceof os&&"feature-state"===l.name)return!1;let o=!0;return l.eachChild(a=>{o&&!Bn(a)&&(o=!1)}),o}function cc(l,o){if(l instanceof os&&o.indexOf(l.name)>=0)return!1;let a=!0;return l.eachChild(d=>{a&&!cc(d,o)&&(a=!1)}),a}class Ku{constructor(o,a){this.type=a.type,this.name=o,this.boundExpression=a}static parse(o,a){if(2!==o.length||"string"!=typeof o[1])return a.error("'var' expression requires exactly one string literal argument.");const d=o[1];return a.scope.has(d)?new Ku(d,a.scope.get(d)):a.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var ja=Ku;class Nn{constructor(o,a=[],d,f=new Wh,g=[]){this.registry=o,this.path=a,this.key=a.map(v=>`[${v}]`).join(""),this.scope=f,this.errors=g,this.expectedType=d}parse(o,a,d,f,g={}){return a?this.concat(a,d,f)._parse(o,g):this._parse(o,g)}_parse(o,a){function d(f,g,v){return"assert"===v?new ta(g,[f]):"coerce"===v?new ac(g,[f]):f}if(null!==o&&"string"!=typeof o&&"boolean"!=typeof o&&"number"!=typeof o||(o=["literal",o]),Array.isArray(o)){if(0===o.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=o[0];if("string"!=typeof f)return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[f];if(g){let v=g.parse(o,this);if(!v)return null;if(this.expectedType){const x=this.expectedType,M=v.type;if("string"!==x.kind&&"number"!==x.kind&&"boolean"!==x.kind&&"object"!==x.kind&&"array"!==x.kind||"value"!==M.kind)if("color"!==x.kind&&"formatted"!==x.kind&&"resolvedImage"!==x.kind||"value"!==M.kind&&"string"!==M.kind){if(this.checkSubtype(x,M))return null}else v=d(v,x,a.typeAnnotation||"coerce");else v=d(v,x,a.typeAnnotation||"assert")}if(!(v instanceof Gd)&&"resolvedImage"!==v.type.kind&&Dn(v)){const x=new Wd;try{v=new Gd(v.type,v.evaluate(x))}catch(M){return this.error(M.message),null}}return v}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===o?"'undefined' value invalid. Use null instead.":"object"==typeof o?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,a,d){const f="number"==typeof o?this.path.concat(o):this.path,g=d?this.scope.concat(d):this.scope;return new Nn(this.registry,f,a||null,g,this.errors)}error(o,...a){const d=`${this.key}${a.map(f=>`[${f}]`).join("")}`;this.errors.push(new xs(d,o))}checkSubtype(o,a){const d=ft(o,a);return d&&this.error(d),d}}var _a=Nn;function Dn(l){if(l instanceof ja)return Dn(l.boundExpression);if(l instanceof os&&"error"===l.name||l instanceof Zd||l instanceof Xu)return!1;const o=l instanceof ac||l instanceof ta;let a=!0;return l.eachChild(d=>{a=o?a&&Dn(d):a&&d instanceof Gd}),!!a&&uo(l)&&cc(l,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function dc(l,o){const a=l.length-1;let d,f,g=0,v=a,x=0;for(;g<=v;)if(x=Math.floor((g+v)/2),d=l[x],f=l[x+1],d<=o){if(x===a||o<f)return x;g=x+1}else{if(!(d>o))throw new co("Input is not a number.");v=x-1}return 0}class Qd{constructor(o,a,d){this.type=o,this.input=a,this.labels=[],this.outputs=[];for(const[f,g]of d)this.labels.push(f),this.outputs.push(g)}static parse(o,a){if(o.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return a.error("Expected an even number of arguments.");const d=a.parse(o[1],1,wt);if(!d)return null;const f=[];let g=null;a.expectedType&&"value"!==a.expectedType.kind&&(g=a.expectedType);for(let v=1;v<o.length;v+=2){const x=1===v?-1/0:o[v],M=o[v+1],D=v,k=v+1;if("number"!=typeof x)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(f.length&&f[f.length-1][0]>=x)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const P=a.parse(M,k,g);if(!P)return null;g=g||P.type,f.push([x,P])}return new Qd(g,d,f)}evaluate(o){const a=this.labels,d=this.outputs;if(1===a.length)return d[0].evaluate(o);const f=this.input.evaluate(o);if(f<=a[0])return d[0].evaluate(o);const g=a.length;return f>=a[g-1]?d[g-1].evaluate(o):d[dc(a,f)].evaluate(o)}eachChild(o){o(this.input);for(const a of this.outputs)o(a)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&o.push(this.labels[a]),o.push(this.outputs[a].serialize());return o}}var ia=Qd;function hn(l,o,a){return l*(1-a)+o*a}function nl(l,o,a){return l.map((d,f)=>hn(d,o[f],a))}var wi=Object.freeze({__proto__:null,number:hn,color:function(l,o,a){return new $n(hn(l.r,o.r,a),hn(l.g,o.g,a),hn(l.b,o.b,a),hn(l.a,o.a,a))},array:nl});const eu=4/29,Ut=6/29,id=3*Ut*Ut,ep=Math.PI/180,Xe=180/Math.PI;function ho(l){return l>.008856451679035631?Math.pow(l,1/3):l/id+eu}function Qn(l){return l>Ut?l*l*l:id*(l-eu)}function bo(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function Zr(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function ol(l){const o=Zr(l.r),a=Zr(l.g),d=Zr(l.b),f=ho((.4124564*o+.3575761*a+.1804375*d)/.95047),g=ho((.2126729*o+.7151522*a+.072175*d)/1);return{l:116*g-16,a:500*(f-g),b:200*(g-ho((.0193339*o+.119192*a+.9503041*d)/1.08883)),alpha:l.a}}function Zo(l){let o=(l.l+16)/116,a=isNaN(l.a)?o:o+l.a/500,d=isNaN(l.b)?o:o-l.b/200;return o=1*Qn(o),a=.95047*Qn(a),d=1.08883*Qn(d),new $n(bo(3.2404542*a-1.5371385*o-.4985314*d),bo(-.969266*a+1.8760108*o+.041556*d),bo(.0556434*a-.2040259*o+1.0572252*d),l.alpha)}function Ss(l,o,a){const d=o-l;return l+a*(d>180||d<-180?d-360*Math.round(d/360):d)}const qt={forward:ol,reverse:Zo,interpolate:function(l,o,a){return{l:hn(l.l,o.l,a),a:hn(l.a,o.a,a),b:hn(l.b,o.b,a),alpha:hn(l.alpha,o.alpha,a)}}},Ui={forward:function(l){const{l:o,a,b:d}=ol(l),f=Math.atan2(d,a)*Xe;return{h:f<0?f+360:f,c:Math.sqrt(a*a+d*d),l:o,alpha:l.a}},reverse:function(l){const o=l.h*ep,a=l.c;return Zo({l:l.l,a:Math.cos(o)*a,b:Math.sin(o)*a,alpha:l.alpha})},interpolate:function(l,o,a){return{h:Ss(l.h,o.h,a),c:hn(l.c,o.c,a),l:hn(l.l,o.l,a),alpha:hn(l.alpha,o.alpha,a)}}};var Mr=Object.freeze({__proto__:null,lab:qt,hcl:Ui});class eo{constructor(o,a,d,f,g){this.type=o,this.operator=a,this.interpolation=d,this.input=f,this.labels=[],this.outputs=[];for(const[v,x]of g)this.labels.push(v),this.outputs.push(x)}static interpolationFactor(o,a,d,f){let g=0;if("exponential"===o.name)g=na(a,o.base,d,f);else if("linear"===o.name)g=na(a,1,d,f);else if("cubic-bezier"===o.name){const v=o.controlPoints;g=new We(v[0],v[1],v[2],v[3]).solve(na(a,1,d,f))}return g}static parse(o,a){let[d,f,g,...v]=o;if(!Array.isArray(f)||0===f.length)return a.error("Expected an interpolation type expression.",1);if("linear"===f[0])f={name:"linear"};else if("exponential"===f[0]){const D=f[1];if("number"!=typeof D)return a.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:D}}else{if("cubic-bezier"!==f[0])return a.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const D=f.slice(1);if(4!==D.length||D.some(k=>"number"!=typeof k||k<0||k>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:D}}}if(o.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(g=a.parse(g,2,wt),!g)return null;const x=[];let M=null;"interpolate-hcl"===d||"interpolate-lab"===d?M=Mn:a.expectedType&&"value"!==a.expectedType.kind&&(M=a.expectedType);for(let D=0;D<v.length;D+=2){const k=v[D],P=v[D+1],O=D+3,z=D+4;if("number"!=typeof k)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(x.length&&x[x.length-1][0]>=k)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const V=a.parse(P,z,M);if(!V)return null;M=M||V.type,x.push([k,V])}return"number"===M.kind||"color"===M.kind||"array"===M.kind&&"number"===M.itemType.kind&&"number"==typeof M.N?new eo(M,d,f,g,x):a.error(`Type ${hr(M)} is not interpolatable.`)}evaluate(o){const a=this.labels,d=this.outputs;if(1===a.length)return d[0].evaluate(o);const f=this.input.evaluate(o);if(f<=a[0])return d[0].evaluate(o);const g=a.length;if(f>=a[g-1])return d[g-1].evaluate(o);const v=dc(a,f),x=eo.interpolationFactor(this.interpolation,f,a[v],a[v+1]),M=d[v].evaluate(o),D=d[v+1].evaluate(o);return"interpolate"===this.operator?wi[this.type.kind.toLowerCase()](M,D,x):"interpolate-hcl"===this.operator?Ui.reverse(Ui.interpolate(Ui.forward(M),Ui.forward(D),x)):qt.reverse(qt.interpolate(qt.forward(M),qt.forward(D),x))}eachChild(o){o(this.input);for(const a of this.outputs)o(a)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,o,this.input.serialize()];for(let d=0;d<this.labels.length;d++)a.push(this.labels[d],this.outputs[d].serialize());return a}}function na(l,o,a,d){const f=d-a,g=l-a;return 0===f?0:1===o?g/f:(Math.pow(o,g)-1)/(Math.pow(o,f)-1)}var cr=eo;class ra{constructor(o,a){this.type=o,this.args=a}static parse(o,a){if(o.length<2)return a.error("Expectected at least one argument.");let d=null;const f=a.expectedType;f&&"value"!==f.kind&&(d=f);const g=[];for(const x of o.slice(1)){const M=a.parse(x,1+g.length,d,void 0,{typeAnnotation:"omit"});if(!M)return null;d=d||M.type,g.push(M)}const v=f&&g.some(x=>ft(f,x.type));return new ra(v?Qt:d,g)}evaluate(o){let a,d=null,f=0;for(const g of this.args){if(f++,d=g.evaluate(o),d&&d instanceof rs&&!d.available&&(a||(a=d),d=null,f===this.args.length))return a;if(null!==d)break}return d}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(a=>{o.push(a.serialize())}),o}}var Nr=ra;class bl{constructor(o,a){this.type=a.type,this.bindings=[].concat(o),this.result=a}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const a of this.bindings)o(a[1]);o(this.result)}static parse(o,a){if(o.length<4)return a.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const d=[];for(let g=1;g<o.length-1;g+=2){const v=o[g];if("string"!=typeof v)return a.error(`Expected string, but found ${typeof v} instead.`,g);if(/[^a-zA-Z0-9_]/.test(v))return a.error("Variable names must contain only alphanumeric characters or '_'.",g);const x=a.parse(o[g+1],g+1);if(!x)return null;d.push([v,x])}const f=a.parse(o[o.length-1],o.length-1,a.expectedType,d);return f?new bl(d,f):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[a,d]of this.bindings)o.push(a,d.serialize());return o.push(this.result.serialize()),o}}var uc=bl;class tn{constructor(o,a,d){this.type=o,this.index=a,this.input=d}static parse(o,a){if(3!==o.length)return a.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const d=a.parse(o[1],1,wt),f=a.parse(o[2],2,xi(a.expectedType||Qt));return d&&f?new tn(f.type.itemType,d,f):null}evaluate(o){const a=this.index.evaluate(o),d=this.input.evaluate(o);if(a<0)throw new co(`Array index out of bounds: ${a} < 0.`);if(a>=d.length)throw new co(`Array index out of bounds: ${a} > ${d.length-1}.`);if(a!==Math.floor(a))throw new co(`Array index must be an integer, but found ${a} instead.`);return d[a]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var nd=tn;class sl{constructor(o,a){this.type=Ji,this.needle=o,this.haystack=a}static parse(o,a){if(3!==o.length)return a.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const d=a.parse(o[1],1,Qt),f=a.parse(o[2],2,Qt);return d&&f?yl(d.type,[Ji,on,wt,vr,Qt])?new sl(d,f):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${hr(d.type)} instead`):null}evaluate(o){const a=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(null==d)return!1;if(!Ri(a,["boolean","string","number","null"]))throw new co(`Expected first argument to be of type boolean, string, number or null, but found ${hr(Cr(a))} instead.`);if(!Ri(d,["string","array"]))throw new co(`Expected second argument to be of type array or string, but found ${hr(Cr(d))} instead.`);return d.indexOf(a)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Qu=sl;class ya{constructor(o,a,d){this.type=wt,this.needle=o,this.haystack=a,this.fromIndex=d}static parse(o,a){if(o.length<=2||o.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const d=a.parse(o[1],1,Qt),f=a.parse(o[2],2,Qt);if(!d||!f)return null;if(!yl(d.type,[Ji,on,wt,vr,Qt]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${hr(d.type)} instead`);if(4===o.length){const g=a.parse(o[3],3,wt);return g?new ya(d,f,g):null}return new ya(d,f)}evaluate(o){const a=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!Ri(a,["boolean","string","number","null"]))throw new co(`Expected first argument to be of type boolean, string, number or null, but found ${hr(Cr(a))} instead.`);if(!Ri(d,["string","array"]))throw new co(`Expected second argument to be of type array or string, but found ${hr(Cr(d))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(o);return d.indexOf(a,f)}return d.indexOf(a)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var xo=ya;class al{constructor(o,a,d,f,g,v){this.inputType=o,this.type=a,this.input=d,this.cases=f,this.outputs=g,this.otherwise=v}static parse(o,a){if(o.length<5)return a.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return a.error("Expected an even number of arguments.");let d,f;a.expectedType&&"value"!==a.expectedType.kind&&(f=a.expectedType);const g={},v=[];for(let D=2;D<o.length-1;D+=2){let k=o[D];const P=o[D+1];Array.isArray(k)||(k=[k]);const O=a.concat(D);if(0===k.length)return O.error("Expected at least one branch label.");for(const V of k){if("number"!=typeof V&&"string"!=typeof V)return O.error("Branch labels must be numbers or strings.");if("number"==typeof V&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof V&&Math.floor(V)!==V)return O.error("Numeric branch labels must be integer values.");if(d){if(O.checkSubtype(d,Cr(V)))return null}else d=Cr(V);if(void 0!==g[String(V)])return O.error("Branch labels must be unique.");g[String(V)]=v.length}const z=a.parse(P,D,f);if(!z)return null;f=f||z.type,v.push(z)}const x=a.parse(o[1],1,Qt);if(!x)return null;const M=a.parse(o[o.length-1],o.length-1,f);return M?"value"!==x.type.kind&&a.concat(1).checkSubtype(d,x.type)?null:new al(d,f,x,g,v,M):null}evaluate(o){const a=this.input.evaluate(o);return(Cr(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),d=[],f={};for(const v of a){const x=f[this.cases[v]];void 0===x?(f[this.cases[v]]=d.length,d.push([this.cases[v],[v]])):d[x][1].push(v)}const g=v=>"number"===this.inputType.kind?Number(v):v;for(const[v,x]of d)o.push(1===x.length?g(x[0]):x.map(g)),o.push(this.outputs[v].serialize());return o.push(this.otherwise.serialize()),o}}var xl=al;class ss{constructor(o,a,d){this.type=o,this.branches=a,this.otherwise=d}static parse(o,a){if(o.length<4)return a.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return a.error("Expected an odd number of arguments.");let d;a.expectedType&&"value"!==a.expectedType.kind&&(d=a.expectedType);const f=[];for(let v=1;v<o.length-1;v+=2){const x=a.parse(o[v],v,Ji);if(!x)return null;const M=a.parse(o[v+1],v+1,d);if(!M)return null;f.push([x,M]),d=d||M.type}const g=a.parse(o[o.length-1],o.length-1,d);return g?new ss(d,f,g):null}evaluate(o){for(const[a,d]of this.branches)if(a.evaluate(o))return d.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[a,d]of this.branches)o(a),o(d);o(this.otherwise)}outputDefined(){return this.branches.every(([o,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(a=>{o.push(a.serialize())}),o}}var hc=ss;class pc{constructor(o,a,d,f){this.type=o,this.input=a,this.beginIndex=d,this.endIndex=f}static parse(o,a){if(o.length<=2||o.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const d=a.parse(o[1],1,Qt),f=a.parse(o[2],2,wt);if(!d||!f)return null;if(!yl(d.type,[xi(Qt),on,Qt]))return a.error(`Expected first argument to be of type array or string, but found ${hr(d.type)} instead`);if(4===o.length){const g=a.parse(o[3],3,wt);return g?new pc(d.type,d,f,g):null}return new pc(d.type,d,f)}evaluate(o){const a=this.input.evaluate(o),d=this.beginIndex.evaluate(o);if(!Ri(a,["string","array"]))throw new co(`Expected first argument to be of type array or string, but found ${hr(Cr(a))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(o);return a.slice(d,f)}return a.slice(d)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var dr=pc;function Ju(l,o){return"=="===l||"!="===l?"boolean"===o.kind||"string"===o.kind||"number"===o.kind||"null"===o.kind||"value"===o.kind:"string"===o.kind||"number"===o.kind||"value"===o.kind}function eh(l,o,a,d){return 0===d.compare(o,a)}function Ua(l,o,a){const d="=="!==l&&"!="!==l;return class bB{constructor(g,v,x){this.type=Ji,this.lhs=g,this.rhs=v,this.collator=x,this.hasUntypedArgument="value"===g.type.kind||"value"===v.type.kind}static parse(g,v){if(3!==g.length&&4!==g.length)return v.error("Expected two or three arguments.");const x=g[0];let M=v.parse(g[1],1,Qt);if(!M)return null;if(!Ju(x,M.type))return v.concat(1).error(`"${x}" comparisons are not supported for type '${hr(M.type)}'.`);let D=v.parse(g[2],2,Qt);if(!D)return null;if(!Ju(x,D.type))return v.concat(2).error(`"${x}" comparisons are not supported for type '${hr(D.type)}'.`);if(M.type.kind!==D.type.kind&&"value"!==M.type.kind&&"value"!==D.type.kind)return v.error(`Cannot compare types '${hr(M.type)}' and '${hr(D.type)}'.`);d&&("value"===M.type.kind&&"value"!==D.type.kind?M=new ta(D.type,[M]):"value"!==M.type.kind&&"value"===D.type.kind&&(D=new ta(M.type,[D])));let k=null;if(4===g.length){if("string"!==M.type.kind&&"string"!==D.type.kind&&"value"!==M.type.kind&&"value"!==D.type.kind)return v.error("Cannot use collator to compare non-string types.");if(k=v.parse(g[3],3,tl),!k)return null}return new bB(M,D,k)}evaluate(g){const v=this.lhs.evaluate(g),x=this.rhs.evaluate(g);if(d&&this.hasUntypedArgument){const M=Cr(v),D=Cr(x);if(M.kind!==D.kind||"string"!==M.kind&&"number"!==M.kind)throw new co(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${M.kind}, ${D.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const M=Cr(v),D=Cr(x);if("string"!==M.kind||"string"!==D.kind)return o(g,v,x)}return this.collator?a(g,v,x,this.collator.evaluate(g)):o(g,v,x)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[l];return this.eachChild(v=>{g.push(v.serialize())}),g}}}const tu=Ua("==",function(l,o,a){return o===a},eh),wl=Ua("!=",function(l,o,a){return o!==a},function(l,o,a,d){return!eh(0,o,a,d)}),iu=Ua("<",function(l,o,a){return o<a},function(l,o,a,d){return d.compare(o,a)<0}),va=Ua(">",function(l,o,a){return o>a},function(l,o,a,d){return d.compare(o,a)>0}),wo=Ua("<=",function(l,o,a){return o<=a},function(l,o,a,d){return d.compare(o,a)<=0}),tp=Ua(">=",function(l,o,a){return o>=a},function(l,o,a,d){return d.compare(o,a)>=0});class Co{constructor(o,a,d,f,g,v){this.type=on,this.number=o,this.locale=a,this.currency=d,this.unit=f,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(o,a){if(3!==o.length)return a.error("Expected two arguments.");const d=a.parse(o[1],1,wt);if(!d)return null;const f=o[2];if("object"!=typeof f||Array.isArray(f))return a.error("NumberFormat options argument must be an object.");let g=null;if(f.locale&&(g=a.parse(f.locale,1,on),!g))return null;let v=null;if(f.currency&&(v=a.parse(f.currency,1,on),!v))return null;let x=null;if(f.unit&&(x=a.parse(f.unit,1,on),!x))return null;let M=null;if(f["min-fraction-digits"]&&(M=a.parse(f["min-fraction-digits"],1,wt),!M))return null;let D=null;return f["max-fraction-digits"]&&(D=a.parse(f["max-fraction-digits"],1,wt),!D)?null:new Co(d,g,v,x,M,D)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class Es{constructor(o){this.type=wt,this.input=o}static parse(o,a){if(2!==o.length)return a.error(`Expected 1 argument, but found ${o.length-1} instead.`);const d=a.parse(o[1],1);return d?"array"!==d.type.kind&&"string"!==d.type.kind&&"value"!==d.type.kind?a.error(`Expected argument of type string or array, but found ${hr(d.type)} instead.`):new Es(d):null}evaluate(o){const a=this.input.evaluate(o);if("string"==typeof a||Array.isArray(a))return a.length;throw new co(`Expected value to be of type string or array, but found ${hr(Cr(a))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(a=>{o.push(a.serialize())}),o}}const nu={"==":tu,"!=":wl,">":va,"<":iu,">=":tp,"<=":wo,array:ta,at:nd,boolean:ta,case:hc,coalesce:Nr,collator:Zd,format:vo,image:jn,in:Qu,"index-of":xo,interpolate:cr,"interpolate-hcl":cr,"interpolate-lab":cr,length:Es,let:uc,literal:Gd,match:xl,number:ta,"number-format":Co,object:ta,slice:dr,step:ia,string:ta,"to-boolean":ac,"to-color":ac,"to-number":ac,"to-string":ac,var:ja,within:Xu};function fc(l,[o,a,d,f]){o=o.evaluate(l),a=a.evaluate(l),d=d.evaluate(l);const g=f?f.evaluate(l):1,v=Yh(o,a,d,g);if(v)throw new co(v);return new $n(o/255*g,a/255*g,d/255*g,g)}function mc(l,o){return l in o}function as(l,o){const a=o[l];return void 0===a?null:a}function Ha(l){return{type:l}}os.register(nu,{error:[{kind:"error"},[on],(l,[o])=>{throw new co(o.evaluate(l))}],typeof:[on,[Qt],(l,[o])=>hr(Cr(o.evaluate(l)))],"to-rgba":[xi(wt,4),[Mn],(l,[o])=>o.evaluate(l).toArray()],rgb:[Mn,[wt,wt,wt],fc],rgba:[Mn,[wt,wt,wt,wt],fc],has:{type:Ji,overloads:[[[on],(l,[o])=>mc(o.evaluate(l),l.properties())],[[on,ws],(l,[o,a])=>mc(o.evaluate(l),a.evaluate(l))]]},get:{type:Qt,overloads:[[[on],(l,[o])=>as(o.evaluate(l),l.properties())],[[on,ws],(l,[o,a])=>as(o.evaluate(l),a.evaluate(l))]]},"feature-state":[Qt,[on],(l,[o])=>as(o.evaluate(l),l.featureState||{})],properties:[ws,[],l=>l.properties()],"geometry-type":[on,[],l=>l.geometryType()],id:[Qt,[],l=>l.id()],zoom:[wt,[],l=>l.globals.zoom],pitch:[wt,[],l=>l.globals.pitch||0],"distance-from-center":[wt,[],l=>l.distanceFromCenter()],"heatmap-density":[wt,[],l=>l.globals.heatmapDensity||0],"line-progress":[wt,[],l=>l.globals.lineProgress||0],"sky-radial-progress":[wt,[],l=>l.globals.skyRadialProgress||0],accumulated:[Qt,[],l=>void 0===l.globals.accumulated?null:l.globals.accumulated],"+":[wt,Ha(wt),(l,o)=>{let a=0;for(const d of o)a+=d.evaluate(l);return a}],"*":[wt,Ha(wt),(l,o)=>{let a=1;for(const d of o)a*=d.evaluate(l);return a}],"-":{type:wt,overloads:[[[wt,wt],(l,[o,a])=>o.evaluate(l)-a.evaluate(l)],[[wt],(l,[o])=>-o.evaluate(l)]]},"/":[wt,[wt,wt],(l,[o,a])=>o.evaluate(l)/a.evaluate(l)],"%":[wt,[wt,wt],(l,[o,a])=>o.evaluate(l)%a.evaluate(l)],ln2:[wt,[],()=>Math.LN2],pi:[wt,[],()=>Math.PI],e:[wt,[],()=>Math.E],"^":[wt,[wt,wt],(l,[o,a])=>Math.pow(o.evaluate(l),a.evaluate(l))],sqrt:[wt,[wt],(l,[o])=>Math.sqrt(o.evaluate(l))],log10:[wt,[wt],(l,[o])=>Math.log(o.evaluate(l))/Math.LN10],ln:[wt,[wt],(l,[o])=>Math.log(o.evaluate(l))],log2:[wt,[wt],(l,[o])=>Math.log(o.evaluate(l))/Math.LN2],sin:[wt,[wt],(l,[o])=>Math.sin(o.evaluate(l))],cos:[wt,[wt],(l,[o])=>Math.cos(o.evaluate(l))],tan:[wt,[wt],(l,[o])=>Math.tan(o.evaluate(l))],asin:[wt,[wt],(l,[o])=>Math.asin(o.evaluate(l))],acos:[wt,[wt],(l,[o])=>Math.acos(o.evaluate(l))],atan:[wt,[wt],(l,[o])=>Math.atan(o.evaluate(l))],min:[wt,Ha(wt),(l,o)=>Math.min(...o.map(a=>a.evaluate(l)))],max:[wt,Ha(wt),(l,o)=>Math.max(...o.map(a=>a.evaluate(l)))],abs:[wt,[wt],(l,[o])=>Math.abs(o.evaluate(l))],round:[wt,[wt],(l,[o])=>{const a=o.evaluate(l);return a<0?-Math.round(-a):Math.round(a)}],floor:[wt,[wt],(l,[o])=>Math.floor(o.evaluate(l))],ceil:[wt,[wt],(l,[o])=>Math.ceil(o.evaluate(l))],"filter-==":[Ji,[on,Qt],(l,[o,a])=>l.properties()[o.value]===a.value],"filter-id-==":[Ji,[Qt],(l,[o])=>l.id()===o.value],"filter-type-==":[Ji,[on],(l,[o])=>l.geometryType()===o.value],"filter-<":[Ji,[on,Qt],(l,[o,a])=>{const d=l.properties()[o.value],f=a.value;return typeof d==typeof f&&d<f}],"filter-id-<":[Ji,[Qt],(l,[o])=>{const a=l.id(),d=o.value;return typeof a==typeof d&&a<d}],"filter->":[Ji,[on,Qt],(l,[o,a])=>{const d=l.properties()[o.value],f=a.value;return typeof d==typeof f&&d>f}],"filter-id->":[Ji,[Qt],(l,[o])=>{const a=l.id(),d=o.value;return typeof a==typeof d&&a>d}],"filter-<=":[Ji,[on,Qt],(l,[o,a])=>{const d=l.properties()[o.value],f=a.value;return typeof d==typeof f&&d<=f}],"filter-id-<=":[Ji,[Qt],(l,[o])=>{const a=l.id(),d=o.value;return typeof a==typeof d&&a<=d}],"filter->=":[Ji,[on,Qt],(l,[o,a])=>{const d=l.properties()[o.value],f=a.value;return typeof d==typeof f&&d>=f}],"filter-id->=":[Ji,[Qt],(l,[o])=>{const a=l.id(),d=o.value;return typeof a==typeof d&&a>=d}],"filter-has":[Ji,[Qt],(l,[o])=>o.value in l.properties()],"filter-has-id":[Ji,[],l=>null!==l.id()&&void 0!==l.id()],"filter-type-in":[Ji,[xi(on)],(l,[o])=>o.value.indexOf(l.geometryType())>=0],"filter-id-in":[Ji,[xi(Qt)],(l,[o])=>o.value.indexOf(l.id())>=0],"filter-in-small":[Ji,[on,xi(Qt)],(l,[o,a])=>a.value.indexOf(l.properties()[o.value])>=0],"filter-in-large":[Ji,[on,xi(Qt)],(l,[o,a])=>function(d,f,g,v){for(;g<=v;){const x=g+v>>1;if(f[x]===d)return!0;f[x]>d?v=x-1:g=x+1}return!1}(l.properties()[o.value],a.value,0,a.value.length-1)],all:{type:Ji,overloads:[[[Ji,Ji],(l,[o,a])=>o.evaluate(l)&&a.evaluate(l)],[Ha(Ji),(l,o)=>{for(const a of o)if(!a.evaluate(l))return!1;return!0}]]},any:{type:Ji,overloads:[[[Ji,Ji],(l,[o,a])=>o.evaluate(l)||a.evaluate(l)],[Ha(Ji),(l,o)=>{for(const a of o)if(a.evaluate(l))return!0;return!1}]]},"!":[Ji,[Ji],(l,[o])=>!o.evaluate(l)],"is-supported-script":[Ji,[on],(l,[o])=>{const a=l.globals&&l.globals.isSupportedScript;return!a||a(o.evaluate(l))}],upcase:[on,[on],(l,[o])=>o.evaluate(l).toUpperCase()],downcase:[on,[on],(l,[o])=>o.evaluate(l).toLowerCase()],concat:[on,Ha(Qt),(l,o)=>o.map(a=>$d(a.evaluate(l))).join("")],"resolved-locale":[on,[tl],(l,[o])=>o.evaluate(l).resolvedLocale()]});var ru=nu;function ip(l){return{result:"success",value:l}}function gc(l){return{result:"error",value:l}}function oa(l){return"data-driven"===l["property-type"]||"cross-faded-data-driven"===l["property-type"]}function np(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function rp(l){return!!l.expression&&l.expression.interpolated}function zn(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":null===l?"null":typeof l}function ou(l){return"object"==typeof l&&null!==l&&!Array.isArray(l)}function df(l){return l}function su(l,o){const a="color"===o.type,d=l.stops&&"object"==typeof l.stops[0][0],f=d||!(d||void 0!==l.property),g=l.type||(rp(o)?"exponential":"interval");if(a&&((l=ns({},l)).stops&&(l.stops=l.stops.map(D=>[D[0],$n.parse(D[1])])),l.default=$n.parse(l.default?l.default:o.default)),l.colorSpace&&"rgb"!==l.colorSpace&&!Mr[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let v,x,M;if("exponential"===g)v=op;else if("interval"===g)v=Cl;else if("categorical"===g){v=Hm,x=Object.create(null);for(const D of l.stops)x[D[0]]=D[1];M=typeof l.stops[0][0]}else{if("identity"!==g)throw new Error(`Unknown function type "${g}"`);v=ls}if(d){const D={},k=[];for(let z=0;z<l.stops.length;z++){const V=l.stops[z],K=V[0].zoom;void 0===D[K]&&(D[K]={zoom:K,type:l.type,property:l.property,default:l.default,stops:[]},k.push(K)),D[K].stops.push([V[0].value,V[1]])}const P=[];for(const z of k)P.push([D[z].zoom,su(D[z],o)]);const O={name:"linear"};return{kind:"composite",interpolationType:O,interpolationFactor:cr.interpolationFactor.bind(void 0,O),zoomStops:P.map(z=>z[0]),evaluate:({zoom:z},V)=>op({stops:P,base:l.base},o,z).evaluate(z,V)}}if(f){const D="exponential"===g?{name:"exponential",base:void 0!==l.base?l.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:cr.interpolationFactor.bind(void 0,D),zoomStops:l.stops.map(k=>k[0]),evaluate:({zoom:k})=>v(l,o,k,x,M)}}return{kind:"source",evaluate(D,k){const P=k&&k.properties?k.properties[l.property]:void 0;return void 0===P?rd(l.default,o.default):v(l,o,P,x,M)}}}function rd(l,o,a){return void 0!==l?l:void 0!==o?o:void 0!==a?a:void 0}function Hm(l,o,a,d,f){return rd(typeof a===f?d[a]:void 0,l.default,o.default)}function Cl(l,o,a){if("number"!==zn(a))return rd(l.default,o.default);const d=l.stops.length;if(1===d||a<=l.stops[0][0])return l.stops[0][1];if(a>=l.stops[d-1][0])return l.stops[d-1][1];const f=dc(l.stops.map(g=>g[0]),a);return l.stops[f][1]}function op(l,o,a){const d=void 0!==l.base?l.base:1;if("number"!==zn(a))return rd(l.default,o.default);const f=l.stops.length;if(1===f||a<=l.stops[0][0])return l.stops[0][1];if(a>=l.stops[f-1][0])return l.stops[f-1][1];const g=dc(l.stops.map(k=>k[0]),a),v=function(k,P,O,z){const V=z-O,K=k-O;return 0===V?0:1===P?K/V:(Math.pow(P,K)-1)/(Math.pow(P,V)-1)}(a,d,l.stops[g][0],l.stops[g+1][0]),x=l.stops[g][1],M=l.stops[g+1][1];let D=wi[o.type]||df;if(l.colorSpace&&"rgb"!==l.colorSpace){const k=Mr[l.colorSpace];D=(P,O)=>k.reverse(k.interpolate(k.forward(P),k.forward(O),v))}return"function"==typeof x.evaluate?{evaluate(...k){const P=x.evaluate.apply(void 0,k),O=M.evaluate.apply(void 0,k);if(void 0!==P&&void 0!==O)return D(P,O,v)}}:D(x,M,v)}function ls(l,o,a){return"color"===o.type?a=$n.parse(a):"formatted"===o.type?a=Cs.fromString(a.toString()):"resolvedImage"===o.type?a=rs.fromString(a.toString()):zn(a)===o.type||"enum"===o.type&&o.values[a]||(a=void 0),rd(a,l.default,o.default)}class Ml{constructor(o,a){var d;this.expression=o,this._warningHistory={},this._evaluator=new Wd,this._defaultValue=a?"color"===(d=a).type&&(ou(d.default)||Array.isArray(d.default))?new $n(0,0,0,0):"color"===d.type?$n.parse(d.default)||null:void 0===d.default?null:d.default:null,this._enumValues=a&&"enum"===a.type?a.values:null}evaluateWithoutErrorHandling(o,a,d,f,g,v,x,M){return this._evaluator.globals=o,this._evaluator.feature=a,this._evaluator.featureState=d,this._evaluator.canonical=f||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=M||null,this.expression.evaluate(this._evaluator)}evaluate(o,a,d,f,g,v,x,M){this._evaluator.globals=o,this._evaluator.feature=a||null,this._evaluator.featureState=d||null,this._evaluator.canonical=f||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=M||null;try{const D=this.expression.evaluate(this._evaluator);if(null==D||"number"==typeof D&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new co(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function th(l){return Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in ru}function Dl(l,o){const a=new _a(ru,[],o?function(f){const g={color:Mn,string:on,number:wt,enum:on,boolean:Ji,formatted:oc,resolvedImage:en};return"array"===f.type?xi(g[f.value]||Qt,f.length):g[f.type]}(o):void 0),d=a.parse(l,void 0,void 0,void 0,o&&"string"===o.type?{typeAnnotation:"coerce"}:void 0);return d?ip(new Ml(d,o)):gc(a.errors)}class od{constructor(o,a){this.kind=o,this._styleExpression=a,this.isStateDependent="constant"!==o&&!Bn(a.expression)}evaluateWithoutErrorHandling(o,a,d,f,g,v){return this._styleExpression.evaluateWithoutErrorHandling(o,a,d,f,g,v)}evaluate(o,a,d,f,g,v){return this._styleExpression.evaluate(o,a,d,f,g,v)}}class au{constructor(o,a,d,f){this.kind=o,this.zoomStops=d,this._styleExpression=a,this.isStateDependent="camera"!==o&&!Bn(a.expression),this.interpolationType=f}evaluateWithoutErrorHandling(o,a,d,f,g,v){return this._styleExpression.evaluateWithoutErrorHandling(o,a,d,f,g,v)}evaluate(o,a,d,f,g,v){return this._styleExpression.evaluate(o,a,d,f,g,v)}interpolationFactor(o,a,d){return this.interpolationType?cr.interpolationFactor(this.interpolationType,o,a,d):0}}function sp(l,o){if("error"===(l=Dl(l,o)).result)return l;const a=l.value.expression,d=uo(a);if(!d&&!oa(o))return gc([new xs("","data expressions not supported")]);const f=cc(a,["zoom","pitch","distance-from-center"]);if(!f&&!np(o))return gc([new xs("","zoom expressions not supported")]);const g=Us(a);return g||f?g instanceof xs?gc([g]):g instanceof cr&&!rp(o)?gc([new xs("",'"interpolate" expressions cannot be used with this property')]):ip(g?new au(d?"camera":"composite",l.value,g.labels,g instanceof cr?g.interpolation:void 0):new od(d?"constant":"source",l.value)):gc([new xs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class sd{constructor(o,a){this._parameters=o,this._specification=a,ns(this,su(this._parameters,this._specification))}static deserialize(o){return new sd(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Us(l){let o=null;if(l instanceof uc)o=Us(l.result);else if(l instanceof Nr){for(const a of l.args)if(o=Us(a),o)break}else(l instanceof ia||l instanceof cr)&&l.input instanceof os&&"zoom"===l.input.name&&(o=l);return o instanceof xs||l.eachChild(a=>{const d=Us(a);d instanceof xs?o=d:!o&&d?o=new xs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&d&&o!==d&&(o=new xs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}class Bt{constructor(o,a,d,f){this.message=(o?`${o}: `:"")+d,f&&(this.identifier=f),null!=a&&a.__line__&&(this.line=a.__line__)}}function R(l){const o=l.key,a=l.value,d=l.valueSpec||{},f=l.objectElementValidators||{},g=l.style,v=l.styleSpec;let x=[];const M=zn(a);if("object"!==M)return[new Bt(o,a,`object expected, ${M} found`)];for(const D in a){const k=D.split(".")[0],P=d[k]||d["*"];let O;f[k]?O=f[k]:d[k]?O=Yo:f["*"]?O=f["*"]:d["*"]&&(O=Yo),O?x=x.concat(O({key:(o&&`${o}.`)+D,value:a[D],valueSpec:P,style:g,styleSpec:v,object:a,objectKey:D},a)):x.push(new Bt(o,a[D],`unknown property "${D}"`))}for(const D in d)f[D]||d[D].required&&void 0===d[D].default&&void 0===a[D]&&x.push(new Bt(o,a,`missing required property "${D}"`));return x}function F(l){const o=l.value,a=l.valueSpec,d=l.style,f=l.styleSpec,g=l.key,v=l.arrayElementValidator||Yo;if("array"!==zn(o))return[new Bt(g,o,`array expected, ${zn(o)} found`)];if(a.length&&o.length!==a.length)return[new Bt(g,o,`array length ${a.length} expected, length ${o.length} found`)];if(a["min-length"]&&o.length<a["min-length"])return[new Bt(g,o,`array length at least ${a["min-length"]} expected, length ${o.length} found`)];let x={type:a.value,values:a.values,minimum:a.minimum,maximum:a.maximum,function:void 0};f.$version<7&&(x.function=a.function),"object"===zn(a.value)&&(x=a.value);let M=[];for(let D=0;D<o.length;D++)M=M.concat(v({array:o,arrayIndex:D,value:o[D],valueSpec:x,style:d,styleSpec:f,key:`${g}[${D}]`}));return M}function Z(l){const o=l.key,a=l.value,d=l.valueSpec;let f=zn(a);if("number"===f&&a!=a&&(f="NaN"),"number"!==f)return[new Bt(o,a,`number expected, ${f} found`)];if("minimum"in d){let g=d.minimum;if("array"===zn(d.minimum)&&(g=d.minimum[l.arrayIndex]),a<g)return[new Bt(o,a,`${a} is less than the minimum value ${g}`)]}if("maximum"in d){let g=d.maximum;if("array"===zn(d.maximum)&&(g=d.maximum[l.arrayIndex]),a>g)return[new Bt(o,a,`${a} is greater than the maximum value ${g}`)]}return[]}function ve(l){const o=l.valueSpec,a=Rr(l.value.type);let d,f,g,v={};const x="categorical"!==a&&void 0===l.value.property,M=!x,D="array"===zn(l.value.stops)&&"array"===zn(l.value.stops[0])&&"object"===zn(l.value.stops[0][0]),k=R({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(z){if("identity"===a)return[new Bt(z.key,z.value,'identity function may not have a "stops" property')];let V=[];const K=z.value;return V=V.concat(F({key:z.key,value:K,valueSpec:z.valueSpec,style:z.style,styleSpec:z.styleSpec,arrayElementValidator:P})),"array"===zn(K)&&0===K.length&&V.push(new Bt(z.key,K,"array must have at least one stop")),V},default:function(z){return Yo({key:z.key,value:z.value,valueSpec:o,style:z.style,styleSpec:z.styleSpec})}}});return"identity"===a&&x&&k.push(new Bt(l.key,l.value,'missing required property "property"')),"identity"===a||l.value.stops||k.push(new Bt(l.key,l.value,'missing required property "stops"')),"exponential"===a&&l.valueSpec.expression&&!rp(l.valueSpec)&&k.push(new Bt(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(M&&!oa(l.valueSpec)?k.push(new Bt(l.key,l.value,"property functions not supported")):x&&!np(l.valueSpec)&&k.push(new Bt(l.key,l.value,"zoom functions not supported"))),"categorical"!==a&&!D||void 0!==l.value.property||k.push(new Bt(l.key,l.value,'"property" property is required')),k;function P(z){let V=[];const K=z.value,J=z.key;if("array"!==zn(K))return[new Bt(J,K,`array expected, ${zn(K)} found`)];if(2!==K.length)return[new Bt(J,K,`array length 2 expected, length ${K.length} found`)];if(D){if("object"!==zn(K[0]))return[new Bt(J,K,`object expected, ${zn(K[0])} found`)];if(void 0===K[0].zoom)return[new Bt(J,K,"object stop key must have zoom")];if(void 0===K[0].value)return[new Bt(J,K,"object stop key must have value")];const ue=Rr(K[0].zoom);if("number"!=typeof ue)return[new Bt(J,K[0].zoom,"stop zoom values must be numbers")];if(g&&g>ue)return[new Bt(J,K[0].zoom,"stop zoom values must appear in ascending order")];ue!==g&&(g=ue,f=void 0,v={}),V=V.concat(R({key:`${J}[0]`,value:K[0],valueSpec:{zoom:{}},style:z.style,styleSpec:z.styleSpec,objectElementValidators:{zoom:Z,value:O}}))}else V=V.concat(O({key:`${J}[0]`,value:K[0],valueSpec:{},style:z.style,styleSpec:z.styleSpec},K));return th(el(K[1]))?V.concat([new Bt(`${J}[1]`,K[1],"expressions are not allowed in function stops.")]):V.concat(Yo({key:`${J}[1]`,value:K[1],valueSpec:o,style:z.style,styleSpec:z.styleSpec}))}function O(z,V){const K=zn(z.value),J=Rr(z.value),ue=null!==z.value?z.value:V;if(d){if(K!==d)return[new Bt(z.key,ue,`${K} stop domain type must match previous stop domain type ${d}`)]}else d=K;if("number"!==K&&"string"!==K&&"boolean"!==K&&"number"!=typeof J&&"string"!=typeof J&&"boolean"!=typeof J)return[new Bt(z.key,ue,"stop domain value must be a number, string, or boolean")];if("number"!==K&&"categorical"!==a){let xe=`number expected, ${K} found`;return oa(o)&&void 0===a&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Bt(z.key,ue,xe)]}return"categorical"!==a||"number"!==K||"number"==typeof J&&isFinite(J)&&Math.floor(J)===J?"categorical"!==a&&"number"===K&&"number"==typeof J&&"number"==typeof f&&void 0!==f&&J<f?[new Bt(z.key,ue,"stop domain values must appear in ascending order")]:(f=J,"categorical"===a&&J in v?[new Bt(z.key,ue,"stop domain values must be unique")]:(v[J]=!0,[])):[new Bt(z.key,ue,`integer expected, found ${String(J)}`)]}}function et(l){const o=("property"===l.expressionContext?sp:Dl)(el(l.value),l.valueSpec);if("error"===o.result)return o.value.map(d=>new Bt(`${l.key}${d.key}`,l.value,d.message));const a=o.value.expression||o.value._styleExpression.expression;if("property"===l.expressionContext&&"text-font"===l.propertyKey&&!a.outputDefined())return[new Bt(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===l.expressionContext&&"layout"===l.propertyType&&!Bn(a))return[new Bt(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===l.expressionContext)return oi(a,l);if(l.expressionContext&&0===l.expressionContext.indexOf("cluster")){if(!cc(a,["zoom","feature-state"]))return[new Bt(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===l.expressionContext&&!uo(a))return[new Bt(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function oi(l,o){const a=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(o.valueSpec&&o.valueSpec.expression)for(const f of o.valueSpec.expression.parameters)a.delete(f);if(0===a.size)return[];const d=[];return l instanceof os&&a.has(l.name)?[new Bt(o.key,o.value,`["${l.name}"] expression is not supported in a filter for a ${o.object.type} layer with id: ${o.object.id}`)]:(l.eachChild(f=>{d.push(...oi(f,o))}),d)}function Dr(l){const o=l.key,a=l.value,d=l.valueSpec,f=[];return Array.isArray(d.values)?-1===d.values.indexOf(Rr(a))&&f.push(new Bt(o,a,`expected one of [${d.values.join(", ")}], ${JSON.stringify(a)} found`)):-1===Object.keys(d.values).indexOf(Rr(a))&&f.push(new Bt(o,a,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(a)} found`)),f}function Oo(l){if(!0===l||!1===l)return!0;if(!Array.isArray(l)||0===l.length)return!1;switch(l[0]){case"has":return l.length>=2&&"$id"!==l[1]&&"$type"!==l[1];case"in":return l.length>=3&&("string"!=typeof l[1]||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==l.length||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const o of l.slice(1))if(!Oo(o)&&"boolean"!=typeof o)return!1;return!0;default:return!0}}function to(l,o="fill"){if(null==l)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Oo(l)||(l=Gr(l));const a=l;let d=!0;try{d=function(D){if(!El(D))return D;let k=el(D);return Sl(k),k=po(k),k}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(a,null,2)}\n        `)}const f=Qe[`filter_${o}`],g=Dl(d,f);let v=null;if("error"===g.result)throw new Error(g.value.map(D=>`${D.key}: ${D.message}`).join(", "));v=(D,k,P)=>g.value.evaluate(D,k,{},P);let x=null,M=null;if(d!==a){const D=Dl(a,f);if("error"===D.result)throw new Error(D.value.map(k=>`${k.key}: ${k.message}`).join(", "));x=(k,P,O,z,V)=>D.value.evaluate(k,P,{},O,void 0,void 0,z,V),M=!uo(D.value.expression)}return{filter:v,dynamicFilter:x||void 0,needGeometry:X_(d),needFeature:!!M}}function po(l){if(!Array.isArray(l))return l;const o=function(a){if(uf.has(a[0]))for(let d=1;d<a.length;d++)if(El(a[d]))return!0;return a}(l);return!0===o?o:o.map(a=>po(a))}function Sl(l){let o=!1;const a=[];if("case"===l[0]){for(let d=1;d<l.length-1;d+=2)o=o||El(l[d]),a.push(l[d+1]);a.push(l[l.length-1])}else if("match"===l[0]){o=o||El(l[1]);for(let d=2;d<l.length-1;d+=2)a.push(l[d+1]);a.push(l[l.length-1])}else if("step"===l[0]){o=o||El(l[1]);for(let d=1;d<l.length-1;d+=2)a.push(l[d+1])}o&&(l.length=0,l.push("any",...a));for(let d=1;d<l.length;d++)Sl(l[d])}function El(l){if(!Array.isArray(l))return!1;if("pitch"===(o=l[0])||"distance-from-center"===o)return!0;var o;for(let a=1;a<l.length;a++)if(El(l[a]))return!0;return!1}const uf=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Y_(l,o){return l<o?-1:l>o?1:0}function X_(l){if(!Array.isArray(l))return!1;if("within"===l[0])return!0;for(let o=1;o<l.length;o++)if(X_(l[o]))return!0;return!1}function Gr(l){if(!l)return!0;const o=l[0];return l.length<=1?"any"!==o:"=="===o?hf(l[1],l[2],"=="):"!="===o?Sr(hf(l[1],l[2],"==")):"<"===o||">"===o||"<="===o||">="===o?hf(l[1],l[2],o):"any"===o?(a=l.slice(1),["any"].concat(a.map(Gr))):"all"===o?["all"].concat(l.slice(1).map(Gr)):"none"===o?["all"].concat(l.slice(1).map(Gr).map(Sr)):"in"===o?ap(l[1],l.slice(2)):"!in"===o?Sr(ap(l[1],l.slice(2))):"has"===o?_c(l[1]):"!has"===o?Sr(_c(l[1])):"within"!==o||l;var a}function hf(l,o,a){switch(l){case"$type":return[`filter-type-${a}`,o];case"$id":return[`filter-id-${a}`,o];default:return[`filter-${a}`,l,o]}}function ap(l,o){if(0===o.length)return!1;switch(l){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(a=>typeof a!=typeof o[0])?["filter-in-large",l,["literal",o.sort(Y_)]]:["filter-in-small",l,["literal",o]]}}function _c(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Sr(l){return["!",l]}function lu(l){return Oo(el(l.value))?et(ns({},l,{expressionContext:"filter",valueSpec:l.styleSpec[`filter_${l.layerType||"fill"}`]})):lp(l)}function lp(l){const o=l.value,a=l.key;if("array"!==zn(o))return[new Bt(a,o,`array expected, ${zn(o)} found`)];const d=l.styleSpec;let f,g=[];if(o.length<1)return[new Bt(a,o,"filter array must have at least 1 element")];switch(g=g.concat(Dr({key:`${a}[0]`,value:o[0],valueSpec:d.filter_operator,style:l.style,styleSpec:l.styleSpec})),Rr(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&"$type"===Rr(o[1])&&g.push(new Bt(a,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":3!==o.length&&g.push(new Bt(a,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(f=zn(o[1]),"string"!==f&&g.push(new Bt(`${a}[1]`,o[1],`string expected, ${f} found`)));for(let v=2;v<o.length;v++)f=zn(o[v]),"$type"===Rr(o[1])?g=g.concat(Dr({key:`${a}[${v}]`,value:o[v],valueSpec:d.geometry_type,style:l.style,styleSpec:l.styleSpec})):"string"!==f&&"number"!==f&&"boolean"!==f&&g.push(new Bt(`${a}[${v}]`,o[v],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let v=1;v<o.length;v++)g=g.concat(lp({key:`${a}[${v}]`,value:o[v],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":f=zn(o[1]),2!==o.length?g.push(new Bt(a,o,`filter array for "${o[0]}" operator must have 2 elements`)):"string"!==f&&g.push(new Bt(`${a}[1]`,o[1],`string expected, ${f} found`));break;case"within":f=zn(o[1]),2!==o.length?g.push(new Bt(a,o,`filter array for "${o[0]}" operator must have 2 elements`)):"object"!==f&&g.push(new Bt(`${a}[1]`,o[1],`object expected, ${f} found`))}return g}function ad(l,o){const a=l.key,d=l.style,f=l.styleSpec,g=l.value,v=l.objectKey,x=f[`${o}_${l.layerType}`];if(!x)return[];const M=v.match(/^(.*)-transition$/);if("paint"===o&&M&&x[M[1]]&&x[M[1]].transition)return Yo({key:a,value:g,valueSpec:f.transition,style:d,styleSpec:f});const D=l.valueSpec||x[v];if(!D)return[new Bt(a,g,`unknown property "${v}"`)];let k;if("string"===zn(g)&&oa(D)&&!D.tokens&&(k=/^{([^}]+)}$/.exec(g)))return[new Bt(a,g,`"${v}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(k[1])} }\`.`)];const P=[];return"symbol"===l.layerType&&("text-field"===v&&d&&!d.glyphs&&P.push(new Bt(a,g,'use of "text-field" requires a style "glyphs" property')),"text-font"===v&&ou(el(g))&&"identity"===Rr(g.type)&&P.push(new Bt(a,g,'"text-font" does not support identity functions'))),P.concat(Yo({key:l.key,value:g,valueSpec:D,style:d,styleSpec:f,expressionContext:"property",propertyType:o,propertyKey:v}))}function Hs(l){return ad(l,"paint")}function $m(l){return ad(l,"layout")}function ld(l){let o=[];const a=l.value,d=l.key,f=l.style,g=l.styleSpec;a.type||a.ref||o.push(new Bt(d,a,'either "type" or "ref" is required'));let v=Rr(a.type);const x=Rr(a.ref);if(a.id){const M=Rr(a.id);for(let D=0;D<l.arrayIndex;D++){const k=f.layers[D];Rr(k.id)===M&&o.push(new Bt(d,a.id,`duplicate layer id "${a.id}", previously used at line ${k.id.__line__}`))}}if("ref"in a){let M;["type","source","source-layer","filter","layout"].forEach(D=>{D in a&&o.push(new Bt(d,a[D],`"${D}" is prohibited for ref layers`))}),f.layers.forEach(D=>{Rr(D.id)===x&&(M=D)}),M?M.ref?o.push(new Bt(d,a.ref,"ref cannot reference another ref layer")):v=Rr(M.type):"string"==typeof x&&o.push(new Bt(d,a.ref,`ref layer "${x}" not found`))}else if("background"!==v&&"sky"!==v)if(a.source){const M=f.sources&&f.sources[a.source],D=M&&Rr(M.type);M?"vector"===D&&"raster"===v?o.push(new Bt(d,a.source,`layer "${a.id}" requires a raster source`)):"raster"===D&&"raster"!==v?o.push(new Bt(d,a.source,`layer "${a.id}" requires a vector source`)):"vector"!==D||a["source-layer"]?"raster-dem"===D&&"hillshade"!==v?o.push(new Bt(d,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==v||!a.paint||!a.paint["line-gradient"]&&!a.paint["line-trim-offset"]||"geojson"===D&&M.lineMetrics||o.push(new Bt(d,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Bt(d,a,`layer "${a.id}" must specify a "source-layer"`)):o.push(new Bt(d,a.source,`source "${a.source}" not found`))}else o.push(new Bt(d,a,'missing required property "source"'));return o=o.concat(R({key:d,value:a,valueSpec:g.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Yo({key:`${d}.type`,value:a.type,valueSpec:g.layer.type,style:l.style,styleSpec:l.styleSpec,object:a,objectKey:"type"}),filter:M=>lu(ns({layerType:v},M)),layout:M=>R({layer:a,key:M.key,value:M.value,valueSpec:{},style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":D=>$m(ns({layerType:v},D))}}),paint:M=>R({layer:a,key:M.key,value:M.value,valueSpec:{},style:M.style,styleSpec:M.styleSpec,objectElementValidators:{"*":D=>Hs(ns({layerType:v},D))}})}})),o}function cu(l){const o=l.value,a=l.key,d=zn(o);return"string"!==d?[new Bt(a,o,`string expected, ${d} found`)]:[]}const $a={promoteId:function({key:l,value:o}){if("string"===zn(o))return cu({key:l,value:o});{const a=[];for(const d in o)a.push(...cu({key:`${l}.${d}`,value:o[d]}));return a}}};function pf(l){const o=l.value,a=l.key,d=l.styleSpec,f=l.style;if(!o.type)return[new Bt(a,o,'"type" is required')];const g=Rr(o.type);let v;switch(g){case"vector":case"raster":case"raster-dem":return v=R({key:a,value:o,valueSpec:d[`source_${g.replace("-","_")}`],style:l.style,styleSpec:d,objectElementValidators:$a}),v;case"geojson":if(v=R({key:a,value:o,valueSpec:d.source_geojson,style:f,styleSpec:d,objectElementValidators:$a}),o.cluster)for(const x in o.clusterProperties){const[M,D]=o.clusterProperties[x],k="string"==typeof M?[M,["accumulated"],["get",x]]:M;v.push(...et({key:`${a}.${x}.map`,value:D,expressionContext:"cluster-map"})),v.push(...et({key:`${a}.${x}.reduce`,value:k,expressionContext:"cluster-reduce"}))}return v;case"video":return R({key:a,value:o,valueSpec:d.source_video,style:f,styleSpec:d});case"image":return R({key:a,value:o,valueSpec:d.source_image,style:f,styleSpec:d});case"canvas":return[new Bt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Dr({key:`${a}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,styleSpec:d})}}function cp(l){const o=l.value,a=l.styleSpec,d=a.light,f=l.style;let g=[];const v=zn(o);if(void 0===o)return g;if("object"!==v)return g=g.concat([new Bt("light",o,`object expected, ${v} found`)]),g;for(const x in o){const M=x.match(/^(.*)-transition$/);g=g.concat(M&&d[M[1]]&&d[M[1]].transition?Yo({key:x,value:o[x],valueSpec:a.transition,style:f,styleSpec:a}):d[x]?Yo({key:x,value:o[x],valueSpec:d[x],style:f,styleSpec:a}):[new Bt(x,o[x],`unknown property "${x}"`)])}return g}function Xi(l){const o=l.value,a=l.key,d=l.style,f=l.styleSpec,g=f.terrain;let v=[];const x=zn(o);if(void 0===o)return v;if("object"!==x)return v=v.concat([new Bt("terrain",o,`object expected, ${x} found`)]),v;for(const M in o){const D=M.match(/^(.*)-transition$/);v=v.concat(D&&g[D[1]]&&g[D[1]].transition?Yo({key:M,value:o[M],valueSpec:f.transition,style:d,styleSpec:f}):g[M]?Yo({key:M,value:o[M],valueSpec:g[M],style:d,styleSpec:f}):[new Bt(M,o[M],`unknown property "${M}"`)])}if(o.source){const M=d.sources&&d.sources[o.source],D=M&&Rr(M.type);M?"raster-dem"!==D&&v.push(new Bt(a,o.source,`terrain cannot be used with a source of type ${String(D)}, it only be used with a "raster-dem" source type`)):v.push(new Bt(a,o.source,`source "${o.source}" not found`))}else v.push(new Bt(a,o,'terrain is missing required property "source"'));return v}function ff(l){const o=l.value,a=l.style,d=l.styleSpec,f=d.fog;let g=[];const v=zn(o);if(void 0===o)return g;if("object"!==v)return g=g.concat([new Bt("fog",o,`object expected, ${v} found`)]),g;for(const x in o){const M=x.match(/^(.*)-transition$/);g=g.concat(M&&f[M[1]]&&f[M[1]].transition?Yo({key:x,value:o[x],valueSpec:d.transition,style:a,styleSpec:d}):f[x]?Yo({key:x,value:o[x],valueSpec:f[x],style:a,styleSpec:d}):[new Bt(x,o[x],`unknown property "${x}"`)])}return g}const Gm={"*":()=>[],array:F,boolean:function(l){const o=l.value,a=l.key,d=zn(o);return"boolean"!==d?[new Bt(a,o,`boolean expected, ${d} found`)]:[]},number:Z,color:function(l){const o=l.key,a=l.value,d=zn(a);return"string"!==d?[new Bt(o,a,`color expected, ${d} found`)]:null===il.parseCSSColor(a)?[new Bt(o,a,`color expected, "${a}" found`)]:[]},enum:Dr,filter:lu,function:ve,layer:ld,object:R,source:pf,light:cp,terrain:Xi,fog:ff,string:cu,formatted:function(l){return 0===cu(l).length?[]:et(l)},resolvedImage:function(l){return 0===cu(l).length?[]:et(l)},projection:function(l){const o=l.value,a=l.styleSpec,d=a.projection,f=l.style;let g=[];const v=zn(o);if("object"===v)for(const x in o)g=g.concat(Yo({key:x,value:o[x],valueSpec:d[x],style:f,styleSpec:a}));else"string"!==v&&(g=g.concat([new Bt("projection",o,`object or string expected, ${v} found`)]));return g}};function Yo(l){const o=l.value,a=l.valueSpec,d=l.styleSpec;return a.expression&&ou(Rr(o))?ve(l):a.expression&&th(el(o))?et(l):a.type&&Gm[a.type]?Gm[a.type](l):R(ns({},l,{valueSpec:a.type?d[a.type]:a}))}function K_(l){const o=l.value,a=l.key,d=cu(l);return d.length||(-1===o.indexOf("{fontstack}")&&d.push(new Bt(a,o,'"glyphs" url must include a "{fontstack}" token')),-1===o.indexOf("{range}")&&d.push(new Bt(a,o,'"glyphs" url must include a "{range}" token'))),d}function dp(l,o=Qe){return Tl(Yo({key:"",value:l,valueSpec:o.$root,styleSpec:o,style:l,objectElementValidators:{glyphs:K_,"*":()=>[]}}))}const ih=l=>Tl(Hs(l)),qm=l=>Tl($m(l));function Tl(l){return l.slice().sort((o,a)=>o.line&&a.line?o.line-a.line:0)}function gt(l,o){let a=!1;if(o&&o.length)for(const d of o)l.fire(new Hn(new Error(d.message))),a=!0;return a}var Sn=Jt;function Jt(l,o,a){var d=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var f=new Int32Array(this.arrayBuffer);l=f[0],this.d=(o=f[1])+2*(a=f[2]);for(var g=0;g<this.d*this.d;g++){var v=f[3+g],x=f[3+g+1];d.push(v===x?null:f.subarray(v,x))}var M=f[3+d.length+1];this.keys=f.subarray(f[3+d.length],M),this.bboxes=f.subarray(M),this.insert=this._insertReadonly}else{this.d=o+2*a;for(var D=0;D<this.d*this.d;D++)d.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=l,this.padding=a,this.scale=o/l,this.uid=0;var k=a/o*l;this.min=-k,this.max=l+k}Jt.prototype.insert=function(l,o,a,d,f){this._forEachCell(o,a,d,f,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(o),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(f)},Jt.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Jt.prototype._insertCell=function(l,o,a,d,f,g){this.cells[f].push(g)},Jt.prototype.query=function(l,o,a,d,f){var g=this.min,v=this.max;if(l<=g&&o<=g&&v<=a&&v<=d&&!f)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(l,o,a,d,this._queryCell,x,{},f),x},Jt.prototype._queryCell=function(l,o,a,d,f,g,v,x){var M=this.cells[f];if(null!==M)for(var D=this.keys,k=this.bboxes,P=0;P<M.length;P++){var O=M[P];if(void 0===v[O]){var z=4*O;(x?x(k[z+0],k[z+1],k[z+2],k[z+3]):l<=k[z+2]&&o<=k[z+3]&&a>=k[z+0]&&d>=k[z+1])?(v[O]=!0,g.push(D[O])):v[O]=!1}}},Jt.prototype._forEachCell=function(l,o,a,d,f,g,v,x){for(var M=this._convertToCellCoord(l),D=this._convertToCellCoord(o),k=this._convertToCellCoord(a),P=this._convertToCellCoord(d),O=M;O<=k;O++)for(var z=D;z<=P;z++){var V=this.d*z+O;if((!x||x(this._convertFromCellCoord(O),this._convertFromCellCoord(z),this._convertFromCellCoord(O+1),this._convertFromCellCoord(z+1)))&&f.call(this,l,o,a,d,V,g,v,x))return}},Jt.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},Jt.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},Jt.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,o=3+this.cells.length+1+1,a=0,d=0;d<this.cells.length;d++)a+=this.cells[d].length;var f=new Int32Array(o+a+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var g=o,v=0;v<l.length;v++){var x=l[v];f[3+v]=g,f.set(x,g),g+=x.length}return f[3+l.length]=g,f.set(this.keys,g),f[3+l.length+1]=g+=this.keys.length,f.set(this.bboxes,g),g+=this.bboxes.length,f.buffer};const pi={};function kt(l,o,a={}){Object.defineProperty(l,"_classRegistryKey",{value:o,writeable:!1}),pi[o]={klass:l,omit:a.omit||[]}}kt(Object,"Object"),Sn.serialize=function(l,o){const a=l.toArrayBuffer();return o&&o.push(a),{buffer:a}},Sn.deserialize=function(l){return new Sn(l.buffer)},Object.defineProperty(Sn,"name",{value:"Grid"}),kt(Sn,"Grid"),kt($n,"Color"),kt(Error,"Error"),kt(Ve,"AJAXError"),kt(rs,"ResolvedImage"),kt(sd,"StylePropertyFunction"),kt(Ml,"StyleExpression",{omit:["_evaluator"]}),kt(au,"ZoomDependentExpression"),kt(od,"ZoomConstantExpression"),kt(os,"CompoundExpression",{omit:["_evaluate"]});for(const l in ru)pi[ru[l]._classRegistryKey]||kt(ru[l],`Expression${l}`);function mf(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&"ArrayBuffer"===l.constructor.name)}function du(l){return ce.ImageBitmap&&l instanceof ce.ImageBitmap}function Ts(l,o){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(mf(l)||du(l))return o&&o.push(l),l;if(ArrayBuffer.isView(l)){const a=l;return o&&o.push(a.buffer),a}if(l instanceof ce.ImageData)return o&&o.push(l.data.buffer),l;if(Array.isArray(l)){const a=[];for(const d of l)a.push(Ts(d,o));return a}if("object"==typeof l){const a=l.constructor,d=a._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${d}`);const f=a.serialize?a.serialize(l,o):{};if(!a.serialize){for(const g in l)l.hasOwnProperty(g)&&(pi[d].omit.indexOf(g)>=0||(f[g]=Ts(l[g],o)));l instanceof Error&&(f.message=l.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==d&&(f.$name=d),f}throw new Error("can't serialize object of type "+typeof l)}function cd(l){if(null==l||"boolean"==typeof l||"number"==typeof l||"string"==typeof l||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||mf(l)||du(l)||ArrayBuffer.isView(l)||l instanceof ce.ImageData)return l;if(Array.isArray(l))return l.map(cd);if("object"==typeof l){const o=l.$name||"Object",{klass:a}=pi[o];if(!a)throw new Error(`can't deserialize unregistered class ${o}`);if(a.deserialize)return a.deserialize(l);const d=Object.create(a.prototype);for(const f of Object.keys(l))"$name"!==f&&(d[f]=cd(l[f]));return d}throw new Error("can't deserialize object of type "+typeof l)}class up{constructor(){this.first=!0}update(o,a){const d=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=a),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=d,!0))}}const Q_=l=>l>=1536&&l<=1791,Wm=l=>l>=1872&&l<=1919,J_=l=>l>=2208&&l<=2303,gf=l=>l>=11904&&l<=12031,cs=l=>l>=12032&&l<=12255,sa=l=>l>=12272&&l<=12287,nh=l=>l>=12288&&l<=12351,yc=l=>l>=12352&&l<=12447,ks=l=>l>=12448&&l<=12543,Zm=l=>l>=12544&&l<=12591,hp=l=>l>=12704&&l<=12735,Ym=l=>l>=12736&&l<=12783,_f=l=>l>=12784&&l<=12799,rh=l=>l>=12800&&l<=13055,oh=l=>l>=13056&&l<=13311,pp=l=>l>=13312&&l<=19903,dd=l=>l>=19968&&l<=40959,fp=l=>l>=40960&&l<=42127,yf=l=>l>=42128&&l<=42191,mp=l=>l>=44032&&l<=55215,vf=l=>l>=63744&&l<=64255,uu=l=>l>=64336&&l<=65023,bf=l=>l>=65040&&l<=65055,gp=l=>l>=65072&&l<=65103,_p=l=>l>=65104&&l<=65135,xf=l=>l>=65136&&l<=65279,wf=l=>l>=65280&&l<=65519;function Fo(l){for(const o of l)if(As(o.charCodeAt(0)))return!0;return!1}function vc(l){for(const o of l)if(!Yr(o.charCodeAt(0)))return!1;return!0}function Yr(l){return!(Q_(l)||Wm(l)||J_(l)||uu(l)||xf(l))}function As(l){return!(746!==l&&747!==l&&(l<4352||!(hp(l)||Zm(l)||gp(l)&&!(l>=65097&&l<=65103)||vf(l)||oh(l)||gf(l)||Ym(l)||!(!nh(l)||l>=12296&&l<=12305||l>=12308&&l<=12319||12336===l)||pp(l)||dd(l)||rh(l)||(o=l,o>=12592&&o<=12687)||(o=>o>=43360&&o<=43391)(l)||(o=>o>=55216&&o<=55295)(l)||(o=>o>=4352&&o<=4607)(l)||mp(l)||yc(l)||sa(l)||(o=>o>=12688&&o<=12703)(l)||cs(l)||_f(l)||ks(l)&&12540!==l||!(!wf(l)||65288===l||65289===l||65293===l||l>=65306&&l<=65310||65339===l||65341===l||65343===l||l>=65371&&l<=65503||65507===l||l>=65512&&l<=65519)||!(!_p(l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||(o=>o>=5120&&o<=5759)(l)||(o=>o>=6320&&o<=6399)(l)||bf(l)||(o=>o>=19904&&o<=19967)(l)||fp(l)||yf(l))));var o}function sh(l){return!(As(l)||(o=l,(a=o)>=128&&a<=255&&(167===o||169===o||174===o||177===o||188===o||189===o||190===o||215===o||247===o)||(a=>a>=8192&&a<=8303)(o)&&(8214===o||8224===o||8225===o||8240===o||8241===o||8251===o||8252===o||8258===o||8263===o||8264===o||8265===o||8273===o)||(a=>a>=8448&&a<=8527)(o)||(a=>a>=8528&&a<=8591)(o)||(a=>a>=8960&&a<=9215)(o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||9003===o||o>=9085&&o<=9114||o>=9150&&o<=9165||9167===o||o>=9169&&o<=9179||o>=9186&&o<=9215)||(a=>a>=9216&&a<=9279)(o)&&9251!==o||(a=>a>=9280&&a<=9311)(o)||(a=>a>=9312&&a<=9471)(o)||(a=>a>=9632&&a<=9727)(o)||(a=>a>=9728&&a<=9983)(o)&&!(o>=9754&&o<=9759)||(a=>a>=11008&&a<=11263)(o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||nh(o)||ks(o)||(a=>a>=57344&&a<=63743)(o)||gp(o)||_p(o)||wf(o)||8734===o||8756===o||8757===o||o>=9984&&o<=10087||o>=10102&&o<=10131||65532===o||65533===o));var o,a}function m(l){return l>=1424&&l<=2303||uu(l)||xf(l)}function c(l,o){return!(!o&&m(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||(a=l,a>=6016&&a<=6143));var a}function h(l){for(const o of l)if(m(o.charCodeAt(0)))return!0;return!1}const y="deferred",w="loading",C="loaded";let E=null,T="unavailable",I=null;const L=function(l){l&&"string"==typeof l&&l.indexOf("NetworkError")>-1&&(T="error"),E&&E(l)};function N(){G.fire(new qi("pluginStateChange",{pluginStatus:T,pluginURL:I}))}const G=new mi,Q=function(){return T},oe=function(){if(T!==y||!I)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");T=w,N(),I&&je({url:I},l=>{l?L(l):(T=C,N())})},te={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>T===C||null!=te.applyArabicShaping,isLoading:()=>T===w,setState(l){T=l.pluginStatus,I=l.pluginURL},isParsed:()=>null!=te.applyArabicShaping&&null!=te.processBidirectionalText&&null!=te.processStyledBidirectionalText,getPluginURL:()=>I};class ie{constructor(o,a){this.zoom=o,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition,this.pitch=a.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new up,this.transition={},this.pitch=0)}isSupportedScript(o){return function(a,d){for(const f of a)if(!c(f.charCodeAt(0),d))return!1;return!0}(o,te.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,a=o-Math.floor(o),d=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*a}}}class ne{constructor(o,a){this.property=o,this.value=a,this.expression=function(d,f){if(ou(d))return new sd(d,f);if(th(d)){const g=sp(d,f);if("error"===g.result)throw new Error(g.value.map(v=>`${v.key}: ${v.message}`).join(", "));return g.value}{let g=d;return"string"==typeof d&&"color"===f.type&&(g=$n.parse(d)),{kind:"constant",evaluate:()=>g}}}(void 0===a?o.specification.default:a,o.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(o,a,d){return this.property.possiblyEvaluate(this,o,a,d)}}class ee{constructor(o){this.property=o,this.value=new ne(o,void 0)}transitioned(o,a){return new se(this.property,this.value,a,Wt({},o.transition,this.transition),o.now)}untransitioned(){return new se(this.property,this.value,null,{},0)}}class pe{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return $i(this._values[o].value.value)}setValue(o,a){this._values.hasOwnProperty(o)||(this._values[o]=new ee(this._values[o].property)),this._values[o].value=new ne(this._values[o].property,null===a?void 0:$i(a))}getTransition(o){return $i(this._values[o].transition)}setTransition(o,a){this._values.hasOwnProperty(o)||(this._values[o]=new ee(this._values[o].property)),this._values[o].transition=$i(a)||void 0}serialize(){const o={};for(const a of Object.keys(this._values)){const d=this.getValue(a);void 0!==d&&(o[a]=d);const f=this.getTransition(a);void 0!==f&&(o[`${a}-transition`]=f)}return o}transitioned(o,a){const d=new Ee(this._properties);for(const f of Object.keys(this._values))d._values[f]=this._values[f].transitioned(o,a._values[f]);return d}untransitioned(){const o=new Ee(this._properties);for(const a of Object.keys(this._values))o._values[a]=this._values[a].untransitioned();return o}}class se{constructor(o,a,d,f,g){const v=f.delay||0,x=f.duration||0;g=g||0,this.property=o,this.value=a,this.begin=g+v,this.end=this.begin+x,o.specification.transition&&(f.delay||f.duration)&&(this.prior=d)}possiblyEvaluate(o,a,d){const f=o.now||0,g=this.value.possiblyEvaluate(o,a,d),v=this.prior;if(v){if(f>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(f<this.begin)return v.possiblyEvaluate(o,a,d);{const x=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(o,a,d),g,sn(x))}}return g}}class Ee{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,a,d){const f=new Se(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].possiblyEvaluate(o,a,d);return f}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class De{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}getValue(o){return $i(this._values[o].value)}setValue(o,a){this._values[o]=new ne(this._values[o].property,null===a?void 0:$i(a))}serialize(){const o={};for(const a of Object.keys(this._values)){const d=this.getValue(a);void 0!==d&&(o[a]=d)}return o}possiblyEvaluate(o,a,d){const f=new Se(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].possiblyEvaluate(o,a,d);return f}}class be{constructor(o,a,d){this.property=o,this.value=a,this.parameters=d}isConstant(){return"constant"===this.value.kind}constantOr(o){return"constant"===this.value.kind?this.value.value:o}evaluate(o,a,d,f){return this.property.evaluate(this.value,this.parameters,o,a,d,f)}}class Se{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Ce{constructor(o){this.specification=o}possiblyEvaluate(o,a){return o.expression.evaluate(a)}interpolate(o,a,d){const f=wi[this.specification.type];return f?f(o,a,d):o}}class Re{constructor(o,a){this.specification=o,this.overrides=a}possiblyEvaluate(o,a,d,f){return new be(this,"constant"===o.expression.kind||"camera"===o.expression.kind?{kind:"constant",value:o.expression.evaluate(a,null,{},d,f)}:o.expression,a)}interpolate(o,a,d){if("constant"!==o.value.kind||"constant"!==a.value.kind)return o;if(void 0===o.value.value||void 0===a.value.value)return new be(this,{kind:"constant",value:void 0},o.parameters);const f=wi[this.specification.type];return f?new be(this,{kind:"constant",value:f(o.value.value,a.value.value,d)},o.parameters):o}evaluate(o,a,d,f,g,v){return"constant"===o.kind?o.value:o.evaluate(a,d,f,g,v)}}class He extends Re{possiblyEvaluate(o,a,d,f){if(void 0===o.value)return new be(this,{kind:"constant",value:void 0},a);if("constant"===o.expression.kind){const g=o.expression.evaluate(a,null,{},d,f),v="resolvedImage"===o.property.specification.type&&"string"!=typeof g?g.name:g,x=this._calculate(v,v,v,a);return new be(this,{kind:"constant",value:x},a)}if("camera"===o.expression.kind){const g=this._calculate(o.expression.evaluate({zoom:a.zoom-1}),o.expression.evaluate({zoom:a.zoom}),o.expression.evaluate({zoom:a.zoom+1}),a);return new be(this,{kind:"constant",value:g},a)}return new be(this,o.expression,a)}evaluate(o,a,d,f,g,v){if("source"===o.kind){const x=o.evaluate(a,d,f,g,v);return this._calculate(x,x,x,a)}return"composite"===o.kind?this._calculate(o.evaluate({zoom:Math.floor(a.zoom)-1},d,f),o.evaluate({zoom:Math.floor(a.zoom)},d,f),o.evaluate({zoom:Math.floor(a.zoom)+1},d,f),a):o.value}_calculate(o,a,d,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:o,to:a,other:d}:{from:d,to:a,other:o}}interpolate(o){return o}}class _t{constructor(o){this.specification=o}possiblyEvaluate(o,a,d,f){if(void 0!==o.value){if("constant"===o.expression.kind){const g=o.expression.evaluate(a,null,{},d,f);return this._calculate(g,g,g,a)}return this._calculate(o.expression.evaluate(new ie(Math.floor(a.zoom-1),a)),o.expression.evaluate(new ie(Math.floor(a.zoom),a)),o.expression.evaluate(new ie(Math.floor(a.zoom+1),a)),a)}}_calculate(o,a,d,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:o,to:a}:{from:d,to:a}}interpolate(o){return o}}class ze{constructor(o){this.specification=o}possiblyEvaluate(o,a,d,f){return!!o.expression.evaluate(a,null,{},d,f)}interpolate(){return!1}}class ot{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new ie(0,{});for(const d in o){const f=o[d];f.specification.overridable&&this.overridableProperties.push(d);const g=this.defaultPropertyValues[d]=new ne(f,void 0),v=this.defaultTransitionablePropertyValues[d]=new ee(f);this.defaultTransitioningPropertyValues[d]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=g.possiblyEvaluate(a)}}}function lt(l,o){return 256*(l=Et(Math.floor(l),0,255))+Et(Math.floor(o),0,255)}kt(Re,"DataDrivenProperty"),kt(Ce,"DataConstantProperty"),kt(He,"CrossFadedDataDrivenProperty"),kt(_t,"CrossFadedProperty"),kt(ze,"ColorRampProperty");const Pt={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ye{constructor(o,a){this._structArray=o,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class yt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,a){return o._trim(),a&&(o.isTransferred=!0,a.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const a=Object.create(this.prototype);return a.arrayBuffer=o.arrayBuffer,a.length=o.length,a.capacity=o.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function dt(l,o=1){let a=0,d=0;return{members:l.map(f=>{const g=Pt[f.type].BYTES_PER_ELEMENT,v=a=It(a,Math.max(o,g)),x=f.components||1;return d=Math.max(d,g),a+=g*x,{name:f.name,type:f.type,components:x,offset:v}}),size:It(a,Math.max(d,o)),alignment:o}}function It(l,o){return Math.ceil(l/o)*o}class Ft extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a){const d=this.length;return this.resize(d+1),this.emplace(d,o,a)}emplace(o,a,d){const f=2*o;return this.int16[f+0]=a,this.int16[f+1]=d,o}}Ft.prototype.bytesPerElement=4,kt(Ft,"StructArrayLayout2i4");class Zt extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,a,d)}emplace(o,a,d,f){const g=3*o;return this.int16[g+0]=a,this.int16[g+1]=d,this.int16[g+2]=f,o}}Zt.prototype.bytesPerElement=6,kt(Zt,"StructArrayLayout3i6");class fi extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,a,d,f)}emplace(o,a,d,f,g){const v=4*o;return this.int16[v+0]=a,this.int16[v+1]=d,this.int16[v+2]=f,this.int16[v+3]=g,o}}fi.prototype.bytesPerElement=8,kt(fi,"StructArrayLayout4i8");class Pi extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g,v,x){const M=this.length;return this.resize(M+1),this.emplace(M,o,a,d,f,g,v,x)}emplace(o,a,d,f,g,v,x,M){const D=6*o,k=12*o,P=3*o;return this.int16[D+0]=a,this.int16[D+1]=d,this.uint8[k+4]=f,this.uint8[k+5]=g,this.uint8[k+6]=v,this.uint8[k+7]=x,this.float32[P+2]=M,o}}Pi.prototype.bytesPerElement=12,kt(Pi,"StructArrayLayout2i4ub1f12");class ln extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,a,d,f)}emplace(o,a,d,f,g){const v=4*o;return this.float32[v+0]=a,this.float32[v+1]=d,this.float32[v+2]=f,this.float32[v+3]=g,o}}ln.prototype.bytesPerElement=16,kt(ln,"StructArrayLayout4f16");class Kt extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g,v,x,M,D,k){const P=this.length;return this.resize(P+1),this.emplace(P,o,a,d,f,g,v,x,M,D,k)}emplace(o,a,d,f,g,v,x,M,D,k,P){const O=10*o;return this.uint16[O+0]=a,this.uint16[O+1]=d,this.uint16[O+2]=f,this.uint16[O+3]=g,this.uint16[O+4]=v,this.uint16[O+5]=x,this.uint16[O+6]=M,this.uint16[O+7]=D,this.uint16[O+8]=k,this.uint16[O+9]=P,o}}Kt.prototype.bytesPerElement=20,kt(Kt,"StructArrayLayout10ui20");class Hi extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g,v,x,M){const D=this.length;return this.resize(D+1),this.emplace(D,o,a,d,f,g,v,x,M)}emplace(o,a,d,f,g,v,x,M,D){const k=8*o;return this.uint16[k+0]=a,this.uint16[k+1]=d,this.uint16[k+2]=f,this.uint16[k+3]=g,this.uint16[k+4]=v,this.uint16[k+5]=x,this.uint16[k+6]=M,this.uint16[k+7]=D,o}}Hi.prototype.bytesPerElement=16,kt(Hi,"StructArrayLayout8ui16");class Rn extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g,v){const x=this.length;return this.resize(x+1),this.emplace(x,o,a,d,f,g,v)}emplace(o,a,d,f,g,v,x){const M=6*o;return this.int16[M+0]=a,this.int16[M+1]=d,this.int16[M+2]=f,this.int16[M+3]=g,this.int16[M+4]=v,this.int16[M+5]=x,o}}Rn.prototype.bytesPerElement=12,kt(Rn,"StructArrayLayout6i12");class br extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g,v,x,M,D,k,P,O){const z=this.length;return this.resize(z+1),this.emplace(z,o,a,d,f,g,v,x,M,D,k,P,O)}emplace(o,a,d,f,g,v,x,M,D,k,P,O,z){const V=12*o;return this.int16[V+0]=a,this.int16[V+1]=d,this.int16[V+2]=f,this.int16[V+3]=g,this.uint16[V+4]=v,this.uint16[V+5]=x,this.uint16[V+6]=M,this.uint16[V+7]=D,this.int16[V+8]=k,this.int16[V+9]=P,this.int16[V+10]=O,this.int16[V+11]=z,o}}br.prototype.bytesPerElement=24,kt(br,"StructArrayLayout4i4ui4i24");class zr extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g,v){const x=this.length;return this.resize(x+1),this.emplace(x,o,a,d,f,g,v)}emplace(o,a,d,f,g,v,x){const M=10*o,D=5*o;return this.int16[M+0]=a,this.int16[M+1]=d,this.int16[M+2]=f,this.float32[D+2]=g,this.float32[D+3]=v,this.float32[D+4]=x,o}}zr.prototype.bytesPerElement=20,kt(zr,"StructArrayLayout3i3f20");class ir extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const a=this.length;return this.resize(a+1),this.emplace(a,o)}emplace(o,a){return this.uint32[1*o+0]=a,o}}ir.prototype.bytesPerElement=4,kt(ir,"StructArrayLayout1ul4");class Xo extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g,v,x,M,D,k,P,O,z){const V=this.length;return this.resize(V+1),this.emplace(V,o,a,d,f,g,v,x,M,D,k,P,O,z)}emplace(o,a,d,f,g,v,x,M,D,k,P,O,z,V){const K=20*o,J=10*o;return this.int16[K+0]=a,this.int16[K+1]=d,this.int16[K+2]=f,this.int16[K+3]=g,this.int16[K+4]=v,this.float32[J+3]=x,this.float32[J+4]=M,this.float32[J+5]=D,this.float32[J+6]=k,this.int16[K+14]=P,this.uint32[J+8]=O,this.uint16[K+18]=z,this.uint16[K+19]=V,o}}Xo.prototype.bytesPerElement=40,kt(Xo,"StructArrayLayout5i4f1i1ul2ui40");class $s extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g,v,x){const M=this.length;return this.resize(M+1),this.emplace(M,o,a,d,f,g,v,x)}emplace(o,a,d,f,g,v,x,M){const D=8*o;return this.int16[D+0]=a,this.int16[D+1]=d,this.int16[D+2]=f,this.int16[D+4]=g,this.int16[D+5]=v,this.int16[D+6]=x,this.int16[D+7]=M,o}}$s.prototype.bytesPerElement=16,kt($s,"StructArrayLayout3i2i2i16");class aa extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g){const v=this.length;return this.resize(v+1),this.emplace(v,o,a,d,f,g)}emplace(o,a,d,f,g,v){const x=4*o,M=8*o;return this.float32[x+0]=a,this.float32[x+1]=d,this.float32[x+2]=f,this.int16[M+6]=g,this.int16[M+7]=v,o}}aa.prototype.bytesPerElement=16,kt(aa,"StructArrayLayout2f1f2i16");class Er extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,a,d,f)}emplace(o,a,d,f,g){const v=12*o,x=3*o;return this.uint8[v+0]=a,this.uint8[v+1]=d,this.float32[x+1]=f,this.float32[x+2]=g,o}}Er.prototype.bytesPerElement=12,kt(Er,"StructArrayLayout2ub2f12");class Tr extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,a,d)}emplace(o,a,d,f){const g=3*o;return this.float32[g+0]=a,this.float32[g+1]=d,this.float32[g+2]=f,o}}Tr.prototype.bytesPerElement=12,kt(Tr,"StructArrayLayout3f12");class cn extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,d){const f=this.length;return this.resize(f+1),this.emplace(f,o,a,d)}emplace(o,a,d,f){const g=3*o;return this.uint16[g+0]=a,this.uint16[g+1]=d,this.uint16[g+2]=f,o}}cn.prototype.bytesPerElement=6,kt(cn,"StructArrayLayout3ui6");class Pr extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g,v,x,M,D,k,P,O,z,V,K,J,ue,xe,fe,ye,Te){const we=this.length;return this.resize(we+1),this.emplace(we,o,a,d,f,g,v,x,M,D,k,P,O,z,V,K,J,ue,xe,fe,ye,Te)}emplace(o,a,d,f,g,v,x,M,D,k,P,O,z,V,K,J,ue,xe,fe,ye,Te,we){const qe=30*o,Ge=15*o,nt=60*o;return this.int16[qe+0]=a,this.int16[qe+1]=d,this.int16[qe+2]=f,this.float32[Ge+2]=g,this.float32[Ge+3]=v,this.uint16[qe+8]=x,this.uint16[qe+9]=M,this.uint32[Ge+5]=D,this.uint32[Ge+6]=k,this.uint32[Ge+7]=P,this.uint16[qe+16]=O,this.uint16[qe+17]=z,this.uint16[qe+18]=V,this.float32[Ge+10]=K,this.float32[Ge+11]=J,this.uint8[nt+48]=ue,this.uint8[nt+49]=xe,this.uint8[nt+50]=fe,this.uint32[Ge+13]=ye,this.int16[qe+28]=Te,this.uint8[nt+58]=we,o}}Pr.prototype.bytesPerElement=60,kt(Pr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class ds extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g,v,x,M,D,k,P,O,z,V,K,J,ue,xe,fe,ye,Te,we,qe,Ge,nt,Mt,Ze,ct,at,st){const vt=this.length;return this.resize(vt+1),this.emplace(vt,o,a,d,f,g,v,x,M,D,k,P,O,z,V,K,J,ue,xe,fe,ye,Te,we,qe,Ge,nt,Mt,Ze,ct,at,st)}emplace(o,a,d,f,g,v,x,M,D,k,P,O,z,V,K,J,ue,xe,fe,ye,Te,we,qe,Ge,nt,Mt,Ze,ct,at,st,vt){const mt=38*o,Nt=19*o;return this.int16[mt+0]=a,this.int16[mt+1]=d,this.int16[mt+2]=f,this.float32[Nt+2]=g,this.float32[Nt+3]=v,this.int16[mt+8]=x,this.int16[mt+9]=M,this.int16[mt+10]=D,this.int16[mt+11]=k,this.int16[mt+12]=P,this.int16[mt+13]=O,this.uint16[mt+14]=z,this.uint16[mt+15]=V,this.uint16[mt+16]=K,this.uint16[mt+17]=J,this.uint16[mt+18]=ue,this.uint16[mt+19]=xe,this.uint16[mt+20]=fe,this.uint16[mt+21]=ye,this.uint16[mt+22]=Te,this.uint16[mt+23]=we,this.uint16[mt+24]=qe,this.uint16[mt+25]=Ge,this.uint16[mt+26]=nt,this.uint16[mt+27]=Mt,this.uint16[mt+28]=Ze,this.uint32[Nt+15]=ct,this.float32[Nt+16]=at,this.float32[Nt+17]=st,this.float32[Nt+18]=vt,o}}ds.prototype.bytesPerElement=76,kt(ds,"StructArrayLayout3i2f6i15ui1ul3f76");class Yt extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const a=this.length;return this.resize(a+1),this.emplace(a,o)}emplace(o,a){return this.float32[1*o+0]=a,o}}Yt.prototype.bytesPerElement=4,kt(Yt,"StructArrayLayout1f4");class Lo extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a,d,f,g){const v=this.length;return this.resize(v+1),this.emplace(v,o,a,d,f,g)}emplace(o,a,d,f,g,v){const x=5*o;return this.float32[x+0]=a,this.float32[x+1]=d,this.float32[x+2]=f,this.float32[x+3]=g,this.float32[x+4]=v,o}}Lo.prototype.bytesPerElement=20,kt(Lo,"StructArrayLayout5f20");class ud extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a,d,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,a,d,f)}emplace(o,a,d,f,g){const v=6*o;return this.uint32[3*o+0]=a,this.uint16[v+2]=d,this.uint16[v+3]=f,this.uint16[v+4]=g,o}}ud.prototype.bytesPerElement=12,kt(ud,"StructArrayLayout1ul3ui12");class us extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,a){const d=this.length;return this.resize(d+1),this.emplace(d,o,a)}emplace(o,a,d){const f=2*o;return this.uint16[f+0]=a,this.uint16[f+1]=d,o}}us.prototype.bytesPerElement=4,kt(us,"StructArrayLayout2ui4");class Vr extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const a=this.length;return this.resize(a+1),this.emplace(a,o)}emplace(o,a){return this.uint16[1*o+0]=a,o}}Vr.prototype.bytesPerElement=2,kt(Vr,"StructArrayLayout1ui2");class ba extends yt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,a){const d=this.length;return this.resize(d+1),this.emplace(d,o,a)}emplace(o,a,d){const f=2*o;return this.float32[f+0]=a,this.float32[f+1]=d,o}}ba.prototype.bytesPerElement=8,kt(ba,"StructArrayLayout2f8");class xa extends Ye{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}xa.prototype.size=12;class fo extends Rn{get(o){return new xa(this,o)}}kt(fo,"FillExtrusionExtArray");class bc extends Ye{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}bc.prototype.size=40;class ll extends Xo{get(o){return new bc(this,o)}}kt(ll,"CollisionBoxArray");class cl extends Ye{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}cl.prototype.size=60;class z1 extends Pr{get(o){return new cl(this,o)}}kt(z1,"PlacedSymbolArray");class Yb extends Ye{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(o){this._structArray.uint32[this._pos4+15]=o}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Yb.prototype.size=76;class tt extends ds{get(o){return new Yb(this,o)}}kt(tt,"SymbolInstanceArray");class V1 extends Yt{getoffsetX(o){return this.float32[1*o+0]}}kt(V1,"GlyphOffsetArray");class j1 extends Zt{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}kt(j1,"SymbolLineVertexArray");class U1 extends Ye{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}U1.prototype.size=12;class H1 extends ud{get(o){return new U1(this,o)}}kt(H1,"FeatureIndexArray");class $1 extends Ye{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}$1.prototype.size=4;class G1 extends us{get(o){return new $1(this,o)}}kt(G1,"FillExtrusionCentroidArray");class q1 extends Ye{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}q1.prototype.size=12;class yp extends Rn{get(o){return new q1(this,o)}}kt(yp,"CircleGlobeExtArray");const uT=dt([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),hT=dt([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Bo=Ln(function(l){l.exports=function(o,a){var d,f,g,v,x,M,D,k;for(f=o.length-(d=3&o.length),g=a,x=3432918353,M=461845907,k=0;k<f;)D=255&o.charCodeAt(k)|(255&o.charCodeAt(++k))<<8|(255&o.charCodeAt(++k))<<16|(255&o.charCodeAt(++k))<<24,++k,g=27492+(65535&(v=5*(65535&(g=(g^=D=(65535&(D=(D=(65535&D)*x+(((D>>>16)*x&65535)<<16)&4294967295)<<15|D>>>17))*M+(((D>>>16)*M&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(D=0,d){case 3:D^=(255&o.charCodeAt(k+2))<<16;case 2:D^=(255&o.charCodeAt(k+1))<<8;case 1:g^=D=(65535&(D=(D=(65535&(D^=255&o.charCodeAt(k)))*x+(((D>>>16)*x&65535)<<16)&4294967295)<<15|D>>>17))*M+(((D>>>16)*M&65535)<<16)&4294967295}return g^=o.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0}}),ey=Ln(function(l){l.exports=function(o,a){for(var d,f=o.length,g=a^f,v=0;f>=4;)d=1540483477*(65535&(d=255&o.charCodeAt(v)|(255&o.charCodeAt(++v))<<8|(255&o.charCodeAt(++v))<<16|(255&o.charCodeAt(++v))<<24))+((1540483477*(d>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),f-=4,++v;switch(f){case 3:g^=(255&o.charCodeAt(v+2))<<16;case 2:g^=(255&o.charCodeAt(v+1))<<8;case 1:g=1540483477*(65535&(g^=255&o.charCodeAt(v)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0}}),hd=Bo,pT=ey;hd.murmur3=Bo,hd.murmur2=pT;class Xm{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,a,d,f){this.ids.push(wa(o)),this.positions.push(a,d,f)}getPositions(o){const a=wa(o);let d=0,f=this.ids.length-1;for(;d<f;){const v=d+f>>1;this.ids[v]>=a?f=v:d=v+1}const g=[];for(;this.ids[d]===a;)g.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return g}static serialize(o,a){const d=new Float64Array(o.ids),f=new Uint32Array(o.positions);return kl(d,f,0,d.length-1),a&&a.push(d.buffer,f.buffer),{ids:d,positions:f}}static deserialize(o){const a=new Xm;return a.ids=o.ids,a.positions=o.positions,a.indexed=!0,a}}function wa(l){const o=+l;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:hd(String(l))}function kl(l,o,a,d){for(;a<d;){const f=l[a+d>>1];let g=a-1,v=d+1;for(;;){do{g++}while(l[g]<f);do{v--}while(l[v]>f);if(g>=v)break;Cf(l,g,v),Cf(o,3*g,3*v),Cf(o,3*g+1,3*v+1),Cf(o,3*g+2,3*v+2)}v-a<d-v?(kl(l,o,a,v),a=v+1):(kl(l,o,v+1,d),d=v)}}function Cf(l,o,a){const d=l[o];l[o]=l[a],l[a]=d}kt(Xm,"FeaturePositionMap");class dl{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,a),this.initialized=!0),!!this.location}}class hu extends dl{constructor(o){super(o),this.current=0}set(o,a,d){this.fetchUniformLocation(o,a)&&this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class ty extends dl{constructor(o){super(o),this.current=[0,0,0,0]}set(o,a,d){this.fetchUniformLocation(o,a)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3])))}}class Xb extends dl{constructor(o){super(o),this.current=$n.transparent}set(o,a,d){this.fetchUniformLocation(o,a)&&(d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a)))}}const W1=new Float32Array(16),fT=new Float32Array(9),mT=new Float32Array(4);function Km(l){return[lt(255*l.r,255*l.g),lt(255*l.b,255*l.a)]}class Is{constructor(o,a,d){this.value=o,this.uniformNames=a.map(f=>`u_${f}`),this.type=d}setUniform(o,a,d,f,g){a.set(o,g,f.constantOr(this.value))}getBinding(o,a){return"color"===this.type?new Xb(o):new hu(o)}}class pu{constructor(o,a){this.uniformNames=a.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,a){this.pixelRatioFrom=a.pixelRatio||1,this.pixelRatioTo=o.pixelRatio||1,this.patternFrom=a.tl.concat(a.br),this.patternTo=o.tl.concat(o.br)}setUniform(o,a,d,f,g){const v="u_pattern_to"===g||"u_dash_to"===g?this.patternTo:"u_pattern_from"===g||"u_dash_from"===g?this.patternFrom:"u_pixel_ratio_to"===g?this.pixelRatioTo:"u_pixel_ratio_from"===g?this.pixelRatioFrom:null;v&&a.set(o,g,v)}getBinding(o,a){return"u_pattern_from"===a||"u_pattern_to"===a||"u_dash_from"===a||"u_dash_to"===a?new ty(o):new hu(o)}}class Ca{constructor(o,a,d,f){this.expression=o,this.type=d,this.maxValue=0,this.paintVertexAttributes=a.map(g=>({name:`a_${g}`,type:"Float32",components:"color"===d?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(o,a,d,f,g,v){const x=this.paintVertexArray.length,M=this.expression.evaluate(new ie(0),a,{},g,f,v);this.paintVertexArray.resize(o),this._setPaintValue(x,o,M)}updatePaintArray(o,a,d,f,g){const v=this.expression.evaluate({zoom:0},d,f,void 0,g);this._setPaintValue(o,a,v)}_setPaintValue(o,a,d){if("color"===this.type){const f=Km(d);for(let g=o;g<a;g++)this.paintVertexArray.emplace(g,f[0],f[1])}else{for(let f=o;f<a;f++)this.paintVertexArray.emplace(f,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xc{constructor(o,a,d,f,g,v){this.expression=o,this.uniformNames=a.map(x=>`u_${x}_t`),this.type=d,this.useIntegerZoom=f,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=a.map(x=>({name:`a_${x}`,type:"Float32",components:"color"===d?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(o,a,d,f,g,v){const x=this.expression.evaluate(new ie(this.zoom),a,{},g,f,v),M=this.expression.evaluate(new ie(this.zoom+1),a,{},g,f,v),D=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(D,o,x,M)}updatePaintArray(o,a,d,f,g){const v=this.expression.evaluate({zoom:this.zoom},d,f,void 0,g),x=this.expression.evaluate({zoom:this.zoom+1},d,f,void 0,g);this._setPaintValue(o,a,v,x)}_setPaintValue(o,a,d,f){if("color"===this.type){const g=Km(d),v=Km(f);for(let x=o;x<a;x++)this.paintVertexArray.emplace(x,g[0],g[1],v[0],v[1])}else{for(let g=o;g<a;g++)this.paintVertexArray.emplace(g,d,f);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,a,d,f,g){const v=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,x=Et(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);a.set(o,g,x)}getBinding(o,a){return new hu(o)}}class pd{constructor(o,a,d,f,g,v,x){this.expression=o,this.type=d,this.useIntegerZoom=f,this.zoom=g,this.layerId=x,this.paintVertexAttributes=("array"===d?hT:uT).members;for(let M=0;M<a.length;++M);this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(o,a,d){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(f,o,a.patterns&&a.patterns[this.layerId],d)}updatePaintArray(o,a,d,f,g,v){this._setPaintValues(o,a,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(o,a,d,f){if(!f||!d)return;const{min:g,mid:v,max:x}=d,M=f[g],D=f[v],k=f[x];if(M&&D&&k)for(let P=o;P<a;P++)this._setPaintValue(this.zoomInPaintVertexArray,P,D,M),this._setPaintValue(this.zoomOutPaintVertexArray,P,D,k)}_setPaintValue(o,a,d,f){o.emplace(a,d.tl[0],d.tl[1],d.br[0],d.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1],d.pixelRatio,f.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class fu{constructor(o,a,d=(()=>!0)){this.binders={},this._buffers=[];const f=[];for(const g in o.paint._values){if(!d(g))continue;const v=o.paint.get(g);if(!(v instanceof be&&oa(v.property.specification)))continue;const x=Y1(g,o.type),M=v.value,D=v.property.specification.type,k=v.property.useIntegerZoom,P=v.property.specification["property-type"],O="cross-faded"===P||"cross-faded-data-driven"===P,z="line-dasharray"===String(g)&&"constant"!==o.layout.get("line-cap").value.kind;if("constant"!==M.kind||z)if("source"===M.kind||z||O){const V=Qm(g,D,"source");this.binders[g]=O?new pd(M,x,D,k,a,V,o.id):new Ca(M,x,D,V),f.push(`/a_${g}`)}else{const V=Qm(g,D,"composite");this.binders[g]=new xc(M,x,D,k,a,V),f.push(`/z_${g}`)}else this.binders[g]=O?new pu(M.value,x):new Is(M.value,x,D),f.push(`/u_${g}`)}this.cacheKey=f.sort().join("")}getMaxValue(o){const a=this.binders[o];return a instanceof Ca||a instanceof xc?a.maxValue:0}populatePaintArrays(o,a,d,f,g,v){for(const x in this.binders){const M=this.binders[x];(M instanceof Ca||M instanceof xc||M instanceof pd)&&M.populatePaintArray(o,a,d,f,g,v)}}setConstantPatternPositions(o,a){for(const d in this.binders){const f=this.binders[d];f instanceof pu&&f.setConstantPatternPositions(o,a)}}updatePaintArrays(o,a,d,f,g,v){let x=!1;for(const M in o){const D=a.getPositions(M);for(const k of D){const P=d.feature(k.index);for(const O in this.binders){const z=this.binders[O];if((z instanceof Ca||z instanceof xc||z instanceof pd)&&!0===z.expression.isStateDependent){const V=f.paint.get(O);z.expression=V.value,z.updatePaintArray(k.start,k.end,P,o[M],g,v),x=!0}}}}return x}defines(){const o=[];for(const a in this.binders){const d=this.binders[a];(d instanceof Is||d instanceof pu)&&o.push(...d.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return o}getBinderAttributes(){const o=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof Ca||d instanceof xc||d instanceof pd)for(let f=0;f<d.paintVertexAttributes.length;f++)o.push(d.paintVertexAttributes[f].name)}return o}getBinderUniforms(){const o=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof Is||d instanceof pu||d instanceof xc)for(const f of d.uniformNames)o.push(f)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const a=[];for(const d in this.binders){const f=this.binders[d];if(f instanceof Is||f instanceof pu||f instanceof xc)for(const g of f.uniformNames)a.push({name:g,property:d,binding:f.getBinding(o,g)})}return a}setUniforms(o,a,d,f,g){for(const{name:v,property:x,binding:M}of d)this.binders[x].setUniform(o,M,g,f.get(x),v)}updatePaintBuffers(o){this._buffers=[];for(const a in this.binders){const d=this.binders[a];if(o&&d instanceof pd){const f=2===o.fromScale?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(d instanceof Ca||d instanceof xc)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(o){for(const a in this.binders){const d=this.binders[a];(d instanceof Ca||d instanceof xc||d instanceof pd)&&d.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const a=this.binders[o];(a instanceof Ca||a instanceof xc||a instanceof pd)&&a.destroy()}}}class ah{constructor(o,a,d=(()=>!0)){this.programConfigurations={};for(const f of o)this.programConfigurations[f.id]=new fu(f,a,d);this.needsUpload=!1,this._featureMap=new Xm,this._bufferOffset=0}populatePaintArrays(o,a,d,f,g,v,x){for(const M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(o,a,f,g,v,x);void 0!==a.id&&this._featureMap.add(a.id,d,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,a,d,f,g){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(o,this._featureMap,a,v,f,g)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const Z1={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function Y1(l,o){return Z1[l]||[l.replace(`${o}-`,"").replace(/-/g,"_")]}const X1={"line-pattern":{source:Kt,composite:Kt},"fill-pattern":{source:Kt,composite:Kt},"fill-extrusion-pattern":{source:Kt,composite:Kt},"line-dasharray":{source:Hi,composite:Hi}},K1={color:{source:ba,composite:ln},number:{source:Yt,composite:ba}};function Qm(l,o,a){const d=X1[l];return d&&d[a]||K1[o][a]}kt(Is,"ConstantBinder"),kt(pu,"CrossFadedConstantBinder"),kt(Ca,"SourceExpressionBinder"),kt(pd,"CrossFadedCompositeBinder"),kt(xc,"CompositeExpressionBinder"),kt(fu,"ProgramConfiguration",{omit:["_buffers"]}),kt(ah,"ProgramConfigurationSet");const lh="-transition";class wc extends mi{constructor(o,a){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==o.type&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,"background"!==o.type&&"sky"!==o.type&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),a.layout&&(this._unevaluatedLayout=new De(a.layout)),a.paint)){this._transitionablePaint=new pe(a.paint);for(const d in o.paint)this.setPaintProperty(d,o.paint[d],{validate:!1});for(const d in o.layout)this.setLayoutProperty(d,o.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Se(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return"visibility"===o?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,a,d={}){null!=a&&this._validate(qm,`layers.${this.id}.layout.${o}`,o,a,d)||("visibility"!==o?this._unevaluatedLayout.setValue(o,a):this.visibility=a)}getPaintProperty(o){return ki(o,lh)?this._transitionablePaint.getTransition(o.slice(0,-lh.length)):this._transitionablePaint.getValue(o)}setPaintProperty(o,a,d={}){if(null!=a&&this._validate(ih,`layers.${this.id}.paint.${o}`,o,a,d))return!1;if(ki(o,lh))return this._transitionablePaint.setTransition(o.slice(0,-lh.length),a||void 0),!1;{const f=this._transitionablePaint._values[o],g="cross-faded-data-driven"===f.property.specification["property-type"],v=f.value.isDataDriven(),x=f.value;this._transitionablePaint.setValue(o,a),this._handleSpecialPaintPropertyUpdate(o);const M=this._transitionablePaint._values[o].value;return M.isDataDriven()||v||g||this._handleOverridablePaintPropertyUpdate(o,x,M)}}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getProgramConfiguration(o){return null}_handleOverridablePaintPropertyUpdate(o,a,d){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||"none"===this.visibility}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,a){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,a)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Hr(o,(a,d)=>!(void 0===a||"layout"===d&&!Object.keys(a).length||"paint"===d&&!Object.keys(a).length))}_validate(o,a,d,f,g={}){return(!g||!1!==g.validate)&&gt(this,o.call(dp,{key:a,layerType:this.type,objectKey:d,value:f,styleSpec:Qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const a=this.paint.get(o);if(a instanceof be&&oa(a.property.specification)&&("source"===a.value.kind||"composite"===a.value.kind)&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=to(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Mf=dt([{name:"a_pos",components:2,type:"Int16"}],4),iy=dt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class qr{constructor(o=[]){this.segments=o}prepareSegment(o,a,d,f){let g=this.segments[this.segments.length-1];return o>qr.MAX_VERTEX_ARRAY_LENGTH&&lr(`Max vertices per segment is ${qr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!g||g.vertexLength+o>qr.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==f)&&(g={vertexOffset:a.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},void 0!==f&&(g.sortKey=f),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const o of this.segments)for(const a in o.vaos)o.vaos[a].destroy()}static simpleSegment(o,a,d,f){return new qr([{vertexOffset:o,primitiveOffset:a,vertexLength:d,primitiveLength:f,vaos:{},sortKey:0}])}}qr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,kt(qr,"SegmentVector");var Oi=8192;class mu{constructor(o,a){o&&(a?this.setSouthWest(o).setNorthEast(a):4===o.length?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))}setNorthEast(o){return this._ne=o instanceof Gn?new Gn(o.lng,o.lat):Gn.convert(o),this}setSouthWest(o){return this._sw=o instanceof Gn?new Gn(o.lng,o.lat):Gn.convert(o),this}extend(o){const a=this._sw,d=this._ne;let f,g;if(o instanceof Gn)f=o,g=o;else{if(!(o instanceof mu))return Array.isArray(o)?4===o.length||o.every(Array.isArray)?this.extend(mu.convert(o)):this.extend(Gn.convert(o)):this;if(f=o._sw,g=o._ne,!f||!g)return this}return a||d?(a.lng=Math.min(f.lng,a.lng),a.lat=Math.min(f.lat,a.lat),d.lng=Math.max(g.lng,d.lng),d.lat=Math.max(g.lat,d.lat)):(this._sw=new Gn(f.lng,f.lat),this._ne=new Gn(g.lng,g.lat)),this}getCenter(){return new Gn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Gn(this.getWest(),this.getNorth())}getSouthEast(){return new Gn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:a,lat:d}=Gn.convert(o);let f=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&f}static convert(o){return!o||o instanceof mu?o:new mu(o)}}const ny=6371008.8;class Gn{constructor(o,a){if(isNaN(o)||isNaN(a))throw new Error(`Invalid LngLat object: (${o}, ${a})`);if(this.lng=+o,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gn(Di(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const a=Math.PI/180,d=this.lat*a,f=o.lat*a,g=Math.sin(d)*Math.sin(f)+Math.cos(d)*Math.cos(f)*Math.cos((o.lng-this.lng)*a);return ny*Math.acos(Math.min(g,1))}toBounds(o=0){const a=360*o/40075017,d=a/Math.cos(Math.PI/180*this.lat);return new mu(new Gn(this.lng-d,this.lat-a),new Gn(this.lng+d,this.lat+a))}static convert(o){if(o instanceof Gn)return o;if(Array.isArray(o)&&(2===o.length||3===o.length))return new Gn(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&"object"==typeof o&&null!==o)return new Gn(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const vp=2*Math.PI*ny;function gu(l){return vp*Math.cos(l*Math.PI/180)}function Cc(l){return(180+l)/360}function $e(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Ga(l,o){return l/gu(o)}function qn(l){return 360*l-180}function No(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function bp(l,o){return l*gu(No(o))}const Mc=85.051129;function Kb(l){return 1/Math.cos(l*Math.PI/180)}class xp{constructor(o,a,d=0){this.x=+o,this.y=+a,this.z=+d}static fromLngLat(o,a=0){const d=Gn.convert(o);return new xp(Cc(d.lng),$e(d.lat),Ga(a,d.lat))}toLngLat(){return new Gn(qn(this.x),No(this.y))}toAltitude(){return bp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/vp*Kb(No(this.y))}}function Df(l,o,a,d,f,g,v,x,M){const D=(o+d)/2,k=(a+f)/2,P=new Ie(D,k);x(P),function(O,z,V,K,J,ue){const xe=V-J,fe=K-ue;return Math.abs((K-z)*xe-(V-O)*fe)/Math.hypot(xe,fe)}(P.x,P.y,g.x,g.y,v.x,v.y)>=M?(Df(l,o,a,D,k,g,P,x,M),Df(l,D,k,d,f,P,v,x,M)):l.push(v)}function la(l,o,a){let d=l[0],f=d.x,g=d.y;o(d);const v=[d];for(let x=1;x<l.length;x++){const M=l[x],{x:D,y:k}=M;o(M),Df(v,f,g,D,k,d,M,o,a),f=D,g=k,d=M}return v}function Jm(l,o,a,d,f){if(f(o,a)){const g=o.add(a).mult(.5);d(g),Jm(l,o,g,d,f),Jm(l,g,a,d,f)}else l.push(a)}function ul(l,o,a){let d=l[0];o(d);const f=[d];for(let g=1;g<l.length;g++){const v=l[g];o(v),Jm(f,d,v,o,a),d=v}return f}const ry=Math.pow(2,14)-1,oy=-ry-1;function Sf(l,o){const a=Math.round(l.x*o),d=Math.round(l.y*o);return l.x=Et(a,oy,ry),l.y=Et(d,oy,ry),(a<l.x||a>l.x+1||d<l.y||d>l.y+1)&&lr("Geometry exceeds allowed extent, reduce your vector tile buffer size"),l}function hl(l,o,a){const d=l.loadGeometry(),f=l.extent,g=Oi/f;if(o&&a&&a.projection.isReprojectedInTileSpace){const v=1<<o.z,{scale:x,x:M,y:D,projection:k}=a,P=O=>{const z=qn((o.x+O.x/f)/v),V=No((o.y+O.y/f)/v),K=k.project(z,V);O.x=(K.x*x-M)*f,O.y=(K.y*x-D)*f};for(let O=0;O<d.length;O++)if(1!==l.type)d[O]=la(d[O],P,1);else{const z=[];for(const V of d[O])V.x<0||V.x>=f||V.y<0||V.y>=f||(P(V),z.push(V));d[O]=z}}for(const v of d)for(const x of v)Sf(x,g);return d}function _u(l,o){return{type:l.type,id:l.id,properties:l.properties,geometry:o?hl(l):[]}}function eg(l,o,a,d,f){l.emplaceBack(2*o+(d+1)/2,2*a+(f+1)/2)}function tg(l,o,a){l.emplaceBack(o.x,o.y,o.z,16384*a[0],16384*a[1],16384*a[2])}class yu{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(a=>a.id),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new Ft,this.indexArray=new cn,this.segments=new qr,this.programConfigurations=new ah(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(o,a,d,f){const g=this.layers[0],v=[];let x=null;"circle"===g.type&&(x=g.layout.get("circle-sort-key"));for(const{feature:D,id:k,index:P,sourceLayerIndex:O}of o){const z=this.layers[0]._featureFilter.needGeometry,V=_u(D,z);if(!this.layers[0]._featureFilter.filter(new ie(this.zoom),V,d))continue;const K=x?x.evaluate(V,{},d):void 0,J={id:k,properties:D.properties,type:D.type,sourceLayerIndex:O,index:P,geometry:z?V.geometry:hl(D,d,f),patterns:{},sortKey:K};v.push(J)}x&&v.sort((D,k)=>D.sortKey-k.sortKey);let M=null;"globe"===f.projection.name&&(this.globeExtVertexArray=new yp,M=f.projection);for(const D of v){const{geometry:k,index:P,sourceLayerIndex:O}=D,z=o[P].feature;this.addFeature(D,k,P,a.availableImages,d,M),a.featureIndex.insert(z,k,P,O,this.index)}}update(o,a,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,a,this.stateDependentLayers,d,f)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Mf.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,iy.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,a,d,f,g,v){for(const x of a)for(const M of x){const D=M.x,k=M.y;if(D<0||D>=Oi||k<0||k>=Oi)continue;if(v){const z=v.projectTilePoint(D,k,g),V=v.upVector(g,D,k),K=this.globeExtVertexArray;tg(K,z,V),tg(K,z,V),tg(K,z,V),tg(K,z,V)}const P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),O=P.vertexLength;eg(this.layoutVertexArray,D,k,-1,-1),eg(this.layoutVertexArray,D,k,1,-1),eg(this.layoutVertexArray,D,k,1,1),eg(this.layoutVertexArray,D,k,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+2,O+3),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,{},f,g)}}function wp(l,o){for(let a=0;a<l.length;a++)if(Dc(o,l[a]))return!0;for(let a=0;a<o.length;a++)if(Dc(l,o[a]))return!0;return!!sy(l,o)}function Q1(l,o,a){return!!Dc(l,o)||!!ay(o,l,a)}function J1(l,o){if(1===l.length)return e0(o,l[0]);for(let a=0;a<o.length;a++){const d=o[a];for(let f=0;f<d.length;f++)if(Dc(l,d[f]))return!0}for(let a=0;a<l.length;a++)if(e0(o,l[a]))return!0;for(let a=0;a<o.length;a++)if(sy(l,o[a]))return!0;return!1}function Qb(l,o,a){if(l.length>1){if(sy(l,o))return!0;for(let d=0;d<o.length;d++)if(ay(o[d],l,a))return!0}for(let d=0;d<l.length;d++)if(ay(l[d],o,a))return!0;return!1}function sy(l,o){if(0===l.length||0===o.length)return!1;for(let a=0;a<l.length-1;a++){const d=l[a],f=l[a+1];for(let g=0;g<o.length-1;g++)if(gT(d,f,o[g],o[g+1]))return!0}return!1}function gT(l,o,a,d){return so(l,a,d)!==so(o,a,d)&&so(l,o,a)!==so(l,o,d)}function ay(l,o,a){const d=a*a;if(1===o.length)return l.distSqr(o[0])<d;for(let f=1;f<o.length;f++)if(Jb(l,o[f-1],o[f])<d)return!0;return!1}function Jb(l,o,a){const d=o.distSqr(a);if(0===d)return l.distSqr(o);const f=((l.x-o.x)*(a.x-o.x)+(l.y-o.y)*(a.y-o.y))/d;return l.distSqr(f<0?o:f>1?a:a.sub(o)._mult(f)._add(o))}function e0(l,o){let a,d,f,g=!1;for(let v=0;v<l.length;v++){a=l[v];for(let x=0,M=a.length-1;x<a.length;M=x++)d=a[x],f=a[M],d.y>o.y!=f.y>o.y&&o.x<(f.x-d.x)*(o.y-d.y)/(f.y-d.y)+d.x&&(g=!g)}return g}function Dc(l,o){let a=!1;for(let d=0,f=l.length-1;d<l.length;f=d++){const g=l[d],v=l[f];g.y>o.y!=v.y>o.y&&o.x<(v.x-g.x)*(o.y-g.y)/(v.y-g.y)+g.x&&(a=!a)}return a}function ly(l,o,a,d,f){for(const v of l)if(o<=v.x&&a<=v.y&&d>=v.x&&f>=v.y)return!0;const g=[new Ie(o,a),new Ie(o,f),new Ie(d,f),new Ie(d,a)];if(l.length>2)for(const v of g)if(Dc(l,v))return!0;for(let v=0;v<l.length-1;v++)if(eC(l[v],l[v+1],g))return!0;return!1}function eC(l,o,a){const d=a[0],f=a[2];if(l.x<d.x&&o.x<d.x||l.x>f.x&&o.x>f.x||l.y<d.y&&o.y<d.y||l.y>f.y&&o.y>f.y)return!1;const g=so(l,o,a[0]);return g!==so(l,o,a[1])||g!==so(l,o,a[2])||g!==so(l,o,a[3])}function ch(l,o,a){const d=o.paint.get(l).value;return"constant"===d.kind?d.value:a.programConfigurations.get(o.id).getMaxValue(l)}function cy(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function dy(l,o,a,d,f){if(!o[0]&&!o[1])return l;const g=Ie.convert(o)._mult(f);"viewport"===a&&g._rotate(-d);const v=[];for(let x=0;x<l.length;x++)v.push(l[x].sub(g));return v}function tC(l,o,a,d){const f=Ie.convert(l)._mult(d);return"viewport"===o&&f._rotate(-a),f}kt(yu,"CircleBucket",{omit:["layers"]});const uy=new ot({"circle-sort-key":new Re(Qe.layout_circle["circle-sort-key"])});var iC={paint:new ot({"circle-radius":new Re(Qe.paint_circle["circle-radius"]),"circle-color":new Re(Qe.paint_circle["circle-color"]),"circle-blur":new Re(Qe.paint_circle["circle-blur"]),"circle-opacity":new Re(Qe.paint_circle["circle-opacity"]),"circle-translate":new Ce(Qe.paint_circle["circle-translate"]),"circle-translate-anchor":new Ce(Qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ce(Qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ce(Qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Re(Qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Re(Qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Re(Qe.paint_circle["circle-stroke-opacity"])}),layout:uy},Ef=1e-6,Rs=typeof Float32Array<"u"?Float32Array:Array;function ig(){var l=new Rs(9);return Rs!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function ca(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function hy(l,o){var a=o[0],d=o[1],f=o[2],g=o[3],v=o[4],x=o[5],M=o[6],D=o[7],k=o[8],P=o[9],O=o[10],z=o[11],V=o[12],K=o[13],J=o[14],ue=o[15],xe=a*x-d*v,fe=a*M-f*v,ye=a*D-g*v,Te=d*M-f*x,we=d*D-g*x,qe=f*D-g*M,Ge=k*K-P*V,nt=k*J-O*V,Mt=k*ue-z*V,Ze=P*J-O*K,ct=P*ue-z*K,at=O*ue-z*J,st=xe*at-fe*ct+ye*Ze+Te*Mt-we*nt+qe*Ge;return st?(l[0]=(x*at-M*ct+D*Ze)*(st=1/st),l[1]=(f*ct-d*at-g*Ze)*st,l[2]=(K*qe-J*we+ue*Te)*st,l[3]=(O*we-P*qe-z*Te)*st,l[4]=(M*Mt-v*at-D*nt)*st,l[5]=(a*at-f*Mt+g*nt)*st,l[6]=(J*ye-V*qe-ue*fe)*st,l[7]=(k*qe-O*ye+z*fe)*st,l[8]=(v*ct-x*Mt+D*Ge)*st,l[9]=(d*Mt-a*ct-g*Ge)*st,l[10]=(V*we-K*ye+ue*xe)*st,l[11]=(P*ye-k*we-z*xe)*st,l[12]=(x*nt-v*Ze-M*Ge)*st,l[13]=(a*Ze-d*nt+f*Ge)*st,l[14]=(K*fe-V*Te-J*xe)*st,l[15]=(k*Te-P*fe+O*xe)*st,l):null}function Cp(l,o,a){var d=o[0],f=o[1],g=o[2],v=o[3],x=o[4],M=o[5],D=o[6],k=o[7],P=o[8],O=o[9],z=o[10],V=o[11],K=o[12],J=o[13],ue=o[14],xe=o[15],fe=a[0],ye=a[1],Te=a[2],we=a[3];return l[0]=fe*d+ye*x+Te*P+we*K,l[1]=fe*f+ye*M+Te*O+we*J,l[2]=fe*g+ye*D+Te*z+we*ue,l[3]=fe*v+ye*k+Te*V+we*xe,l[4]=(fe=a[4])*d+(ye=a[5])*x+(Te=a[6])*P+(we=a[7])*K,l[5]=fe*f+ye*M+Te*O+we*J,l[6]=fe*g+ye*D+Te*z+we*ue,l[7]=fe*v+ye*k+Te*V+we*xe,l[8]=(fe=a[8])*d+(ye=a[9])*x+(Te=a[10])*P+(we=a[11])*K,l[9]=fe*f+ye*M+Te*O+we*J,l[10]=fe*g+ye*D+Te*z+we*ue,l[11]=fe*v+ye*k+Te*V+we*xe,l[12]=(fe=a[12])*d+(ye=a[13])*x+(Te=a[14])*P+(we=a[15])*K,l[13]=fe*f+ye*M+Te*O+we*J,l[14]=fe*g+ye*D+Te*z+we*ue,l[15]=fe*v+ye*k+Te*V+we*xe,l}function ng(l,o,a){var d,f,g,v,x,M,D,k,P,O,z,V,K=a[0],J=a[1],ue=a[2];return o===l?(l[12]=o[0]*K+o[4]*J+o[8]*ue+o[12],l[13]=o[1]*K+o[5]*J+o[9]*ue+o[13],l[14]=o[2]*K+o[6]*J+o[10]*ue+o[14],l[15]=o[3]*K+o[7]*J+o[11]*ue+o[15]):(f=o[1],g=o[2],v=o[3],x=o[4],M=o[5],D=o[6],k=o[7],P=o[8],O=o[9],z=o[10],V=o[11],l[0]=d=o[0],l[1]=f,l[2]=g,l[3]=v,l[4]=x,l[5]=M,l[6]=D,l[7]=k,l[8]=P,l[9]=O,l[10]=z,l[11]=V,l[12]=d*K+x*J+P*ue+o[12],l[13]=f*K+M*J+O*ue+o[13],l[14]=g*K+D*J+z*ue+o[14],l[15]=v*K+k*J+V*ue+o[15]),l}function Sc(l,o,a){var d=a[0],f=a[1],g=a[2];return l[0]=o[0]*d,l[1]=o[1]*d,l[2]=o[2]*d,l[3]=o[3]*d,l[4]=o[4]*f,l[5]=o[5]*f,l[6]=o[6]*f,l[7]=o[7]*f,l[8]=o[8]*g,l[9]=o[9]*g,l[10]=o[10]*g,l[11]=o[11]*g,l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15],l}function Tf(l,o,a){var d=Math.sin(a),f=Math.cos(a),g=o[4],v=o[5],x=o[6],M=o[7],D=o[8],k=o[9],P=o[10],O=o[11];return o!==l&&(l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[4]=g*f+D*d,l[5]=v*f+k*d,l[6]=x*f+P*d,l[7]=M*f+O*d,l[8]=D*f-g*d,l[9]=k*f-v*d,l[10]=P*f-x*d,l[11]=O*f-M*d,l}function kf(l,o,a){var d=Math.sin(a),f=Math.cos(a),g=o[0],v=o[1],x=o[2],M=o[3],D=o[8],k=o[9],P=o[10],O=o[11];return o!==l&&(l[4]=o[4],l[5]=o[5],l[6]=o[6],l[7]=o[7],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[0]=g*f-D*d,l[1]=v*f-k*d,l[2]=x*f-P*d,l[3]=M*f-O*d,l[8]=g*d+D*f,l[9]=v*d+k*f,l[10]=x*d+P*f,l[11]=M*d+O*f,l}function py(l,o){return l[0]=o[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=o[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=o[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function fy(l,o,a){var d,f,g,v=a[0],x=a[1],M=a[2],D=Math.hypot(v,x,M);return D<Ef?null:(v*=D=1/D,x*=D,M*=D,d=Math.sin(o),f=Math.cos(o),l[0]=v*v*(g=1-f)+f,l[1]=x*v*g+M*d,l[2]=M*v*g-x*d,l[3]=0,l[4]=v*x*g-M*d,l[5]=x*x*g+f,l[6]=M*x*g+v*d,l[7]=0,l[8]=v*M*g+x*d,l[9]=x*M*g-v*d,l[10]=M*M*g+f,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)}Math.hypot||(Math.hypot=function(){for(var l=0,o=arguments.length;o--;)l+=arguments[o]*arguments[o];return Math.sqrt(l)});var dh=Cp;function my(){var l=new Rs(3);return Rs!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function t0(l){var o=new Rs(3);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o}function Af(l){return Math.hypot(l[0],l[1],l[2])}function Mp(l,o,a){var d=new Rs(3);return d[0]=l,d[1]=o,d[2]=a,d}function vu(l,o,a){return l[0]=o[0]+a[0],l[1]=o[1]+a[1],l[2]=o[2]+a[2],l}function da(l,o,a){return l[0]=o[0]-a[0],l[1]=o[1]-a[1],l[2]=o[2]-a[2],l}function Al(l,o,a){return l[0]=o[0]*a[0],l[1]=o[1]*a[1],l[2]=o[2]*a[2],l}function gy(l,o,a){return l[0]=Math.min(o[0],a[0]),l[1]=Math.min(o[1],a[1]),l[2]=Math.min(o[2],a[2]),l}function _y(l,o,a){return l[0]=Math.max(o[0],a[0]),l[1]=Math.max(o[1],a[1]),l[2]=Math.max(o[2],a[2]),l}function Il(l,o,a){return l[0]=o[0]*a,l[1]=o[1]*a,l[2]=o[2]*a,l}function rg(l,o,a,d){return l[0]=o[0]+a[0]*d,l[1]=o[1]+a[1]*d,l[2]=o[2]+a[2]*d,l}function Gs(l,o){var a=o[0],d=o[1],f=o[2],g=a*a+d*d+f*f;return g>0&&(g=1/Math.sqrt(g)),l[0]=o[0]*g,l[1]=o[1]*g,l[2]=o[2]*g,l}function pl(l,o){return l[0]*o[0]+l[1]*o[1]+l[2]*o[2]}function og(l,o,a){var d=o[0],f=o[1],g=o[2],v=a[0],x=a[1],M=a[2];return l[0]=f*M-g*x,l[1]=g*v-d*M,l[2]=d*x-f*v,l}function Mo(l,o,a){var d=o[0],f=o[1],g=o[2],v=a[3]*d+a[7]*f+a[11]*g+a[15];return l[0]=(a[0]*d+a[4]*f+a[8]*g+a[12])/(v=v||1),l[1]=(a[1]*d+a[5]*f+a[9]*g+a[13])/v,l[2]=(a[2]*d+a[6]*f+a[10]*g+a[14])/v,l}function n0(l,o,a){var d=a[0],f=a[1],g=a[2],v=o[0],x=o[1],M=o[2],D=f*M-g*x,k=g*v-d*M,P=d*x-f*v,O=f*P-g*k,z=g*D-d*P,V=d*k-f*D,K=2*a[3];return k*=K,P*=K,z*=2,V*=2,l[0]=v+(D*=K)+(O*=2),l[1]=x+k+z,l[2]=M+P+V,l}var If,Rl=da,sg=Al,fd=Af;function Dp(l,o,a){return l[0]=o[0]*a,l[1]=o[1]*a,l[2]=o[2]*a,l[3]=o[3]*a,l}function bu(l,o,a){var d=o[0],f=o[1],g=o[2],v=o[3];return l[0]=a[0]*d+a[4]*f+a[8]*g+a[12]*v,l[1]=a[1]*d+a[5]*f+a[9]*g+a[13]*v,l[2]=a[2]*d+a[6]*f+a[10]*g+a[14]*v,l[3]=a[3]*d+a[7]*f+a[11]*g+a[15]*v,l}function yy(){var l=new Rs(4);return Rs!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function vy(l){return l[0]=0,l[1]=0,l[2]=0,l[3]=1,l}function nC(l,o,a){a*=.5;var d=o[0],f=o[1],g=o[2],v=o[3],x=Math.sin(a),M=Math.cos(a);return l[0]=d*M+v*x,l[1]=f*M+g*x,l[2]=g*M-f*x,l[3]=v*M-d*x,l}function rC(l,o,a){a*=.5;var d=o[0],f=o[1],g=o[2],v=o[3],x=Math.sin(a),M=Math.cos(a);return l[0]=d*M-g*x,l[1]=f*M+v*x,l[2]=g*M+d*x,l[3]=v*M-f*x,l}my(),If=new Rs(4),Rs!=Float32Array&&(If[0]=0,If[1]=0,If[2]=0,If[3]=0),my(),Mp(1,0,0),Mp(0,1,0),yy(),yy(),ig();class r0{constructor(o,a){this.pos=o,this.dir=a}intersectsPlane(o,a,d){const f=pl(a,this.dir);if(Math.abs(f)<1e-6)return!1;const g=((o[0]-this.pos[0])*a[0]+(o[1]-this.pos[1])*a[1]+(o[2]-this.pos[2])*a[2])/f;return d[0]=this.pos[0]+this.dir[0]*g,d[1]=this.pos[1]+this.dir[1]*g,d[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(o,a,d){if(K=(z=this.pos)[0],J=z[1],ue=z[2],xe=(V=o)[0],fe=V[1],ye=V[2],Math.abs(K-xe)<=Ef*Math.max(1,Math.abs(K),Math.abs(xe))&&Math.abs(J-fe)<=Ef*Math.max(1,Math.abs(J),Math.abs(fe))&&Math.abs(ue-ye)<=Ef*Math.max(1,Math.abs(ue),Math.abs(ye))||0===a)return d[0]=d[1]=d[2]=0,!1;var z,V,K,J,ue,xe,fe,ye;const[f,g,v]=this.dir,x=this.pos[0]-o[0],M=this.pos[1]-o[1],D=this.pos[2]-o[2],k=f*f+g*g+v*v,P=2*(x*f+M*g+D*v),O=P*P-4*k*(x*x+M*M+D*D-a*a);if(O<0){const z=Math.max(-P/2,0),V=x+f*z,K=M+g*z,J=D+v*z,ue=Math.hypot(V,K,J);return d[0]=V*a/ue,d[1]=K*a/ue,d[2]=J*a/ue,!1}{const z=(-P-Math.sqrt(O))/(2*k);if(z<0){const V=Math.hypot(x,M,D);return d[0]=x*a/V,d[1]=M*a/V,d[2]=D*a/V,!1}return d[0]=x+f*z,d[1]=M+g*z,d[2]=D+v*z,!0}}}class Rf{constructor(o,a,d,f,g){this.TL=o,this.TR=a,this.BR=d,this.BL=f,this.horizon=g}static fromInvProjectionMatrix(o,a,d){const f=[-1,1,1],g=[1,1,1],v=[1,-1,1],x=[-1,-1,1],M=Mo(f,f,o),D=Mo(g,g,o),k=Mo(v,v,o),P=Mo(x,x,o);return new Rf(M,D,k,P,a/d)}}class Pf{constructor(o,a){this.points=o,this.planes=a}static fromInvProjectionMatrix(o,a,d,f){const g=Math.pow(2,d),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const D=bu([],M,o),k=1/D[3]/a*g;return(P=D)[0]=(O=D)[0]*(z=[k,k,f?1/D[3]:k,k])[0],P[1]=O[1]*z[1],P[2]=O[2]*z[2],P[3]=O[3]*z[3],P;var P,O,z}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const D=Gs([],og([],Rl([],v[M[0]],v[M[1]]),Rl([],v[M[2]],v[M[1]]))),k=-pl(D,v[M[1]]);return D.concat(k)});return new Pf(v,x)}}class Ma{static fromPoints(o){const a=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],d=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(const f of o)a[0]=Math.min(a[0],f[0]),a[1]=Math.min(a[1],f[1]),a[2]=Math.min(a[2],f[2]),d[0]=Math.max(d[0],f[0]),d[1]=Math.max(d[1],f[1]),d[2]=Math.max(d[2],f[2]);return new Ma(a,d)}constructor(o,a){this.min=o,this.max=a,this.center=Il([],vu([],this.min,this.max),.5)}quadrant(o){const a=[o%2==0,o<2],d=t0(this.min),f=t0(this.max);for(let g=0;g<a.length;g++)d[g]=a[g]?this.min[g]:this.center[g],f[g]=a[g]?this.center[g]:this.max[g];return f[2]=this.max[2],new Ma(d,f)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,a=this.max;return[[o[0],o[1],o[2]],[a[0],o[1],o[2]],[a[0],a[1],o[2]],[o[0],a[1],o[2]],[o[0],o[1],a[2]],[a[0],o[1],a[2]],[a[0],a[1],a[2]],[o[0],a[1],a[2]]]}intersects(o){const a=this.getCorners();let d=!0;for(let f=0;f<o.planes.length;f++){const g=o.planes[f];let v=0;for(let x=0;x<a.length;x++)v+=pl(g,a[x])+g[3]>=0;if(0===v)return 0;v!==a.length&&(d=!1)}if(d)return 2;for(let f=0;f<3;f++){let g=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(let x=0;x<o.points.length;x++){const M=o.points[x][f]-this.min[f];g=Math.min(g,M),v=Math.max(v,M)}if(v<0||g>this.max[f]-this.min[f])return 0}return 1}}function oC(l,o,a,d,f,g,v,x,M){if(g&&l.queryGeometry.isAboveHorizon)return!1;g&&(M*=l.pixelToTileUnitsFactor);const D=l.tileID.canonical,k=a.projection.upVectorScale(D,a.center.lat,a.worldSize).metersToTile;for(const P of o)for(const O of P){const z=O.add(x),V=f&&a.elevation?a.elevation.exaggeration()*f.getElevationAt(z.x,z.y,!0):0,K=a.projection.projectTilePoint(z.x,z.y,D);if(V>0){const fe=a.projection.upVector(D,z.x,z.y);K.x+=fe[0]*k*V,K.y+=fe[1]*k*V,K.z+=fe[2]*k*V}const J=g?z:o0(K.x,K.y,K.z,d),ue=g?l.tilespaceRays.map(fe=>aC(fe,V)):l.queryGeometry.screenGeometry,xe=bu([],[K.x,K.y,K.z,1],d);if(!v&&g?M*=xe[3]/a.cameraToCenterDistance:v&&!g&&(M*=a.cameraToCenterDistance/xe[3]),g){const fe=No((O.y/Oi+D.y)/(1<<D.z));M/=a.projection.pixelsPerMeter(fe,1)/Ga(1,fe)}if(Q1(ue,J,M))return!0}return!1}function o0(l,o,a,d){const f=bu([],[l,o,a,1],d);return new Ie(f[0]/f[3],f[1]/f[3])}const s0=Mp(0,0,0),sC=Mp(0,0,1);function aC(l,o){const a=my();return s0[2]=o,l.intersectsPlane(s0,sC,a),new Ie(a[0],a[1])}class a0 extends yu{}function by(l,{width:o,height:a},d,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==o*a*d)throw new RangeError("mismatched image size")}else f=new Uint8Array(o*a*d);return l.width=o,l.height=a,l.data=f,l}function Of(l,o,a){const{width:d,height:f}=o;d===l.width&&f===l.height||(ag(l,o,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,d),height:Math.min(l.height,f)},a),l.width=d,l.height=f,l.data=o.data)}function ag(l,o,a,d,f,g){if(0===f.width||0===f.height)return o;if(f.width>l.width||f.height>l.height||a.x>l.width-f.width||a.y>l.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>o.width||f.height>o.height||d.x>o.width-f.width||d.y>o.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const v=l.data,x=o.data;for(let M=0;M<f.height;M++){const D=((a.y+M)*l.width+a.x)*g,k=((d.y+M)*o.width+d.x)*g;for(let P=0;P<f.width*g;P++)x[k+P]=v[D+P]}return o}kt(a0,"HeatmapBucket",{omit:["layers"]});class Pl{constructor(o,a){by(this,o,1,a)}resize(o){Of(this,new Pl(o),1)}clone(){return new Pl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,a,d,f,g){ag(o,a,d,f,g,1)}}class Da{constructor(o,a){by(this,o,4,a)}resize(o){Of(this,new Da(o),4)}replace(o,a){a?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Da({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,a,d,f,g){ag(o,a,d,f,g,4)}}kt(Pl,"AlphaImage"),kt(Da,"RGBAImage");var pr={paint:new ot({"heatmap-radius":new Re(Qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Re(Qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ce(Qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ze(Qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ce(Qe.paint_heatmap["heatmap-opacity"])})};function lg(l){const o={},a=l.resolution||256,d=l.clips?l.clips.length:1,f=l.image||new Da({width:a,height:d}),g=(v,x,M)=>{o[l.evaluationKey]=M;const D=l.expression.evaluate(o);f.data[v+x+0]=Math.floor(255*D.r/D.a),f.data[v+x+1]=Math.floor(255*D.g/D.a),f.data[v+x+2]=Math.floor(255*D.b/D.a),f.data[v+x+3]=Math.floor(255*D.a)};if(l.clips)for(let v=0,x=0;v<d;++v,x+=4*a)for(let M=0,D=0;M<a;M++,D+=4){const k=M/(a-1),{start:P,end:O}=l.clips[v];g(x,D,P*(1-k)+O*k)}else for(let v=0,x=0;v<a;v++,x+=4)g(0,x,v/(a-1));return f}var lC={paint:new ot({"hillshade-illumination-direction":new Ce(Qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ce(Qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ce(Qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ce(Qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ce(Qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ce(Qe.paint_hillshade["hillshade-accent-color"])})};const cg=dt([{name:"a_pos",components:2,type:"Int16"}],4),{members:l0}=cg;var dg=ug,cC=ug;function ug(l,o,a){a=a||2;var d,f,g,v,x,M,D,k=o&&o.length,P=k?o[0]*a:l.length,O=c0(l,0,P,a,!0),z=[];if(!O||O.next===O.prev)return z;if(k&&(O=function(K,J,ue,xe){var fe,ye,Te,we=[];for(fe=0,ye=J.length;fe<ye;fe++)(Te=c0(K,J[fe]*xe,fe<ye-1?J[fe+1]*xe:K.length,xe,!1))===Te.next&&(Te.steiner=!0),we.push(p0(Te));for(we.sort(u0),fe=0;fe<we.length;fe++)ue=h0(we[fe],ue);return ue}(l,o,O,a)),l.length>80*a){d=g=l[0],f=v=l[1];for(var V=a;V<P;V+=a)(x=l[V])<d&&(d=x),(M=l[V+1])<f&&(f=M),x>g&&(g=x),M>v&&(v=M);D=0!==(D=Math.max(g-d,v-f))?32767/D:0}return hg(O,z,a,d,f,D,0),z}function c0(l,o,a,d,f){var g,v;if(f===Ep(l,o,a,d)>0)for(g=o;g<a;g+=d)v=Nf(g,l[g],l[g+1],v);else for(g=a-d;g>=o;g-=d)v=Nf(g,l[g],l[g+1],v);return v&&Sp(v,v.next)&&(zf(v),v=v.next),v}function uh(l,o){if(!l)return l;o||(o=l);var a,d=l;do{if(a=!1,d.steiner||!Sp(d,d.next)&&0!==io(d.prev,d,d.next))d=d.next;else{if(zf(d),(d=o=d.prev)===d.next)break;a=!0}}while(a||d!==o);return o}function hg(l,o,a,d,f,g,v){if(l){!v&&g&&function(k,P,O,z){var V=k;do{0===V.z&&(V.z=pg(V.x,V.y,P,O,z)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next}while(V!==k);V.prevZ.nextZ=null,V.prevZ=null,function(K){var J,ue,xe,fe,ye,Te,we,qe,Ge=1;do{for(ue=K,K=null,ye=null,Te=0;ue;){for(Te++,xe=ue,we=0,J=0;J<Ge&&(we++,xe=xe.nextZ);J++);for(qe=Ge;we>0||qe>0&&xe;)0!==we&&(0===qe||!xe||ue.z<=xe.z)?(fe=ue,ue=ue.nextZ,we--):(fe=xe,xe=xe.nextZ,qe--),ye?ye.nextZ=fe:K=fe,fe.prevZ=ye,ye=fe;ue=xe}ye.nextZ=null,Ge*=2}while(Te>1)}(V)}(l,d,f,g);for(var x,M,D=l;l.prev!==l.next;)if(x=l.prev,M=l.next,g?Ff(l,d,f,g):_T(l))o.push(x.i/a|0),o.push(l.i/a|0),o.push(M.i/a|0),zf(l),l=M.next,D=M.next;else if((l=M)===D){v?1===v?hg(l=xy(uh(l),o,a),o,a,d,f,g,2):2===v&&d0(l,o,a,d,f,g):hg(uh(l),o,a,d,f,g,1);break}}}function _T(l){var o=l.prev,a=l,d=l.next;if(io(o,a,d)>=0)return!1;for(var f=o.x,g=a.x,v=d.x,x=o.y,M=a.y,D=d.y,k=f<g?f<v?f:v:g<v?g:v,P=x<M?x<D?x:D:M<D?M:D,O=f>g?f>v?f:v:g>v?g:v,z=x>M?x>D?x:D:M>D?M:D,V=d.next;V!==o;){if(V.x>=k&&V.x<=O&&V.y>=P&&V.y<=z&&xu(f,x,g,M,v,D,V.x,V.y)&&io(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function Ff(l,o,a,d){var f=l.prev,g=l,v=l.next;if(io(f,g,v)>=0)return!1;for(var x=f.x,M=g.x,D=v.x,k=f.y,P=g.y,O=v.y,z=x<M?x<D?x:D:M<D?M:D,V=k<P?k<O?k:O:P<O?P:O,K=x>M?x>D?x:D:M>D?M:D,J=k>P?k>O?k:O:P>O?P:O,ue=pg(z,V,o,a,d),xe=pg(K,J,o,a,d),fe=l.prevZ,ye=l.nextZ;fe&&fe.z>=ue&&ye&&ye.z<=xe;){if(fe.x>=z&&fe.x<=K&&fe.y>=V&&fe.y<=J&&fe!==f&&fe!==v&&xu(x,k,M,P,D,O,fe.x,fe.y)&&io(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,ye.x>=z&&ye.x<=K&&ye.y>=V&&ye.y<=J&&ye!==f&&ye!==v&&xu(x,k,M,P,D,O,ye.x,ye.y)&&io(ye.prev,ye,ye.next)>=0))return!1;ye=ye.nextZ}for(;fe&&fe.z>=ue;){if(fe.x>=z&&fe.x<=K&&fe.y>=V&&fe.y<=J&&fe!==f&&fe!==v&&xu(x,k,M,P,D,O,fe.x,fe.y)&&io(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;ye&&ye.z<=xe;){if(ye.x>=z&&ye.x<=K&&ye.y>=V&&ye.y<=J&&ye!==f&&ye!==v&&xu(x,k,M,P,D,O,ye.x,ye.y)&&io(ye.prev,ye,ye.next)>=0)return!1;ye=ye.nextZ}return!0}function xy(l,o,a){var d=l;do{var f=d.prev,g=d.next.next;!Sp(f,g)&&wy(f,d,d.next,g)&&Bf(f,g)&&Bf(g,f)&&(o.push(f.i/a|0),o.push(d.i/a|0),o.push(g.i/a|0),zf(d),zf(d.next),d=l=g),d=d.next}while(d!==l);return uh(d)}function d0(l,o,a,d,f,g){var v=l;do{for(var x=v.next.next;x!==v.prev;){if(v.i!==x.i&&yT(v,x)){var M=fg(v,x);return v=uh(v,v.next),M=uh(M,M.next),hg(v,o,a,d,f,g,0),void hg(M,o,a,d,f,g,0)}x=x.next}v=v.next}while(v!==l)}function u0(l,o){return l.x-o.x}function h0(l,o){var a=function(f,g){var v,x=g,M=f.x,D=f.y,k=-1/0;do{if(D<=x.y&&D>=x.next.y&&x.next.y!==x.y){var P=x.x+(D-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(P<=M&&P>k&&(k=P,v=x.x<x.next.x?x:x.next,P===M))return v}x=x.next}while(x!==g);if(!v)return null;var O,z=v,V=v.x,K=v.y,J=1/0;x=v;do{M>=x.x&&x.x>=V&&M!==x.x&&xu(D<K?M:k,D,V,K,D<K?k:M,D,x.x,x.y)&&(O=Math.abs(D-x.y)/(M-x.x),Bf(x,f)&&(O<J||O===J&&(x.x>v.x||x.x===v.x&&dC(v,x)))&&(v=x,J=O)),x=x.next}while(x!==z);return v}(l,o);if(!a)return o;var d=fg(a,l);return uh(d,d.next),uh(a,a.next)}function dC(l,o){return io(l.prev,l,o.prev)<0&&io(o.next,l,l.next)<0}function pg(l,o,a,d,f){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-a)*f|0)|l<<8))|l<<4))|l<<2))|l<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-d)*f|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function p0(l){var o=l,a=l;do{(o.x<a.x||o.x===a.x&&o.y<a.y)&&(a=o),o=o.next}while(o!==l);return a}function xu(l,o,a,d,f,g,v,x){return(f-v)*(o-x)>=(l-v)*(g-x)&&(l-v)*(d-x)>=(a-v)*(o-x)&&(a-v)*(g-x)>=(f-v)*(d-x)}function yT(l,o){return l.next.i!==o.i&&l.prev.i!==o.i&&!function(a,d){var f=a;do{if(f.i!==a.i&&f.next.i!==a.i&&f.i!==d.i&&f.next.i!==d.i&&wy(f,f.next,a,d))return!0;f=f.next}while(f!==a);return!1}(l,o)&&(Bf(l,o)&&Bf(o,l)&&function(a,d){var f=a,g=!1,v=(a.x+d.x)/2,x=(a.y+d.y)/2;do{f.y>x!=f.next.y>x&&f.next.y!==f.y&&v<(f.next.x-f.x)*(x-f.y)/(f.next.y-f.y)+f.x&&(g=!g),f=f.next}while(f!==a);return g}(l,o)&&(io(l.prev,l,o.prev)||io(l,o.prev,o))||Sp(l,o)&&io(l.prev,l,l.next)>0&&io(o.prev,o,o.next)>0)}function io(l,o,a){return(o.y-l.y)*(a.x-o.x)-(o.x-l.x)*(a.y-o.y)}function Sp(l,o){return l.x===o.x&&l.y===o.y}function wy(l,o,a,d){var f=Ec(io(l,o,a)),g=Ec(io(l,o,d)),v=Ec(io(a,d,l)),x=Ec(io(a,d,o));return f!==g&&v!==x||!(0!==f||!Lf(l,a,o))||!(0!==g||!Lf(l,d,o))||!(0!==v||!Lf(a,l,d))||!(0!==x||!Lf(a,o,d))}function Lf(l,o,a){return o.x<=Math.max(l.x,a.x)&&o.x>=Math.min(l.x,a.x)&&o.y<=Math.max(l.y,a.y)&&o.y>=Math.min(l.y,a.y)}function Ec(l){return l>0?1:l<0?-1:0}function Bf(l,o){return io(l.prev,l,l.next)<0?io(l,o,l.next)>=0&&io(l,l.prev,o)>=0:io(l,o,l.prev)<0||io(l,l.next,o)<0}function fg(l,o){var a=new Vf(l.i,l.x,l.y),d=new Vf(o.i,o.x,o.y),f=l.next,g=o.prev;return l.next=o,o.prev=l,a.next=f,f.prev=a,d.next=a,a.prev=d,g.next=d,d.prev=g,d}function Nf(l,o,a,d){var f=new Vf(l,o,a);return d?(f.next=d.next,f.prev=d,d.next.prev=f,d.next=f):(f.prev=f,f.next=f),f}function zf(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Vf(l,o,a){this.i=l,this.x=o,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ep(l,o,a,d){for(var f=0,g=o,v=a-d;g<a;g+=d)f+=(l[v]-l[g])*(l[g+1]+l[v+1]),v=g;return f}function wu(l,o,a,d,f){Cy(l,o,a||0,d||l.length-1,f||uC)}function Cy(l,o,a,d,f){for(;d>a;){if(d-a>600){var g=d-a+1,v=o-a+1,x=Math.log(g),M=.5*Math.exp(2*x/3),D=.5*Math.sqrt(x*M*(g-M)/g)*(v-g/2<0?-1:1);Cy(l,o,Math.max(a,Math.floor(o-v*M/g+D)),Math.min(d,Math.floor(o+(g-v)*M/g+D)),f)}var k=l[o],P=a,O=d;for(hh(l,a,o),f(l[d],k)>0&&hh(l,a,d);P<O;){for(hh(l,P,O),P++,O--;f(l[P],k)<0;)P++;for(;f(l[O],k)>0;)O--}0===f(l[a],k)?hh(l,a,O):hh(l,++O,d),O<=o&&(a=O+1),o<=O&&(d=O-1)}}function hh(l,o,a){var d=l[o];l[o]=l[a],l[a]=d}function uC(l,o){return l<o?-1:l>o?1:0}function My(l,o){const a=l.length;if(a<=1)return[l];const d=[];let f,g;for(let v=0;v<a;v++){const x=Go(l[v]);0!==x&&(l[v].area=Math.abs(x),void 0===g&&(g=x<0),g===x<0?(f&&d.push(f),f=[l[v]]):f.push(l[v]))}if(f&&d.push(f),o>1)for(let v=0;v<d.length;v++)d[v].length<=o||(wu(d[v],o,1,d[v].length-1,f0),d[v]=d[v].slice(0,o));return d}function f0(l,o){return o.area-l.area}function Cu(l,o,a){const d=a.patternDependencies;let f=!1;for(const g of o){const v=g.paint.get(`${l}-pattern`);v.isConstant()||(f=!0);const x=v.constantOr(null);x&&(f=!0,d[x.to]=!0,d[x.from]=!0)}return f}function Dy(l,o,a,d,f){const g=f.patternDependencies;for(const v of o){const x=v.paint.get(`${l}-pattern`).value;if("constant"!==x.kind){let M=x.evaluate({zoom:d-1},a,{},f.availableImages),D=x.evaluate({zoom:d},a,{},f.availableImages),k=x.evaluate({zoom:d+1},a,{},f.availableImages);M=M&&M.name?M.name:M,D=D&&D.name?D.name:D,k=k&&k.name?k.name:k,g[M]=!0,g[D]=!0,g[k]=!0,a.patterns[v.id]={min:M,mid:D,max:k}}}return a}ug.deviation=function(l,o,a,d){var f=o&&o.length,g=Math.abs(Ep(l,0,f?o[0]*a:l.length,a));if(f)for(var v=0,x=o.length;v<x;v++)g-=Math.abs(Ep(l,o[v]*a,v<x-1?o[v+1]*a:l.length,a));var M=0;for(v=0;v<d.length;v+=3){var D=d[v]*a,k=d[v+1]*a,P=d[v+2]*a;M+=Math.abs((l[D]-l[P])*(l[k+1]-l[D+1])-(l[D]-l[k])*(l[P+1]-l[D+1]))}return 0===g&&0===M?0:Math.abs((M-g)/g)},ug.flatten=function(l){for(var o=l[0][0].length,a={vertices:[],holes:[],dimensions:o},d=0,f=0;f<l.length;f++){for(var g=0;g<l[f].length;g++)for(var v=0;v<o;v++)a.vertices.push(l[f][g][v]);f>0&&a.holes.push(d+=l[f-1].length)}return a},dg.default=cC;class mg{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(a=>a.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ft,this.indexArray=new cn,this.indexArray2=new us,this.programConfigurations=new ah(o.layers,o.zoom),this.segments=new qr,this.segments2=new qr,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=o.projection}populate(o,a,d,f){this.hasPattern=Cu("fill",this.layers,a);const g=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:x,id:M,index:D,sourceLayerIndex:k}of o){const P=this.layers[0]._featureFilter.needGeometry,O=_u(x,P);if(!this.layers[0]._featureFilter.filter(new ie(this.zoom),O,d))continue;const z=g?g.evaluate(O,{},d,a.availableImages):void 0,V={id:M,properties:x.properties,type:x.type,sourceLayerIndex:k,index:D,geometry:P?O.geometry:hl(x,d,f),patterns:{},sortKey:z};v.push(V)}g&&v.sort((x,M)=>x.sortKey-M.sortKey);for(const x of v){const{geometry:M,index:D,sourceLayerIndex:k}=x;if(this.hasPattern){const P=Dy("fill",this.layers,x,this.zoom,a);this.patternFeatures.push(P)}else this.addFeature(x,M,D,d,{},a.availableImages);a.featureIndex.insert(o[D].feature,M,D,k,this.index)}}update(o,a,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,a,this.stateDependentLayers,d,f)}addFeatures(o,a,d,f,g){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,d,f)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,l0),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,a,d,f,g,v=[]){for(const x of My(a,500)){let M=0;for(const V of x)M+=V.length;const D=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray),k=D.vertexLength,P=[],O=[];for(const V of x){if(0===V.length)continue;V!==x[0]&&O.push(P.length/2);const K=this.segments2.prepareSegment(V.length,this.layoutVertexArray,this.indexArray2),J=K.vertexLength;this.layoutVertexArray.emplaceBack(V[0].x,V[0].y),this.indexArray2.emplaceBack(J+V.length-1,J),P.push(V[0].x),P.push(V[0].y);for(let ue=1;ue<V.length;ue++)this.layoutVertexArray.emplaceBack(V[ue].x,V[ue].y),this.indexArray2.emplaceBack(J+ue-1,J+ue),P.push(V[ue].x),P.push(V[ue].y);K.vertexLength+=V.length,K.primitiveLength+=V.length}const z=dg(P,O);for(let V=0;V<z.length;V+=3)this.indexArray.emplaceBack(k+z[V],k+z[V+1],k+z[V+2]);D.vertexLength+=M,D.primitiveLength+=z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,g,v,f)}}kt(mg,"FillBucket",{omit:["layers","patternFeatures"]});const hC=new ot({"fill-sort-key":new Re(Qe.layout_fill["fill-sort-key"])});var pC={paint:new ot({"fill-antialias":new Ce(Qe.paint_fill["fill-antialias"]),"fill-opacity":new Re(Qe.paint_fill["fill-opacity"]),"fill-color":new Re(Qe.paint_fill["fill-color"]),"fill-outline-color":new Re(Qe.paint_fill["fill-outline-color"]),"fill-translate":new Ce(Qe.paint_fill["fill-translate"]),"fill-translate-anchor":new Ce(Qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new He(Qe.paint_fill["fill-pattern"])}),layout:hC};const Sy=dt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),fC=dt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),m0=dt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:mC}=Sy;var Ey=jf;function jf(l,o,a,d,f){this.properties={},this.extent=a,this.type=0,this._pbf=l,this._geometry=-1,this._keys=d,this._values=f,l.readFields(gC,this,o)}function gC(l,o,a){1==l?o.id=a.readVarint():2==l?function(d,f){for(var g=d.readVarint()+d.pos;d.pos<g;){var v=f._keys[d.readVarint()],x=f._values[d.readVarint()];f.properties[v]=x}}(a,o):3==l?o.type=a.readVarint():4==l&&(o._geometry=a.pos)}function ph(l){for(var o,a,d=0,f=0,g=l.length,v=g-1;f<g;v=f++)d+=((a=l[v]).x-(o=l[f]).x)*(o.y+a.y);return d}jf.types=["Unknown","Point","LineString","Polygon"],jf.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var o,a=l.readVarint()+l.pos,d=1,f=0,g=0,v=0,x=[];l.pos<a;){if(f<=0){var M=l.readVarint();d=7&M,f=M>>3}if(f--,1===d||2===d)g+=l.readSVarint(),v+=l.readSVarint(),1===d&&(o&&x.push(o),o=[]),o.push(new Ie(g,v));else{if(7!==d)throw new Error("unknown command "+d);o&&o.push(o[0].clone())}}return o&&x.push(o),x},jf.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var o=l.readVarint()+l.pos,a=1,d=0,f=0,g=0,v=1/0,x=-1/0,M=1/0,D=-1/0;l.pos<o;){if(d<=0){var k=l.readVarint();a=7&k,d=k>>3}if(d--,1===a||2===a)(f+=l.readSVarint())<v&&(v=f),f>x&&(x=f),(g+=l.readSVarint())<M&&(M=g),g>D&&(D=g);else if(7!==a)throw new Error("unknown command "+a)}return[v,M,x,D]},jf.prototype.toGeoJSON=function(l,o,a){var d,f,g=this.extent*Math.pow(2,a),v=this.extent*l,x=this.extent*o,M=this.loadGeometry(),D=jf.types[this.type];function k(z){for(var V=0;V<z.length;V++){var K=z[V];z[V]=[360*(K.x+v)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+x)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var P=[];for(d=0;d<M.length;d++)P[d]=M[d][0];k(M=P);break;case 2:for(d=0;d<M.length;d++)k(M[d]);break;case 3:for(M=function(z){var V=z.length;if(V<=1)return[z];for(var K,J,ue=[],xe=0;xe<V;xe++){var fe=ph(z[xe]);0!==fe&&(void 0===J&&(J=fe<0),J===fe<0?(K&&ue.push(K),K=[z[xe]]):K.push(z[xe]))}return K&&ue.push(K),ue}(M),d=0;d<M.length;d++)for(f=0;f<M[d].length;f++)k(M[d][f])}1===M.length?M=M[0]:D="Multi"+D;var O={type:"Feature",geometry:{type:D,coordinates:M},properties:this.properties};return"id"in this&&(O.id=this.id),O};var g0=fh;function fh(l,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(Ci,this,o),this.length=this._features.length}function Ci(l,o,a){15===l?o.version=a.readVarint():1===l?o.name=a.readString():5===l?o.extent=a.readVarint():2===l?o._features.push(a.pos):3===l?o._keys.push(a.readString()):4===l&&o._values.push(function(d){for(var f=null,g=d.readVarint()+d.pos;d.pos<g;){var v=d.readVarint()>>3;f=1===v?d.readString():2===v?d.readFloat():3===v?d.readDouble():4===v?d.readVarint64():5===v?d.readVarint():6===v?d.readSVarint():7===v?d.readBoolean():null}return f}(a))}function _C(l,o,a){if(3===l){var d=new g0(a,a.readVarint()+a.pos);d.length&&(o[d.name]=d)}}fh.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var o=this._pbf.readVarint()+this._pbf.pos;return new Ey(this._pbf,o,this.extent,this._keys,this._values)};var Tp={VectorTile:function(l,o){this.layers=l.readFields(_C,{},o)},VectorTileFeature:Ey,VectorTileLayer:g0};function Mu(l,o,a,d){const f=[],g=0===d?(v,x,M,D,k,P)=>{v.push(new Ie(P,M+(P-x)/(D-x)*(k-M)))}:(v,x,M,D,k,P)=>{v.push(new Ie(x+(P-M)/(k-M)*(D-x),P))};for(const v of l){const x=[];for(const M of v){if(M.length<=2)continue;const D=[];for(let O=0;O<M.length-1;O++){const z=M[O].x,V=M[O].y,K=M[O+1].x,J=M[O+1].y,ue=0===d?z:V,xe=0===d?K:J;ue<o?xe>o&&g(D,z,V,K,J,o):ue>a?xe<a&&g(D,z,V,K,J,a):D.push(M[O]),xe<o&&ue>=o&&g(D,z,V,K,J,o),xe>a&&ue<=a&&g(D,z,V,K,J,a)}let k=M[M.length-1];const P=0===d?k.x:k.y;P>=o&&P<=a&&D.push(k),D.length&&(k=D[D.length-1],D[0].x===k.x&&D[0].y===k.y||D.push(D[0]),x.push(D))}x.length&&f.push(x)}return f}const Tc=Tp.VectorTileFeature.types,yC=Math.pow(2,13);function Uf(l,o,a,d,f,g,v,x){l.emplaceBack((o<<1)+v,(a<<1)+g,(Math.floor(d*yC)<<1)+f,Math.round(x))}function Ol(l,o,a){l.emplaceBack(o.x,o.y,o.z,16384*a[0],16384*a[1],16384*a[2])}class _0{constructor(){this.acc=new Ie(0,0),this.polyCount=[]}startRing(o){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Ie(o.x,o.y),this.max=new Ie(o.x,o.y))}append(o,a){this.currentPolyCount.edges++,this.acc._add(o);const d=this.min,f=this.max;o.x<d.x?d.x=o.x:o.x>f.x&&(f.x=o.x),o.y<d.y?d.y=o.y:o.y>f.y&&(f.y=o.y),((0===o.x||o.x===Oi)&&o.x===a.x)!=((0===o.y||o.y===Oi)&&o.y===a.y)&&this.processBorderOverlap(o,a),a.x<0!=o.x<0&&this.addBorderIntersection(0,hn(a.y,o.y,(0-a.x)/(o.x-a.x))),a.x>Oi!=o.x>Oi&&this.addBorderIntersection(1,hn(a.y,o.y,(Oi-a.x)/(o.x-a.x))),a.y<0!=o.y<0&&this.addBorderIntersection(2,hn(a.x,o.x,(0-a.y)/(o.y-a.y))),a.y>Oi!=o.y>Oi&&this.addBorderIntersection(3,hn(a.x,o.x,(Oi-a.y)/(o.y-a.y)))}addBorderIntersection(o,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const d=this.borders[o];a<d[0]&&(d[0]=a),a>d[1]&&(d[1]=a)}processBorderOverlap(o,a){if(o.x===a.x){if(o.y===a.y)return;const d=0===o.x?0:1;this.addBorderIntersection(d,a.y),this.addBorderIntersection(d,o.y)}else{const d=0===o.y?2:3;this.addBorderIntersection(d,a.x),this.addBorderIntersection(d,o.x)}}centroid(){const o=this.polyCount.reduce((a,d)=>a+d.edges,0);return 0!==o?this.acc.div(o)._round():new Ie(0,0)}span(){return new Ie(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((o,a)=>o+ +(a[0]!==Number.MAX_VALUE),0)}}class mh{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(a=>a.id),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.layoutVertexArray=new fi,this.centroidVertexArray=new G1,this.indexArray=new cn,this.programConfigurations=new ah(o.layers,o.zoom),this.segments=new qr,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.enableTerrain=o.enableTerrain}populate(o,a,d,f){this.features=[],this.hasPattern=Cu("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const v=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*v/(v*v+1)/Oi/(1<<g.z)}(d),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:v,index:x,sourceLayerIndex:M}of o){const D=this.layers[0]._featureFilter.needGeometry,k=_u(g,D);if(!this.layers[0]._featureFilter.filter(new ie(this.zoom),k,d))continue;const P={id:v,sourceLayerIndex:M,index:x,geometry:D?k.geometry:hl(g,d,f),properties:g.properties,type:g.type,patterns:{}},O=this.layoutVertexArray.length;this.hasPattern?this.features.push(Dy("fill-extrusion",this.layers,P,this.zoom,a)):this.addFeature(P,P.geometry,x,d,{},a.availableImages,f),a.featureIndex.insert(g,P.geometry,x,M,this.index,O)}this.sortBorders()}addFeatures(o,a,d,f,g){for(const v of this.features){const{geometry:x}=v;this.addFeature(v,x,v.index,a,d,f,g)}this.sortBorders()}update(o,a,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,a,this.stateDependentLayers,d,f)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,mC),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,m0.members,!0))),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,fC.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,a,d,f,g,v,x){const M=[new Ie(0,0),new Ie(Oi,Oi)],D=x.projection,k="globe"===D.name,P=this.enableTerrain&&!k?new _0:null,O="Polygon"===Tc[o.type];k&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new fo);const z=My(a,500);for(let ue=z.length-1;ue>=0;ue--){const xe=z[ue];(0===xe.length||(V=xe[0]).every(fe=>fe.x<=0)||V.every(fe=>fe.x>=Oi)||V.every(fe=>fe.y<=0)||V.every(fe=>fe.y>=Oi))&&z.splice(ue,1)}var V;let K;if(k)K=CC(z,M,f);else{K=[];for(const ue of z)K.push({polygon:ue,bounds:M})}const J=O?this.edgeRadius:0;for(const{polygon:ue,bounds:xe}of K){let fe=0,ye=0;for(const we of ue)O&&!we[0].equals(we[we.length-1])&&we.push(we[0]),ye+=O?we.length-1:we.length;const Te=this.segments.prepareSegment((O?5:4)*ye,this.layoutVertexArray,this.indexArray);if(O){const we=[],qe=[];fe=Te.vertexLength;for(const nt of ue){let Mt,Ze;nt.length&&nt!==ue[0]&&qe.push(we.length/2),Mt=nt[1].sub(nt[0])._perp()._unit();for(let ct=1;ct<nt.length;ct++){const at=nt[ct],st=nt[ct===nt.length-1?1:ct+1];let{x:vt,y:mt}=at;if(J){Ze=st.sub(at)._perp()._unit();const Nt=Mt.add(Ze)._unit(),Wi=J*Math.min(4,1/(Mt.x*Nt.x+Mt.y*Nt.y));vt+=Wi*Nt.x,mt+=Wi*Nt.y,Mt=Ze}Uf(this.layoutVertexArray,vt,mt,0,0,1,1,0),Te.vertexLength++,we.push(at.x,at.y),k&&Ol(this.layoutVertexExtArray,D.projectTilePoint(vt,mt,f),D.upVector(f,vt,mt))}}const Ge=dg(we,qe);for(let nt=0;nt<Ge.length;nt+=3)this.indexArray.emplaceBack(fe+Ge[nt],fe+Ge[nt+2],fe+Ge[nt+1]),Te.primitiveLength++}for(const we of ue){P&&we.length&&P.startRing(we[0]);let qe,Ge,nt,Mt=we.length>4&&xC(we[we.length-2],we[0],we[1]),Ze=J?vC(we[we.length-2],we[0],we[1],J):0;Ge=we[1].sub(we[0])._perp()._unit();for(let ct=1,at=0;ct<we.length;ct++){let st=we[ct-1],vt=we[ct];const mt=we[ct===we.length-1?1:ct+1];if(P&&O&&P.currentPolyCount.top++,bC(vt,st,xe)){J&&(Ge=mt.sub(vt)._perp()._unit());continue}P&&P.append(vt,st);const Nt=vt.sub(st)._perp(),Wi=Nt.x/(Math.abs(Nt.x)+Math.abs(Nt.y)),nn=Nt.y>0?1:0,gi=st.dist(vt);if(at+gi>32768&&(at=0),J){nt=mt.sub(vt)._perp()._unit();let Vt=gg(st,vt,mt,y0(Ge,nt),J);isNaN(Vt)&&(Vt=0);const nr=vt.sub(st)._unit();st=st.add(nr.mult(Ze))._round(),vt=vt.add(nr.mult(-Vt))._round(),Ze=Vt,Ge=nt}const Ot=Te.vertexLength,pn=we.length>4&&xC(st,vt,mt);let ji=_g(at,Mt,!0);if(Uf(this.layoutVertexArray,st.x,st.y,Wi,nn,0,0,ji),Uf(this.layoutVertexArray,st.x,st.y,Wi,nn,0,1,ji),at+=gi,ji=_g(at,pn,!1),Mt=pn,Uf(this.layoutVertexArray,vt.x,vt.y,Wi,nn,0,0,ji),Uf(this.layoutVertexArray,vt.x,vt.y,Wi,nn,0,1,ji),Te.vertexLength+=4,this.indexArray.emplaceBack(Ot+0,Ot+1,Ot+2),this.indexArray.emplaceBack(Ot+1,Ot+3,Ot+2),Te.primitiveLength+=2,J){const Vt=fe+(1===ct?we.length-2:ct-2),nr=1===ct?fe:Vt+1;if(this.indexArray.emplaceBack(Ot+1,Vt,Ot+3),this.indexArray.emplaceBack(Vt,nr,Ot+3),Te.primitiveLength+=2,void 0===qe&&(qe=Ot),!bC(mt,we[ct],xe)){const rr=ct===we.length-1?qe:Te.vertexLength;this.indexArray.emplaceBack(Ot+2,Ot+3,rr),this.indexArray.emplaceBack(Ot+3,rr+1,rr),this.indexArray.emplaceBack(Ot+3,nr,rr+1),Te.primitiveLength+=3}}if(k){const Vt=this.layoutVertexExtArray,nr=D.projectTilePoint(st.x,st.y,f),rr=D.projectTilePoint(vt.x,vt.y,f),mr=D.upVector(f,st.x,st.y),fn=D.upVector(f,vt.x,vt.y);Ol(Vt,nr,mr),Ol(Vt,nr,mr),Ol(Vt,rr,fn),Ol(Vt,rr,fn)}}O&&(fe+=we.length-1)}}if(P&&P.polyCount.length>0){if(P.borders){P.vertexArrayOffset=this.centroidVertexArray.length;const ue=P.borders,xe=this.featuresOnBorder.push(P)-1;for(let fe=0;fe<4;fe++)ue[fe][0]!==Number.MAX_VALUE&&this.borders[fe].push(xe)}this.encodeCentroid(P.borders?void 0:P.centroid(),P)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,g,v,f)}sortBorders(){for(let o=0;o<4;o++)this.borders[o].sort((a,d)=>this.featuresOnBorder[a].borders[o][0]-this.featuresOnBorder[d].borders[o][0])}encodeCentroid(o,a,d=!0){let f,g;if(o)if(0!==o.y){const x=a.span()._mult(this.tileToMeter);f=(Math.max(o.x,1)<<3)+Math.min(7,Math.round(x.x/10)),g=(Math.max(o.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else f=Math.ceil(7*(o.x+450)),g=0;else f=0,g=+d;let v=d?this.centroidVertexArray.length:a.vertexArrayOffset;for(const x of a.polyCount){d&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let M=0;M<x.top;M++)this.centroidVertexArray.emplace(v++,f,g);for(let M=0;M<2*x.edges;M++)this.centroidVertexArray.emplace(v++,0,g),this.centroidVertexArray.emplace(v++,f,g)}}}function y0(l,o){const a=l.add(o)._unit();return l.x*a.x+l.y*a.y}function vC(l,o,a,d){const f=o.sub(l)._perp()._unit(),g=a.sub(o)._perp()._unit();return gg(l,o,a,y0(f,g),d)}function gg(l,o,a,d,f){const g=Math.sqrt(1-d*d);return Math.min(l.dist(o)/3,o.dist(a)/3,f*g/d)}function bC(l,o,a){return l.x<a[0].x&&o.x<a[0].x||l.x>a[1].x&&o.x>a[1].x||l.y<a[0].y&&o.y<a[0].y||l.y>a[1].y&&o.y>a[1].y}function xC(l,o,a){if(l.x<0||l.x>=Oi||o.x<0||o.x>=Oi||a.x<0||a.x>=Oi)return!1;const d=a.sub(o),f=d.perp(),g=l.sub(o);return(d.x*g.x+d.y*g.y)/Math.sqrt((d.x*d.x+d.y*d.y)*(g.x*g.x+g.y*g.y))>-.866&&f.x*g.x+f.y*g.y<0}function _g(l,o,a){const d=o?2|l:-3&l;return a?1|d:-2&d}function wC(){const l=Math.PI/32,o=Math.tan(l),a=ny;return a*Math.sqrt(1+2*o*o)-a}function CC(l,o,a){const d=1<<a.z,f=qn(a.x/d),g=qn((a.x+1)/d),v=No(a.y/d),x=No((a.y+1)/d);return function(M,D,k,P,O=0,z){const V=[];if(!M.length||!k||!P)return V;const K=(we,qe)=>{for(const Ge of we)V.push({polygon:Ge,bounds:qe})},J=Math.ceil(Math.log2(k)),ue=Math.ceil(Math.log2(P)),xe=J-ue,fe=[];for(let we=0;we<Math.abs(xe);we++)fe.push(xe>0?0:1);for(let we=0;we<Math.min(J,ue);we++)fe.push(0),fe.push(1);let ye=M;if(ye=Mu(ye,D[0].y-O,D[1].y+O,1),ye=Mu(ye,D[0].x-O,D[1].x+O,0),!ye.length)return V;const Te=[];for(fe.length?Te.push({polygons:ye,bounds:D,depth:0}):K(ye,D);Te.length;){const we=Te.pop(),qe=we.depth,Ge=fe[qe],nt=we.bounds[0],Mt=we.bounds[1],Ze=0===Ge?nt.x:nt.y,ct=0===Ge?Mt.x:Mt.y,at=z?z(Ge,Ze,ct):.5*(Ze+ct),st=Mu(we.polygons,Ze-O,at+O,Ge),vt=Mu(we.polygons,at-O,ct+O,Ge);if(st.length){const mt=[nt,new Ie(0===Ge?at:Mt.x,1===Ge?at:Mt.y)];fe.length>qe+1?Te.push({polygons:st,bounds:mt,depth:qe+1}):K(st,mt)}if(vt.length){const mt=[new Ie(0===Ge?at:nt.x,1===Ge?at:nt.y),Mt];fe.length>qe+1?Te.push({polygons:vt,bounds:mt,depth:qe+1}):K(vt,mt)}}return V}(l,o,Math.ceil((g-f)/11.25),Math.ceil((v-x)/11.25),1,(M,D,k)=>{if(0===M)return.5*(D+k);{const P=No((a.y+D/Oi)/d);return($e(.5*(No((a.y+k/Oi)/d)+P))*d-a.y)*Oi}})}kt(mh,"FillExtrusionBucket",{omit:["layers","features"]}),kt(_0,"PartMetadata");const vT=new ot({"fill-extrusion-edge-radius":new Ce(Qe["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var bT={paint:new ot({"fill-extrusion-opacity":new Ce(Qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Re(Qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ce(Qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ce(Qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new He(Qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Re(Qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Re(Qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ce(Qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ce(Qe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ce(Qe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:vT};function MC(l,o,a){var d=2*Math.PI*6378137/256/Math.pow(2,a);return[l*d-2*Math.PI*6378137/2,o*d-2*Math.PI*6378137/2]}class yg{constructor(o,a,d){this.z=o,this.x=a,this.y=d,this.key=kp(0,o,o,a,d)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,a){const d=(v=this.y,x=this.z,M=MC(256*(g=this.x),256*(v=Math.pow(2,x)-v-1),x),D=MC(256*(g+1),256*(v+1),x),M[0]+","+M[1]+","+D[0]+","+D[1]),f=function(g,v,x){let M,D="";for(let k=g;k>0;k--)M=1<<k-1,D+=(v&M?1:0)+(x&M?2:0);return D}(this.z,this.x,this.y);var g,v,x,M,D;return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===a?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",f).replace("{bbox-epsg-3857}",d)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ty{constructor(o,a){this.wrap=o,this.canonical=a,this.key=kp(o,a.z,a.z,a.x,a.y)}}class hs{constructor(o,a,d,f,g){this.overscaledZ=o,this.wrap=a,this.canonical=new yg(d,+f,+g),this.key=0===a&&o===d?this.canonical.key:kp(a,o,d,f,g)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const a=this.canonical.z-o;return o>this.canonical.z?new hs(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new hs(o,this.wrap,o,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(o,a=!0){if(this.overscaledZ===o&&a)return this.key;if(o>this.canonical.z)return kp(this.wrap*+a,o,this.canonical.z,this.canonical.x,this.canonical.y);{const d=this.canonical.z-o;return kp(this.wrap*+a,o,o,this.canonical.x>>d,this.canonical.y>>d)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const a=this.canonical.z-o.canonical.z;return 0===o.overscaledZ||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>a&&o.canonical.y===this.canonical.y>>a}children(o){if(this.overscaledZ>=o)return[new hs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,d=2*this.canonical.x,f=2*this.canonical.y;return[new hs(a,this.wrap,a,d,f),new hs(a,this.wrap,a,d+1,f),new hs(a,this.wrap,a,d,f+1),new hs(a,this.wrap,a,d+1,f+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new hs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new hs(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ty(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function kp(l,o,a,d,f){const g=1<<Math.min(a,22);let v=g*(f%g)+d%g;return l&&a<22&&(v+=g*g*((l<0?-2*l-1:2*l)%(1<<2*(22-a)))),16*(32*v+a)+(o-a)}function Ap(l,o){return l.x*o.x+l.y*o.y}function ky(l,o){if(1===l.length){let a=0;const d=o[a++];let f;for(;!f||d.equals(f);)if(f=o[a++],!f)return 1/0;for(;a<o.length;a++){const g=o[a],v=l[0],x=f.sub(d),M=g.sub(d),D=v.sub(d),k=Ap(x,x),P=Ap(x,M),O=Ap(M,M),z=Ap(D,x),V=Ap(D,M),K=k*O-P*P,J=(O*z-P*V)/K,ue=(k*V-P*z)/K,xe=d.z*(1-J-ue)+f.z*J+g.z*ue;if(isFinite(xe))return xe}return 1/0}{let a=1/0;for(const d of o)a=Math.min(a,d.z);return a}}function Ip(l){const o=new Ie(l[0],l[1]);return o.z=l[2],o}function v0(l,o,a,d,f,g,v,x){const M=v*f.getElevationAt(l,o,!0,!0),D=0!==g[0],k=D?0===g[1]?v*(g[0]/7-450):v*function(P,O,z){const V=Math.floor(O[0]/8),K=Math.floor(O[1]/8),J=10*(O[0]-8*V),ue=10*(O[1]-8*K),xe=P.getElevationAt(V,K,!0,!0),fe=P.getMeterToDEM(z),ye=Math.floor(.5*(J*fe-1)),Te=Math.floor(.5*(ue*fe-1)),we=P.tileCoordToPixel(V,K),qe=2*ye+1,Ge=2*Te+1,nt=(Wi=qe,nn=Ge,[(vt=P).getElevationAtPixel(mt=we.x-ye,Nt=we.y-Te,!0),vt.getElevationAtPixel(mt+nn,Nt,!0),vt.getElevationAtPixel(mt,Nt+nn,!0),vt.getElevationAtPixel(mt+Wi,Nt+nn,!0)]),Mt=Math.abs(nt[0]-nt[1]),Ze=Math.abs(nt[2]-nt[3]),ct=Math.abs(nt[0]-nt[2])+Math.abs(nt[1]-nt[3]),at=Math.min(.25,.5*fe*(Mt+Ze)/qe),st=Math.min(.25,.5*fe*ct/Ge);var vt,mt,Nt,Wi,nn;return xe+Math.max(at*J,st*ue)}(f,g,x):M;return{base:M+(0===a)?-1:a,top:D?Math.max(k+d,M+a+2):M+d}}kt(yg,"CanonicalTileID"),kt(hs,"OverscaledTileID",{omit:["projMatrix"]});const Ay=dt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:md}=Ay,DC=dt([{name:"a_packed",components:4,type:"Float32"}]),{members:SC}=DC,EC=Tp.VectorTileFeature.types,b0=Math.cos(Math.PI/180*37.5);class vg{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(a=>a.id),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Pi,this.layoutVertexArray2=new ln,this.indexArray=new cn,this.programConfigurations=new ah(o.layers,o.zoom),this.segments=new qr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(o,a,d,f){this.hasPattern=Cu("line",this.layers,a);const g=this.layers[0].layout.get("line-sort-key"),v=[];for(const{feature:k,id:P,index:O,sourceLayerIndex:z}of o){const V=this.layers[0]._featureFilter.needGeometry,K=_u(k,V);if(!this.layers[0]._featureFilter.filter(new ie(this.zoom),K,d))continue;const J=g?g.evaluate(K,{},d):void 0,ue={id:P,properties:k.properties,type:k.type,sourceLayerIndex:z,index:O,geometry:V?K.geometry:hl(k,d,f),patterns:{},sortKey:J};v.push(ue)}g&&v.sort((k,P)=>k.sortKey-P.sortKey);const{lineAtlas:x,featureIndex:M}=a,D=this.addConstantDashes(x);for(const k of v){const{geometry:P,index:O,sourceLayerIndex:z}=k;if(D&&this.addFeatureDashes(k,x),this.hasPattern){const V=Dy("line",this.layers,k,this.zoom,a);this.patternFeatures.push(V)}else this.addFeature(k,P,O,d,x.positions,a.availableImages);M.insert(o[O].feature,P,O,z,this.index)}}addConstantDashes(o){let a=!1;for(const d of this.layers){const f=d.paint.get("line-dasharray").value,g=d.layout.get("line-cap").value;if("constant"!==f.kind||"constant"!==g.kind)a=!0;else{const v=g.value,x=f.value;if(!x)continue;o.addDash(x.from,v),o.addDash(x.to,v),x.other&&o.addDash(x.other,v)}}return a}addFeatureDashes(o,a){const d=this.zoom;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,v=f.layout.get("line-cap").value;if("constant"===g.kind&&"constant"===v.kind)continue;let x,M,D,k,P,O;if("constant"===g.kind){const J=g.value;if(!J)continue;x=J.other||J.to,M=J.to,D=J.from}else x=g.evaluate({zoom:d-1},o),M=g.evaluate({zoom:d},o),D=g.evaluate({zoom:d+1},o);"constant"===v.kind?k=P=O=v.value:(k=v.evaluate({zoom:d-1},o),P=v.evaluate({zoom:d},o),O=v.evaluate({zoom:d+1},o)),a.addDash(x,k),a.addDash(M,P),a.addDash(D,O);const z=a.getKey(x,k),V=a.getKey(M,P),K=a.getKey(D,O);o.patterns[f.id]={min:z,mid:V,max:K}}}update(o,a,d,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,a,this.stateDependentLayers,d,f)}addFeatures(o,a,d,f,g){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,d,f)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,SC)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,md),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,a,d,f,g,v){const x=this.layers[0].layout,M=x.get("line-join").evaluate(o,{}),D=x.get("line-cap").evaluate(o,{}),k=x.get("line-miter-limit"),P=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const O of a)this.addLine(O,o,M,D,k,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,g,v,f)}addLine(o,a,d,f,g,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ue=0;ue<o.length-1;ue++)this.totalDistance+=o[ue].dist(o[ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x="Polygon"===EC[a.type];let M=o.length;for(;M>=2&&o[M-1].equals(o[M-2]);)M--;let D=0;for(;D<M-1&&o[D].equals(o[D+1]);)D++;if(M<(x?3:2))return;"bevel"===d&&(g=1.05);const k=this.overscaling<=16?122880/(512*this.overscaling):0,P=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let O,z,V,K,J;this.e1=this.e2=-1,x&&(O=o[M-2],J=o[D].sub(O)._unit()._perp());for(let ue=D;ue<M;ue++){if(V=ue===M-1?x?o[D+1]:void 0:o[ue+1],V&&o[ue].equals(V))continue;J&&(K=J),O&&(z=O),O=o[ue],J=V?V.sub(O)._unit()._perp():K,K=K||J;let xe=K.add(J);0===xe.x&&0===xe.y||xe._unit();const fe=K.x*J.x+K.y*J.y,ye=xe.x*J.x+xe.y*J.y,Te=0!==ye?1/ye:1/0,we=2*Math.sqrt(2-2*ye),qe=ye<b0&&z&&V,Ge=K.x*J.y-K.y*J.x>0;if(qe&&ue>D){const Ze=O.dist(z);if(Ze>2*k){const ct=O.sub(O.sub(z)._mult(k/Ze)._round());this.updateDistance(z,ct),this.addCurrentVertex(ct,K,0,0,P),z=ct}}const nt=z&&V;let Mt=nt?d:x?"butt":f;if(nt&&"round"===Mt&&(Te<v?Mt="miter":Te<=2&&(Mt="fakeround")),"miter"===Mt&&Te>g&&(Mt="bevel"),"bevel"===Mt&&(Te>2&&(Mt="flipbevel"),Te<g&&(Mt="miter")),z&&this.updateDistance(z,O),"miter"===Mt)xe._mult(Te),this.addCurrentVertex(O,xe,0,0,P);else if("flipbevel"===Mt){if(Te>100)xe=J.mult(-1);else{const Ze=Te*K.add(J).mag()/K.sub(J).mag();xe._perp()._mult(Ze*(Ge?-1:1))}this.addCurrentVertex(O,xe,0,0,P),this.addCurrentVertex(O,xe.mult(-1),0,0,P)}else if("bevel"===Mt||"fakeround"===Mt){const Ze=-Math.sqrt(Te*Te-1),ct=Ge?Ze:0,at=Ge?0:Ze;if(z&&this.addCurrentVertex(O,K,ct,at,P),"fakeround"===Mt){const st=Math.round(180*we/Math.PI/20);for(let vt=1;vt<st;vt++){let mt=vt/st;if(.5!==mt){const Wi=mt-.5;mt+=mt*Wi*(mt-1)*((1.0904+fe*(fe*(3.55645-1.43519*fe)-3.2452))*Wi*Wi+(.848013+fe*(.215638*fe-1.06021)))}const Nt=J.sub(K)._mult(mt)._add(K)._unit()._mult(Ge?-1:1);this.addHalfVertex(O,Nt.x,Nt.y,!1,Ge,0,P)}}V&&this.addCurrentVertex(O,J,-ct,-at,P)}else if("butt"===Mt)this.addCurrentVertex(O,xe,0,0,P);else if("square"===Mt){const Ze=z?1:-1;z||this.addCurrentVertex(O,xe,Ze,Ze,P),this.addCurrentVertex(O,xe,0,0,P),z&&this.addCurrentVertex(O,xe,Ze,Ze,P)}else"round"===Mt&&(z&&(this.addCurrentVertex(O,K,0,0,P),this.addCurrentVertex(O,K,1,1,P,!0)),V&&(this.addCurrentVertex(O,J,-1,-1,P,!0),this.addCurrentVertex(O,J,0,0,P)));if(qe&&ue<M-1){const Ze=O.dist(V);if(Ze>2*k){const ct=O.add(V.sub(O)._mult(k/Ze)._round());this.updateDistance(O,ct),this.addCurrentVertex(ct,J,0,0,P),O=ct}}}}addCurrentVertex(o,a,d,f,g,v=!1){const x=a.y*f-a.x,M=-a.y-a.x*f;this.addHalfVertex(o,a.x+a.y*d,a.y-a.x*d,v,!1,d,g),this.addHalfVertex(o,x,M,v,!0,-f,g)}addHalfVertex({x:o,y:a},d,f,g,v,x,M){this.layoutVertexArray.emplaceBack((o<<1)+(g?1:0),(a<<1)+(v?1:0),Math.round(63*d)+128,Math.round(63*f)+128,1+(0===x?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const D=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),M.primitiveLength++),v?this.e2=D:this.e1=D}updateScaledDistance(){if(this.lineClips){const o=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=o*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(o,a){this.distance+=o.dist(a),this.updateScaledDistance()}}kt(vg,"LineBucket",{omit:["layers","patternFeatures"]});const TC=new ot({"line-cap":new Re(Qe.layout_line["line-cap"]),"line-join":new Re(Qe.layout_line["line-join"]),"line-miter-limit":new Ce(Qe.layout_line["line-miter-limit"]),"line-round-limit":new Ce(Qe.layout_line["line-round-limit"]),"line-sort-key":new Re(Qe.layout_line["line-sort-key"])});var x0={paint:new ot({"line-opacity":new Re(Qe.paint_line["line-opacity"]),"line-color":new Re(Qe.paint_line["line-color"]),"line-translate":new Ce(Qe.paint_line["line-translate"]),"line-translate-anchor":new Ce(Qe.paint_line["line-translate-anchor"]),"line-width":new Re(Qe.paint_line["line-width"]),"line-gap-width":new Re(Qe.paint_line["line-gap-width"]),"line-offset":new Re(Qe.paint_line["line-offset"]),"line-blur":new Re(Qe.paint_line["line-blur"]),"line-dasharray":new He(Qe.paint_line["line-dasharray"]),"line-pattern":new He(Qe.paint_line["line-pattern"]),"line-gradient":new ze(Qe.paint_line["line-gradient"]),"line-trim-offset":new Ce(Qe.paint_line["line-trim-offset"])}),layout:TC};const w0=new class extends Re{possiblyEvaluate(l,o){return o=new ie(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(l,o)}evaluate(l,o,a,d){return o=Wt({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(l,o,a,d)}}(x0.paint.properties["line-width"].specification);function bg(l,o){return o>0?o+2*l:l}w0.useIntegerZoom=!0;const kC=dt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),AC=dt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),IC=dt([{name:"a_projected_pos",components:4,type:"Float32"}],4);dt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const C0=dt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),RC=dt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);dt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const M0=dt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ua=dt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);dt([{name:"triangle",components:3,type:"Uint16"}]),dt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),dt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),dt([{type:"Float32",name:"offsetX"}]),dt([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Fl=128;function Hf(l,o){const{expression:a}=o;if("constant"===a.kind)return{kind:"constant",layoutSize:a.evaluate(new ie(l+1))};if("source"===a.kind)return{kind:"source"};{const{zoomStops:d,interpolationType:f}=a;let g=0;for(;g<d.length&&d[g]<=l;)g++;g=Math.max(0,g-1);let v=g;for(;v<d.length&&d[v]<l+1;)v++;v=Math.min(d.length-1,v);const x=d[g],M=d[v];return"composite"===a.kind?{kind:"composite",minZoom:x,maxZoom:M,interpolationType:f}:{kind:"camera",minZoom:x,maxZoom:M,minSize:a.evaluate(new ie(x)),maxSize:a.evaluate(new ie(M)),interpolationType:f}}}function Ko(l,{uSize:o,uSizeT:a},{lowerSize:d,upperSize:f}){return"source"===l.kind?d/Fl:"composite"===l.kind?hn(d/Fl,f/Fl,a):o}function kc(l,o){let a=0,d=0;if("constant"===l.kind)d=l.layoutSize;else if("source"!==l.kind){const{interpolationType:f,minZoom:g,maxZoom:v}=l,x=f?Et(cr.interpolationFactor(f,o,g,v),0,1):0;"camera"===l.kind?d=hn(l.minSize,l.maxSize,x):a=x}return{uSizeT:a,uSize:d}}var D0=Object.freeze({__proto__:null,getSizeData:Hf,evaluateSizeForFeature:Ko,evaluateSizeForZoom:kc,SIZE_PACK_FACTOR:Fl});function PC(l,o,a){return l.sections.forEach(d=>{d.text=function(f,g,v){const x=g.layout.get("text-transform").evaluate(v,{});return"uppercase"===x?f=f.toLocaleUpperCase():"lowercase"===x&&(f=f.toLocaleLowerCase()),te.applyArabicShaping&&(f=te.applyArabicShaping(f)),f}(d.text,o,a)}),l}const $f={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function S0(l){return"\ufe36"===l||"\ufe48"===l||"\ufe38"===l||"\ufe44"===l||"\ufe42"===l||"\ufe3e"===l||"\ufe3c"===l||"\ufe3a"===l||"\ufe18"===l||"\ufe40"===l||"\ufe10"===l||"\ufe13"===l||"\ufe14"===l||"\uff40"===l||"\uffe3"===l||"\ufe11"===l||"\ufe12"===l}function OC(l){return"\ufe35"===l||"\ufe47"===l||"\ufe37"===l||"\ufe43"===l||"\ufe41"===l||"\ufe3d"===l||"\ufe3b"===l||"\ufe39"===l||"\ufe17"===l||"\ufe3f"===l}var Iy=function(l,o,a,d,f){var g,v,x=8*f-d-1,M=(1<<x)-1,D=M>>1,k=-7,P=a?f-1:0,O=a?-1:1,z=l[o+P];for(P+=O,g=z&(1<<-k)-1,z>>=-k,k+=x;k>0;g=256*g+l[o+P],P+=O,k-=8);for(v=g&(1<<-k)-1,g>>=-k,k+=d;k>0;v=256*v+l[o+P],P+=O,k-=8);if(0===g)g=1-D;else{if(g===M)return v?NaN:1/0*(z?-1:1);v+=Math.pow(2,d),g-=D}return(z?-1:1)*v*Math.pow(2,g-d)},E0=function(l,o,a,d,f,g){var v,x,M,D=8*g-f-1,k=(1<<D)-1,P=k>>1,O=23===f?Math.pow(2,-24)-Math.pow(2,-77):0,z=d?0:g-1,V=d?1:-1,K=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(x=isNaN(o)?1:0,v=k):(v=Math.floor(Math.log(o)/Math.LN2),o*(M=Math.pow(2,-v))<1&&(v--,M*=2),(o+=v+P>=1?O/M:O*Math.pow(2,1-P))*M>=2&&(v++,M/=2),v+P>=k?(x=0,v=k):v+P>=1?(x=(o*M-1)*Math.pow(2,f),v+=P):(x=o*Math.pow(2,P-1)*Math.pow(2,f),v=0));f>=8;l[a+z]=255&x,z+=V,x/=256,f-=8);for(v=v<<f|x,D+=f;D>0;l[a+z]=255&v,z+=V,v/=256,D-=8);l[a+z-V]|=128*K},Rp=fr;function fr(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}fr.Varint=0,fr.Fixed64=1,fr.Bytes=2,fr.Fixed32=5;var Ry=4294967296,T0=1/Ry,Py=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function gd(l){return l.type===fr.Bytes?l.readVarint()+l.pos:l.pos+1}function Ac(l,o,a){var d=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));a.realloc(d);for(var f=a.pos-1;f>=l;f--)a.buf[f+d]=a.buf[f]}function FC(l,o){for(var a=0;a<l.length;a++)o.writeVarint(l[a])}function LC(l,o){for(var a=0;a<l.length;a++)o.writeSVarint(l[a])}function xT(l,o){for(var a=0;a<l.length;a++)o.writeFloat(l[a])}function wT(l,o){for(var a=0;a<l.length;a++)o.writeDouble(l[a])}function k0(l,o){for(var a=0;a<l.length;a++)o.writeBoolean(l[a])}function CT(l,o){for(var a=0;a<l.length;a++)o.writeFixed32(l[a])}function Sa(l,o){for(var a=0;a<l.length;a++)o.writeSFixed32(l[a])}function Oy(l,o){for(var a=0;a<l.length;a++)o.writeFixed64(l[a])}function Fy(l,o){for(var a=0;a<l.length;a++)o.writeSFixed64(l[a])}function xg(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+16777216*l[o+3]}function gh(l,o,a){l[a]=o,l[a+1]=o>>>8,l[a+2]=o>>>16,l[a+3]=o>>>24}function A0(l,o){return(l[o]|l[o+1]<<8|l[o+2]<<16)+(l[o+3]<<24)}function Gf(l,o,a){o.glyphs=[],1===l&&a.readMessage(BC,o)}function BC(l,o,a){if(3===l){const{id:d,bitmap:f,width:g,height:v,left:x,top:M,advance:D}=a.readMessage(NC,{});o.glyphs.push({id:d,bitmap:new Pl({width:g+6,height:v+6},f),metrics:{width:g,height:v,left:x,top:M,advance:D}})}else 4===l?o.ascender=a.readSVarint():5===l&&(o.descender=a.readSVarint())}function NC(l,o,a){1===l?o.id=a.readVarint():2===l?o.bitmap=a.readBytes():3===l?o.width=a.readVarint():4===l?o.height=a.readVarint():5===l?o.left=a.readSVarint():6===l?o.top=a.readSVarint():7===l&&(o.advance=a.readVarint())}function qf(l){let o=0,a=0;for(const v of l)o+=v.w*v.h,a=Math.max(a,v.w);l.sort((v,x)=>x.h-v.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),a),h:1/0}];let f=0,g=0;for(const v of l)for(let x=d.length-1;x>=0;x--){const M=d[x];if(!(v.w>M.w||v.h>M.h)){if(v.x=M.x,v.y=M.y,g=Math.max(g,v.y+v.h),f=Math.max(f,v.x+v.w),v.w===M.w&&v.h===M.h){const D=d.pop();x<d.length&&(d[x]=D)}else v.h===M.h?(M.x+=v.w,M.w-=v.w):v.w===M.w?(M.y+=v.h,M.h-=v.h):(d.push({x:M.x+v.w,y:M.y,w:M.w-v.w,h:v.h}),M.y+=v.h,M.h-=v.h);break}}return{w:f,h:g,fill:o/(f*g)||0}}fr.prototype={destroy:function(){this.buf=null},readFields:function(l,o,a){for(a=a||this.length;this.pos<a;){var d=this.readVarint(),f=d>>3,g=this.pos;this.type=7&d,l(f,o,this),this.pos===g&&this.skip(d)}return o},readMessage:function(l,o){return this.readFields(l,o,this.readVarint()+this.pos)},readFixed32:function(){var l=xg(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=A0(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=xg(this.buf,this.pos)+xg(this.buf,this.pos+4)*Ry;return this.pos+=8,l},readSFixed64:function(){var l=xg(this.buf,this.pos)+A0(this.buf,this.pos+4)*Ry;return this.pos+=8,l},readFloat:function(){var l=Iy(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=Iy(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var o,a,d=this.buf;return o=127&(a=d[this.pos++]),a<128?o:(o|=(127&(a=d[this.pos++]))<<7,a<128?o:(o|=(127&(a=d[this.pos++]))<<14,a<128?o:(o|=(127&(a=d[this.pos++]))<<21,a<128?o:function(f,g,v){var x,M,D=v.buf;if(x=(112&(M=D[v.pos++]))>>4,M<128||(x|=(127&(M=D[v.pos++]))<<3,M<128)||(x|=(127&(M=D[v.pos++]))<<10,M<128)||(x|=(127&(M=D[v.pos++]))<<17,M<128)||(x|=(127&(M=D[v.pos++]))<<24,M<128)||(x|=(1&(M=D[v.pos++]))<<31,M<128))return function Ll(l,o,a){return a?4294967296*o+(l>>>0):4294967296*(o>>>0)+(l>>>0)}(f,x,g);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(a=d[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var l=this.readVarint()+this.pos,o=this.pos;return this.pos=l,l-o>=12&&Py?Py.decode(this.buf.subarray(o,l)):function(a,d,f){for(var g="",v=d;v<f;){var x,M,D,k=a[v],P=null,O=k>239?4:k>223?3:k>191?2:1;if(v+O>f)break;1===O?k<128&&(P=k):2===O?128==(192&(x=a[v+1]))&&(P=(31&k)<<6|63&x)<=127&&(P=null):3===O?(M=a[v+2],128==(192&(x=a[v+1]))&&128==(192&M)&&((P=(15&k)<<12|(63&x)<<6|63&M)<=2047||P>=55296&&P<=57343)&&(P=null)):4===O&&(M=a[v+2],D=a[v+3],128==(192&(x=a[v+1]))&&128==(192&M)&&128==(192&D)&&((P=(15&k)<<18|(63&x)<<12|(63&M)<<6|63&D)<=65535||P>=1114112)&&(P=null)),null===P?(P=65533,O=1):P>65535&&(P-=65536,g+=String.fromCharCode(P>>>10&1023|55296),P=56320|1023&P),g+=String.fromCharCode(P),v+=O}return g}(this.buf,o,l)},readBytes:function(){var l=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,l);return this.pos=l,o},readPackedVarint:function(l,o){if(this.type!==fr.Bytes)return l.push(this.readVarint(o));var a=gd(this);for(l=l||[];this.pos<a;)l.push(this.readVarint(o));return l},readPackedSVarint:function(l){if(this.type!==fr.Bytes)return l.push(this.readSVarint());var o=gd(this);for(l=l||[];this.pos<o;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==fr.Bytes)return l.push(this.readBoolean());var o=gd(this);for(l=l||[];this.pos<o;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==fr.Bytes)return l.push(this.readFloat());var o=gd(this);for(l=l||[];this.pos<o;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==fr.Bytes)return l.push(this.readDouble());var o=gd(this);for(l=l||[];this.pos<o;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==fr.Bytes)return l.push(this.readFixed32());var o=gd(this);for(l=l||[];this.pos<o;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==fr.Bytes)return l.push(this.readSFixed32());var o=gd(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==fr.Bytes)return l.push(this.readFixed64());var o=gd(this);for(l=l||[];this.pos<o;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==fr.Bytes)return l.push(this.readSFixed64());var o=gd(this);for(l=l||[];this.pos<o;)l.push(this.readSFixed64());return l},skip:function(l){var o=7&l;if(o===fr.Varint)for(;this.buf[this.pos++]>127;);else if(o===fr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===fr.Fixed32)this.pos+=4;else{if(o!==fr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(l,o){this.writeVarint(l<<3|o)},realloc:function(l){for(var o=this.length||16;o<this.pos+l;)o*=2;if(o!==this.length){var a=new Uint8Array(o);a.set(this.buf),this.buf=a,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),gh(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),gh(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),gh(this.buf,-1&l,this.pos),gh(this.buf,Math.floor(l*T0),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),gh(this.buf,-1&l,this.pos),gh(this.buf,Math.floor(l*T0),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(o,a){var d,f,g,x;if(o>=0?(d=o%4294967296|0,f=o/4294967296|0):(f=~(-o/4294967296),4294967295^(d=~(-o%4294967296))?d=d+1|0:(d=0,f=f+1|0)),o>=0x10000000000000000||o<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),g=d,(x=a).buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,x.buf[x.pos]=127&(g>>>=7),function(g,v){var x=(7&g)<<4;v.buf[v.pos++]|=x|((g>>>=3)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g)))))}(f,a)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(Boolean(l))},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var o=this.pos;this.pos=function(d,f,g){for(var v,x,M=0;M<f.length;M++){if((v=f.charCodeAt(M))>55295&&v<57344){if(!x){v>56319||M+1===f.length?(d[g++]=239,d[g++]=191,d[g++]=189):x=v;continue}if(v<56320){d[g++]=239,d[g++]=191,d[g++]=189,x=v;continue}v=x-55296<<10|v-56320|65536,x=null}else x&&(d[g++]=239,d[g++]=191,d[g++]=189,x=null);v<128?d[g++]=v:(v<2048?d[g++]=v>>6|192:(v<65536?d[g++]=v>>12|224:(d[g++]=v>>18|240,d[g++]=v>>12&63|128),d[g++]=v>>6&63|128),d[g++]=63&v|128)}return g}(this.buf,l,this.pos);var a=this.pos-o;a>=128&&Ac(o,a,this),this.pos=o-1,this.writeVarint(a),this.pos+=a},writeFloat:function(l){this.realloc(4),E0(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),E0(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var o=l.length;this.writeVarint(o),this.realloc(o);for(var a=0;a<o;a++)this.buf[this.pos++]=l[a]},writeRawMessage:function(l,o){this.pos++;var a=this.pos;l(o,this);var d=this.pos-a;d>=128&&Ac(a,d,this),this.pos=a-1,this.writeVarint(d),this.pos+=d},writeMessage:function(l,o,a){this.writeTag(l,fr.Bytes),this.writeRawMessage(o,a)},writePackedVarint:function(l,o){o.length&&this.writeMessage(l,FC,o)},writePackedSVarint:function(l,o){o.length&&this.writeMessage(l,LC,o)},writePackedBoolean:function(l,o){o.length&&this.writeMessage(l,k0,o)},writePackedFloat:function(l,o){o.length&&this.writeMessage(l,xT,o)},writePackedDouble:function(l,o){o.length&&this.writeMessage(l,wT,o)},writePackedFixed32:function(l,o){o.length&&this.writeMessage(l,CT,o)},writePackedSFixed32:function(l,o){o.length&&this.writeMessage(l,Sa,o)},writePackedFixed64:function(l,o){o.length&&this.writeMessage(l,Oy,o)},writePackedSFixed64:function(l,o){o.length&&this.writeMessage(l,Fy,o)},writeBytesField:function(l,o){this.writeTag(l,fr.Bytes),this.writeBytes(o)},writeFixed32Field:function(l,o){this.writeTag(l,fr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(l,o){this.writeTag(l,fr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(l,o){this.writeTag(l,fr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(l,o){this.writeTag(l,fr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(l,o){this.writeTag(l,fr.Varint),this.writeVarint(o)},writeSVarintField:function(l,o){this.writeTag(l,fr.Varint),this.writeSVarint(o)},writeStringField:function(l,o){this.writeTag(l,fr.Bytes),this.writeString(o)},writeFloatField:function(l,o){this.writeTag(l,fr.Fixed32),this.writeFloat(o)},writeDoubleField:function(l,o){this.writeTag(l,fr.Fixed64),this.writeDouble(o)},writeBooleanField:function(l,o){this.writeVarintField(l,Boolean(o))}};class Wf{constructor(o,{pixelRatio:a,version:d,stretchX:f,stretchY:g,content:v}){this.paddedRect=o,this.pixelRatio=a,this.stretchX=f,this.stretchY=g,this.content=v,this.version=d}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Ly{constructor(o,a){const d={},f={};this.haveRenderCallbacks=[];const g=[];this.addImages(o,d,g),this.addImages(a,f,g);const{w:v,h:x}=qf(g),M=new Da({width:v||1,height:x||1});for(const D in o){const k=o[D],P=d[D].paddedRect;Da.copy(k.data,M,{x:0,y:0},{x:P.x+1,y:P.y+1},k.data)}for(const D in a){const k=a[D],P=f[D].paddedRect,O=P.x+1,z=P.y+1,V=k.data.width,K=k.data.height;Da.copy(k.data,M,{x:0,y:0},{x:O,y:z},k.data),Da.copy(k.data,M,{x:0,y:K-1},{x:O,y:z-1},{width:V,height:1}),Da.copy(k.data,M,{x:0,y:0},{x:O,y:z+K},{width:V,height:1}),Da.copy(k.data,M,{x:V-1,y:0},{x:O-1,y:z},{width:1,height:K}),Da.copy(k.data,M,{x:0,y:0},{x:O+V,y:z},{width:1,height:K})}this.image=M,this.iconPositions=d,this.patternPositions=f}addImages(o,a,d){for(const f in o){const g=o[f],v={x:0,y:0,w:g.data.width+2,h:g.data.height+2};d.push(v),a[f]=new Wf(v,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(o,a){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(d=>o.hasImage(d)),o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in o.updatedImages)this.patchUpdatedImage(this.iconPositions[d],o.getImage(d),a),this.patchUpdatedImage(this.patternPositions[d],o.getImage(d),a)}patchUpdatedImage(o,a,d){if(!o||!a||o.version===a.version)return;o.version=a.version;const[f,g]=o.tl;d.update(a.data,void 0,{x:f,y:g})}}kt(Wf,"ImagePosition"),kt(Ly,"ImageAtlas");const fl={horizontal:1,vertical:2,horizontalOnly:3};class Ic{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,a){const d=new Ic;return d.scale=o||1,d.fontStack=a,d}static forImage(o){const a=new Ic;return a.imageName=o,a}}class Du{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,a){const d=new Du;for(let f=0;f<o.sections.length;f++){const g=o.sections[f];g.image?d.addImageSection(g):d.addTextSection(g,a)}return d}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(o){this.text=function(a,d){let f="";for(let g=0;g<a.length;g++){const v=a.charCodeAt(g+1)||null,x=a.charCodeAt(g-1)||null;f+=!d&&(v&&sh(v)&&!$f[a[g+1]]||x&&sh(x)&&!$f[a[g-1]])||!$f[a[g]]?a[g]:$f[a[g]]}return f}(this.text,o)}trim(){let o=0;for(let d=0;d<this.text.length&&Cg[this.text.charCodeAt(d)];d++)o++;let a=this.text.length;for(let d=this.text.length-1;d>=0&&d>=o&&Cg[this.text.charCodeAt(d)];d--)a--;this.text=this.text.substring(o,a),this.sectionIndex=this.sectionIndex.slice(o,a)}substring(o,a){const d=new Du;return d.text=this.text.substring(o,a),d.sectionIndex=this.sectionIndex.slice(o,a),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,a)=>Math.max(o,this.sections[a].scale),0)}addTextSection(o,a){this.text+=o.text,this.sections.push(Ic.forText(o.scale,o.fontStack||a));const d=this.sections.length-1;for(let f=0;f<o.text.length;++f)this.sectionIndex.push(d)}addImageSection(o){const a=o.image?o.image.name:"";if(0===a.length)return void lr("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Ic.forImage(a)),this.sectionIndex.push(this.sections.length-1)):lr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wg(l,o,a,d,f,g,v,x,M,D,k,P,O,z,V,K){const J=Du.fromFeature(l,f);let ue;P===fl.vertical&&J.verticalizePunctuation(O);const{processBidirectionalText:xe,processStyledBidirectionalText:fe}=te;if(xe&&1===J.sections.length){ue=[];const we=xe(J.toString(),Ny(J,D,g,o,d,z,V));for(const qe of we){const Ge=new Du;Ge.text=qe,Ge.sections=J.sections;for(let nt=0;nt<qe.length;nt++)Ge.sectionIndex.push(0);ue.push(Ge)}}else if(fe){ue=[];const we=fe(J.text,J.sectionIndex,Ny(J,D,g,o,d,z,V));for(const qe of we){const Ge=new Du;Ge.text=qe[0],Ge.sectionIndex=qe[1],Ge.sections=J.sections,ue.push(Ge)}}else ue=function(we,qe){const Ge=[],nt=we.text;let Mt=0;for(const Ze of qe)Ge.push(we.substring(Mt,Ze)),Mt=Ze;return Mt<nt.length&&Ge.push(we.substring(Mt,nt.length)),Ge}(J,Ny(J,D,g,o,d,z,V));const ye=[],Te={positionedLines:ye,text:J.toString(),top:k[1],bottom:k[1],left:k[0],right:k[0],writingMode:P,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(we,qe,Ge,nt,Mt,Ze,ct,at,st,vt,mt,Nt){let Wi=0,nn=0,gi=0;const Ot="right"===at?1:"left"===at?0:.5;let pn=!1;for(const fn of Mt){const En=fn.getSections();for(const xr of En){if(xr.imageName)continue;const sr=qe[xr.fontStack];if(sr&&(pn=void 0!==sr.ascender&&void 0!==sr.descender,!pn))break}if(!pn)break}let ji=0;for(const fn of Mt){fn.trim();const En=fn.getMaxScale(),xr=24*(En-1),sr={positionedGlyphs:[],lineOffset:0};we.positionedLines[ji]=sr;const or=sr.positionedGlyphs;let wr=0;if(!fn.length()){nn+=Ze,++ji;continue}let Or=0,Do=0;for(let vn=0;vn<fn.length();vn++){const Fr=fn.getSection(vn),So=fn.getSectionIndex(vn),Wn=fn.getCharCode(vn);let kr=Fr.scale,Ps=null,Lr=null,Xr=null,oo=24,Vo=0;const Os=!(st===fl.horizontal||!mt&&!As(Wn)||mt&&(Cg[Wn]||(Vt=Wn,Q_(Vt)||Wm(Vt)||J_(Vt)||uu(Vt)||xf(Vt))));if(Fr.imageName){const qs=nt[Fr.imageName];if(!qs)continue;Xr=Fr.imageName,we.iconsInText=we.iconsInText||!0,Lr=qs.paddedRect;const ps=qs.displaySize;kr=24*kr/Nt,Ps={width:ps[0],height:ps[1],left:1,top:-3,advance:Os?ps[1]:ps[0],localGlyph:!1},Vo=pn?-Ps.height*kr:24*En-17-ps[1]*kr,oo=Ps.advance;const Md=(Os?ps[0]:ps[1])*kr-24*En;Md>0&&Md>wr&&(wr=Md)}else{const qs=Ge[Fr.fontStack];if(!qs)continue;qs[Wn]&&(Lr=qs[Wn]);const ps=qe[Fr.fontStack];if(!ps)continue;const Md=ps.glyphs[Wn];if(!Md)continue;if(Ps=Md.metrics,oo=8203!==Wn?24:0,pn){const Vp=void 0!==ps.ascender?Math.abs(ps.ascender):0,cm=void 0!==ps.descender?Math.abs(ps.descender):0,jp=(Vp+cm)*kr;Or<jp&&(Or=jp,Do=(Vp-cm)/2*kr),Vo=-Vp*kr}else Vo=24*(En-kr)-17}Os?(we.verticalizable=!0,or.push({glyph:Wn,imageName:Xr,x:Wi,y:nn+Vo,vertical:Os,scale:kr,localGlyph:Ps.localGlyph,fontStack:Fr.fontStack,sectionIndex:So,metrics:Ps,rect:Lr}),Wi+=oo*kr+vt):(or.push({glyph:Wn,imageName:Xr,x:Wi,y:nn+Vo,vertical:Os,scale:kr,localGlyph:Ps.localGlyph,fontStack:Fr.fontStack,sectionIndex:So,metrics:Ps,rect:Lr}),Wi+=Ps.advance*kr+vt)}0!==or.length&&(gi=Math.max(Wi-vt,gi),pn?Dg(or,Ot,wr,Do,Ze*En/2):Dg(or,Ot,wr,0,Ze/2)),Wi=0;const ro=Ze*En+wr;sr.lineOffset=Math.max(wr,xr),nn+=ro,++ji}var Vt;const nr=nn,{horizontalAlign:rr,verticalAlign:mr}=Mg(ct);(function(fn,En,xr,sr,or,wr){const Or=(En-xr)*or,Do=-wr*sr;for(const ro of fn)for(const vn of ro.positionedGlyphs)vn.x+=Or,vn.y+=Do})(we.positionedLines,Ot,rr,mr,gi,nr),we.top+=-mr*nr,we.bottom=we.top+nr,we.left+=-rr*gi,we.right=we.left+gi,we.hasBaseline=pn}(Te,o,a,d,ue,v,x,M,P,D,O,K),!function(we){for(const qe of we)if(0!==qe.positionedGlyphs.length)return!1;return!0}(ye)&&Te}const Cg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},By={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function I0(l,o,a,d,f,g){if(o.imageName){const v=d[o.imageName];return v?v.displaySize[0]*o.scale*24/g+f:0}{const v=a[o.fontStack],x=v&&v.glyphs[l];return x?x.metrics.advance*o.scale+f:0}}function R0(l,o,a,d){const f=Math.pow(l-o,2);return d?l<o?f/2:2*f:f+Math.abs(a)*a}function zC(l,o,a){let d=0;return 10===l&&(d-=1e4),a&&(d+=150),40!==l&&65288!==l||(d+=50),41!==o&&65289!==o||(d+=50),d}function P0(l,o,a,d,f,g){let v=null,x=R0(o,a,f,g);for(const M of d){const D=R0(o-M.x,a,f,g)+M.badness;D<=x&&(v=M,x=D)}return{index:l,x:o,priorBreak:v,badness:x}}function O0(l){return l?O0(l.priorBreak).concat(l.index):[]}function Ny(l,o,a,d,f,g,v){if("point"!==g)return[];if(!l)return[];const x=[],M=function(O,z,V,K,J,ue){let xe=0;for(let fe=0;fe<O.length();fe++){const ye=O.getSection(fe);xe+=I0(O.getCharCode(fe),ye,K,J,z,ue)}return xe/Math.max(1,Math.ceil(xe/V))}(l,o,a,d,f,v),D=l.text.indexOf("\u200b")>=0;let k=0;for(let O=0;O<l.length();O++){const z=l.getSection(O),V=l.getCharCode(O);if(Cg[V]||(k+=I0(V,z,d,f,o,v)),O<l.length()-1){const K=!((P=V)<11904||!(hp(P)||Zm(P)||gp(P)||vf(P)||oh(P)||gf(P)||Ym(P)||nh(P)||pp(P)||dd(P)||rh(P)||wf(P)||yc(P)||sa(P)||cs(P)||_f(P)||ks(P)||bf(P)||yf(P)||fp(P)));(By[V]||K||z.imageName)&&x.push(P0(O+1,k,M,x,zC(V,l.getCharCode(O+1),K&&D),!1))}}var P;return O0(P0(l.length(),k,M,x,0,!0))}function Mg(l){let o=.5,a=.5;switch(l){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:o,verticalAlign:a}}function Dg(l,o,a,d,f){if(!(o||a||d||f))return;const g=l.length-1,v=l[g],x=(v.x+v.metrics.advance*v.scale)*o;for(let M=0;M<=g;M++)l[M].x-=x,l[M].y+=a+d+f}function F0(l,o,a){const{horizontalAlign:d,verticalAlign:f}=Mg(a),g=o[0]-l.displaySize[0]*d,v=o[1]-l.displaySize[1]*f;return{image:l,top:v,bottom:v+l.displaySize[1],left:g,right:g+l.displaySize[0]}}function Sg(l,o,a,d,f,g){const v=l.image;let x;if(v.content){const J=v.content,ue=v.pixelRatio||1;x=[J[0]/ue,J[1]/ue,v.displaySize[0]-J[2]/ue,v.displaySize[1]-J[3]/ue]}const M=o.left*g,D=o.right*g;let k,P,O,z;"width"===a||"both"===a?(z=f[0]+M-d[3],P=f[0]+D+d[1]):(z=f[0]+(M+D-v.displaySize[0])/2,P=z+v.displaySize[0]);const V=o.top*g,K=o.bottom*g;return"height"===a||"both"===a?(k=f[1]+V-d[0],O=f[1]+K+d[2]):(k=f[1]+(V+K-v.displaySize[1])/2,O=k+v.displaySize[1]),{image:v,top:k,right:P,bottom:O,left:z,collisionPadding:x}}class _d extends Ie{constructor(o,a,d,f,g){super(o,a),this.angle=f,this.z=d,void 0!==g&&(this.segment=g)}clone(){return new _d(this.x,this.y,this.z,this.angle,this.segment)}}function L0(l,o,a,d,f){if(void 0===o.segment)return!0;let g=o,v=o.segment+1,x=0;for(;x>-a/2;){if(v--,v<0)return!1;x-=l[v].dist(g),g=l[v]}x+=l[v].dist(l[v+1]),v++;const M=[];let D=0;for(;x<a/2;){const k=l[v],P=l[v+1];if(!P)return!1;let O=l[v-1].angleTo(k)-k.angleTo(P);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:x,angleDelta:O}),D+=O;x-M[0].distance>d;)D-=M.shift().angleDelta;if(D>f)return!1;v++,x+=k.dist(P)}return!0}function zy(l){let o=0;for(let a=0;a<l.length-1;a++)o+=l[a].dist(l[a+1]);return o}function Vy(l,o,a){return l?.6*o*a:0}function Su(l,o){return Math.max(l?l.right-l.left:0,o?o.right-o.left:0)}function B0(l,o,a,d,f,g){const v=Vy(a,f,g),x=Su(a,d)*g;let M=0;const D=zy(l)/2;for(let k=0;k<l.length-1;k++){const P=l[k],O=l[k+1],z=P.dist(O);if(M+z>D){const V=(D-M)/z,K=hn(P.x,O.x,V),J=hn(P.y,O.y,V),ue=new _d(K,J,0,O.angleTo(P),k);return!v||L0(l,ue,x,v,o)?ue:void 0}M+=z}}function N0(l,o,a,d,f,g,v,x,M){const D=Vy(d,g,v),k=Su(d,f),P=k*v,O=0===l[0].x||l[0].x===M||0===l[0].y||l[0].y===M;return o-P<o/4&&(o=P+o/4),z0(l,O?o/2*x%o:(k/2+2*g)*v*x%o,o,D,a,P,O,!1,M)}function z0(l,o,a,d,f,g,v,x,M){const D=g/2,k=zy(l);let P=0,O=o-a,z=[];for(let V=0;V<l.length-1;V++){const K=l[V],J=l[V+1],ue=K.dist(J),xe=J.angleTo(K);for(;O+a<P+ue;){O+=a;const fe=(O-P)/ue,ye=hn(K.x,J.x,fe),Te=hn(K.y,J.y,fe);if(ye>=0&&ye<M&&Te>=0&&Te<M&&O-D>=0&&O+D<=k){const we=new _d(ye,Te,0,xe,V);we._round(),d&&!L0(l,we,g,d,f)||z.push(we)}}P+=ue}return x||z.length||v||(z=z0(l,P/2,a,d,f,g,v,!0,M)),z}function VC(l,o,a,d,f){const g=[];for(let v=0;v<l.length;v++){const x=l[v];let M;for(let D=0;D<x.length-1;D++){let k=x[D],P=x[D+1];k.x<o&&P.x<o||(k.x<o?k=new Ie(o,k.y+(o-k.x)/(P.x-k.x)*(P.y-k.y))._round():P.x<o&&(P=new Ie(o,k.y+(o-k.x)/(P.x-k.x)*(P.y-k.y))._round()),k.y<a&&P.y<a||(k.y<a?k=new Ie(k.x+(a-k.y)/(P.y-k.y)*(P.x-k.x),a)._round():P.y<a&&(P=new Ie(k.x+(a-k.y)/(P.y-k.y)*(P.x-k.x),a)._round()),k.x>=d&&P.x>=d||(k.x>=d?k=new Ie(d,k.y+(d-k.x)/(P.x-k.x)*(P.y-k.y))._round():P.x>=d&&(P=new Ie(d,k.y+(d-k.x)/(P.x-k.x)*(P.y-k.y))._round()),k.y>=f&&P.y>=f||(k.y>=f?k=new Ie(k.x+(f-k.y)/(P.y-k.y)*(P.x-k.x),f)._round():P.y>=f&&(P=new Ie(k.x+(f-k.y)/(P.y-k.y)*(P.x-k.x),f)._round()),M&&k.equals(M[M.length-1])||(M=[k],g.push(M)),M.push(P)))))}}return g}kt(_d,"Anchor");const Eu=1e20;function V0(l,o,a,d,f,g,v,x,M){for(let D=o;D<o+d;D++)jy(l,a*g+D,g,f,v,x,M);for(let D=a;D<a+f;D++)jy(l,D*g+o,1,d,v,x,M)}function jy(l,o,a,d,f,g,v){g[0]=0,v[0]=-Eu,v[1]=Eu,f[0]=l[o];for(let x=1,M=0,D=0;x<d;x++){f[x]=l[o+x*a];const k=x*x;do{const P=g[M];D=(f[x]-f[P]+k-P*P)/(x-P)/2}while(D<=v[M]&&--M>-1);M++,g[M]=x,v[M]=D,v[M+1]=Eu}for(let x=0,M=0;x<d;x++){for(;v[M+1]<x;)M++;const D=g[M],k=x-D;l[o+x*a]=f[D]+k*k}}const Eg={none:0,ideographs:1,all:2};class _h{constructor(o,a,d){this.requestManager=o,this.localGlyphMode=a,this.localFontFamily=d,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o){this.url=o}getGlyphs(o,a){const d=[];for(const f in o)for(const g of o[f])d.push({stack:f,id:g});ur(d,({stack:f,id:g},v)=>{let x=this.entries[f];x||(x=this.entries[f]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let M=x.glyphs[g];if(void 0!==M)return void v(null,{stack:f,id:g,glyph:M});if(M=this._tinySDF(x,f,g),M)return x.glyphs[g]=M,void v(null,{stack:f,id:g,glyph:M});const D=Math.floor(g/256);if(256*D>65535)return void v(new Error("glyphs > 65535 not supported"));if(x.ranges[D])return void v(null,{stack:f,id:g,glyph:M});let k=x.requests[D];k||(k=x.requests[D]=[],_h.loadGlyphRange(f,D,this.url,this.requestManager,(P,O)=>{if(O){x.ascender=O.ascender,x.descender=O.descender;for(const z in O.glyphs)this._doesCharSupportLocalGlyph(+z)||(x.glyphs[+z]=O.glyphs[+z]);x.ranges[D]=!0}for(const z of k)z(P,O);delete x.requests[D]})),k.push((P,O)=>{P?v(P):O&&v(null,{stack:f,id:g,glyph:O.glyphs[g]||null})})},(f,g)=>{if(f)a(f);else if(g){const v={};for(const{stack:x,id:M,glyph:D}of g)void 0===v[x]&&(v[x]={}),void 0===v[x].glyphs&&(v[x].glyphs={}),v[x].glyphs[M]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics},v[x].ascender=this.entries[x].ascender,v[x].descender=this.entries[x].descender;a(null,v)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==Eg.none&&(this.localGlyphMode===Eg.all?!!this.localFontFamily:!!this.localFontFamily&&(dd(o)||mp(o)||yc(o)||ks(o)||nh(o)))}_tinySDF(o,a,d){const f=this.localFontFamily;if(!f||!this._doesCharSupportLocalGlyph(d))return;let g=o.tinySDF;if(!g){let K="400";/bold/i.test(a)?K="900":/medium/i.test(a)?K="500":/light/i.test(a)&&(K="200"),g=o.tinySDF=new _h.TinySDF({fontFamily:f,fontWeight:K,fontSize:48,buffer:6,radius:16}),g.fontWeight=K}if(this.localGlyphs[g.fontWeight][d])return this.localGlyphs[g.fontWeight][d];const v=String.fromCharCode(d),{data:x,width:M,height:D,glyphWidth:k,glyphHeight:P,glyphLeft:O,glyphTop:z,glyphAdvance:V}=g.draw(v);return this.localGlyphs[g.fontWeight][d]={id:d,bitmap:new Pl({width:M,height:D},x),metrics:{width:k/2,height:P/2,left:O/2,top:z/2-27,advance:V/2,localGlyph:!0}}}}function Tg(l,o,a,d){const f=[],g=l.image,v=g.pixelRatio,x=g.paddedRect.w-2,M=g.paddedRect.h-2,D=l.right-l.left,k=l.bottom-l.top,P=g.stretchX||[[0,x]],O=g.stretchY||[[0,M]],z=(Ze,ct)=>Ze+ct[1]-ct[0],V=P.reduce(z,0),K=O.reduce(z,0),J=x-V,ue=M-K;let xe=0,fe=V,ye=0,Te=K,we=0,qe=J,Ge=0,nt=ue;if(g.content&&d){const Ze=g.content;xe=Zf(P,0,Ze[0]),ye=Zf(O,0,Ze[1]),fe=Zf(P,Ze[0],Ze[2]),Te=Zf(O,Ze[1],Ze[3]),we=Ze[0]-xe,Ge=Ze[1]-ye,qe=Ze[2]-Ze[0]-fe,nt=Ze[3]-Ze[1]-Te}const Mt=(Ze,ct,at,st)=>{const vt=yh(Ze.stretch-xe,fe,D,l.left),mt=Xf(Ze.fixed-we,qe,Ze.stretch,V),Nt=yh(ct.stretch-ye,Te,k,l.top),Wi=Xf(ct.fixed-Ge,nt,ct.stretch,K),nn=yh(at.stretch-xe,fe,D,l.left),gi=Xf(at.fixed-we,qe,at.stretch,V),Ot=yh(st.stretch-ye,Te,k,l.top),pn=Xf(st.fixed-Ge,nt,st.stretch,K),ji=new Ie(vt,Nt),Vt=new Ie(nn,Nt),nr=new Ie(nn,Ot),rr=new Ie(vt,Ot),mr=new Ie(mt/v,Wi/v),fn=new Ie(gi/v,pn/v),En=o*Math.PI/180;if(En){const or=Math.sin(En),wr=Math.cos(En),Or=[wr,-or,or,wr];ji._matMult(Or),Vt._matMult(Or),rr._matMult(Or),nr._matMult(Or)}const xr=Ze.stretch+Ze.fixed,sr=ct.stretch+ct.fixed;return{tl:ji,tr:Vt,bl:rr,br:nr,tex:{x:g.paddedRect.x+1+xr,y:g.paddedRect.y+1+sr,w:at.stretch+at.fixed-xr,h:st.stretch+st.fixed-sr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:mr,pixelOffsetBR:fn,minFontScaleX:qe/v/D,minFontScaleY:nt/v/k,isSDF:a}};if(d&&(g.stretchX||g.stretchY)){const Ze=Yf(P,J,V),ct=Yf(O,ue,K);for(let at=0;at<Ze.length-1;at++){const st=Ze[at],vt=Ze[at+1];for(let mt=0;mt<ct.length-1;mt++)f.push(Mt(st,ct[mt],vt,ct[mt+1]))}}else f.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:M+1}));return f}function Zf(l,o,a){let d=0;for(const f of l)d+=Math.max(o,Math.min(a,f[1]))-Math.max(o,Math.min(a,f[0]));return d}function Yf(l,o,a){const d=[{fixed:-1,stretch:0}];for(const[f,g]of l){const v=d[d.length-1];d.push({fixed:f-v.stretch,stretch:v.stretch}),d.push({fixed:f-v.stretch,stretch:v.stretch+(g-f)})}return d.push({fixed:o+1,stretch:a}),d}function yh(l,o,a,d){return l/o*a+d}function Xf(l,o,a,d){return l-o*a/d}function Uy(l,o,a,d){const f=o+l.positionedLines[d].lineOffset;return 0===d?a+f/2:a+(f+(o+l.positionedLines[d-1].lineOffset))/2}_h.loadGlyphRange=function(l,o,a,d,f){const g=256*o,v=g+255,x=d.transformRequest(d.normalizeGlyphsURL(a).replace("{fontstack}",l).replace("{range}",`${g}-${v}`),ke.Glyphs);je(x,(M,D)=>{if(M)f(M);else if(D){const k={},P=new Rp(D).readFields(Gf,{});for(const O of P.glyphs)k[O.id]=O;f(null,{glyphs:k,ascender:P.ascender,descender:P.descender})}})},_h.TinySDF=class{constructor({fontSize:l=24,buffer:o=3,radius:a=8,cutoff:d=.25,fontFamily:f="sans-serif",fontWeight:g="normal",fontStyle:v="normal"}={}){this.buffer=o,this.cutoff=d,this.radius=a;const x=this.size=l+4*o,M=this._createCanvas(x),D=this.ctx=M.getContext("2d",{willReadFrequently:!0});D.font=`${v} ${g} ${l}px ${f}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(l){const o=document.createElement("canvas");return o.width=o.height=l,o}draw(l){const{width:o,actualBoundingBoxAscent:a,actualBoundingBoxDescent:d,actualBoundingBoxLeft:f,actualBoundingBoxRight:g}=this.ctx.measureText(l),v=Math.ceil(a),x=Math.min(this.size-this.buffer,Math.ceil(g-f)),M=Math.min(this.size-this.buffer,v+Math.ceil(d)),D=x+2*this.buffer,k=M+2*this.buffer,P=Math.max(D*k,0),O=new Uint8ClampedArray(P),z={data:O,width:D,height:k,glyphWidth:x,glyphHeight:M,glyphTop:v,glyphLeft:0,glyphAdvance:o};if(0===x||0===M)return z;const{ctx:V,buffer:K,gridInner:J,gridOuter:ue}=this;V.clearRect(K,K,x,M),V.fillText(l,K,K+v);const xe=V.getImageData(K,K,x,M);ue.fill(Eu,0,P),J.fill(0,0,P);for(let fe=0;fe<M;fe++)for(let ye=0;ye<x;ye++){const Te=xe.data[4*(fe*x+ye)+3]/255;if(0===Te)continue;const we=(fe+K)*D+ye+K;if(1===Te)ue[we]=0,J[we]=Eu;else{const qe=.5-Te;ue[we]=qe>0?qe*qe:0,J[we]=qe<0?qe*qe:0}}V0(ue,0,0,D,k,D,this.f,this.v,this.z),V0(J,K,K,x,M,D,this.f,this.v,this.z);for(let fe=0;fe<P;fe++){const ye=Math.sqrt(ue[fe])-Math.sqrt(J[fe]);O[fe]=Math.round(255-255*(ye/this.radius+this.cutoff))}return z}};class j0{constructor(o=[],a=Hy){if(this.data=o,this.length=this.data.length,this.compare=a,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const o=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:a,compare:d}=this,f=a[o];for(;o>0;){const g=o-1>>1,v=a[g];if(d(f,v)>=0)break;a[o]=v,o=g}a[o]=f}_down(o){const{data:a,compare:d}=this,f=this.length>>1,g=a[o];for(;o<f;){let v=1+(o<<1),x=a[v];const M=v+1;if(M<this.length&&d(a[M],x)<0&&(v=M,x=a[M]),d(x,g)>=0)break;a[o]=x,o=v}a[o]=g}}function Hy(l,o){return l<o?-1:l>o?1:0}function Kf(l,o=1,a=!1){let d=1/0,f=1/0,g=-1/0,v=-1/0;const x=l[0];for(let z=0;z<x.length;z++){const V=x[z];(!z||V.x<d)&&(d=V.x),(!z||V.y<f)&&(f=V.y),(!z||V.x>g)&&(g=V.x),(!z||V.y>v)&&(v=V.y)}const M=Math.min(g-d,v-f);let D=M/2;const k=new j0([],jC);if(0===M)return new Ie(d,f);for(let z=d;z<g;z+=M)for(let V=f;V<v;V+=M)k.push(new vh(z+D,V+D,D,l));let P=function(z){let V=0,K=0,J=0;const ue=z[0];for(let xe=0,fe=ue.length,ye=fe-1;xe<fe;ye=xe++){const Te=ue[xe],we=ue[ye],qe=Te.x*we.y-we.x*Te.y;K+=(Te.x+we.x)*qe,J+=(Te.y+we.y)*qe,V+=3*qe}return new vh(K/V,J/V,0,z)}(l),O=k.length;for(;k.length;){const z=k.pop();(z.d>P.d||!P.d)&&(P=z,a&&console.log("found best %d after %d probes",Math.round(1e4*z.d)/1e4,O)),z.max-P.d<=o||(D=z.h/2,k.push(new vh(z.p.x-D,z.p.y-D,D,l)),k.push(new vh(z.p.x+D,z.p.y-D,D,l)),k.push(new vh(z.p.x-D,z.p.y+D,D,l)),k.push(new vh(z.p.x+D,z.p.y+D,D,l)),O+=4)}return a&&(console.log(`num probes: ${O}`),console.log(`best distance: ${P.d}`)),P.p}function jC(l,o){return o.max-l.max}function vh(l,o,a,d){this.p=new Ie(l,o),this.h=a,this.d=function(f,g){let v=!1,x=1/0;for(let M=0;M<g.length;M++){const D=g[M];for(let k=0,P=D.length,O=P-1;k<P;O=k++){const z=D[k],V=D[O];z.y>f.y!=V.y>f.y&&f.x<(V.x-z.x)*(f.y-z.y)/(V.y-z.y)+z.x&&(v=!v),x=Math.min(x,Jb(f,z,V))}}return(v?1:-1)*Math.sqrt(x)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}const $y=Number.POSITIVE_INFINITY,UC=Math.sqrt(2);function Gy(l,o){return o[1]!==$y?function(a,d,f){let g=0,v=0;switch(d=Math.abs(d),f=Math.abs(f),a){case"top-right":case"top-left":case"top":v=f-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-f}switch(a){case"top-right":case"bottom-right":case"right":g=-d;break;case"top-left":case"bottom-left":case"left":g=d}return[g,v]}(l,o[0],o[1]):function(a,d){let f=0,g=0;d<0&&(d=0);const v=d/UC;switch(a){case"top-right":case"top-left":g=v-7;break;case"bottom-right":case"bottom-left":g=7-v;break;case"bottom":g=7-d;break;case"top":g=d-7}switch(a){case"top-right":case"bottom-right":f=-v;break;case"top-left":case"bottom-left":f=v;break;case"left":f=d;break;case"right":f=-d}return[f,g]}(l,o[0])}function qy(l,o,a,d,f,g,v,x,M,D){l.createArrays(),l.tilePixelRatio=Oi/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;const k=l.layers[0].layout,P=l.layers[0]._unevaluatedLayout._values,O={};if("composite"===l.textSizeData.kind){const{minZoom:K,maxZoom:J}=l.textSizeData;O.compositeTextSizes=[P["text-size"].possiblyEvaluate(new ie(K),x),P["text-size"].possiblyEvaluate(new ie(J),x)]}if("composite"===l.iconSizeData.kind){const{minZoom:K,maxZoom:J}=l.iconSizeData;O.compositeIconSizes=[P["icon-size"].possiblyEvaluate(new ie(K),x),P["icon-size"].possiblyEvaluate(new ie(J),x)]}O.layoutTextSize=P["text-size"].possiblyEvaluate(new ie(M+1),x),O.layoutIconSize=P["icon-size"].possiblyEvaluate(new ie(M+1),x),O.textMaxSize=P["text-size"].possiblyEvaluate(new ie(18),x);const z="map"===k.get("text-rotation-alignment")&&"point"!==k.get("symbol-placement"),V=k.get("text-size");for(const K of l.features){const J=k.get("text-font").evaluate(K,{},x).join(","),ue=V.evaluate(K,{},x),xe=O.layoutTextSize.evaluate(K,{},x),fe=(O.layoutIconSize.evaluate(K,{},x),{horizontal:{},vertical:void 0}),ye=K.text;let Te,we=[0,0];if(ye){const nt=ye.toString(),Mt=24*k.get("text-letter-spacing").evaluate(K,{},x),Ze=24*k.get("text-line-height").evaluate(K,{},x),ct=vc(nt)?Mt:0,at=k.get("text-anchor").evaluate(K,{},x),st=k.get("text-variable-anchor");if(!st){const gi=k.get("text-radial-offset").evaluate(K,{},x);we=gi?Gy(at,[24*gi,$y]):k.get("text-offset").evaluate(K,{},x).map(Ot=>24*Ot)}let vt=z?"center":k.get("text-justify").evaluate(K,{},x);const mt=k.get("symbol-placement"),Nt="point"===mt,Wi="point"===mt?24*k.get("text-max-width").evaluate(K,{},x):0,nn=gi=>{l.allowVerticalPlacement&&Fo(nt)&&(fe.vertical=wg(ye,o,a,f,J,Wi,Ze,at,gi,ct,we,fl.vertical,!0,mt,xe,ue))};if(!z&&st){const gi="auto"===vt?st.map(pn=>kg(pn)):[vt];let Ot=!1;for(let pn=0;pn<gi.length;pn++){const ji=gi[pn];if(!fe.horizontal[ji])if(Ot)fe.horizontal[ji]=fe.horizontal[0];else{const Vt=wg(ye,o,a,f,J,Wi,Ze,"center",ji,ct,we,fl.horizontal,!1,mt,xe,ue);Vt&&(fe.horizontal[ji]=Vt,Ot=1===Vt.positionedLines.length)}}nn("left")}else{if("auto"===vt&&(vt=kg(at)),Nt||k.get("text-writing-mode").indexOf("horizontal")>=0||!Fo(nt)){const gi=wg(ye,o,a,f,J,Wi,Ze,at,vt,ct,we,fl.horizontal,!1,mt,xe,ue);gi&&(fe.horizontal[vt]=gi)}nn("point"===mt?"left":vt)}}let qe=!1;if(K.icon&&K.icon.name){const nt=d[K.icon.name];nt&&(Te=F0(f[K.icon.name],k.get("icon-offset").evaluate(K,{},x),k.get("icon-anchor").evaluate(K,{},x)),qe=nt.sdf,void 0===l.sdfIcons?l.sdfIcons=nt.sdf:l.sdfIcons!==nt.sdf&&lr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(nt.pixelRatio!==l.pixelRatio||0!==k.get("icon-rotate").constantOr(1))&&(l.iconsNeedLinear=!0))}const Ge=Wy(fe.horizontal)||fe.vertical;l.iconsInText||(l.iconsInText=!!Ge&&Ge.iconsInText),(Ge||Te)&&MT(l,K,fe,Te,d,O,xe,0,we,qe,v,x,D)}g&&l.generateCollisionDebugBuffers(M,l.collisionBoxArray)}function kg(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function MT(l,o,a,d,f,g,v,x,M,D,k,P,O){let z=g.textMaxSize.evaluate(o,{},P);void 0===z&&(z=v);const V=l.layers[0].layout,K=V.get("icon-offset").evaluate(o,{},P),J=Wy(a.horizontal)||a.vertical,ue="globe"===O.name,xe=v/24,fe=l.tilePixelRatio*z/24,ye=(ct=l.overscaling,l.zoom>18&&ct>2&&(ct>>=1),Math.max(Oi/(512*ct),1)*V.get("symbol-spacing")),Te=V.get("text-padding")*l.tilePixelRatio,we=V.get("icon-padding")*l.tilePixelRatio,qe=xt(V.get("text-max-angle")),Ge="map"===V.get("text-rotation-alignment")&&"point"!==V.get("symbol-placement"),nt="map"===V.get("icon-rotation-alignment")&&"point"!==V.get("symbol-placement"),Mt=V.get("symbol-placement"),Ze=ye/2;var ct;const at=V.get("icon-text-fit");let st;d&&"none"!==at&&(l.allowVerticalPlacement&&a.vertical&&(st=Sg(d,a.vertical,at,V.get("icon-text-fit-padding"),K,xe)),J&&(d=Sg(d,J,at,V.get("icon-text-fit-padding"),K,xe)));const vt=(mt,Nt,Wi)=>{if(Nt.x<0||Nt.x>=Oi||Nt.y<0||Nt.y>=Oi)return;let nn=null;if(ue){const{x:gi,y:Ot,z:pn}=O.projectTilePoint(Nt.x,Nt.y,Wi);nn={anchor:new _d(gi,Ot,pn,0,void 0),up:O.upVector(Wi,Nt.x,Nt.y)}}!function(gi,Ot,pn,ji,Vt,nr,rr,mr,fn,En,xr,sr,or,wr,Or,Do,ro,vn,Fr,So,Wn,kr,Ps,Lr,Xr){const oo=gi.addToLineVertexArray(Ot,ji);let Vo,Os,qs,ps,Md,Vp,cm,jp=0,At=0,ox=0,Xg=0,lv=-1,cv=-1;const Fc={};let sx=hd("");const Eh=pn?pn.anchor:Ot;let dv=0,Up=0;if(void 0===fn._unevaluatedLayout.getValue("text-radial-offset")?[dv,Up]=fn.layout.get("text-offset").evaluate(Wn,{},Xr).map(Ta=>24*Ta):(dv=24*fn.layout.get("text-radial-offset").evaluate(Wn,{},Xr),Up=$y),gi.allowVerticalPlacement&&Vt.vertical){const Ta=Vt.vertical;if(Or)Vp=Zy(Ta),mr&&(cm=Zy(mr));else{const ka=fn.layout.get("text-rotate").evaluate(Wn,{},Xr)+90;qs=Ag(En,Eh,Ot,xr,sr,or,Ta,wr,ka,Do),mr&&(ps=Ag(En,Eh,Ot,xr,sr,or,mr,vn,ka))}}if(nr){const Ta=fn.layout.get("icon-rotate").evaluate(Wn,{},Xr),ka="none"!==fn.layout.get("icon-text-fit"),Th=Tg(nr,Ta,Ps,ka),uv=mr?Tg(mr,Ta,Ps,ka):void 0;Os=Ag(En,Eh,Ot,xr,sr,or,nr,vn,Ta),jp=4*Th.length;const Hl=gi.iconSizeData;let $l=null;"source"===Hl.kind?($l=[Fl*fn.layout.get("icon-size").evaluate(Wn,{},Xr)],$l[0]>yd&&lr(`${gi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Hl.kind&&($l=[Fl*kr.compositeIconSizes[0].evaluate(Wn,{},Xr),Fl*kr.compositeIconSizes[1].evaluate(Wn,{},Xr)],($l[0]>yd||$l[1]>yd)&&lr(`${gi.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),gi.addSymbols(gi.icon,Th,$l,So,Fr,Wn,!1,pn,Ot,oo.lineStartIndex,oo.lineLength,-1,Lr,Xr),lv=gi.icon.placedSymbolArray.length-1,uv&&(At=4*uv.length,gi.addSymbols(gi.icon,uv,$l,So,Fr,Wn,fl.vertical,pn,Ot,oo.lineStartIndex,oo.lineLength,-1,Lr,Xr),cv=gi.icon.placedSymbolArray.length-1)}for(const Ta in Vt.horizontal){const ka=Vt.horizontal[Ta];Vo||(sx=hd(ka.text),Or?Md=Zy(ka):Vo=Ag(En,Eh,Ot,xr,sr,or,ka,wr,fn.layout.get("text-rotate").evaluate(Wn,{},Xr),Do));const Th=1===ka.positionedLines.length;if(ox+=U0(gi,pn,Ot,ka,rr,fn,Or,Wn,Do,oo,Vt.vertical?fl.horizontal:fl.horizontalOnly,Th?Object.keys(Vt.horizontal):[Ta],Fc,lv,kr,Lr,Xr),Th)break}Vt.vertical&&(Xg+=U0(gi,pn,Ot,Vt.vertical,rr,fn,Or,Wn,Do,oo,fl.vertical,["vertical"],Fc,cv,kr,Lr,Xr));let Ea=-1;const ax=(Ta,ka)=>Ta?Math.max(Ta,ka):ka;Ea=ax(Md,Ea),Ea=ax(Vp,Ea),Ea=ax(cm,Ea);const dm=Ea>-1?1:0;gi.glyphOffsetArray.length>=Rc.MAX_GLYPHS&&lr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Wn.sortKey&&gi.addToSortKeyRanges(gi.symbolInstances.length,Wn.sortKey),gi.symbolInstances.emplaceBack(Eh.x,Eh.y,Eh.z,Ot.x,Ot.y,Fc.right>=0?Fc.right:-1,Fc.center>=0?Fc.center:-1,Fc.left>=0?Fc.left:-1,Fc.vertical>=0?Fc.vertical:-1,lv,cv,sx,void 0!==Vo?Vo:gi.collisionBoxArray.length,void 0!==Vo?Vo+1:gi.collisionBoxArray.length,void 0!==qs?qs:gi.collisionBoxArray.length,void 0!==qs?qs+1:gi.collisionBoxArray.length,void 0!==Os?Os:gi.collisionBoxArray.length,void 0!==Os?Os+1:gi.collisionBoxArray.length,ps||gi.collisionBoxArray.length,ps?ps+1:gi.collisionBoxArray.length,xr,ox,Xg,jp,At,dm,0,dv,Up,Ea)}(l,Nt,nn,mt,a,d,f,st,l.layers[0],l.collisionBoxArray,o.index,o.sourceLayerIndex,l.index,Te,Ge,M,0,we,nt,K,o,g,D,k,P)};if("line"===Mt)for(const mt of VC(o.geometry,0,0,Oi,Oi)){const Nt=N0(mt,ye,qe,a.vertical||J,d,24,fe,l.overscaling,Oi);for(const Wi of Nt){const nn=J;nn&&Bl(l,nn.text,Ze,Wi)||vt(mt,Wi,P)}}else if("line-center"===Mt){for(const mt of o.geometry)if(mt.length>1){const Nt=B0(mt,qe,a.vertical||J,d,24,fe);Nt&&vt(mt,Nt,P)}}else if("Polygon"===o.type)for(const mt of My(o.geometry,0)){const Nt=Kf(mt,16);vt(mt[0],new _d(Nt.x,Nt.y,0,0,void 0),P)}else if("LineString"===o.type)for(const mt of o.geometry)vt(mt,new _d(mt[0].x,mt[0].y,0,0,void 0),P);else if("Point"===o.type)for(const mt of o.geometry)for(const Nt of mt)vt([Nt],new _d(Nt.x,Nt.y,0,0,void 0),P)}const yd=32640;function U0(l,o,a,d,f,g,v,x,M,D,k,P,O,z,V,K,J){const ue=function(ye,Te,we,qe,Ge,nt,Mt,Ze){const ct=[];if(0===Te.positionedLines.length)return ct;const at=qe.layout.get("text-rotate").evaluate(nt,{})*Math.PI/180,st=function(nn){const gi=nn[0],Ot=nn[1],pn=gi*Ot;return pn>0?[gi,-Ot]:pn<0?[-gi,Ot]:0===gi?[Ot,gi]:[Ot,-gi]}(we);let vt=Math.abs(Te.top-Te.bottom);for(const nn of Te.positionedLines)vt-=nn.lineOffset;const mt=Te.positionedLines.length,Nt=vt/mt;let Wi=Te.top-we[1];for(let nn=0;nn<mt;++nn){const gi=Te.positionedLines[nn];Wi=Uy(Te,Nt,Wi,nn);for(const Ot of gi.positionedGlyphs){if(!Ot.rect)continue;const pn=Ot.rect||{};let ji=4,Vt=!0,nr=1,rr=0;if(Ot.imageName){const Lr=Mt[Ot.imageName];if(!Lr)continue;if(Lr.sdf){lr("SDF images are not supported in formatted text and will be ignored.");continue}Vt=!1,nr=Lr.pixelRatio,ji=1/nr}const mr=(Ge||Ze)&&Ot.vertical,fn=Ot.metrics.advance*Ot.scale/2,En=Ot.metrics,xr=Ot.rect;if(null===xr)continue;Ze&&Te.verticalizable&&(rr=Ot.imageName?fn-Ot.metrics.width*Ot.scale/2:0);const sr=Ge?[Ot.x+fn,Ot.y]:[0,0];let or=[0,0],wr=[0,0],Or=!1;Ge||(mr?(wr=[Ot.x+fn+st[0],Ot.y+st[1]-rr],Or=!0):or=[Ot.x+fn+we[0],Ot.y+we[1]-rr]);const Do=xr.w*Ot.scale/(nr*(Ot.localGlyph?2:1)),ro=xr.h*Ot.scale/(nr*(Ot.localGlyph?2:1));let vn,Fr,So,Wn;if(mr){const Lr=Ot.y-Wi,Xr=new Ie(-fn,fn-Lr),oo=-Math.PI/2,Vo=new Ie(...wr);vn=new Ie(-fn+or[0],or[1]),vn._rotateAround(oo,Xr)._add(Vo),vn.x+=-Lr+fn,vn.y-=(En.left-ji)*Ot.scale;const Os=Ot.imageName?En.advance*Ot.scale:24*Ot.scale,qs=String.fromCharCode(Ot.glyph);S0(qs)?vn.x+=(1-ji)*Ot.scale:OC(qs)?vn.x+=Os-En.height*Ot.scale+(-ji-1)*Ot.scale:vn.x+=Ot.imageName||En.width+2*ji===xr.w&&En.height+2*ji===xr.h?(Os-ro)/2:(Os-(En.height+2*ji)*Ot.scale)/2,Fr=new Ie(vn.x,vn.y-Do),So=new Ie(vn.x+ro,vn.y),Wn=new Ie(vn.x+ro,vn.y-Do)}else{const Lr=(En.left-ji)*Ot.scale-fn+or[0],Xr=(-En.top-ji)*Ot.scale+or[1],oo=Lr+Do,Vo=Xr+ro;vn=new Ie(Lr,Xr),Fr=new Ie(oo,Xr),So=new Ie(Lr,Vo),Wn=new Ie(oo,Vo)}if(at){let Lr;Lr=Ge?new Ie(0,0):Or?new Ie(st[0],st[1]):new Ie(we[0],we[1]),vn._rotateAround(at,Lr),Fr._rotateAround(at,Lr),So._rotateAround(at,Lr),Wn._rotateAround(at,Lr)}const kr=new Ie(0,0),Ps=new Ie(0,0);ct.push({tl:vn,tr:Fr,bl:So,br:Wn,tex:pn,writingMode:Te.writingMode,glyphOffset:sr,sectionIndex:Ot.sectionIndex,isSDF:Vt,pixelOffsetTL:kr,pixelOffsetBR:Ps,minFontScaleX:0,minFontScaleY:0})}}return ct}(0,d,M,g,v,x,f,l.allowVerticalPlacement),xe=l.textSizeData;let fe=null;"source"===xe.kind?(fe=[Fl*g.layout.get("text-size").evaluate(x,{},J)],fe[0]>yd&&lr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===xe.kind&&(fe=[Fl*V.compositeTextSizes[0].evaluate(x,{},J),Fl*V.compositeTextSizes[1].evaluate(x,{},J)],(fe[0]>yd||fe[1]>yd)&&lr(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,ue,fe,M,v,x,k,o,a,D.lineStartIndex,D.lineLength,z,K,J);for(const ye of P)O[ye]=l.text.placedSymbolArray.length-1;return 4*ue.length}function Wy(l){for(const o in l)return l[o];return null}function Ag(l,o,a,d,f,g,v,x,M,D){let k=v.top,P=v.bottom,O=v.left,z=v.right;const V=v.collisionPadding;if(V&&(O-=V[0],k-=V[1],z+=V[2],P+=V[3]),M){const K=new Ie(O,k),J=new Ie(z,k),ue=new Ie(O,P),xe=new Ie(z,P),fe=xt(M);let ye=new Ie(0,0);D&&(ye=new Ie(D[0],D[1])),K._rotateAround(fe,ye),J._rotateAround(fe,ye),ue._rotateAround(fe,ye),xe._rotateAround(fe,ye),O=Math.min(K.x,J.x,ue.x,xe.x),z=Math.max(K.x,J.x,ue.x,xe.x),k=Math.min(K.y,J.y,ue.y,xe.y),P=Math.max(K.y,J.y,ue.y,xe.y)}return l.emplaceBack(o.x,o.y,o.z,a.x,a.y,O,k,z,P,x,d,f,g),l.length-1}function Zy(l){l.collisionPadding&&(l.top-=l.collisionPadding[1],l.bottom+=l.collisionPadding[3]);const o=l.bottom-l.top;return o>0?Math.max(10,o):null}function Bl(l,o,a,d){const f=l.compareText;if(o in f){const g=f[o];for(let v=g.length-1;v>=0;v--)if(d.dist(g[v])<a)return!0}else f[o]=[];return f[o].push(d),!1}const HC=dt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Yy}=HC,H0=dt([{name:"a_pos_3",components:3,type:"Int16"}]);var Qf=dt([{name:"a_pos",type:"Int16",components:2}]);const vd=Oi/Math.PI/2,Xy=2*Ga(1,0)*vd*Math.PI,bh=[64,32,16],Nl=-vd,zl=vd,$C=[new Ma([Nl,Nl,Nl],[zl,zl,zl]),new Ma([Nl,Nl,Nl],[0,0,zl]),new Ma([0,Nl,Nl],[zl,0,zl]),new Ma([Nl,0,Nl],[0,zl,zl]),new Ma([0,0,Nl],[zl,zl,zl])];function gn(l,o,a,d=!0){const f=Il([],l._camera.position,l.worldSize),g=[o,a,1,1];bu(g,g,l.pixelMatrixInverse),Dp(g,g,1/g[3]);const v=Gs([],Rl([],g,f)),x=l.globeMatrix,M=[x[12],x[13],x[14]],D=Rl([],M,f),k=Af(D),P=Gs([],D),O=l.worldSize/(2*Math.PI),z=pl(P,v),V=Math.asin(O/k);if(V<Math.acos(z)){if(!d)return null;const Mt=[],Ze=[];Il(Mt,v,k/z),Gs(Ze,Rl(Ze,Mt,D)),Gs(v,vu(v,D,Il(v,Ze,Math.tan(V)*k)))}const K=[];new r0(f,v).closestPointOnSphere(M,O,K);const J=Gs([],Wr(x,0)),ue=Gs([],Wr(x,1)),xe=Gs([],Wr(x,2)),fe=pl(J,K),ye=pl(ue,K),Te=pl(xe,K),we=Xt(Math.asin(-ye/O));let qe=Xt(Math.atan2(fe,Te));qe=l.center.lng+function(Mt,Ze){const ct=(Ze-Mt+180)%360-180;return ct<-180?ct+360:ct}(l.center.lng,qe);const Ge=Cc(qe),nt=Et($e(we),0,1);return new xp(Ge,nt)}class q{constructor(o,a,d){this.a=Rl([],o,d),this.b=Rl([],a,d),this.center=d;const f=Gs([],this.a),g=Gs([],this.b);this.angle=Math.acos(pl(f,g))}}function Ig(l,o){if(0===l.angle)return null;let a;return a=0===l.a[o]?1/l.angle*.5*Math.PI:1/l.angle*Math.atan(l.b[o]/l.a[o]/Math.sin(l.angle)-1/Math.tan(l.angle)),a<0||a>1?null:function(d,f,g,v){const x=Math.sin(g);return d*(Math.sin((1-v)*g)/x)+f*(Math.sin(v*g)/x)}(l.a[o],l.b[o],l.angle,Et(a,0,1))+l.center[o]}function Vl(l){if(l.z<=1)return $C[l.z+2*l.y+l.x];const o=Pg(Rg(l));return Ma.fromPoints(o)}function $0(l,o){const a=xh(o.zoom);if(0===a)return Vl(l);const d=Rg(l),f=Pg(d),g=Cc(d.getWest())*o.worldSize,v=Cc(d.getEast())*o.worldSize,x=$e(d.getNorth())*o.worldSize,M=$e(d.getSouth())*o.worldSize,D=[g,x,0],k=[v,x,0],P=[g,M,0],O=[v,M,0],z=hy([],o.globeMatrix);return Mo(D,D,z),Mo(k,k,z),Mo(P,P,z),Mo(O,O,z),f[0]=nl(f[0],P,a),f[1]=nl(f[1],O,a),f[2]=nl(f[2],k,a),f[3]=nl(f[3],D,a),Ma.fromPoints(f)}function G0(l,o,a,d,f){for(const g of a)Mo(g,g,d),Il(g,g,f),gy(l,l,g),_y(o,o,g)}function Rg({x:l,y:o,z:a}){const d=1/(1<<a),f=new Gn(qn(l*d),No((o+1)*d)),g=new Gn(qn((l+1)*d),No(o*d));return new mu(f,g)}function Pg(l){const o=xt(l.getNorth()),a=xt(l.getSouth()),d=Math.cos(o),f=Math.cos(a),g=Math.sin(o),v=Math.sin(a),x=l.getWest(),M=l.getEast();return[Pp(f,v,x),Pp(f,v,M),Pp(d,g,M),Pp(d,g,x)]}function Pp(l,o,a,d=vd){return a=xt(a),[l*Math.sin(a)*d,-o*d,l*Math.cos(a)*d]}function Og(l,o,a){return Pp(Math.cos(xt(l)),Math.sin(xt(l)),o,a)}function Fg(l,o,a,d){const f=1<<a.z,g=(l/Oi+a.x)/f;return Og(No((o/Oi+a.y)/f),qn(g),d)}function Jf({min:l,max:o}){return 16383/Math.max(o[0]-l[0],o[1]-l[1],o[2]-l[2])}const Ky=new Float64Array(16);function no(l){const o=Jf(l),a=py(Ky,[o,o,o]);return ng(a,a,((d=[])[0]=-(f=l.min)[0],d[1]=-f[1],d[2]=-f[2],d));var d,f}function Qy(l){const o=(d=l.min,(a=Ky)[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=d[0],a[13]=d[1],a[14]=d[2],a[15]=1,a);var a,d;const f=1/Jf(l);return Sc(o,o,[f,f,f])}function Lg(l,o,a,d,f){const g=function(M){const D=Oi/(2*Math.PI);return M/(2*Math.PI)/D}(a),v=[l,o,-a/(2*Math.PI)],x=ca(new Float64Array(16));return ng(x,x,v),Sc(x,x,[g,g,g]),Tf(x,x,xt(-f)),kf(x,x,xt(-d)),x}function xh(l){return zt(5,6,l)}function W0(l,o){const a=Og(o.lat,o.lng);return g=(d=da([],function(z){const V=Og(z._center.lat,z._center.lng);let K=og([],Mp(0,1,0),V);const J=fy([],-z.angle,V);K=Mo(K,K,J),fy(J,-z._pitch,K);const ue=Gs([],V);return Il(ue,ue,z.cameraToCenterDistance/z.pixelsPerMeter*Xy),Mo(ue,ue,J),vu([],V,ue)}(l),a))[0],v=d[1],x=d[2],M=(f=a)[0],D=f[1],k=f[2],O=(P=Math.sqrt(g*g+v*v+x*x)*Math.sqrt(M*M+D*D+k*k))&&pl(d,f)/P,Math.acos(Math.min(Math.max(O,-1),1));var d,f,g,v,x,M,D,k,P,O}const GC=xt(85),DT=Math.cos(GC),ST=Math.sin(GC);function Z0(l,o){const a=l.fovAboveCenter,d=l.elevation?l.elevation.getMinElevationBelowMSL()*o:0,f=(l._camera.position[2]*l.worldSize-d)/Math.cos(l._pitch),g=Math.sin(a)*f/Math.sin(Math.max(Math.PI/2-l._pitch-a,.01)),v=Math.sin(l._pitch)*g+f;return Math.min(1.01*v,f*(1/l._horizonShift))}function Tu(l,o){if(!o.isReprojectedInTileSpace)return{scale:1<<l.z,x:l.x,y:l.y,x2:l.x+1,y2:l.y+1,projection:o};const a=Math.pow(2,-l.z),d=l.x*a,f=(l.x+1)*a,g=l.y*a,v=(l.y+1)*a,x=qn(d),M=qn(f),D=No(g),k=No(v),P=o.project(x,D),O=o.project(M,D),z=o.project(M,k),V=o.project(x,k);let K=Math.min(P.x,O.x,z.x,V.x),J=Math.min(P.y,O.y,z.y,V.y),ue=Math.max(P.x,O.x,z.x,V.x),xe=Math.max(P.y,O.y,z.y,V.y);const fe=a/16;function ye(we,qe,Ge,nt,Mt,Ze){const ct=(Ge+Mt)/2,at=(nt+Ze)/2,st=o.project(qn(ct),No(at)),vt=Math.max(0,K-st.x,J-st.y,st.x-ue,st.y-xe);K=Math.min(K,st.x),ue=Math.max(ue,st.x),J=Math.min(J,st.y),xe=Math.max(xe,st.y),vt>fe&&(ye(we,st,Ge,nt,ct,at),ye(st,qe,ct,at,Mt,Ze))}ye(P,O,d,g,f,g),ye(O,z,f,g,f,v),ye(z,V,f,v,d,v),ye(V,P,d,v,d,g),K-=fe,J-=fe,ue+=fe,xe+=fe;const Te=1/Math.max(ue-K,xe-J);return{scale:Te,x:K*Te,y:J*Te,x2:ue*Te,y2:xe*Te,projection:o}}const ET=ca(new Float32Array(16));class ku{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,a){return{x:0,y:0,z:0}}unproject(o,a){return new Gn(0,0)}projectTilePoint(o,a,d){return{x:o,y:a,z:0}}locationPoint(o,a,d=!0){return o._coordinatePoint(o.locationCoordinate(a),d)}pixelsPerMeter(o,a){return Ga(1,o)*a}pixelSpaceConversion(o,a,d){return 1}farthestPixelDistance(o){return Z0(o,o.pixelsPerMeter)}pointCoordinate(o,a,d,f){const g=o.horizonLineFromTop(!1),v=new Ie(a,Math.max(g,d));return o.rayIntersectionCoordinate(o.pointRayIntersection(v,f))}pointCoordinate3D(o,a,d){const f=new Ie(a,d);if(o.elevation)return o.elevation.pointCoordinate(f);{const g=this.pointCoordinate(o,f.x,f.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(o,a){if(o.elevation)return!this.pointCoordinate3D(o,a.x,a.y);const d=o.horizonLineFromTop();return a.y<d}createInversionMatrix(o,a){return ET}createTileMatrix(o,a,d){let f,g,v;const x=d.canonical,M=ca(new Float64Array(16));if(this.isReprojectedInTileSpace){const D=Tu(x,this);f=1,g=D.x+d.wrap*D.scale,v=D.y,Sc(M,M,[f/D.scale,f/D.scale,o.pixelsPerMeter/a])}else f=a/o.zoomScale(x.z),g=(x.x+Math.pow(2,x.z)*d.wrap)*f,v=x.y*f;return ng(M,M,[g,v,0]),Sc(M,M,[f/Oi,f/Oi,1]),M}upVector(o,a,d){return[0,0,1]}upVectorScale(o,a,d){return{metersToTile:1}}}class Op extends ku{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[a,d]=this.parallels=o.parallels||[29.5,45.5],f=Math.sin(xt(a));this.n=(f+Math.sin(xt(d)))/2,this.c=1+f*(2*this.n-f),this.r0=Math.sqrt(this.c)/this.n}project(o,a){const{n:d,c:f,r0:g}=this,v=xt(o-this.center[0]),x=xt(a),M=Math.sqrt(f-2*d*Math.sin(x))/d;return{x:M*Math.sin(v*d),y:M*Math.cos(v*d)-g,z:0}}unproject(o,a){const{n:d,c:f,r0:g}=this,v=g+a;let x=Math.atan2(o,Math.abs(v))*Math.sign(v);v*d<0&&(x-=Math.PI*Math.sign(o)*Math.sign(v));const M=xt(this.center[0])*d;x=Di(x,-Math.PI-M,Math.PI-M);const D=Xt(x/d)+this.center[0],k=Math.asin(Et((f-(o*o+v*v)*d*d)/(2*d),-1,1)),P=Et(Xt(k),-85.051129,Mc);return new Gn(D,P)}}const em=1.340264,Fp=-.081106,Au=893e-6,tm=.003796,im=Math.sqrt(3)/2;class qC extends ku{project(o,a){a=a/180*Math.PI,o=o/180*Math.PI;const d=Math.asin(im*Math.sin(a)),f=d*d,g=f*f*f;return{x:.5*(o*Math.cos(d)/(im*(em+3*Fp*f+g*(7*Au+9*tm*f)))/Math.PI+.5),y:1-.5*(d*(em+Fp*f+g*(Au+tm*f))/Math.PI+1),z:0}}unproject(o,a){o=(2*o-.5)*Math.PI;let d=a=(2*(1-a)-1)*Math.PI,f=d*d,g=f*f*f;for(let k,P,O,z=0;z<12&&(P=d*(em+Fp*f+g*(Au+tm*f))-a,O=em+3*Fp*f+g*(7*Au+9*tm*f),k=P/O,d=Et(d-k,-Math.PI/3,Math.PI/3),f=d*d,g=f*f*f,!(Math.abs(k)<1e-12));++z);const v=im*o*(em+3*Fp*f+g*(7*Au+9*tm*f))/Math.cos(d),x=Math.asin(Math.sin(d)/im),M=Et(180*v/Math.PI,-180,180),D=Et(180*x/Math.PI,-85.051129,Mc);return new Gn(M,D)}}class WC extends ku{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,a){return{x:.5+o/360,y:.5-a/360,z:0}}unproject(o,a){const d=360*(o-.5),f=Et(360*(.5-a),-85.051129,Mc);return new Gn(d,f)}}const Lp=Math.PI/2;function Bg(l){return Math.tan((Lp+l)/2)}class ZC extends ku{constructor(o){super(o),this.center=o.center||[0,30];const[a,d]=this.parallels=o.parallels||[30,30],f=xt(a),g=xt(d),v=Math.cos(f);this.n=f===g?Math.sin(f):Math.log(v/Math.cos(g))/Math.log(Bg(g)/Bg(f)),this.f=v*Math.pow(Bg(f),this.n)/this.n}project(o,a){a=xt(a),o=xt(o-this.center[0]);const d=1e-6,{n:f,f:g}=this;g>0?a<-Lp+d&&(a=-Lp+d):a>Lp-d&&(a=Lp-d);const v=g/Math.pow(Bg(a),f),x=v*Math.sin(f*o),M=g-v*Math.cos(f*o);return{x:.5*(x/Math.PI+.5),y:1-.5*(M/Math.PI+.5),z:0}}unproject(o,a){o=(2*o-.5)*Math.PI,a=(2*(1-a)-.5)*Math.PI;const{n:d,f}=this,g=f-a,v=Math.sign(g),x=Math.sign(d)*Math.sqrt(o*o+g*g);let M=Math.atan2(o,Math.abs(g))*v;g*d<0&&(M-=Math.PI*Math.sign(o)*v);const D=Et(Xt(M/d)+this.center[0],-180,180),k=Et(Xt(2*Math.atan(Math.pow(f/x,1/d))-Lp),-85.051129,Mc);return new Gn(D,k)}}class Jy extends ku{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,a){return{x:Cc(o),y:$e(a),z:0}}unproject(o,a){const d=qn(o),f=No(a);return new Gn(d,f)}}const Y0=xt(Mc);class X0 extends ku{project(o,a){const d=(a=xt(a))*a,f=d*d;return{x:.5*((o=xt(o))*(.8707-.131979*d+f*(f*(.003971*d-.001529*f)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+d*(.015085+f*(.028874*d-.044475-.005916*f)))/Math.PI+1),z:0}}unproject(o,a){o=(2*o-.5)*Math.PI;let d=a=(2*(1-a)-1)*Math.PI,f=25,g=0,v=d*d;do{v=d*d;const D=v*v;g=(d*(1.007226+v*(.015085+D*(.028874*v-.044475-.005916*D)))-a)/(1.007226+v*(.045255+D*(.259866*v-.311325-.005916*11*D))),d=Et(d-g,-Y0,Y0)}while(Math.abs(g)>1e-6&&--f>0);v=d*d;const x=Et(Xt(o/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),M=Xt(d);return new Gn(x,M)}}const ev=xt(Mc);class tv extends ku{project(o,a){a=xt(a),o=xt(o);const d=Math.cos(a),f=2/Math.PI,g=Math.acos(d*Math.cos(o/2)),v=Math.sin(g)/g,x=.5*(o*f+2*d*Math.sin(o/2)/v)||0,M=.5*(a+Math.sin(a)/v)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(M/Math.PI+1),z:0}}unproject(o,a){let d=o=(2*o-.5)*Math.PI,f=a=(2*(1-a)-1)*Math.PI,g=25;const v=1e-6;let x=0,M=0;do{const D=Math.cos(f),k=Math.sin(f),P=2*k*D,O=k*k,z=D*D,V=Math.cos(d/2),K=Math.sin(d/2),J=2*V*K,ue=K*K,xe=1-z*V*V,fe=xe?1/xe:0,ye=xe?Math.acos(D*V)*Math.sqrt(1/xe):0,Te=.5*(2*ye*D*K+2*d/Math.PI)-o,we=.5*(ye*k+f)-a,qe=.5*fe*(z*ue+ye*D*V*O)+1/Math.PI,Ge=fe*(J*P/4-ye*k*K),nt=.125*fe*(P*K-ye*k*z*J),Mt=.5*fe*(O*V+ye*ue*D)+.5,Ze=Ge*nt-Mt*qe;x=(we*Ge-Te*Mt)/Ze,M=(Te*nt-we*qe)/Ze,d=Et(d-x,-Math.PI,Math.PI),f=Et(f-M,-ev,ev)}while((Math.abs(x)>v||Math.abs(M)>v)&&--g>0);return new Gn(Xt(d),Xt(f))}}class YC extends ku{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(xt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,a){const{scale:d,cosPhi:f}=this;return{x:xt(o)*f*d+.5,y:-Math.sin(xt(a))/f*d+.5,z:0}}unproject(o,a){const{scale:d,cosPhi:f}=this,g=-(a-.5)/d,v=Et(Xt((o-.5)/d)/f,-180,180),x=Math.asin(Et(g*f,-1,1)),M=Et(Xt(x),-85.051129,Mc);return new Gn(v,M)}}class iv extends Jy{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(o,a,d){const f=Fg(o,a,d);return Mo(f,f,no(Vl(d))),{x:f[0],y:f[1],z:f[2]}}locationPoint(o,a){const d=Og(a.lat,a.lng),f=Gs([],d),g=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(a),o._centerAltitude):o._centerAltitude;rg(d,d,f,Ga(1,0)*Oi*g);const v=ca(new Float64Array(16));return Cp(v,o.pixelMatrix,o.globeMatrix),Mo(d,d,v),new Ie(d[0],d[1])}pixelsPerMeter(o,a){return Ga(1,0)*a}pixelSpaceConversion(o,a,d){const f=hn(Ga(1,45)*a,Ga(1,o)*a,d);return this.pixelsPerMeter(o,a)/f}createTileMatrix(o,a,d){const f=Qy(Vl(d.canonical));return Cp(new Float64Array(16),o.globeMatrix,f)}createInversionMatrix(o,a){const{center:d}=o,f=no(Vl(a));return kf(f,f,xt(d.lng)),Tf(f,f,xt(d.lat)),Sc(f,f,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(f)}pointCoordinate(o,a,d,f){return gn(o,a,d,!0)||new xp(0,0)}pointCoordinate3D(o,a,d){const f=this.pointCoordinate(o,a,d,0);return[f.x,f.y,f.z]}isPointAboveHorizon(o,a){return!gn(o,a.x,a.y,!1)}farthestPixelDistance(o){const a=function(f,g){const v=f.cameraToCenterDistance,x=f._centerAltitude*g,M=f._camera,D=f._camera.forward(),k=vu([],Il([],D,-v),[0,0,x]),P=f.worldSize/(2*Math.PI),O=[0,0,-P],z=f.width/f.height,V=Math.tan(f.fovAboveCenter),K=Il([],M.up(),V),J=Il([],M.right(),V*z),ue=Gs([],vu([],vu([],D,K),J)),xe=[];let fe;if(new r0(k,ue).closestPointOnSphere(O,P,xe)){const ye=vu([],xe,O),Te=Rl([],ye,k);fe=Math.cos(f.fovAboveCenter)*Af(Te)}else{const ye=Rl([],k,O),Te=Rl([],O,k);Gs(Te,Te);const we=Af(ye)-P;fe=Math.sqrt(we*(we+2*P));const qe=Math.acos(fe/(P+we))-Math.acos(pl(D,Te));fe*=Math.cos(qe)}return 1.01*fe}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),d=xh(o.zoom);if(d>0){const f=Z0(o,Ga(1,o.center.lat)*o.worldSize),g=o.worldSize/(2*Math.PI),v=Math.max(o.width,o.height)/o.worldSize*Math.PI;return hn(a,f+g*(1-Math.cos(v)),Math.pow(d,10))}return a}upVector(o,a,d){return Fg(a,d,o,1)}upVectorScale(o){return{metersToTile:Xy*Jf(Vl(o))}}}function K0(l){const o=l.parallels,a=!!o&&Math.abs(o[0]+o[1])<.01;switch(l.name){case"mercator":return new Jy(l);case"equirectangular":return new WC(l);case"naturalEarth":return new X0(l);case"equalEarth":return new qC(l);case"winkelTripel":return new tv(l);case"albers":return a?new YC(l):new Op(l);case"lambertConformalConic":return a?new YC(l):new ZC(l);case"globe":return new iv(l)}throw new Error(`Invalid projection name: ${l.name}`)}const TT=Tp.VectorTileFeature.types,W=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ml(l,o,a,d,f,g,v,x,M,D,k,P,O){const z=x?Math.min(yd,Math.round(x[0])):0,V=x?Math.min(yd,Math.round(x[1])):0;l.emplaceBack(o,a,Math.round(32*d),Math.round(32*f),g,v,(z<<1)+(M?1:0),V,16*D,16*k,256*P,256*O)}function nm(l,o,a,d,f,g,v){l.emplaceBack(o,a,d,f,g,v)}function wh(l,o,a,d,f){l.emplaceBack(o,a,d,f),l.emplaceBack(o,a,d,f),l.emplaceBack(o,a,d,f),l.emplaceBack(o,a,d,f)}function jl(l){for(const o of l.sections)if(h(o.text))return!0;return!1}class Ng{constructor(o){this.layoutVertexArray=new br,this.indexArray=new cn,this.programConfigurations=o,this.segments=new qr,this.dynamicLayoutVertexArray=new ln,this.opacityVertexArray=new ir,this.placedSymbolArray=new z1,this.globeExtVertexArray=new zr}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(o,a,d,f){this.isEmpty()||(d&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,kC.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,IC.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,W,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,AC.members,!0)),this.opacityVertexBuffer.itemSize=1),(d||f)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}kt(Ng,"SymbolBuffers");class nv{constructor(o,a,d){this.layoutVertexArray=new o,this.layoutAttributes=a,this.indexArray=new d,this.segments=new qr,this.collisionVertexArray=new Er,this.collisionVertexArrayExt=new Tr}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,C0.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,RC.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}kt(nv,"CollisionBuffers");class Rc{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(v=>v.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ca([]),this.placementViewportMatrix=ca([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Hf(this.zoom,a["text-size"]),this.iconSizeData=Hf(this.zoom,a["icon-size"]);const d=this.layers[0].layout,f=d.get("symbol-sort-key"),g=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==g&&void 0!==f.constantOr(1),this.sortFeaturesByY=("viewport-y"===g||"auto"===g&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=d.get("text-writing-mode").map(v=>fl[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=o.sourceID,this.projection=o.projection}createArrays(){this.text=new Ng(new ah(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new Ng(new ah(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new V1,this.lineVertexArray=new j1,this.symbolInstances=new tt}calculateGlyphDependencies(o,a,d,f,g){for(let v=0;v<o.length;v++)if(a[o.charCodeAt(v)]=!0,f&&g){const x=$f[o.charAt(v)];x&&(a[x.charCodeAt(0)]=!0)}}populate(o,a,d,f){const g=this.layers[0],v=g.layout,x="globe"===this.projection.name,M=v.get("text-font"),D=v.get("text-field"),k=v.get("icon-image"),P=("constant"!==D.value.kind||D.value.value instanceof Cs&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&("constant"!==M.value.kind||M.value.value.length>0),O="constant"!==k.value.kind||!!k.value.value||Object.keys(k.parameters).length>0,z=v.get("symbol-sort-key");if(this.features=[],!P&&!O)return;const V=a.iconDependencies,K=a.glyphDependencies,J=a.availableImages,ue=new ie(this.zoom);for(const{feature:xe,id:fe,index:ye,sourceLayerIndex:Te}of o){const we=g._featureFilter.needGeometry,qe=_u(xe,we);if(!g._featureFilter.filter(ue,qe,d))continue;if(we||(qe.geometry=hl(xe,d,f)),x&&1!==xe.type&&d.z<=5){const Ze=qe.geometry,ct=.98078528056;for(let at=0;at<Ze.length;at++)Ze[at]=ul(Ze[at],st=>st,(st,vt)=>pl(Fg(st.x,st.y,d,1),Fg(vt.x,vt.y,d,1))<ct)}let Ge,nt;if(P){const Ze=g.getValueAndResolveTokens("text-field",qe,d,J),ct=Cs.factory(Ze);jl(ct)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Q()||this.hasRTLText&&te.isParsed())&&(Ge=PC(ct,g,qe))}if(O){const Ze=g.getValueAndResolveTokens("icon-image",qe,d,J);nt=Ze instanceof rs?Ze:rs.fromString(Ze)}if(!Ge&&!nt)continue;const Mt=this.sortFeaturesByKey?z.evaluate(qe,{},d):void 0;if(this.features.push({id:fe,text:Ge,icon:nt,index:ye,sourceLayerIndex:Te,geometry:qe.geometry,properties:xe.properties,type:TT[xe.type],sortKey:Mt}),nt&&(V[nt.name]=!0),Ge){const Ze=M.evaluate(qe,{},d).join(","),ct="map"===v.get("text-rotation-alignment")&&"point"!==v.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(fl.vertical)>=0;for(const at of Ge.sections)if(at.image)V[at.image.name]=!0;else{const st=Fo(Ge.toString()),vt=at.fontStack||Ze,mt=K[vt]=K[vt]||{};this.calculateGlyphDependencies(at.text,mt,ct,this.allowVerticalPlacement,st)}}}"line"===v.get("symbol-placement")&&(this.features=function(xe){const fe={},ye={},Te=[];let we=0;function qe(Ze){Te.push(xe[Ze]),we++}function Ge(Ze,ct,at){const st=ye[Ze];return delete ye[Ze],ye[ct]=st,Te[st].geometry[0].pop(),Te[st].geometry[0]=Te[st].geometry[0].concat(at[0]),st}function nt(Ze,ct,at){const st=fe[ct];return delete fe[ct],fe[Ze]=st,Te[st].geometry[0].shift(),Te[st].geometry[0]=at[0].concat(Te[st].geometry[0]),st}function Mt(Ze,ct,at){const st=at?ct[0][ct[0].length-1]:ct[0][0];return`${Ze}:${st.x}:${st.y}`}for(let Ze=0;Ze<xe.length;Ze++){const ct=xe[Ze],at=ct.geometry,st=ct.text?ct.text.toString():null;if(!st){qe(Ze);continue}const vt=Mt(st,at),mt=Mt(st,at,!0);if(vt in ye&&mt in fe&&ye[vt]!==fe[mt]){const Nt=nt(vt,mt,at),Wi=Ge(vt,mt,Te[Nt].geometry);delete fe[vt],delete ye[mt],ye[Mt(st,Te[Wi].geometry,!0)]=Wi,Te[Nt].geometry=null}else vt in ye?Ge(vt,mt,at):mt in fe?nt(vt,mt,at):(qe(Ze),fe[vt]=we-1,ye[mt]=we-1)}return Te.filter(Ze=>Ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((xe,fe)=>xe.sortKey-fe.sortKey)}update(o,a,d,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,a,this.layers,d,f),this.icon.programConfigurations.updatePaintArrays(o,a,this.layers,d,f))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=K0(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,a){const d=this.lineVertexArray.length,f=o.segment;if(void 0!==f){let g=o.dist(a[f+1]),v=o.dist(a[f]);const x={};for(let M=f+1;M<a.length;M++)x[M]={x:a[M].x,y:a[M].y,tileUnitDistanceFromAnchor:g},M<a.length-1&&(g+=a[M+1].dist(a[M]));for(let M=f||0;M>=0;M--)x[M]={x:a[M].x,y:a[M].y,tileUnitDistanceFromAnchor:v},M>0&&(v+=a[M-1].dist(a[M]));for(let M=0;M<a.length;M++){const D=x[M];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(o,a,d,f,g,v,x,M,D,k,P,O,z,V){const K=o.indexArray,J=o.layoutVertexArray,ue=o.globeExtVertexArray,xe=o.segments.prepareSegment(4*a.length,J,K,this.canOverlap?v.sortKey:void 0),fe=this.glyphOffsetArray.length,ye=xe.vertexLength,Te=this.allowVerticalPlacement&&x===fl.vertical?Math.PI/2:0,we=v.text&&v.text.sections;for(let Ge=0;Ge<a.length;Ge++){const{tl:nt,tr:Mt,bl:Ze,br:ct,tex:at,pixelOffsetTL:st,pixelOffsetBR:vt,minFontScaleX:mt,minFontScaleY:Nt,glyphOffset:Wi,isSDF:nn,sectionIndex:gi}=a[Ge],Ot=xe.vertexLength,pn=Wi[1];if(ml(J,D.x,D.y,nt.x,pn+nt.y,at.x,at.y,d,nn,st.x,st.y,mt,Nt),ml(J,D.x,D.y,Mt.x,pn+Mt.y,at.x+at.w,at.y,d,nn,vt.x,st.y,mt,Nt),ml(J,D.x,D.y,Ze.x,pn+Ze.y,at.x,at.y+at.h,d,nn,st.x,vt.y,mt,Nt),ml(J,D.x,D.y,ct.x,pn+ct.y,at.x+at.w,at.y+at.h,d,nn,vt.x,vt.y,mt,Nt),M){const ji=M.anchor,Vt=M.up;nm(ue,ji.x,ji.y,ji.z,Vt[0],Vt[1],Vt[2]),nm(ue,ji.x,ji.y,ji.z,Vt[0],Vt[1],Vt[2]),nm(ue,ji.x,ji.y,ji.z,Vt[0],Vt[1],Vt[2]),nm(ue,ji.x,ji.y,ji.z,Vt[0],Vt[1],Vt[2]),wh(o.dynamicLayoutVertexArray,ji.x,ji.y,ji.z,Te)}else wh(o.dynamicLayoutVertexArray,D.x,D.y,D.z,Te);K.emplaceBack(Ot,Ot+1,Ot+2),K.emplaceBack(Ot+1,Ot+2,Ot+3),xe.vertexLength+=4,xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Wi[0]),Ge!==a.length-1&&gi===a[Ge+1].sectionIndex||o.programConfigurations.populatePaintArrays(J.length,v,v.index,{},z,V,we&&we[gi])}const qe=M?M.anchor:D;o.placedSymbolArray.emplaceBack(qe.x,qe.y,qe.z,D.x,D.y,fe,this.glyphOffsetArray.length-fe,ye,k,P,D.segment,d?d[0]:0,d?d[1]:0,f[0],f[1],x,0,!1,0,O,0)}_commitLayoutVertex(o,a,d,f,g,v,x){o.emplaceBack(a,d,f,g,v,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(o,a,d,f,g,v,x){const M=d.segments.prepareSegment(4,d.layoutVertexArray,d.indexArray),D=M.vertexLength,k=x.tileAnchorX,P=x.tileAnchorY;for(let z=0;z<4;z++)d.collisionVertexArray.emplaceBack(0,0,0,0);d.collisionVertexArrayExt.emplaceBack(a,-o.padding,-o.padding),d.collisionVertexArrayExt.emplaceBack(a,o.padding,-o.padding),d.collisionVertexArrayExt.emplaceBack(a,o.padding,o.padding),d.collisionVertexArrayExt.emplaceBack(a,-o.padding,o.padding),this._commitLayoutVertex(d.layoutVertexArray,f,g,v,k,P,new Ie(o.x1,o.y1)),this._commitLayoutVertex(d.layoutVertexArray,f,g,v,k,P,new Ie(o.x2,o.y1)),this._commitLayoutVertex(d.layoutVertexArray,f,g,v,k,P,new Ie(o.x2,o.y2)),this._commitLayoutVertex(d.layoutVertexArray,f,g,v,k,P,new Ie(o.x1,o.y2)),M.vertexLength+=4;const O=d.indexArray;O.emplaceBack(D,D+1),O.emplaceBack(D+1,D+2),O.emplaceBack(D+2,D+3),O.emplaceBack(D+3,D),M.primitiveLength+=4}_addTextDebugCollisionBoxes(o,a,d,f,g,v){for(let x=f;x<g;x++){const M=d.get(x),D=this.getSymbolInstanceTextSize(o,v,a,x);this._addCollisionDebugVertices(M,D,this.textCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(o,a,d,f,g,v){for(let x=f;x<g;x++){const M=d.get(x),D=this.getSymbolInstanceIconSize(o,a,x);this._addCollisionDebugVertices(M,D,this.iconCollisionBox,M.projectedAnchorX,M.projectedAnchorY,M.projectedAnchorZ,v)}}generateCollisionDebugBuffers(o,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new nv($s,M0.members,us),this.iconCollisionBox=new nv($s,M0.members,us);const d=kc(this.iconSizeData,o),f=kc(this.textSizeData,o);for(let g=0;g<this.symbolInstances.length;g++){const v=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(f,o,a,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(f,o,a,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(d,o,a,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(d,o,a,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(o,a,d,f){const g=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:f),v=Ko(this.textSizeData,o,g)/24;return this.tilePixelRatio*v}getSymbolInstanceIconSize(o,a,d){const f=this.icon.placedSymbolArray.get(d),g=Ko(this.iconSizeData,o,f);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(o,a,d){o.emplaceBack(a,-d,-d),o.emplaceBack(a,d,-d),o.emplaceBack(a,d,d),o.emplaceBack(a,-d,d)}_updateTextDebugCollisionBoxes(o,a,d,f,g,v){for(let x=f;x<g;x++){const M=d.get(x),D=this.getSymbolInstanceTextSize(o,v,a,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,D,M.padding)}}_updateIconDebugCollisionBoxes(o,a,d,f,g){for(let v=f;v<g;v++){const x=d.get(v),M=this.getSymbolInstanceIconSize(o,a,v);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,M,x.padding)}}updateCollisionDebugBuffers(o,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const d=kc(this.iconSizeData,o),f=kc(this.textSizeData,o);for(let g=0;g<this.symbolInstances.length;g++){const v=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(f,o,a,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(f,o,a,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(d,o,a,v.iconBoxStartIndex,v.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(d,o,a,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,a,d,f,g,v,x,M,D){const k={};for(let P=a;P<d;P++){const O=o.get(P);k.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,padding:O.padding,projectedAnchorX:O.projectedAnchorX,projectedAnchorY:O.projectedAnchorY,projectedAnchorZ:O.projectedAnchorZ,tileAnchorX:O.tileAnchorX,tileAnchorY:O.tileAnchorY},k.textFeatureIndex=O.featureIndex;break}for(let P=f;P<g;P++){const O=o.get(P);k.verticalTextBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,padding:O.padding,projectedAnchorX:O.projectedAnchorX,projectedAnchorY:O.projectedAnchorY,projectedAnchorZ:O.projectedAnchorZ,tileAnchorX:O.tileAnchorX,tileAnchorY:O.tileAnchorY},k.verticalTextFeatureIndex=O.featureIndex;break}for(let P=v;P<x;P++){const O=o.get(P);k.iconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,padding:O.padding,projectedAnchorX:O.projectedAnchorX,projectedAnchorY:O.projectedAnchorY,projectedAnchorZ:O.projectedAnchorZ,tileAnchorX:O.tileAnchorX,tileAnchorY:O.tileAnchorY},k.iconFeatureIndex=O.featureIndex;break}for(let P=M;P<D;P++){const O=o.get(P);k.verticalIconBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,padding:O.padding,projectedAnchorX:O.projectedAnchorX,projectedAnchorY:O.projectedAnchorY,projectedAnchorZ:O.projectedAnchorZ,tileAnchorX:O.tileAnchorX,tileAnchorY:O.tileAnchorY},k.verticalIconFeatureIndex=O.featureIndex;break}return k}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const d=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,a){const d=o.placedSymbolArray.get(a),f=d.vertexStartIndex+4*d.numGlyphs;for(let g=d.vertexStartIndex;g<f;g+=4)o.indexArray.emplaceBack(g,g+1,g+2),o.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const a=Math.sin(o),d=Math.cos(o),f=[],g=[],v=[];for(let x=0;x<this.symbolInstances.length;++x){v.push(x);const M=this.symbolInstances.get(x);f.push(0|Math.round(a*M.tileAnchorX+d*M.tileAnchorY)),g.push(M.featureIndex)}return v.sort((x,M)=>f[x]-f[M]||g[M]-g[x]),v}addToSortKeyRanges(o,a){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===a?d.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const d=this.symbolInstances.get(a);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((f,g,v)=>{f>=0&&v.indexOf(f)===g&&this.addIndicesForPlacedSymbol(this.text,f)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}kt(Rc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Rc.MAX_GLYPHS=65535,Rc.addDynamicAttributes=wh;const bd=new ot({"symbol-placement":new Ce(Qe.layout_symbol["symbol-placement"]),"symbol-spacing":new Ce(Qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ce(Qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Re(Qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ce(Qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ce(Qe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ce(Qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ce(Qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ce(Qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Re(Qe.layout_symbol["icon-size"]),"icon-text-fit":new Ce(Qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ce(Qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Re(Qe.layout_symbol["icon-image"]),"icon-rotate":new Re(Qe.layout_symbol["icon-rotate"]),"icon-padding":new Ce(Qe.layout_symbol["icon-padding"]),"icon-keep-upright":new Ce(Qe.layout_symbol["icon-keep-upright"]),"icon-offset":new Re(Qe.layout_symbol["icon-offset"]),"icon-anchor":new Re(Qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ce(Qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ce(Qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ce(Qe.layout_symbol["text-rotation-alignment"]),"text-field":new Re(Qe.layout_symbol["text-field"]),"text-font":new Re(Qe.layout_symbol["text-font"]),"text-size":new Re(Qe.layout_symbol["text-size"]),"text-max-width":new Re(Qe.layout_symbol["text-max-width"]),"text-line-height":new Re(Qe.layout_symbol["text-line-height"]),"text-letter-spacing":new Re(Qe.layout_symbol["text-letter-spacing"]),"text-justify":new Re(Qe.layout_symbol["text-justify"]),"text-radial-offset":new Re(Qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ce(Qe.layout_symbol["text-variable-anchor"]),"text-anchor":new Re(Qe.layout_symbol["text-anchor"]),"text-max-angle":new Ce(Qe.layout_symbol["text-max-angle"]),"text-writing-mode":new Ce(Qe.layout_symbol["text-writing-mode"]),"text-rotate":new Re(Qe.layout_symbol["text-rotate"]),"text-padding":new Ce(Qe.layout_symbol["text-padding"]),"text-keep-upright":new Ce(Qe.layout_symbol["text-keep-upright"]),"text-transform":new Re(Qe.layout_symbol["text-transform"]),"text-offset":new Re(Qe.layout_symbol["text-offset"]),"text-allow-overlap":new Ce(Qe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ce(Qe.layout_symbol["text-ignore-placement"]),"text-optional":new Ce(Qe.layout_symbol["text-optional"])});var rm={paint:new ot({"icon-opacity":new Re(Qe.paint_symbol["icon-opacity"]),"icon-color":new Re(Qe.paint_symbol["icon-color"]),"icon-halo-color":new Re(Qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Re(Qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Re(Qe.paint_symbol["icon-halo-blur"]),"icon-translate":new Ce(Qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ce(Qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Re(Qe.paint_symbol["text-opacity"]),"text-color":new Re(Qe.paint_symbol["text-color"],{runtimeType:Mn,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Re(Qe.paint_symbol["text-halo-color"]),"text-halo-width":new Re(Qe.paint_symbol["text-halo-width"]),"text-halo-blur":new Re(Qe.paint_symbol["text-halo-blur"]),"text-translate":new Ce(Qe.paint_symbol["text-translate"]),"text-translate-anchor":new Ce(Qe.paint_symbol["text-translate-anchor"])}),layout:bd};class rv{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:vr,this.defaultValue=o}evaluate(o){if(o.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(o.formattedSection))return a.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}kt(rv,"FormatSectionOverride",{omit:["defaultValue"]});class Bp extends wc{constructor(o){super(o,rm)}recalculate(o,a){super.recalculate(o,a),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const d=this.layout.get("text-writing-mode");if(d){const f=[];for(const g of d)f.indexOf(g)<0&&f.push(g);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(o,a,d,f){const g=this.layout.get(o).evaluate(a,{},d,f),v=this._unevaluatedLayout._values[o];return v.isDataDriven()||th(v.value)||!g?g:(x=a.properties,g.replace(/{([^{}]+)}/g,(D,k)=>k in x?String(x[k]):""));var x}createBucket(o){return new Rc(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of rm.paint.overridableProperties){if(!Bp.hasPaintOverride(this.layout,o))continue;const a=this.paint.get(o),d=new rv(a),f=new Ml(d,a.property.specification);let g=null;g="constant"===a.value.kind||"source"===a.value.kind?new od("source",f):new au("composite",f,a.value.zoomStops,a.value._interpolationType),this.paint._values[o]=new be(a.property,g,a.parameters)}}_handleOverridablePaintPropertyUpdate(o,a,d){return!(!this.layout||a.isDataDriven()||d.isDataDriven())&&Bp.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,a){const d=o.get("text-field"),f=rm.paint.properties[a];let g=!1;const v=x=>{for(const M of x)if(f.overrides&&f.overrides.hasOverride(M))return void(g=!0)};if("constant"===d.value.kind&&d.value.value instanceof Cs)v(d.value.value.sections);else if("source"===d.value.kind){const x=D=>{g||(D instanceof Gd&&Cr(D.value)===oc?v(D.value.sections):D instanceof vo?v(D.sections):D.eachChild(x))},M=d.value;M._styleExpression&&x(M._styleExpression.expression)}return g}getProgramConfiguration(o){return new fu(this,o)}}var kT={paint:new ot({"background-color":new Ce(Qe.paint_background["background-color"]),"background-pattern":new _t(Qe.paint_background["background-pattern"]),"background-opacity":new Ce(Qe.paint_background["background-opacity"])})},Q0={paint:new ot({"raster-opacity":new Ce(Qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ce(Qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ce(Qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ce(Qe.paint_raster["raster-brightness-max"]),"raster-saturation":new Ce(Qe.paint_raster["raster-saturation"]),"raster-contrast":new Ce(Qe.paint_raster["raster-contrast"]),"raster-resampling":new Ce(Qe.paint_raster["raster-resampling"]),"raster-fade-duration":new Ce(Qe.paint_raster["raster-fade-duration"])})};class AT extends wc{constructor(o){super(o,{}),this.implementation=o}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}var zg={paint:new ot({"sky-type":new Ce(Qe.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ce(Qe.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ce(Qe.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ce(Qe.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ce(Qe.paint_sky["sky-gradient-radius"]),"sky-gradient":new ze(Qe.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ce(Qe.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ce(Qe.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ce(Qe.paint_sky["sky-opacity"])})};function Np(l,o,a){const d=[0,0,1],f=vy([]);return rC(f,f,a?-xt(l)+Math.PI:xt(l)),nC(f,f,-xt(o)),n0(d,d,f),Gs(d,d)}const ov={circle:class extends wc{constructor(l){super(l,iC)}createBucket(l){return new yu(l)}queryRadius(l){const o=l;return ch("circle-radius",this,o)+ch("circle-stroke-width",this,o)+cy(this.paint.get("circle-translate"))}queryIntersectsFeature(l,o,a,d,f,g,v,x){const M=tC(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,l.pixelToTileUnitsFactor),D=this.paint.get("circle-radius").evaluate(o,a)+this.paint.get("circle-stroke-width").evaluate(o,a);return oC(l,d,g,v,x,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),M,D)}getProgramIds(){return["circle"]}getProgramConfiguration(l){return new fu(this,l)}},heatmap:class extends wc{createBucket(l){return new a0(l)}constructor(l){super(l,pr),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){"heatmap-color"===l&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=lg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(l){return ch("heatmap-radius",this,l)}queryIntersectsFeature(l,o,a,d,f,g,v,x){const M=this.paint.get("heatmap-radius").evaluate(o,a);return oC(l,d,g,v,x,!0,!0,new Ie(0,0),M)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(l){return new fu(this,l)}},hillshade:class extends wc{constructor(l){super(l,lC)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends wc{constructor(l){super(l,pC)}getProgramIds(){const l=this.paint.get("fill-pattern"),o=l&&l.constantOr(1),a=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getProgramConfiguration(l){return new fu(this,l)}recalculate(l,o){super.recalculate(l,o);const a=this.paint._values["fill-outline-color"];"constant"===a.value.kind&&void 0===a.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new mg(l)}queryRadius(){return cy(this.paint.get("fill-translate"))}queryIntersectsFeature(l,o,a,d,f,g){return!l.queryGeometry.isAboveHorizon&&J1(dy(l.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,l.pixelToTileUnitsFactor),d)}isTileClipped(){return!0}},"fill-extrusion":class extends wc{constructor(l){super(l,bT)}createBucket(l){return new mh(l)}queryRadius(){return cy(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(l){return new fu(this,l)}queryIntersectsFeature(l,o,a,d,f,g,v,x,M){const D=tC(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,l.pixelToTileUnitsFactor),k=this.paint.get("fill-extrusion-height").evaluate(o,a),P=this.paint.get("fill-extrusion-base").evaluate(o,a),O=[0,0],z=x&&g.elevation,V=g.elevation?g.elevation.exaggeration():1,K=l.tile.getBucket(this);if(z&&K instanceof mh){const xe=K.centroidVertexArray,fe=M+1;if(fe<xe.length){const ye=xe.get(fe);O[0]=ye.a_centroid_pos0,O[1]=ye.a_centroid_pos1}}if(0===O[0]&&1===O[1])return!1;"globe"===g.projection.name&&(d=CC([d],[new Ie(0,0),new Ie(Oi,Oi)],l.tileID.canonical).map(xe=>xe.polygon).flat());const J=(fe=d,ye=P,Te=k,we=D,qe=v,Ge=z?x:null,nt=O,Mt=V,Ze=g.center.lat,"globe"===(xe=g).projection.name?function(at,st,vt,mt,Nt,Wi,nn,gi,Ot,pn,ji){const Vt=[],nr=[],rr=at.projection.upVectorScale(ji,at.center.lat,at.worldSize).metersToTile,mr=[0,0,0,1],fn=[0,0,0,1],En=(sr,or,wr,Or)=>{sr[0]=or,sr[1]=wr,sr[2]=Or,sr[3]=1},xr=wC();vt>0&&(vt+=xr),mt+=xr;for(const sr of st){const or=[],wr=[];for(const Or of sr){const Do=Or.x+Nt.x,ro=Or.y+Nt.y,vn=at.projection.projectTilePoint(Do,ro,ji),Fr=at.projection.upVector(ji,Or.x,Or.y);let So=vt,Wn=mt;if(nn){const kr=v0(Do,ro,vt,mt,nn,gi,Ot,pn);So+=kr.base,Wn+=kr.top}0!==vt?En(mr,vn.x+Fr[0]*rr*So,vn.y+Fr[1]*rr*So,vn.z+Fr[2]*rr*So):En(mr,vn.x,vn.y,vn.z),En(fn,vn.x+Fr[0]*rr*Wn,vn.y+Fr[1]*rr*Wn,vn.z+Fr[2]*rr*Wn),Mo(mr,mr,Wi),Mo(fn,fn,Wi),or.push(Ip(mr)),wr.push(Ip(fn))}Vt.push(or),nr.push(wr)}return[Vt,nr]}(xe,fe,ye,Te,we,qe,Ge,nt,Mt,Ze,l.tileID.canonical):Ge?function(at,st,vt,mt,Nt,Wi,nn,gi,Ot){const pn=[],ji=[],Vt=[0,0,0,1];for(const nr of at){const rr=[],mr=[];for(const fn of nr){const En=fn.x+mt.x,xr=fn.y+mt.y,sr=v0(En,xr,st,vt,Wi,nn,gi,Ot);Vt[0]=En,Vt[1]=xr,Vt[2]=sr.base,Vt[3]=1,bu(Vt,Vt,Nt),Vt[3]=Math.max(Vt[3],1e-5);const or=Ip([Vt[0]/Vt[3],Vt[1]/Vt[3],Vt[2]/Vt[3]]);Vt[0]=En,Vt[1]=xr,Vt[2]=sr.top,Vt[3]=1,bu(Vt,Vt,Nt),Vt[3]=Math.max(Vt[3],1e-5);const wr=Ip([Vt[0]/Vt[3],Vt[1]/Vt[3],Vt[2]/Vt[3]]);rr.push(or),mr.push(wr)}pn.push(rr),ji.push(mr)}return[pn,ji]}(fe,ye,Te,we,qe,Ge,nt,Mt,Ze):function(at,st,vt,mt,Nt){const Wi=[],nn=[],gi=Nt[8]*st,Ot=Nt[9]*st,pn=Nt[10]*st,ji=Nt[11]*st,Vt=Nt[8]*vt,nr=Nt[9]*vt,rr=Nt[10]*vt,mr=Nt[11]*vt;for(const fn of at){const En=[],xr=[];for(const sr of fn){const or=sr.x+mt.x,wr=sr.y+mt.y,Or=Nt[0]*or+Nt[4]*wr+Nt[12],Do=Nt[1]*or+Nt[5]*wr+Nt[13],ro=Nt[2]*or+Nt[6]*wr+Nt[14],vn=Nt[3]*or+Nt[7]*wr+Nt[15],Fr=Or+gi,So=Do+Ot,Wn=ro+pn,kr=Math.max(vn+ji,1e-5),Ps=Or+Vt,Lr=Do+nr,Xr=ro+rr,oo=Math.max(vn+mr,1e-5),Vo=new Ie(Fr/kr,So/kr);Vo.z=Wn/kr,En.push(Vo);const Os=new Ie(Ps/oo,Lr/oo);Os.z=Xr/oo,xr.push(Os)}Wi.push(En),nn.push(xr)}return[Wi,nn]}(fe,ye,Te,we,qe)),ue=l.queryGeometry;var xe,fe,ye,Te,we,qe,Ge,nt,Mt,Ze;return function(xe,fe,ye){let Te=1/0;J1(ye,fe)&&(Te=ky(ye,fe[0]));for(let we=0;we<fe.length;we++){const qe=fe[we],Ge=xe[we];for(let nt=0;nt<qe.length-1;nt++){const Mt=qe[nt],Ze=[Mt,qe[nt+1],Ge[nt+1],Ge[nt],Mt];wp(ye,Ze)&&(Te=Math.min(Te,ky(ye,Ze)))}}return Te!==1/0&&Te}(J[0],J[1],ue.isPointQuery()?ue.screenBounds:ue.screenGeometry)}},line:class extends wc{constructor(l){super(l,x0),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){if("line-gradient"===l){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof ia,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,o){super.recalculate(l,o),this.paint._values["line-floorwidth"]=w0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new vg(l)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(l){return new fu(this,l)}queryRadius(l){const o=l,a=bg(ch("line-width",this,o),ch("line-gap-width",this,o)),d=ch("line-offset",this,o);return a/2+Math.abs(d)+cy(this.paint.get("line-translate"))}queryIntersectsFeature(l,o,a,d,f,g){if(l.queryGeometry.isAboveHorizon)return!1;const v=dy(l.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,l.pixelToTileUnitsFactor),x=l.pixelToTileUnitsFactor/2*bg(this.paint.get("line-width").evaluate(o,a),this.paint.get("line-gap-width").evaluate(o,a)),M=this.paint.get("line-offset").evaluate(o,a);return M&&(d=function(D,k){const P=[],O=new Ie(0,0);for(let z=0;z<D.length;z++){const V=D[z],K=[];for(let J=0;J<V.length;J++){const ue=V[J-1],xe=V[J],fe=V[J+1],ye=0===J?O:xe.sub(ue)._unit()._perp(),Te=J===V.length-1?O:fe.sub(xe)._unit()._perp(),we=ye._add(Te)._unit();we._mult(1/(we.x*Te.x+we.y*Te.y)),K.push(we._mult(k)._add(xe))}P.push(K)}return P}(d,M*l.pixelToTileUnitsFactor)),function(D,k,P){for(let O=0;O<k.length;O++){const z=k[O];if(D.length>=3)for(let V=0;V<z.length;V++)if(Dc(D,z[V]))return!0;if(Qb(D,z,P))return!0}return!1}(v,d,x)}isTileClipped(){return!0}},symbol:Bp,background:class extends wc{constructor(l){super(l,kT)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends wc{constructor(l){super(l,Q0)}getProgramIds(){return["raster"]}},sky:class extends wc{constructor(l){super(l,zg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){"sky-gradient"===l?this._updateColorRamp():"sky-atmosphere-sun"!==l&&"sky-atmosphere-halo-color"!==l&&"sky-atmosphere-color"!==l&&"sky-atmosphere-sun-intensity"!==l||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=lg({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(l){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=l.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(l,o){if("atmosphere"===this.paint.get("sky-type")){const d=this.paint.get("sky-atmosphere-sun"),f=!d,g=l.style.light,v=g.properties.get("position");return f&&"viewport"===g.properties.get("anchor")&&lr("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),f?Np(v.azimuthal,90-v.polar,o):Np(d[0],90-d[1],o)}const a=this.paint.get("sky-gradient-center");return Np(a[0],90-a[1],o)}is3D(){return!1}isSky(){return!0}markSkyboxValid(l){this._skyboxInvalidated=!1,this._lightPosition=l.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const l=this.paint.get("sky-type");return"atmosphere"===l?["skyboxCapture","skybox"]:"gradient"===l?["skyboxGradient"]:null}}};class Ch{constructor(o,a,d,f){this.context=o,this.format=d,this.texture=o.gl.createTexture(),this.update(a,f)}update(o,a,d){const{width:f,height:g}=o,{context:v}=this,{gl:x}=v,{HTMLImageElement:M,HTMLCanvasElement:D,HTMLVideoElement:k,ImageData:P,ImageBitmap:O}=ce;if(x.bindTexture(x.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!a||!1!==a.premultiply)),d||this.size&&this.size[0]===f&&this.size[1]===g){const{x:z,y:V}=d||{x:0,y:0};o instanceof M||o instanceof D||o instanceof k||o instanceof P||O&&o instanceof O?x.texSubImage2D(x.TEXTURE_2D,0,z,V,x.RGBA,x.UNSIGNED_BYTE,o):x.texSubImage2D(x.TEXTURE_2D,0,z,V,f,g,x.RGBA,x.UNSIGNED_BYTE,o.data)}else this.size=[f,g],o instanceof M||o instanceof D||o instanceof k||o instanceof P||O&&o instanceof O?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,o):x.texImage2D(x.TEXTURE_2D,0,this.format,f,g,0,this.format,x.UNSIGNED_BYTE,o.data);this.useMipmap=Boolean(a&&a.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(o,a){const{context:d}=this,{gl:f}=d;f.bindTexture(f.TEXTURE_2D,this.texture),o!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,o),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap?o===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_NEAREST:o),this.filter=o),a!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,a),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class om{constructor(o,a){this.width=o,this.height=a,this.nextRow=0,this.image=new Pl({width:o,height:a}),this.positions={},this.uploaded=!1}getDash(o,a){const d=this.getKey(o,a);return this.positions[d]}trim(){const o=this.width,a=this.height=Ii(this.nextRow);this.image.resize({width:o,height:a})}getKey(o,a){return o.join(",")+a}getDashRanges(o,a,d){const f=[];let g=o.length%2==1?-o[o.length-1]*d:0,v=o[0]*d,x=!0;f.push({left:g,right:v,isDash:x,zeroLength:0===o[0]});let M=o[0];for(let D=1;D<o.length;D++){x=!x;const k=o[D];g=M*d,M+=k,v=M*d,f.push({left:g,right:v,isDash:x,zeroLength:0===k})}return f}addRoundDash(o,a,d){const f=a/2;for(let g=-d;g<=d;g++){const v=this.width*(this.nextRow+d+g);let x=0,M=o[x];for(let D=0;D<this.width;D++){D/M.right>1&&(M=o[++x]);const k=Math.abs(D-M.left),P=Math.abs(D-M.right),O=Math.min(k,P);let z;const V=g/d*(f+1);if(M.isDash){const K=f-Math.abs(V);z=Math.sqrt(O*O+K*K)}else z=f-Math.sqrt(O*O+V*V);this.image.data[v+D]=Math.max(0,Math.min(255,z+128))}}}addRegularDash(o,a){for(let M=o.length-1;M>=0;--M){const D=o[M],k=o[M+1];D.zeroLength?o.splice(M,1):k&&k.isDash===D.isDash&&(k.left=D.left,o.splice(M,1))}const d=o[0],f=o[o.length-1];d.isDash===f.isDash&&(d.left=f.left-this.width,f.right=d.right+this.width);const g=this.width*this.nextRow;let v=0,x=o[v];for(let M=0;M<this.width;M++){M/x.right>1&&(x=o[++v]);const D=Math.abs(M-x.left),k=Math.abs(M-x.right),P=Math.min(D,k);this.image.data[g+M]=Math.max(0,Math.min(255,(x.isDash?P:-P)+a+128))}}addDash(o,a){const d=this.getKey(o,a);if(this.positions[d])return this.positions[d];const f="round"===a,g=f?7:0,v=2*g+1;if(this.nextRow+v>this.height)return lr("LineAtlas out of space"),null;0===o.length&&o.push(1);let x=0;for(let k=0;k<o.length;k++)o[k]<0&&(lr("Negative value is found in line dasharray, replacing values with 0"),o[k]=0),x+=o[k];if(0!==x){const k=this.width/x,P=this.getDashRanges(o,this.width,k);f?this.addRoundDash(P,k,g):this.addRegularDash(P,"square"===a?.5*k:0)}const M=this.nextRow+g;this.nextRow+=v;const D={tl:[M,g],br:[x,0]};return this.positions[d]=D,D}}kt(om,"LineAtlas");class IT{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class XC{constructor(){this.tasks={},this.taskQueue=[],hi(["process"],this),this.invoker=new IT(this.process),this.nextId=0}add(o,a){const d=this.nextId++,f=function({type:g,isSymbolTile:v,zoom:x}){return x=x||0,"message"===g?0:"maybePrepare"!==g||v?"parseTile"!==g||v?"parseTile"===g&&v?300-x:"maybePrepare"===g&&v?400-x:500:200-x:100-x}(a);if(0===f){St();try{o()}finally{}return{cancel:()=>{}}}return this.tasks[d]={fn:o,metadata:a,priority:f,id:d},this.taskQueue.push(d),this.invoker.trigger(),{cancel:()=>{delete this.tasks[d]}}}process(){St();try{if(this.taskQueue=this.taskQueue.filter(d=>!!this.tasks[d]),!this.taskQueue.length)return;const o=this.pick();if(null===o)return;const a=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let o=null,a=1/0;for(let f=0;f<this.taskQueue.length;f++){const g=this.tasks[this.taskQueue[f]];g.priority<a&&(a=g.priority,o=f)}if(null===o)return null;const d=this.taskQueue[o];return this.taskQueue.splice(o,1),d}remove(){this.invoker.remove()}}class J0{constructor(o){this._stringToNumber={},this._numberToString=[];for(let a=0;a<o.length;a++){const d=o[a];this._stringToNumber[d]=a,this._numberToString[a]=d}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const KC=["tile","layer","source","sourceLayer","state"];class ex{constructor(o,a,d,f,g){this.type="Feature",this._vectorTileFeature=o,this._z=a,this._x=d,this._y=f,this.properties=o.properties,this.id=g}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(o.id=this.id);for(const a of KC)void 0!==this[a]&&(o[a]=this[a]);return o}}const Iu=new Uint16Array(8184);for(let l=0;l<2046;l++){let o=l+2,a=0,d=0,f=0,g=0,v=0,x=0;for(1&o?f=g=v=32:a=d=x=32;(o>>=1)>1;){const D=a+f>>1,k=d+g>>1;1&o?(f=a,g=d,a=v,d=x):(a=f,d=g,f=v,g=x),v=D,x=k}const M=4*l;Iu[M+0]=a,Iu[M+1]=d,Iu[M+2]=f,Iu[M+3]=g}const wd=new Uint16Array(2178),Cd=new Uint8Array(1089),sm=new Uint16Array(1089);function tx(l){return 0===l?-.03125:32===l?.03125:0}var Vg=dt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const QC={type:2,extent:Oi,loadGeometry:()=>[[new Ie(0,0),new Ie(8193,0),new Ie(8193,8193),new Ie(0,8193),new Ie(0,0)]]};class ix{constructor(o,a,d,f,g){this.tileID=o,this.uid=bi(),this.uses=0,this.tileSize=a,this.tileZoom=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",f&&f.transform&&(this.projection=f.transform.projection)}registerFadeDuration(o){const a=o+this.timeAdded;a<lo.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Tu(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(o,a,d){if(this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(f,g){const v={};if(!g)return v;for(const x of f){const M=x.layerIds.map(D=>g.getLayer(D)).filter(Boolean);if(0!==M.length){x.layers=M,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(D=>M.filter(k=>k.id===D)[0]));for(const D of M)v[D.id]=x}}return v}(o.buckets,a.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const g=this.buckets[f];if(g instanceof Rc){if(this.hasSymbolBuckets=!0,!d)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const g=this.buckets[f];if(g instanceof Rc&&g.hasRTLText){this.hasRTLText=!0,te.isLoading()||te.isLoaded()||"deferred"!==Q()||oe();break}}this.queryPadding=0;for(const f in this.buckets){const g=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(f).queryRadius(g))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage),o.lineAtlas&&(this.lineAtlas=o.lineAtlas)}else this.collisionBoxArray=new ll}unloadVectorData(){if(this.hasData()){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(o){return this.buckets[o.id]}upload(o){for(const d in this.buckets){const f=this.buckets[d];f.uploadPending()&&f.upload(o)}const a=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ch(o,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ch(o,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Ch(o,this.lineAtlas.image,a.ALPHA),this.lineAtlas.uploaded=!0)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,a,d,f,g,v,x,M){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:f,pixelPosMatrix:x,transform:v,params:g,tileTransform:this.tileTransform},o,a,d):{}}querySourceFeatures(o,a){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const f=d.loadVTLayers(),g=a?a.sourceLayer:"",v=f._geojsonTileLayer||f[g];if(!v)return;const x=to(a&&a.filter),{z:M,x:D,y:k}=this.tileID.canonical,P={z:M,x:D,y:k};for(let O=0;O<v.length;O++){const z=v.feature(O);if(x.needGeometry){const J=_u(z,!0);if(!x.filter(new ie(this.tileID.overscaledZ),J,this.tileID.canonical))continue}else if(!x.filter(new ie(this.tileID.overscaledZ),z))continue;const V=d.getId(z,g),K=new ex(z,M,D,k,V);K.tile=P,o.push(K)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const a=this.expirationTime;if(o.cacheControl){const d=Io(o.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const d=Date.now();let f=!1;if(this.expirationTime>d)f=!1;else if(a)if(this.expirationTime<a)f=!0;else{const g=this.expirationTime-a;g?this.expirationTime=d+Math.max(g,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(o,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(o).length||!a)return;const d=this.latestFeatureIndex.loadVTLayers(),f=a.style.listImages();for(const g in this.buckets){if(!a.style.hasLayer(g))continue;const v=this.buckets[g],x=v.layers[0].sourceLayer||"_geojsonTileLayer",M=d[x],D=o[x];if(!M||!D||0===Object.keys(D).length)continue;if(v.update(D,M,f,this.imageAtlas&&this.imageAtlas.patternPositions||{}),v instanceof vg||v instanceof mg){const P=a.style._getSourceCache(v.layers[0].source);a._terrain&&a._terrain.enabled&&P&&v.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(P.id,this.tileID)}const k=a&&a.style&&a.style.getLayer(g);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(v)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<lo.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=lo.now()+o}setTexture(o,a){const d=a.context,f=d.gl;this.texture=a.getTileTexture(o.width),this.texture?this.texture.update(o,{useMipmap:!0}):(this.texture=new Ch(d,o,f.RGBA,{useMipmap:!0}),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),d.extTextureFilterAnisotropic&&f.texParameterf(f.TEXTURE_2D,d.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,d.extTextureFilterAnisotropicMax))}setDependencies(o,a){const d={};for(const f of a)d[f]=!0;this.dependencies[o]=d}hasDependency(o,a){for(const d of o){const f=this.dependencies[d];if(f)for(const g of a)if(f[g])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(o,a){if(!a||"mercator"===a.name||this._tileDebugBuffer)return;const d=hl(QC,this.tileID.canonical,this.tileTransform)[0],f=new Ft,g=new Vr;for(let v=0;v<d.length;v++){const{x,y:M}=d[v];f.emplaceBack(x,M),g.emplaceBack(v)}g.emplaceBack(0),this._tileDebugIndexBuffer=o.createIndexBuffer(g),this._tileDebugBuffer=o.createVertexBuffer(f,Qf.members),this._tileDebugSegments=qr.simpleSegment(0,0,f.length,g.length)}_makeTileBoundsBuffers(o,a){if(this._tileBoundsBuffer||!a||"mercator"===a.name)return;const d=hl(QC,this.tileID.canonical,this.tileTransform)[0];let f,g;if(this.isRaster){const v=function(x,M){const D=Tu(x,M),k=Math.pow(2,x.z);for(let J=0;J<33;J++)for(let ue=0;ue<33;ue++){const xe=qn((x.x+(ue+tx(ue))/32)/k),fe=No((x.y+(J+tx(J))/32)/k),ye=M.project(xe,fe),Te=33*J+ue;wd[2*Te+0]=Math.round((ye.x*D.scale-D.x)*Oi),wd[2*Te+1]=Math.round((ye.y*D.scale-D.y)*Oi)}Cd.fill(0),sm.fill(0);for(let J=2045;J>=0;J--){const ue=4*J,xe=Iu[ue+0],fe=Iu[ue+1],ye=Iu[ue+2],Te=Iu[ue+3],we=xe+ye>>1,qe=fe+Te>>1,Ge=we+qe-fe,nt=qe+xe-we,Mt=33*fe+xe,Ze=33*Te+ye,ct=33*qe+we,at=Math.hypot((wd[2*Mt+0]+wd[2*Ze+0])/2-wd[2*ct+0],(wd[2*Mt+1]+wd[2*Ze+1])/2-wd[2*ct+1])>=16;if(Cd[ct]=Cd[ct]||(at?1:0),J<1022){const st=33*(fe+nt>>1)+(xe+Ge>>1),vt=33*(Te+nt>>1)+(ye+Ge>>1);Cd[ct]=Cd[ct]||Cd[st]||Cd[vt]}}const P=new fi,O=new cn;let z=0;function V(J,ue){const xe=33*ue+J;return 0===sm[xe]&&(P.emplaceBack(wd[2*xe+0],wd[2*xe+1],J*Oi/32,ue*Oi/32),sm[xe]=++z),sm[xe]-1}function K(J,ue,xe,fe,ye,Te){const we=J+xe>>1,qe=ue+fe>>1;if(Math.abs(J-ye)+Math.abs(ue-Te)>1&&Cd[33*qe+we])K(ye,Te,J,ue,we,qe),K(xe,fe,ye,Te,we,qe);else{const Ge=V(J,ue),nt=V(xe,fe),Mt=V(ye,Te);O.emplaceBack(Ge,nt,Mt)}}return K(0,0,32,32,32,0),K(32,32,0,0,0,32),{vertices:P,indices:O}}(this.tileID.canonical,a);f=v.vertices,g=v.indices}else{f=new fi,g=new cn;for(const{x,y:M}of d)f.emplaceBack(x,M,0,0);const v=dg(f.int16,void 0,4);for(let x=0;x<v.length;x+=3)g.emplaceBack(v[x],v[x+1],v[x+2])}this._tileBoundsBuffer=o.createVertexBuffer(f,Vg.members),this._tileBoundsIndexBuffer=o.createIndexBuffer(g),this._tileBoundsSegments=qr.simpleSegment(0,0,f.length,g.length)}_makeGlobeTileDebugBuffers(o,a){const d=a.projection;if(!d||"globe"!==d.name||a.freezeTileCoverage)return;const f=this.tileID.canonical,g=no($0(f,a)),v=xh(a.zoom);let x;v>0&&(x=hy(new Float64Array(16),a.globeMatrix));const M=(f.x+.5)/(1<<f.z)-Cc(a.center.lng);let D=0;M>.5?D=-1:M<-.5&&(D=1),this._makeGlobeTileDebugBorderBuffer(o,f,a,g,x,v,D),this._makeGlobeTileDebugTextBuffer(o,f,a,g,x,v,D)}_globePoint(o,a,d,f,g,v,x,M){let D=Fg(o,a,d);if(v){const k=1<<d.z,P=[((o/Oi+d.x)/k+M)*f,(a/Oi+d.y)/k*f,0];Mo(P,P,v),D=nl(D,P,x)}return Mo(D,D,g)}_makeGlobeTileDebugBorderBuffer(o,a,d,f,g,v,x){const M=new Ft,D=new Vr,k=new Zt,P=(z,V,K,J,ue)=>{const xe=(K-z)/(ue-1),fe=(J-V)/(ue-1),ye=M.length;for(let Te=0;Te<ue;Te++){const we=z+Te*xe,qe=V+Te*fe;M.emplaceBack(we,qe);const Ge=this._globePoint(we,qe,a,d.worldSize,f,g,v,x);k.emplaceBack(Ge[0],Ge[1],Ge[2]),D.emplaceBack(ye+Te)}},O=Oi;P(0,0,O,0,16),P(O,0,O,O,16),P(O,O,0,O,16),P(0,O,0,0,16),this._tileDebugIndexBuffer=o.createIndexBuffer(D),this._tileDebugBuffer=o.createVertexBuffer(M,Qf.members),this._globeTileDebugBorderBuffer=o.createVertexBuffer(k,H0.members),this._tileDebugSegments=qr.simpleSegment(0,0,M.length,D.length)}_makeGlobeTileDebugTextBuffer(o,a,d,f,g,v,x){const M=new Ft,D=new cn,k=new Zt,P=25;D.reserve(32),M.reserve(P),k.reserve(P);const O=(z,V)=>P*z+V;for(let z=0;z<P;z++){const V=2048*z;for(let K=0;K<P;K++){const J=2048*K;M.emplaceBack(J,V);const ue=this._globePoint(J,V,a,d.worldSize,f,g,v,x);k.emplaceBack(ue[0],ue[1],ue[2])}}for(let z=0;z<4;z++)for(let V=0;V<4;V++){const K=O(z,V),J=O(z,V+1),ue=O(z+1,V),xe=O(z+1,V+1);D.emplaceBack(K,J,ue),D.emplaceBack(ue,J,xe)}this._tileDebugTextIndexBuffer=o.createIndexBuffer(D),this._tileDebugTextBuffer=o.createVertexBuffer(M,Qf.members),this._globeTileDebugTextBuffer=o.createVertexBuffer(k,H0.members),this._tileDebugTextSegments=qr.simpleSegment(0,0,P,32)}}class RT{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,a,d){const f=String(a);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][f]=this.stateChanges[o][f]||{},Wt(this.stateChanges[o][f],d),null===this.deletedStates[o]){this.deletedStates[o]={};for(const g in this.state[o])g!==f&&(this.deletedStates[o][g]=null)}else if(this.deletedStates[o]&&null===this.deletedStates[o][f]){this.deletedStates[o][f]={};for(const g in this.state[o][f])d[g]||(this.deletedStates[o][f][g]=null)}else for(const g in d)this.deletedStates[o]&&this.deletedStates[o][f]&&null===this.deletedStates[o][f][g]&&delete this.deletedStates[o][f][g]}removeFeatureState(o,a,d){if(null===this.deletedStates[o])return;const f=String(a);if(this.deletedStates[o]=this.deletedStates[o]||{},d&&void 0!==a)null!==this.deletedStates[o][f]&&(this.deletedStates[o][f]=this.deletedStates[o][f]||{},this.deletedStates[o][f][d]=null);else if(void 0!==a)if(this.stateChanges[o]&&this.stateChanges[o][f])for(d in this.deletedStates[o][f]={},this.stateChanges[o][f])this.deletedStates[o][f][d]=null;else this.deletedStates[o][f]=null;else this.deletedStates[o]=null}getState(o,a){const d=String(a),f=Wt({},(this.state[o]||{})[d],(this.stateChanges[o]||{})[d]);if(null===this.deletedStates[o])return{};if(this.deletedStates[o]){const g=this.deletedStates[o][a];if(null===g)return{};for(const v in g)delete f[v]}return f}initializeTileState(o,a){o.setFeatureState(this.state,a)}coalesceChanges(o,a){const d={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const g={};for(const v in this.stateChanges[f])this.state[f][v]||(this.state[f][v]={}),Wt(this.state[f][v],this.stateChanges[f][v]),g[v]=this.state[f][v];d[f]=g}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const g={};if(null===this.deletedStates[f])for(const v in this.state[f])g[v]={},this.state[f][v]={};else for(const v in this.deletedStates[f]){if(null===this.deletedStates[f][v])this.state[f][v]={};else for(const x of Object.keys(this.deletedStates[f][v]))delete this.state[f][v][x];g[v]=this.state[f][v]}d[f]=d[f]||{},Wt(d[f],g)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(d).length)for(const f in o)o[f].setFeatureState(d,a)}}class JC{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,a){const d=this.toIdx(o,a);return{min:this.minimums[d],max:this.maximums[d]}}isLeaf(o,a){return this.leaves[this.toIdx(o,a)]}toIdx(o,a){return a*this.size+o}}function eM(l,o,a,d){let f=0,g=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(d[v])<1e-15){if(a[v]<l[v]||a[v]>o[v])return null}else{const x=1/d[v];let M=(l[v]-a[v])*x,D=(o[v]-a[v])*x;if(M>D){const k=M;M=D,D=k}if(M>f&&(f=M),D<g&&(g=D),f>g)return null}return f}function tM(l,o,a,d,f,g,v,x,M,D,k){const P=d-l,O=f-o,z=g-a,V=v-l,K=x-o,J=M-a,ue=k[1]*J-k[2]*K,xe=k[2]*V-k[0]*J,fe=k[0]*K-k[1]*V,ye=P*ue+O*xe+z*fe;if(Math.abs(ye)<1e-15)return null;const Te=1/ye,we=D[0]-l,qe=D[1]-o,Ge=D[2]-a,nt=(we*ue+qe*xe+Ge*fe)*Te;if(nt<0||nt>1)return null;const Mt=qe*z-Ge*O,Ze=Ge*P-we*z,ct=we*O-qe*P,at=(k[0]*Mt+k[1]*Ze+k[2]*ct)*Te;return at<0||nt+at>1?null:(V*Mt+K*Ze+J*ct)*Te}function iM(l,o,a){return(l-o)/(a-o)}function nM(l,o,a,d,f,g,v,x,M){const D=1<<a,k=g-d,P=v-f,O=(l+1)/D*k+d,z=(o+0)/D*P+f,V=(o+1)/D*P+f;x[0]=(l+0)/D*k+d,x[1]=z,M[0]=O,M[1]=V}class rM{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(g){const v=Math.ceil(Math.log2(g.dim/8)),x=[];let M=Math.ceil(Math.pow(2,v));const D=1/M,k=(z,V,K,J,ue)=>{const xe=J?1:0,fe=(z+1)*K-xe,ye=V*K,Te=(V+1)*K-xe;ue[0]=z*K,ue[1]=ye,ue[2]=fe,ue[3]=Te};let P=new JC(M);const O=[];for(let z=0;z<M*M;z++){k(z%M,Math.floor(z/M),D,!1,O);const V=ha(O[0],O[1],g),K=ha(O[2],O[1],g),J=ha(O[2],O[3],g),ue=ha(O[0],O[3],g);P.minimums.push(Math.min(V,K,J,ue)),P.maximums.push(Math.max(V,K,J,ue)),P.leaves.push(1)}for(x.push(P),M/=2;M>=1;M/=2){const z=x[x.length-1];P=new JC(M);for(let V=0;V<M*M;V++){k(V%M,Math.floor(V/M),2,!0,O);const K=z.getElevation(O[0],O[1]),J=z.getElevation(O[2],O[1]),ue=z.getElevation(O[2],O[3]),xe=z.getElevation(O[0],O[3]),fe=z.isLeaf(O[0],O[1]),ye=z.isLeaf(O[2],O[1]),Te=z.isLeaf(O[2],O[3]),we=z.isLeaf(O[0],O[3]),qe=Math.min(K.min,J.min,ue.min,xe.min),Ge=Math.max(K.max,J.max,ue.max,xe.max),nt=fe&&ye&&Te&&we;P.maximums.push(Ge),P.minimums.push(qe),P.leaves.push(Ge-qe<=5&&nt?1:0)}x.push(P)}return x}(this.dem),d=a.length-1,f=a[d];this._addNode(f.minimums[0],f.maximums[0],f.leaves[0]),this._construct(a,0,0,d,0)}raycastRoot(o,a,d,f,g,v,x=1){return eM([o,a,-100],[d,f,this.maximums[0]*x],g,v)}raycast(o,a,d,f,g,v,x=1){if(!this.nodeCount)return null;const M=this.raycastRoot(o,a,d,f,g,v,x);if(null==M)return null;const D=[],k=[],P=[],O=[],z=[{idx:0,t:M,nodex:0,nodey:0,depth:0}];for(;z.length>0;){const{idx:V,t:K,nodex:J,nodey:ue,depth:xe}=z.pop();if(this.leaves[V]){nM(J,ue,xe,o,a,d,f,P,O);const ye=1<<xe,Te=(J+0)/ye,we=(J+1)/ye,qe=(ue+0)/ye,Ge=(ue+1)/ye,nt=ha(Te,qe,this.dem)*x,Mt=ha(we,qe,this.dem)*x,Ze=ha(we,Ge,this.dem)*x,ct=ha(Te,Ge,this.dem)*x,at=tM(P[0],P[1],nt,O[0],P[1],Mt,O[0],O[1],Ze,g,v),st=tM(O[0],O[1],Ze,P[0],O[1],ct,P[0],P[1],nt,g,v),vt=Math.min(null!==at?at:Number.MAX_VALUE,null!==st?st:Number.MAX_VALUE);if(vt!==Number.MAX_VALUE)return vt;{const mt=rg([],g,v,K);if(oM(nt,Mt,ct,Ze,iM(mt[0],P[0],O[0]),iM(mt[1],P[1],O[1]))>=mt[2])return K}continue}let fe=0;for(let ye=0;ye<this._siblingOffset.length;ye++){nM((J<<1)+this._siblingOffset[ye][0],(ue<<1)+this._siblingOffset[ye][1],xe+1,o,a,d,f,P,O),P[2]=-100,O[2]=this.maximums[this.childOffsets[V]+ye]*x;const Te=eM(P,O,g,v);if(null!=Te){const we=Te;D[ye]=we;let qe=!1;for(let Ge=0;Ge<fe&&!qe;Ge++)we>=D[k[Ge]]&&(k.splice(Ge,0,ye),qe=!0);qe||(k[fe]=ye),fe++}}for(let ye=0;ye<fe;ye++){const Te=k[ye];z.push({idx:this.childOffsets[V]+Te,t:D[Te],nodex:(J<<1)+this._siblingOffset[Te][0],nodey:(ue<<1)+this._siblingOffset[Te][1],depth:xe+1})}}return null}_addNode(o,a,d){return this.minimums.push(o),this.maximums.push(a),this.leaves.push(d),this.childOffsets.push(0),this.nodeCount++}_construct(o,a,d,f,g){if(1===o[f].isLeaf(a,d))return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const v=f-1,x=o[v];let M=0,D=0;for(let k=0;k<this._siblingOffset.length;k++){const P=2*a+this._siblingOffset[k][0],O=2*d+this._siblingOffset[k][1],z=x.getElevation(P,O),V=x.isLeaf(P,O),K=this._addNode(z.min,z.max,V);V&&(M|=1<<k),D||(D=K)}for(let k=0;k<this._siblingOffset.length;k++)M&1<<k||this._construct(o,2*a+this._siblingOffset[k][0],2*d+this._siblingOffset[k][1],v,D+k)}}function oM(l,o,a,d,f,g){return hn(hn(l,a,g),hn(o,d,g),f)}function ha(l,o,a){const d=a.dim,f=Et(l*d-.5,0,d-1),g=Et(o*d-.5,0,d-1),v=Math.floor(f),x=Math.floor(g),M=Math.min(v+1,d-1),D=Math.min(x+1,d-1);return oM(a.get(v,x),a.get(M,x),a.get(v,D),a.get(M,D),f-v,g-x)}const jg={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Ug{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,a,d,f=!1,g=!1){if(this.uid=o,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(d&&"mapbox"!==d&&"terrarium"!==d)return lr(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const v=this.dim=a.height-2,x=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.encoding=d||"mapbox",this.borderReady=f,!f){for(let M=0;M<v;M++)x[this._idx(-1,M)]=x[this._idx(0,M)],x[this._idx(v,M)]=x[this._idx(v-1,M)],x[this._idx(M,-1)]=x[this._idx(M,0)],x[this._idx(M,v)]=x[this._idx(M,v-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(v,-1)]=x[this._idx(v-1,0)],x[this._idx(-1,v)]=x[this._idx(0,v-1)],x[this._idx(v,v)]=x[this._idx(v-1,v-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new rM(this)}get(o,a,d=!1){d&&(o=Et(o,-1,this.dim),a=Et(a,-1,this.dim));const f=4*this._idx(o,a);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[f],this.pixels[f+1],this.pixels[f+2])}static getUnpackVector(o){return jg[o]}get unpackVector(){return jg[this.encoding]}_idx(o,a){if(o<-1||o>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(o+1)}_unpackMapbox(o,a,d){return(256*o*256+256*a+d)/10-1e4}_unpackTerrarium(o,a,d){return 256*o+a+d/256-32768}static pack(o,a){const d=[0,0,0,0],f=Ug.getUnpackVector(a);let g=Math.floor((o+f[3])/f[2]);return d[2]=g%256,g=Math.floor(g/256),d[1]=g%256,g=Math.floor(g/256),d[0]=g,d}getPixels(){return new Da({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,a,d){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let f=a*this.dim,g=a*this.dim+this.dim,v=d*this.dim,x=d*this.dim+this.dim;switch(a){case-1:f=g-1;break;case 1:g=f+1}switch(d){case-1:v=x-1;break;case 1:x=v+1}const M=-a*this.dim,D=-d*this.dim;for(let k=v;k<x;k++)for(let P=f;P<g;P++){const O=4*this._idx(P,k),z=4*this._idx(P+M,k+D);this.pixels[O+0]=o.pixels[z+0],this.pixels[O+1]=o.pixels[z+1],this.pixels[O+2]=o.pixels[z+2],this.pixels[O+3]=o.pixels[z+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}kt(Ug,"DEMData"),kt(rM,"DemMinMaxQuadTree",{omit:["dem"]});class nx{constructor(o,a){this.max=o,this.onRemove=a,this.reset()}reset(){for(const o in this.data)for(const a of this.data[o])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(o,a,d){const f=o.wrapped().key;void 0===this.data[f]&&(this.data[f]=[]);const g={value:a,timeout:void 0};if(void 0!==d&&(g.timeout=setTimeout(()=>{this.remove(o,g)},d)),this.data[f].push(g),this.order.push(f),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const a=this.data[o].shift();return a.timeout&&clearTimeout(a.timeout),0===this.data[o].length&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),a.value}getByKey(o){const a=this.data[o];return a?a[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,a){if(!this.has(o))return this;const d=o.wrapped().key,f=void 0===a?0:this.data[d].indexOf(a),g=this.data[d][f];return this.data[d].splice(f,1),g.timeout&&clearTimeout(g.timeout),0===this.data[d].length&&delete this.data[d],this.onRemove(g.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(o){const a=[];for(const d in this.data)for(const f of this.data[d])o(f.value)||a.push(f);for(const d of a)this.remove(d.value.tileID,d)}}class Ru{constructor(o,a,d){this.func=o,this.mask=a,this.range=d}}Ru.ReadOnly=!1,Ru.ReadWrite=!0,Ru.disabled=new Ru(519,Ru.ReadOnly,[0,1]);class am{constructor(o,a,d,f,g,v){this.test=o,this.ref=a,this.mask=d,this.fail=f,this.depthFail=g,this.pass=v}}am.disabled=new am({func:519,mask:0},0,0,7680,7680,7680);class Pc{constructor(o,a,d){this.blendFunction=o,this.blendColor=a,this.mask=d}}Pc.Replace=[1,0],Pc.disabled=new Pc(Pc.Replace,$n.transparent,[!1,!1,!1,!1]),Pc.unblended=new Pc(Pc.Replace,$n.transparent,[!0,!0,!0,!0]),Pc.alphaBlended=new Pc([1,771],$n.transparent,[!0,!0,!0,!0]);class Ul{constructor(o,a,d){this.enable=o,this.mode=a,this.frontFace=d}}Ul.disabled=new Ul(!1,1029,2305),Ul.backCCW=new Ul(!0,1029,2305),Ul.backCW=new Ul(!0,1029,2304),Ul.frontCW=new Ul(!0,1028,2304),Ul.frontCCW=new Ul(!0,1028,2305);class Mh extends mi{constructor(o,a,d){super(),this.id=o,this._onlySymbols=d,a.on("data",f=>{"source"===f.dataType&&"metadata"===f.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===f.dataType&&"content"===f.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),a.on("error",()=>{this._sourceErrored=!0}),this._source=a,this._tiles={},this._cache=new nx(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=a.minTileCacheSize,this._maxTileCacheSize=a.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new RT,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(o){this.map=o,this._minTileCacheSize=void 0===this._minTileCacheSize&&o?o._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&o?o._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const o in this._tiles){const a=this._tiles[o];if("loaded"!==a.state&&"errored"!==a.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(o,a){return o.isSymbolTile=this._onlySymbols,this._source.loadTile(o,a)}_unloadTile(o){if(this._source.unloadTile)return this._source.unloadTile(o,()=>{})}_abortTile(o){if(this._source.abortTile)return this._source.abortTile(o,()=>{})}serialize(){return this._source.serialize()}prepare(o){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const a in this._tiles){const d=this._tiles[a];this._source.prepareTile(d)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,d.tileID),d.upload(o),d.prepare(this.map.style.imageManager)}else for(const a in this._tiles){const d=this._tiles[a];d.upload(o),d.prepare(this.map.style.imageManager)}}getIds(){return Ar(this._tiles).map(o=>o.tileID).sort(sv).map(o=>o.key)}getRenderableIds(o){const a=[];for(const d in this._tiles)this._isIdRenderable(+d,o)&&a.push(this._tiles[d]);return o?a.sort((d,f)=>{const g=d.tileID,v=f.tileID,x=new Ie(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),M=new Ie(v.canonical.x,v.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-v.overscaledZ||M.y-x.y||M.x-x.x}).map(d=>d.tileID.key):a.map(d=>d.tileID).sort(sv).map(d=>d.key)}hasRenderableParent(o){const a=this.findLoadedParent(o,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(o,a){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(a||!this._tiles[o].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const o in this._tiles)"errored"!==this._tiles[o].state&&this._reloadTile(+o,"reloading")}}_reloadTile(o,a){const d=this._tiles[o];d&&("loading"!==d.state&&(d.state=a),this._loadTile(d,this._tileLoaded.bind(this,d,o,a)))}_tileLoaded(o,a,d,f){if(f)if(o.state="errored",404!==f.status)this._source.fire(new Hn(f,{tile:o}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else o.timeAdded=lo.now(),"expired"===d&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(a,o),"raster-dem"===this._source.type&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),this._source.fire(new qi("data",{dataType:"source",tile:o,coord:o.tileID,sourceCacheId:this.id}))}_backfillDEM(o){const a=this.getRenderableIds();for(let f=0;f<a.length;f++){const g=a[f];if(o.neighboringTiles&&o.neighboringTiles[g]){const v=this.getTileByID(g);d(o,v),d(v,o)}}function d(f,g){if(!f.dem||f.dem.borderReady)return;f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0;let v=g.tileID.canonical.x-f.tileID.canonical.x;const x=g.tileID.canonical.y-f.tileID.canonical.y,M=Math.pow(2,f.tileID.canonical.z),D=g.tileID.key;0===v&&0===x||Math.abs(x)>1||(Math.abs(v)>1&&(1===Math.abs(v+M)?v+=M:1===Math.abs(v-M)&&(v-=M)),g.dem&&f.dem&&(f.dem.backfillBorder(g.dem,v,x),f.neighboringTiles&&f.neighboringTiles[D]&&(f.neighboringTiles[D].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,a,d,f){for(const g in this._tiles){let v=this._tiles[g];if(f[g]||!v.hasData()||v.tileID.overscaledZ<=a||v.tileID.overscaledZ>d)continue;let x=v.tileID;for(;v&&v.tileID.overscaledZ>a+1;){const D=v.tileID.scaledTo(v.tileID.overscaledZ-1);v=this._tiles[D.key],v&&v.hasData()&&(x=D)}let M=x;for(;M.overscaledZ>a;)if(M=M.scaledTo(M.overscaledZ-1),o[M.key]){f[x.key]=x;break}}}findLoadedParent(o,a){if(o.key in this._loadedParentTiles){const d=this._loadedParentTiles[o.key];return d&&d.tileID.overscaledZ>=a?d:null}for(let d=o.overscaledZ-1;d>=a;d--){const f=o.scaledTo(d),g=this._getLoadedTile(f);if(g)return g}}_getLoadedTile(o){const a=this._tiles[o.key];return a&&a.hasData()?a:this._cache.getByKey(this._source.reparseOverscaled?o.wrapped().key:o.canonical.key)}updateCacheSize(o,a){a=a||this._source.tileSize;const d=Math.ceil(o.width/a)+1,f=Math.ceil(o.height/a)+1,g=Math.floor(d*f*5),v="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,g):g,x="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)}handleWrapJump(o){const a=Math.round((o-(void 0===this._prevLng?o:this._prevLng))/360);if(this._prevLng=o,a){const d={};for(const f in this._tiles){const g=this._tiles[f];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+a),d[g.tileID.key]=g}this._tiles=d;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(+f,this._tiles[f])}}update(o,a,d){if(this.transform=o,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!d)return;let f;this.updateCacheSize(o,a),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new hs(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(f=o.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!d,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(f=f.filter(x=>this._source.hasTile(x)))):f=[];const g=this._updateRetainedTiles(f);if(rx(this._source.type)&&0!==f.length){const x={},M={},D=Object.keys(g);for(const P of D){const O=g[P],z=this._tiles[P];if(!z||z.fadeEndTime&&z.fadeEndTime<=lo.now())continue;const V=this.findLoadedParent(O,Math.max(O.overscaledZ-Mh.maxOverzooming,this._source.minzoom));V&&(this._addTile(V.tileID),x[V.tileID.key]=V.tileID),M[P]=O}const k=f[f.length-1].overscaledZ;for(const P in this._tiles){const O=this._tiles[P];if(g[P]||!O.hasData())continue;let z=O.tileID;for(;z.overscaledZ>k;){z=z.scaledTo(z.overscaledZ-1);const V=this._tiles[z.key];if(V&&V.hasData()&&M[z.key]){g[P]=O.tileID;break}}}for(const P in x)g[P]||(this._coveredTiles[P]=!0,g[P]=x[P])}for(const x in g)this._tiles[x].clearFadeHold();const v=function(x,M){const D=[];for(const k in x)k in M||D.push(k);return D}(this._tiles,g);for(const x of v){const M=this._tiles[x];M.hasSymbolBuckets&&!M.holdingForFade()?M.setHoldDuration(this.map._fadeDuration):M.hasSymbolBuckets&&!M.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(+o)}_updateRetainedTiles(o){const a={};if(0===o.length)return a;const d={},f=o.reduce((D,k)=>Math.min(D,k.overscaledZ),1/0),g=o[0].overscaledZ,v=Math.max(g-Mh.maxOverzooming,this._source.minzoom),x=Math.max(g+Mh.maxUnderzooming,this._source.minzoom),M={};for(const D of o){const k=this._addTile(D);a[D.key]=D,k.hasData()||f<this._source.maxzoom&&(M[D.key]=D)}this._retainLoadedChildren(M,f,x,a);for(const D of o){let k=this._tiles[D.key];if(k.hasData())continue;if(D.canonical.z>=this._source.maxzoom){const O=D.children(this._source.maxzoom)[0],z=this.getTile(O);if(z&&z.hasData()){a[O.key]=O;continue}}else{const O=D.children(this._source.maxzoom);if(a[O[0].key]&&a[O[1].key]&&a[O[2].key]&&a[O[3].key])continue}let P=k.wasRequested();for(let O=D.overscaledZ-1;O>=v;--O){const z=D.scaledTo(O);if(d[z.key]||(d[z.key]=!0,k=this.getTile(z),!k&&P&&(k=this._addTile(z)),k&&(a[z.key]=z,P=k.wasRequested(),k.hasData())))break}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const a=[];let d,f=this._tiles[o].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){d=this._loadedParentTiles[f.key];break}a.push(f.key);const g=f.scaledTo(f.overscaledZ-1);if(d=this._getLoadedTile(g),d)break;f=g}for(const g of a)this._loadedParentTiles[g]=d}}_addTile(o){let a=this._tiles[o.key];if(a)return this._source.prepareTile&&this._source.prepareTile(a),a;a=this._cache.getAndRemove(o),a&&(this._setTileReloadTimer(o.key,a),a.tileID=o,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,a)));const d=Boolean(a);if(!d){const f=this.map?this.map.painter:null;a=new ix(o,this._source.tileSize*o.overscaleFactor(),this.transform.tileZoom,f,this._isRaster),this._source.prepareTile&&this._source.prepareTile(a)||this._loadTile(a,this._tileLoaded.bind(this,a,o.key,a.state))}return a?(a.uses++,this._tiles[o.key]=a,d||this._source.fire(new qi("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a):null}_setTileReloadTimer(o,a){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const d=a.getExpiryTimeout();d&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},d))}_removeTile(o){const a=this._tiles[o];a&&(a.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),a.uses>0||(a.hasData()&&"reloading"!==a.state?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(+o);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(o,a,d){const f=[],g=this.transform;if(!g)return f;const v="globe"===g.projection.name,x=Cc(g.center.lng);for(const M in this._tiles){const D=this._tiles[M];if(d&&D.clearQueryDebugViz(),D.holdingForFade())continue;let k;if(v){const P=D.tileID.canonical;if(0===P.z){const O=[Math.abs(Et(x,...lm(P,-1))-x),Math.abs(Et(x,...lm(P,1))-x)];k=[0,2*O.indexOf(Math.min(...O))-1]}else{const O=[Math.abs(Et(x,...lm(P,-1))-x),Math.abs(Et(x,...lm(P,0))-x),Math.abs(Et(x,...lm(P,1))-x)];k=[O.indexOf(Math.min(...O))-1]}}else k=[0];for(const P of k){const O=o.containsTile(D,g,a,P);O&&f.push(O)}}return f}getVisibleCoordinates(o){const a=this.getRenderableIds(o).map(d=>this._tiles[d].tileID);for(const d of a)d.projMatrix=this.transform.calculateProjMatrix(d.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(rx(this._source.type))for(const o in this._tiles){const a=this._tiles[o];if(void 0!==a.fadeEndTime&&a.fadeEndTime>=lo.now())return!0}return!1}setFeatureState(o,a,d){this._state.updateState(o=o||"_geojsonTileLayer",a,d)}removeFeatureState(o,a,d){this._state.removeFeatureState(o=o||"_geojsonTileLayer",a,d)}getFeatureState(o,a){return this._state.getState(o=o||"_geojsonTileLayer",a)}setDependencies(o,a,d){const f=this._tiles[o];f&&f.setDependencies(a,d)}reloadTilesForDependencies(o,a){for(const d in this._tiles)this._tiles[d].hasDependency(o,a)&&this._reloadTile(+d,"reloading");this._cache.filter(d=>!d.hasDependency(o,a))}_preloadTiles(o,a){const d=new Map,f=Array.isArray(o)?o:[o],g=this.map.painter.terrain,v=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const x of f){const M=x.coveringTiles({tileSize:v,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const D of M)d.set(D.key,D);this.usedForTerrain&&x.updateElevation(!1)}ur(Array.from(d.values()),(x,M)=>{const D=new ix(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(D,k=>{"raster-dem"===this._source.type&&D.dem&&this._backfillDEM(D),M(k,D)})},a)}}function sv(l,o){const a=Math.abs(2*l.wrap)-+(l.wrap<0),d=Math.abs(2*o.wrap)-+(o.wrap<0);return l.overscaledZ-o.overscaledZ||d-a||o.canonical.y-l.canonical.y||o.canonical.x-l.canonical.x}function rx(l){return"raster"===l||"image"===l||"video"===l}function lm(l,o){const a=1<<l.z;return[l.x/a+o,(l.x+1)/a+o]}Mh.maxOverzooming=10,Mh.maxUnderzooming=3;class Dh{constructor(o,a,d){this._demTile=o,this._dem=this._demTile.dem,this._scale=a,this._offset=d}static create(o,a,d){const f=d||o.findDEMTileFor(a);if(!f||!f.dem)return;const g=f.dem,v=f.tileID,x=1<<a.canonical.z-v.canonical.z;return new Dh(f,f.tileSize/Oi/x,[(a.canonical.x/x-v.canonical.x)*g.dim,(a.canonical.y/x-v.canonical.y)*g.dim])}tileCoordToPixel(o,a){const d=a*this._scale+this._offset[1],f=Math.floor(o*this._scale+this._offset[0]),g=Math.floor(d);return new Ie(f,g)}getElevationAt(o,a,d,f){const g=o*this._scale+this._offset[0],v=a*this._scale+this._offset[1],x=Math.floor(g),M=Math.floor(v),D=this._dem;return f=!!f,d?hn(hn(D.get(x,M,f),D.get(x,M+1,f),v-M),hn(D.get(x+1,M,f),D.get(x+1,M+1,f),v-M),g-x):D.get(x,M,f)}getElevationAtPixel(o,a,d){return this._dem.get(o,a,!!d)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*Ga(1,o)*this._dem.stride}}class Sh{constructor(o,a){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Sn(Oi,16,0),this.featureIndexArray=new H1,this.promoteId=a}insert(o,a,d,f,g,v=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,f,g,v);const M=this.grid;for(let D=0;D<a.length;D++){const k=a[D],P=[1/0,1/0,-1/0,-1/0];for(let O=0;O<k.length;O++){const z=k[O];P[0]=Math.min(P[0],z.x),P[1]=Math.min(P[1],z.y),P[2]=Math.max(P[2],z.x),P[3]=Math.max(P[3],z.y)}P[0]<Oi&&P[1]<Oi&&P[2]>=0&&P[3]>=0&&M.insert(x,P[0],P[1],P[2],P[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Tp.VectorTile(new Rp(this.rawTileData)).layers,this.sourceLayerCoder=new J0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,a,d,f){this.loadVTLayers();const g=o.params||{},v=to(g.filter),x=o.tileResult,M=o.transform,D=x.bufferedTilespaceBounds,k=this.grid.query(D.min.x,D.min.y,D.max.x,D.max.y,(V,K,J,ue)=>ly(x.bufferedTilespaceGeometry,V,K,J,ue));k.sort(zp);let P=null;M.elevation&&k.length>0&&(P=Dh.create(M.elevation,this.tileID));const O={};let z;for(let V=0;V<k.length;V++){const K=k[V];if(K===z)continue;z=K;const J=this.featureIndexArray.get(K);let ue=null;this.loadMatchingFeature(O,J,v,g.layers,g.availableImages,a,d,f,(xe,fe,ye,Te=0)=>(ue||(ue=hl(xe,this.tileID.canonical,o.tileTransform)),fe.queryIntersectsFeature(x,xe,ye,ue,this.z,o.transform,o.pixelPosMatrix,P,Te)))}return O}loadMatchingFeature(o,a,d,f,g,v,x,M,D){const{featureIndex:k,bucketIndex:P,sourceLayerIndex:O,layoutVertexArrayOffset:z}=a,V=this.bucketLayerIDs[P];if(f&&!function(xe,fe){for(let ye=0;ye<xe.length;ye++)if(fe.indexOf(xe[ye])>=0)return!0;return!1}(f,V))return;const K=this.sourceLayerCoder.decode(O),J=this.vtLayers[K].feature(k);if(d.needGeometry){const xe=_u(J,!0);if(!d.filter(new ie(this.tileID.overscaledZ),xe,this.tileID.canonical))return}else if(!d.filter(new ie(this.tileID.overscaledZ),J))return;const ue=this.getId(J,K);for(let xe=0;xe<V.length;xe++){const fe=V[xe];if(f&&f.indexOf(fe)<0)continue;const ye=v[fe];if(!ye)continue;let Te={};void 0!==ue&&M&&(Te=M.getState(ye.sourceLayer||"_geojsonTileLayer",ue));const we=Wt({},x[fe]);we.paint=Gg(we.paint,ye.paint,J,Te,g),we.layout=Gg(we.layout,ye.layout,J,Te,g);const qe=!D||D(J,ye,Te,z);if(!qe)continue;const Ge=new ex(J,this.z,this.x,this.y,ue);Ge.layer=we;let nt=o[fe];void 0===nt&&(nt=o[fe]=[]),nt.push({featureIndex:k,feature:Ge,intersectionZ:qe})}}lookupSymbolFeatures(o,a,d,f,g,v,x,M){const D={};this.loadVTLayers();const k=to(g);for(const P of o)this.loadMatchingFeature(D,{bucketIndex:d,sourceLayerIndex:f,featureIndex:P,layoutVertexArrayOffset:0},k,v,x,M,a);return D}loadFeature(o){const{featureIndex:a,sourceLayerIndex:d}=o;this.loadVTLayers();const f=this.sourceLayerCoder.decode(d),g=this.vtFeatures[f];if(g[a])return g[a];const v=this.vtLayers[f].feature(a);return g[a]=v,v}hasLayer(o){for(const a of this.bucketLayerIDs)for(const d of a)if(o===d)return!0;return!1}getId(o,a){let d=o.id;return this.promoteId&&(d=o.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[a]],"boolean"==typeof d&&(d=Number(d))),d}}function Gg(l,o,a,d,f){return Ai(l,(g,v)=>{const x=o instanceof Se?o.get(v):null;return x&&x.evaluate?x.evaluate(a,d,f):x})}function zp(l,o){return o-l}kt(Sh,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class qg{constructor(o){const a={},d=[];for(const x in o){const M=o[x],D=a[x]={};for(const k in M.glyphs){const P=M.glyphs[+k];if(!P||0===P.bitmap.width||0===P.bitmap.height)continue;const O=P.metrics.localGlyph?2:1,z={x:0,y:0,w:P.bitmap.width+2*O,h:P.bitmap.height+2*O};d.push(z),D[k]=z}}const{w:f,h:g}=qf(d),v=new Pl({width:f||1,height:g||1});for(const x in o){const M=o[x];for(const D in M.glyphs){const k=M.glyphs[+D];if(!k||0===k.bitmap.width||0===k.bitmap.height)continue;const P=a[x][D],O=k.metrics.localGlyph?2:1;Pl.copy(k.bitmap,v,{x:0,y:0},{x:P.x+O,y:P.y+O},k.bitmap)}}this.image=v,this.positions=a}}kt(qg,"GlyphAtlas");class Wg{constructor(o){this.tileID=new hs(o.tileID.overscaledZ,o.tileID.wrap,o.tileID.canonical.z,o.tileID.canonical.x,o.tileID.canonical.y),this.tileZoom=o.tileZoom,this.uid=o.uid,this.zoom=o.zoom,this.canonical=o.tileID.canonical,this.pixelRatio=o.pixelRatio,this.tileSize=o.tileSize,this.source=o.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=o.showCollisionBoxes,this.collectResourceTiming=!!o.collectResourceTiming,this.returnDependencies=!!o.returnDependencies,this.promoteId=o.promoteId,this.enableTerrain=!!o.enableTerrain,this.isSymbolTile=o.isSymbolTile,this.tileTransform=Tu(o.tileID.canonical,o.projection),this.projection=o.projection}parse(o,a,d,f,g){this.status="parsing",this.data=o,this.collisionBoxArray=new ll;const v=new J0(Object.keys(o.layers).sort()),x=new Sh(this.tileID,this.promoteId);x.bucketLayerIDs=[];const M={},D=new om(256,256),k={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:D,availableImages:d},P=a.familiesBySource[this.source];for(const Te in P){const we=o.layers[Te];if(!we)continue;let qe=!1,Ge=!1;for(const Ze of P[Te])"symbol"===Ze[0].type?qe=!0:Ge=!0;if(!0===this.isSymbolTile&&!qe||!1===this.isSymbolTile&&!Ge)continue;1===we.version&&lr(`Vector tile source "${this.source}" layer "${Te}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const nt=v.encode(Te),Mt=[];for(let Ze=0;Ze<we.length;Ze++){const ct=we.feature(Ze),at=x.getId(ct,Te);Mt.push({feature:ct,id:at,index:Ze,sourceLayerIndex:nt})}for(const Ze of P[Te]){const ct=Ze[0];void 0!==this.isSymbolTile&&"symbol"===ct.type!==this.isSymbolTile||ct.minzoom&&this.zoom<Math.floor(ct.minzoom)||ct.maxzoom&&this.zoom>=ct.maxzoom||"none"!==ct.visibility&&(Zg(Ze,this.zoom,d),(M[ct.id]=ct.createBucket({index:x.bucketLayerIDs.length,layers:Ze,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:nt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:d})).populate(Mt,k,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(Ze.map(at=>at.id)))}}let O,z,V,K;D.trim();const J={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ue=Ai(k.glyphDependencies,Te=>Object.keys(Te).map(Number));Object.keys(ue).length?f.send("getGlyphs",{uid:this.uid,stacks:ue},(Te,we)=>{O||(O=Te,z=we,ye.call(this))},void 0,!1,J):z={};const xe=Object.keys(k.iconDependencies);xe.length?f.send("getImages",{icons:xe,source:this.source,tileID:this.tileID,type:"icons"},(Te,we)=>{O||(O=Te,V=we,ye.call(this))},void 0,!1,J):V={};const fe=Object.keys(k.patternDependencies);function ye(){if(O)return g(O);if(z&&V&&K){const Te=new qg(z),we=new Ly(V,K);for(const qe in M){const Ge=M[qe];Ge instanceof Rc?(Zg(Ge.layers,this.zoom,d),qy(Ge,z,Te.positions,V,we.iconPositions,this.showCollisionBoxes,d,this.tileID.canonical,this.tileZoom,this.projection)):Ge.hasPattern&&(Ge instanceof vg||Ge instanceof mg||Ge instanceof mh)&&(Zg(Ge.layers,this.zoom,d),Ge.addFeatures(k,this.tileID.canonical,we.patternPositions,d,this.tileTransform))}this.status="done",g(null,{buckets:Ar(M).filter(qe=>!qe.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Te.image,lineAtlas:D,imageAtlas:we,glyphMap:this.returnDependencies?z:null,iconMap:this.returnDependencies?V:null,glyphPositions:this.returnDependencies?Te.positions:null})}}fe.length?f.send("getImages",{icons:fe,source:this.source,tileID:this.tileID,type:"patterns"},(Te,we)=>{O||(O=Te,K=we,ye.call(this))},void 0,!1,J):K={},ye.call(this)}}function Zg(l,o,a){const d=new ie(o);for(const f of l)f.recalculate(d,a)}class av{constructor(o){this.entries={},this.scheduler=o}request(o,a,d,f){const g=this.entries[o]=this.entries[o]||{callbacks:[]};if(g.result){const[v,x]=g.result;return this.scheduler?this.scheduler.add(()=>{f(v,x)},a):f(v,x),()=>{}}return g.callbacks.push(f),g.cancel||(g.cancel=d((v,x)=>{g.result=[v,x];for(const M of g.callbacks)this.scheduler?this.scheduler.add(()=>{M(v,x)},a):M(v,x);setTimeout(()=>delete this.entries[o],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(v=>v!==f),g.callbacks.length||(g.cancel(),delete this.entries[o]))}}}function Yg(l,o,a){const d=JSON.stringify(l.request);return l.data&&(this.deduped.entries[d]={result:[null,l.data]}),this.deduped.request(d,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom},f=>{const g=je(l.request,(v,x,M,D)=>{v?f(v):x&&f(null,{vectorTile:a?void 0:new Tp.VectorTile(new Rp(x)),rawData:x,cacheControl:M,expires:D})});return()=>{g.cancel(),f()}},o)}p.ARRAY_TYPE=Rs,p.AUTH_ERR_MSG=$r,p.Aabb=Ma,p.Actor=class{constructor(l,o,a){this.target=l,this.parent=o,this.mapId=a,this.callbacks={},this.cancelCallbacks={},hi(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=St()?l:ce,this.scheduler=new XC}send(l,o,a,d,f=!1,g){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(a.metadata=g,this.callbacks[v]=a);const x=Pn(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:l,hasCallback:!!a,targetMapId:d,mustQueue:f,sourceMapId:this.mapId,data:Ts(o,x)},x),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(l){const o=l.data,a=o.id;if(a&&(!o.targetMapId||this.mapId===o.targetMapId))if("<cancel>"===o.type){const d=this.cancelCallbacks[a];delete this.cancelCallbacks[a],d&&d.cancel()}else if(o.mustQueue||St()){const d=this.callbacks[a];this.cancelCallbacks[a]=this.scheduler.add(()=>this.processTask(a,o),d&&d.metadata||{type:"message"})}else this.processTask(a,o)}processTask(l,o){if("<response>"===o.type){const a=this.callbacks[l];delete this.callbacks[l],a&&(o.error?a(cd(o.error)):a(null,cd(o.data)))}else{const a=Pn(this.globalScope)?void 0:[],d=o.hasCallback?(g,v)=>{delete this.cancelCallbacks[l],this.target.postMessage({id:l,type:"<response>",sourceMapId:this.mapId,error:g?Ts(g):null,data:Ts(v,a)},a)}:g=>{},f=cd(o.data);if(this.parent[o.type])this.parent[o.type](o.sourceMapId,f,d);else if(this.parent.getWorkerSource){const g=o.type.split(".");this.parent.getWorkerSource(o.sourceMapId,g[0],f.source)[g[1]](f,d)}else d(new Error(`Could not find function ${o.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},p.CanonicalTileID=yg,p.Color=$n,p.ColorMode=Pc,p.CullFaceMode=Ul,p.DEMData=Ug,p.DataConstantProperty=Ce,p.DedupedRequest=av,p.DepthMode=Ru,p.EXTENT=Oi,p.Elevation=class{isDataAvailableAtPoint(l){const o=this._source();if(!o||l.y<0||l.y>1)return!1;const a=o.getSource().maxzoom,d=1<<a,f=Math.floor(l.x),g=Math.floor((l.x-f)*d),v=Math.floor(l.y*d),x=this.findDEMTileFor(new hs(a,f,a,g,v));return!(!x||!x.dem)}getAtPointOrZero(l,o=0){return this.getAtPoint(l,o)||0}getAtPoint(l,o,a=!0){null==o&&(o=null);const d=this._source();if(!d||l.y<0||l.y>1)return o;const f=d.getSource().maxzoom,g=1<<f,v=Math.floor(l.x),x=l.x-v,M=new hs(f,v,f,Math.floor(x*g),Math.floor(l.y*g)),D=this.findDEMTileFor(M);if(!D||!D.dem)return o;const k=D.dem,P=1<<D.tileID.canonical.z,O=(x*P-D.tileID.canonical.x)*k.dim,z=(l.y*P-D.tileID.canonical.y)*k.dim,V=Math.floor(O),K=Math.floor(z);return(a?this.exaggeration():1)*hn(hn(k.get(V,K),k.get(V,K+1),z-K),hn(k.get(V+1,K),k.get(V+1,K+1),z-K),O-V)}getAtTileOffset(l,o,a){const d=1<<l.canonical.z;return this.getAtPointOrZero(new xp(l.wrap+(l.canonical.x+o/Oi)/d,(l.canonical.y+a/Oi)/d))}getAtTileOffsetFunc(l,o,a,d){return f=>{const g=this.getAtTileOffset(l,f.x,f.y),v=d.upVector(l.canonical,f.x,f.y);return Il(v,v,g*d.upVectorScale(l.canonical,o,a).metersToTile),v}}getForTilePoints(l,o,a,d){const f=Dh.create(this,l,d);return!!f&&(o.forEach(g=>{g[2]=this.exaggeration()*f.getElevationAt(g[0],g[1],a)}),!0)}getMinMaxForTile(l){const o=this.findDEMTileFor(l);if(!o||!o.dem)return null;const a=o.dem.tree,d=o.tileID,f=1<<l.canonical.z-d.canonical.z;let g=l.canonical.x/f-d.canonical.x,v=l.canonical.y/f-d.canonical.y,x=0;for(let M=0;M<l.canonical.z-d.canonical.z&&!a.leaves[x];M++){g*=2,v*=2;const D=2*Math.floor(v)+Math.floor(g);x=a.childOffsets[x]+D,g%=1,v%=1}return{min:this.exaggeration()*a.minimums[x],max:this.exaggeration()*a.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(l,o,a){throw new Error("Pure virtual method called.")}pointCoordinate(l){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(l){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},p.ErrorEvent=Hn,p.EvaluationParameters=ie,p.Event=qi,p.Evented=mi,p.FillExtrusionBucket=mh,p.Frustum=Pf,p.FrustumCorners=Rf,p.GLOBE_METERS_TO_ECEF=Xy,p.GLOBE_RADIUS=vd,p.GLOBE_SCALE_MATCH_LATITUDE=45,p.GLOBE_ZOOM_THRESHOLD_MAX=6,p.GLOBE_ZOOM_THRESHOLD_MIN=5,p.GlobeSharedBuffers=class{constructor(l){this._createGrid(l),this._createPoles(l)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const l of this._poleSegments)l.destroy();for(const l of this._gridSegments)l.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const l of this._wireframeSegments)l.destroy()}}_createGrid(l){const o=new Ft,a=new cn,d=65;for(let f=0;f<d;f++)for(let g=0;g<d;g++)o.emplaceBack(g,f);this._gridSegments=[];for(let f=0,g=0;f<bh.length;f++){const v=bh[f];for(let M=0;M<v;M++)for(let D=0;D<64;D++){const k=M*d+D;a.emplaceBack(k+1,k,k+d),a.emplaceBack(k+d,k+d+1,k+1)}const x=64*v*2;this._gridSegments.push(qr.simpleSegment(0,g,(v+1)*d,x)),g+=x}this._gridBuffer=l.createVertexBuffer(o,Qf.members),this._gridIndexBuffer=l.createIndexBuffer(a,!0)}_createPoles(l){const o=new cn;for(let f=0;f<=64;f++)o.emplaceBack(0,f+1,f+2);this._poleIndexBuffer=l.createIndexBuffer(o,!0);const a=new Lo,d=new Lo;this._poleSegments=[];for(let f=0,g=0;f<5;f++){const v=360/(1<<f);a.emplaceBack(0,-vd,0,.5,0),d.emplaceBack(0,-vd,0,.5,1);for(let x=0;x<=64;x++){const M=x/64,D=hn(0,v,M),[k,P,O]=Pp(DT,ST,D,vd);a.emplaceBack(k,P,O,M,0),d.emplaceBack(k,P,O,M,1)}this._poleSegments.push(qr.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=l.createVertexBuffer(a,Yy,!1),this._poleSouthVertexBuffer=l.createVertexBuffer(d,Yy,!1)}getGridBuffers(l){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[l]]}getPoleBuffers(l){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[l]]}getWirefameBuffers(l,o){if(!this._wireframeSegments){const a=new us,d=64,f=d+1;this._wireframeSegments=[];for(let g=0,v=0;g<bh.length;g++){const x=bh[g];for(let D=0;D<x;D++)for(let k=0;k<d;k++){const P=D*f+k;a.emplaceBack(P,P+1),a.emplaceBack(P,P+f),a.emplaceBack(P,P+f+1)}const M=x*d*3;this._wireframeSegments.push(qr.simpleSegment(0,v,(x+1)*f,M)),v+=M}this._wireframeIndexBuffer=l.createIndexBuffer(a)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[o]]}},p.GlyphManager=_h,p.ImagePosition=Wf,p.LineAtlas=om,p.LngLat=Gn,p.LngLatBounds=mu,p.LocalGlyphMode=Eg,p.MAX_MERCATOR_LATITUDE=Mc,p.MercatorCoordinate=xp,p.ONE_EM=24,p.OverscaledTileID=hs,p.Properties=ot,p.RGBAImage=Da,p.Ray=r0,p.RequestManager=class{constructor(l,o,a){this._transformRequestFn=l,this._customAccessToken=o,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const l=function(){let o="";for(let a=0;a<10;a++)o+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Kc,o].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,o){return this._transformRequestFn&&this._transformRequestFn(l,o)||{url:l}}normalizeStyleURL(l,o){if(!ma(l))return l;const a=Vs(l);return a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||o)}normalizeGlyphsURL(l,o){if(!ma(l))return l;const a=Vs(l);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||o)}normalizeSourceURL(l,o,a,d){if(!ma(l))return l;const f=Vs(l);return f.path=`/v4/${f.authority}.json`,f.params.push("secure"),a&&f.params.push(`language=${a}`),d&&f.params.push(`worldview=${d}`),this._makeAPIURL(f,this._customAccessToken||o)}normalizeSpriteURL(l,o,a,d){const f=Vs(l);return ma(l)?(f.path=`/styles/v1${f.path}/sprite${o}${a}`,this._makeAPIURL(f,this._customAccessToken||d)):(f.path+=`${o}${a}`,za(f))}normalizeTileURL(l,o,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!ma(l))return l;const d=Vs(l);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${o||a&&"raster"!==d.authority&&512===a?"@2x":""}${Ir.supported?".webp":"$1"}`),"raster"===d.authority?d.path=`/${Li.RASTER_URL_PREFIX}${d.path}`:(d.path=d.path.replace(/^.+\/v4\//,"/"),d.path=`/${Li.TILE_URL_VERSION}${d.path}`);const f=this._customAccessToken||function(g){for(const v of g){const x=v.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(d.params)||Li.ACCESS_TOKEN;return Li.REQUIRE_ACCESS_TOKEN&&f&&this._skuToken&&d.params.push(`sku=${this._skuToken}`),this._makeAPIURL(d,f)}canonicalizeTileURL(l,o){const a=Vs(l);if(!a.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!a.path.match(/\.[\w]+$/))return l;let d="mapbox://";a.path.match(/^\/raster\/v1\//)?d+=`raster/${a.path.replace(`/${Li.RASTER_URL_PREFIX}/`,"")}`:d+=`tiles/${a.path.replace(`/${Li.TILE_URL_VERSION}/`,"")}`;let f=a.params;return o&&(f=f.filter(g=>!g.match(/^access_token=/))),f.length&&(d+=`?${f.join("&")}`),d}canonicalizeTileset(l,o){const a=!!o&&ma(o),d=[];for(const f of l.tiles||[])tc(f)?d.push(this.canonicalizeTileURL(f,a)):d.push(f);return d}_makeAPIURL(l,o){const a="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",d=Vs(Li.API_URL);if(l.protocol=d.protocol,l.authority=d.authority,"http"===l.protocol){const f=l.params.indexOf("secure");f>=0&&l.params.splice(f,1)}if("/"!==d.path&&(l.path=`${d.path}${l.path}`),!Li.REQUIRE_ACCESS_TOKEN)return za(l);if(o=o||Li.ACCESS_TOKEN,!this._silenceAuthErrors){if(!o)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if("s"===o[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return l.params=l.params.filter(f=>-1===f.indexOf("access_token")),l.params.push(`access_token=${o||""}`),za(l)}},p.ResourceType=ke,p.SegmentVector=qr,p.SourceCache=Mh,p.StencilMode=am,p.StructArrayLayout1ui2=Vr,p.StructArrayLayout2f1f2i16=aa,p.StructArrayLayout2i4=Ft,p.StructArrayLayout2ui4=us,p.StructArrayLayout3f12=Tr,p.StructArrayLayout3ui6=cn,p.StructArrayLayout4i8=fi,p.StructArrayLayout5f20=Lo,p.Texture=Ch,p.Tile=ix,p.Transitionable=pe,p.Uniform1f=hu,p.Uniform1i=class extends dl{constructor(l){super(l),this.current=0}set(l,o,a){this.fetchUniformLocation(l,o)&&this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},p.Uniform2f=class extends dl{constructor(l){super(l),this.current=[0,0]}set(l,o,a){this.fetchUniformLocation(l,o)&&(a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1])))}},p.Uniform3f=class extends dl{constructor(l){super(l),this.current=[0,0,0]}set(l,o,a){this.fetchUniformLocation(l,o)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2])))}},p.Uniform4f=ty,p.UniformColor=Xb,p.UniformMatrix2f=class extends dl{constructor(l){super(l),this.current=mT}set(l,o,a){if(this.fetchUniformLocation(l,o))for(let d=0;d<4;d++)if(a[d]!==this.current[d]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}},p.UniformMatrix3f=class extends dl{constructor(l){super(l),this.current=fT}set(l,o,a){if(this.fetchUniformLocation(l,o))for(let d=0;d<9;d++)if(a[d]!==this.current[d]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}},p.UniformMatrix4f=class extends dl{constructor(l){super(l),this.current=W1}set(l,o,a){if(this.fetchUniformLocation(l,o)){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let d=1;d<16;d++)if(a[d]!==this.current[d]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}}},p.UnwrappedTileID=Ty,p.ValidationError=Bt,p.VectorTileWorkerSource=class extends mi{constructor(l,o,a,d,f){super(),this.actor=l,this.layerIndex=o,this.availableImages=a,this.loadVectorData=f||Yg,this.loading={},this.loaded={},this.deduped=new av(l.scheduler),this.isSpriteLoaded=d,this.scheduler=l.scheduler}loadTile(l,o){const a=l.uid,d=l&&l.request,f=d&&d.collectResourceTiming,g=this.loading[a]=new Wg(l);g.abort=this.loadVectorData(l,(v,x)=>{const M=!this.loading[a];if(delete this.loading[a],M||v||!x)return g.status="done",M||(this.loaded[a]=g),o(v);const D=x.rawData,k={};x.expires&&(k.expires=x.expires),x.cacheControl&&(k.cacheControl=x.cacheControl),g.vectorTile=x.vectorTile||new Tp.VectorTile(new Rp(D));const P=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(O,z)=>{if(O||!z)return o(O);const V={};if(f){const K=tr(d);K.length>0&&(V.resourceTiming=JSON.parse(JSON.stringify(K)))}o(null,Wt({rawTileData:D.slice(0)},z,k,V))})};this.isSpriteLoaded?P():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(P,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom}):P()}),this.loaded=this.loaded||{},this.loaded[a]=g})}reloadTile(l,o){const a=this.loaded,d=l.uid,f=this;if(a&&a[d]){const g=a[d];g.showCollisionBoxes=l.showCollisionBoxes,g.enableTerrain=!!l.enableTerrain,g.projection=l.projection,g.tileTransform=Tu(l.tileID.canonical,l.projection);const v=(x,M)=>{const D=g.reloadCallback;D&&(delete g.reloadCallback,g.parse(g.vectorTile,f.layerIndex,this.availableImages,f.actor,D)),o(x,M)};"parsing"===g.status?g.reloadCallback=v:"done"===g.status&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,v):v())}}abortTile(l,o){const a=l.uid,d=this.loading[a];d&&(d.abort&&d.abort(),delete this.loading[a]),o()}removeTile(l,o){const a=this.loaded,d=l.uid;a&&a[d]&&delete a[d],o()}},p.WritingMode=fl,p.ZoomHistory=up,p.add=vu,p.addDynamicAttributes=wh,p.adjoint=function(l,o){var a=o[0],d=o[1],f=o[2],g=o[3],v=o[4],x=o[5],M=o[6],D=o[7],k=o[8];return l[0]=v*k-x*D,l[1]=f*D-d*k,l[2]=d*x-f*v,l[3]=x*M-g*k,l[4]=a*k-f*M,l[5]=f*g-a*x,l[6]=g*D-v*M,l[7]=d*M-a*D,l[8]=a*v-d*g,l},p.asyncAll=ur,p.bezier=mn,p.bindAll=hi,p.boundsAttributes=Vg,p.bufferConvexPolygon=function(l,o){const a=[];for(let d=0;d<l.length;d++){const f=Di(d-1,-1,l.length-1),g=Di(d+1,-1,l.length-1),v=l[d],x=l[g],M=l[f].sub(v).unit(),D=x.sub(v).unit(),k=D.angleWithSep(M.x,M.y),P=M.add(D).unit().mult(-1*o/Math.sin(k/2));a.push(v.add(P))}return a},p.cacheEntryPossiblyAdded=function(l){me++,me>Jc&&(l.getActor().send("enforceCacheSizeLimit",nc),me=0)},p.calculateGlobeLabelMatrix=function(l,o){const{x:a,y:d}=l.point,f=Lg(a,d,l.worldSize/l._pixelsPerMercatorPixel,0,0);return Cp(f,f,Qy(Vl(o)))},p.calculateGlobeMatrix=function(l){const{x:o,y:a}=l.point,{lng:d,lat:f}=l._center;return Lg(o,a,l.worldSize,d,f)},p.calculateGlobeMercatorMatrix=function(l){const o=l.pixelsPerMeter,a=o/Ga(1,l.center.lat),d=ca(new Float64Array(16));return ng(d,d,[l.point.x,l.point.y,0]),Sc(d,d,[a,a,o]),Float32Array.from(d)},p.circumferenceAtLatitude=gu,p.clamp=Et,p.clearTileCache=function(l){const o=de(),a=[];for(const d in Jr)o&&a.push(o.delete(d)),delete Jr[d];l&&Promise.all(a).catch(l).then(()=>l())},p.clipLine=VC,p.clone=function(l){var o=new Rs(16);return o[0]=l[0],o[1]=l[1],o[2]=l[2],o[3]=l[3],o[4]=l[4],o[5]=l[5],o[6]=l[6],o[7]=l[7],o[8]=l[8],o[9]=l[9],o[10]=l[10],o[11]=l[11],o[12]=l[12],o[13]=l[13],o[14]=l[14],o[15]=l[15],o},p.clone$1=$i,p.collisionCircleLayout=ua,p.config=Li,p.conjugate=function(l,o){return l[0]=-o[0],l[1]=-o[1],l[2]=-o[2],l[3]=o[3],l},p.create=function(){var l=new Rs(16);return Rs!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},p.create$1=ig,p.createExpression=Dl,p.createLayout=dt,p.createStyleLayer=function(l){return"custom"===l.type?new AT(l):new ov[l.type](l)},p.cross=og,p.degToRad=xt,p.distance=function(l,o){return Math.hypot(o[0]-l[0],o[1]-l[1],o[2]-l[2])},p.div=function(l,o,a){return l[0]=o[0]/a[0],l[1]=o[1]/a[1],l[2]=o[2]/a[2],l},p.dot=pl,p.ease=vi,p.easeCubicInOut=sn,p.emitValidationErrors=gt,p.endsWith=ki,p.enforceCacheSizeLimit=function(l){for(const o in Jr)j(o),Jr[o].then(a=>{a.keys().then(d=>{for(let f=0;f<d.length-l;f++)a.delete(d[f])})})},p.evaluateSizeForFeature=Ko,p.evaluateSizeForZoom=kc,p.evaluateVariableOffset=Gy,p.evented=G,p.exactEquals=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]&&l[3]===o[3]},p.exactEquals$1=function(l,o){return l[0]===o[0]&&l[1]===o[1]&&l[2]===o[2]},p.exported=lo,p.exported$1=Ir,p.extend=Wt,p.extend$1=ns,p.fillExtrusionHeightLift=wC,p.filterObject=Hr,p.fromMat4=function(l,o){return l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[4],l[4]=o[5],l[5]=o[6],l[6]=o[8],l[7]=o[9],l[8]=o[10],l},p.fromQuat=function(l,o){var a=o[0],d=o[1],f=o[2],g=o[3],v=a+a,x=d+d,M=f+f,D=a*v,k=d*v,P=d*x,O=f*v,z=f*x,V=f*M,K=g*v,J=g*x,ue=g*M;return l[0]=1-P-V,l[1]=k+ue,l[2]=O-J,l[3]=0,l[4]=k-ue,l[5]=1-D-V,l[6]=z+K,l[7]=0,l[8]=O+J,l[9]=z-K,l[10]=1-D-P,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},p.fromRotation=function(l,o){var a=Math.sin(o),d=Math.cos(o);return l[0]=d,l[1]=a,l[2]=0,l[3]=-a,l[4]=d,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},p.fromScaling=py,p.furthestTileCorner=function(l){const o=Math.round((l+45+360)%360/90)%4;return Vi[o]},p.getAABBPointSquareDist=function(l,o,a){let d=0;for(let f=0;f<2;++f){const g=a?a[f]:0;l[f]>g&&(d+=(l[f]-g)*(l[f]-g)),o[f]<g&&(d+=(g-o[f])*(g-o[f]))}return d},p.getAnchorAlignment=Mg,p.getAnchorJustification=kg,p.getBounds=function(l){let o=1/0,a=1/0,d=-1/0,f=-1/0;for(const g of l)o=Math.min(o,g.x),a=Math.min(a,g.y),d=Math.max(d,g.x),f=Math.max(f,g.y);return{min:new Ie(o,a),max:new Ie(d,f)}},p.getColumn=Wr,p.getGridMatrix=function(l,o,a){const d=o.getNorth(),f=o.getSouth(),g=o.getWest(),v=.015625;return[0,(o.getEast()-g)*v,1<<l.z,(f-d)/bh[a],0,l.y,d,g,v]},p.getImage=_i,p.getJSON=function(l,o){return Ae(Wt(l,{type:"json"}),o)},p.getLatitudinalLod=function(l){const o=80.051129;l=Et(l,-80.051129,o)/o*90;const a=Math.pow(Math.abs(Math.sin(xt(l))),3);return Math.round(a*(bh.length-1))},p.getMapSessionAPI=jd,p.getPerformanceMeasurement=tr,p.getProjection=K0,p.getRTLTextPluginStatus=Q,p.getReferrer=Ne,p.getTilePoint=function(l,{x:o,y:a},d=0){return new Ie(((o-d)*l.scale-l.x)*Oi,(a*l.scale-l.y)*Oi)},p.getTileVec3=function(l,o,a=0){return Mp(((o.x-a)*l.scale-l.x)*Oi,(o.y*l.scale-l.y)*Oi,bp(o.z,o.y))},p.getVideo=function(l,o){const a=ce.document.createElement("video");a.muted=!0,a.onloadstart=function(){o(null,a)};for(let d=0;d<l.length;d++){const f=ce.document.createElement("source");pt(l[d])||(a.crossOrigin="Anonymous"),f.src=l[d],a.appendChild(f)}return{cancel:()=>{}}},p.globeCenterToScreenPoint=function(l){const o=[0,0,0],a=ca(new Float64Array(16));return Cp(a,l.pixelMatrix,l.globeMatrix),Mo(o,o,a),new Ie(o[0],o[1])},p.globeDenormalizeECEF=Qy,p.globeECEFOrigin=function(l,o){const a=[0,0,0];return Mo(a,a,no(Vl(o.canonical))),Mo(a,a,l),a},p.globeNormalizeECEF=no,p.globePixelsToTileUnits=function(l,o){return Oi/(512*Math.pow(2,l))*Jf(Vl(o))},p.globePoleMatrixForTile=function(l,o,a){const d=ca(new Float64Array(16)),f=(o/(1<<l)-.5)*Math.PI*2;return kf(d,a.globeMatrix,f),Float32Array.from(d)},p.globeTileBounds=Vl,p.globeTiltAtLngLat=W0,p.globeToMercatorTransition=xh,p.globeUseCustomAntiAliasing=function(l,o,a){const d=xh(a.zoom),f=l.style.map._antialias,g=!!o.extStandardDerivatives,v=o.extStandardDerivativesForceOff||l.terrain&&l.terrain.exaggeration()>0;return 0===d&&!f&&!v&&g},p.identity=ca,p.identity$1=vy,p.invert=hy,p.isFullscreen=function(){return!!ce.document.fullscreenElement||!!ce.document.webkitFullscreenElement},p.isLngLatBehindGlobe=function(l,o){return W0(l,o)>Math.PI/2*1.01},p.isMapAuthenticated=function(l){return Va.has(l)},p.isMapboxURL=ma,p.isSafariWithAntialiasingBug=function(l){const o=l.navigator?l.navigator.userAgent:null;return!!Pn(l)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},p.latFromMercatorY=No,p.len=fd,p.length=Af,p.length$1=function(l){return Math.hypot(l[0],l[1],l[2],l[3])},p.loadVectorTile=Yg,p.makeRequest=Ae,p.mapValue=function(l,o,a,d,f){return Et((l-o)/(a-o)*(f-d)+d,d,f)},p.mercatorScale=Kb,p.mercatorXfromLng=Cc,p.mercatorYfromLat=$e,p.mercatorZfromAltitude=Ga,p.mul=dh,p.mul$1=sg,p.multiply=Cp,p.multiply$1=function(l,o,a){var d=o[0],f=o[1],g=o[2],v=o[3],x=o[4],M=o[5],D=o[6],k=o[7],P=o[8],O=a[0],z=a[1],V=a[2],K=a[3],J=a[4],ue=a[5],xe=a[6],fe=a[7],ye=a[8];return l[0]=O*d+z*v+V*D,l[1]=O*f+z*x+V*k,l[2]=O*g+z*M+V*P,l[3]=K*d+J*v+ue*D,l[4]=K*f+J*x+ue*k,l[5]=K*g+J*M+ue*P,l[6]=xe*d+fe*v+ye*D,l[7]=xe*f+fe*x+ye*k,l[8]=xe*g+fe*M+ye*P,l},p.multiply$2=Al,p.nextPowerOfTwo=Ii,p.normalize=Gs,p.normalize$1=function(l,o){var a=o[0],d=o[1],f=o[2],g=o[3],v=a*a+d*d+f*f+g*g;return v>0&&(v=1/Math.sqrt(v)),l[0]=a*v,l[1]=d*v,l[2]=f*v,l[3]=g*v,l},p.number=hn,p.ortho=function(l,o,a,d,f,g,v){var x=1/(o-a),M=1/(d-f),D=1/(g-v);return l[0]=-2*x,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*M,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*D,l[11]=0,l[12]=(o+a)*x,l[13]=(f+d)*M,l[14]=(v+g)*D,l[15]=1,l},p.pbf=Rp,p.perspective=function(l,o,a,d,f){var g,v=1/Math.tan(o/2);return l[0]=v/a,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=v,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,null!=f&&f!==1/0?(l[10]=(f+d)*(g=1/(d-f)),l[14]=2*f*d*g):(l[10]=-1,l[14]=-2*d),l},p.pick=function(l,o){const a={};for(let d=0;d<o.length;d++){const f=o[d];f in l&&(a[f]=l[f])}return a},p.plugin=te,p.pointGeometry=Ie,p.polygonContainsPoint=Dc,p.polygonIntersectsBox=ly,p.polygonIntersectsPolygon=wp,p.polygonizeBounds=function(l,o,a=0,d=!0){const f=new Ie(a,a),g=l.sub(f),v=o.add(f),x=[g,new Ie(v.x,g.y),v,new Ie(g.x,v.y)];return d&&x.push(g.clone()),x},p.posAttributes=Qf,p.postMapLoadEvent=ic,p.postTurnstileEvent=ga,p.potpack=qf,p.prevPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.floor(Math.log(l)/Math.LN2))},p.radToDeg=Xt,p.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],p.registerForPluginStateChange=function(l){return l({pluginStatus:T,pluginURL:I}),G.on("pluginStateChange",l),l},p.removeAuthState=function(l){Va.delete(l)},p.renderColorRamp=lg,p.resample=la,p.rotateX=Tf,p.rotateX$1=nC,p.rotateY=kf,p.rotateY$1=rC,p.rotateZ=function(l,o,a){var d=Math.sin(a),f=Math.cos(a),g=o[0],v=o[1],x=o[2],M=o[3],D=o[4],k=o[5],P=o[6],O=o[7];return o!==l&&(l[8]=o[8],l[9]=o[9],l[10]=o[10],l[11]=o[11],l[12]=o[12],l[13]=o[13],l[14]=o[14],l[15]=o[15]),l[0]=g*f+D*d,l[1]=v*f+k*d,l[2]=x*f+P*d,l[3]=M*f+O*d,l[4]=D*f-g*d,l[5]=k*f-v*d,l[6]=P*f-x*d,l[7]=O*f-M*d,l},p.rotateZ$1=function(l,o,a){a*=.5;var d=o[0],f=o[1],g=o[2],v=o[3],x=Math.sin(a),M=Math.cos(a);return l[0]=d*M+f*x,l[1]=f*M-d*x,l[2]=g*M+v*x,l[3]=v*M-g*x,l},p.scale=Sc,p.scale$1=Dp,p.scale$2=Il,p.scaleAndAdd=rg,p.setCacheLimits=function(l,o){nc=l,Jc=o},p.setColumn=function(l,o,a){l[4*o+0]=a[0],l[4*o+1]=a[1],l[4*o+2]=a[2],l[4*o+3]=a[3]},p.setRTLTextPlugin=function(l,o,a=!1){if(T===y||T===w||T===C)throw new Error("setRTLTextPlugin cannot be called multiple times.");I=lo.resolveURL(l),T=y,E=o,N(),a||oe()},p.smoothstep=zt,p.spec=Qe,p.storeAuthState=function(l,o){o?Va.add(l):Va.delete(l)},p.sub=Rl,p.subtract=da,p.symbolSize=D0,p.tileAABB=function(l,o,a,d,f,g,v,x,M){if("globe"===M.name)return function q0(l,o,a){const d=o/l.worldSize,f=Number.MAX_VALUE,g=[-f,-f,-f],v=[f,f,f],x=l.globeMatrix;if(a.z<=1)return G0(v,g,Vl(a).getCorners(),x,d),new Ma(v,g);const M=Rg(a),D=Pg(M);if(G0(v,g,D,x,d),M.contains(l.center)){g[2]=0;const qe=l.point,Ge=[qe.x*d,qe.y*d,0];return gy(v,v,Ge),_y(g,g,Ge),new Ma(v,g)}const k=[x[12]*d,x[13]*d,x[14]*d],P=M.getCenter(),O=Et(l.center.lat,-85.051129,Mc),z=Et(P.lat,-85.051129,Mc),V=Cc(l.center.lng),K=$e(O);let J=V-Cc(P.lng);const ue=K-$e(z);J>.5?J-=1:J<-.5&&(J+=1);let xe=0;Math.abs(J)>Math.abs(ue)?xe=J>=0?1:3:(xe=ue>=0?0:2,rg(k,k,[x[4]*d,x[5]*d,x[6]*d],-Math.sin(xt(ue>=0?M.getSouth():M.getNorth()))*vd));const fe=D[xe],ye=D[(xe+1)%4],Te=new q(fe,ye,k),we=[Ig(Te,0)||fe[0],Ig(Te,1)||fe[1],Ig(Te,2)||fe[2]];return v[2]=Math.min(fe[2],ye[2]),gy(v,v,we),_y(g,g,we),new Ma(v,g)}(l,o,new yg(a,d,f));const D=Tu({z:a,x:d,y:f},M);return new Ma([(g+D.x/D.scale)*o,o*(D.y/D.scale),v],[(g+D.x2/D.scale)*o,o*(D.y2/D.scale),x])},p.tileCornersToBounds=Rg,p.tileTransform=Tu,p.transformMat3=function(l,o,a){var d=o[0],f=o[1],g=o[2];return l[0]=d*a[0]+f*a[3]+g*a[6],l[1]=d*a[1]+f*a[4]+g*a[7],l[2]=d*a[2]+f*a[5]+g*a[8],l},p.transformMat4=Mo,p.transformMat4$1=bu,p.transformQuat=n0,p.transitionTileAABBinECEF=$0,p.translate=ng,p.transpose=function(l,o){if(l===o){var a=o[1],d=o[2],f=o[5];l[1]=o[3],l[2]=o[6],l[3]=a,l[5]=o[7],l[6]=d,l[7]=f}else l[0]=o[0],l[1]=o[3],l[2]=o[6],l[3]=o[1],l[4]=o[4],l[5]=o[7],l[6]=o[2],l[7]=o[5],l[8]=o[8];return l},p.triggerPluginCompletionEvent=L,p.uniqueId=bi,p.updateGlobeVertexNormal=function(l,o,a,d,f){const g=5*o+2;l.float32[g+0]=a,l.float32[g+1]=d,l.float32[g+2]=f},p.validateCustomStyleLayer=function(l){const o=[],a=l.id;return void 0===a&&o.push({message:`layers.${a}: missing required property "id"`}),void 0===l.render&&o.push({message:`layers.${a}: missing required method "render"`}),l.renderingMode&&"2d"!==l.renderingMode&&"3d"!==l.renderingMode&&o.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),o},p.validateFilter=l=>Tl(lu(l)),p.validateFog=l=>Tl(ff(l)),p.validateLayer=l=>Tl(ld(l)),p.validateLight=l=>Tl(cp(l)),p.validateSource=l=>Tl(pf(l)),p.validateStyle=dp,p.validateTerrain=l=>Tl(Xi(l)),p.values=Ar,p.vectorTile=Tp,p.version="2.10.0",p.warnOnce=lr,p.window=ce,p.wrap=Di}),he(0,function(p){function ce(de){if("number"==typeof de||"boolean"==typeof de||"string"==typeof de||null==de)return JSON.stringify(de);if(Array.isArray(de)){let Y="[";for(const ae of de)Y+=`${ce(ae)},`;return`${Y}]`}let j="{";for(const Y of Object.keys(de).sort())j+=`${Y}:${ce(de[Y])},`;return`${j}}`}function We(de){let j="";for(const Y of p.refProperties)j+=`/${ce(de[Y])}`;return j}class Je{constructor(j){this.keyCache={},j&&this.replace(j)}replace(j){this._layerConfigs={},this._layers={},this.update(j,[])}update(j,Y){for(const me of j)this._layerConfigs[me.id]=me,(this._layers[me.id]=p.createStyleLayer(me)).compileFilter(),this.keyCache[me.id]&&delete this.keyCache[me.id];for(const me of Y)delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me];this.familiesBySource={};const ae=function(me,ke){const Ve={};for(let Ae=0;Ae<me.length;Ae++){const je=ke&&ke[me[Ae].id]||We(me[Ae]);ke&&(ke[me[Ae].id]=je);let ut=Ve[je];ut||(ut=Ve[je]=[]),ut.push(me[Ae])}const Ne=[];for(const Ae in Ve)Ne.push(Ve[Ae]);return Ne}(p.values(this._layerConfigs),this.keyCache);for(const me of ae){const ke=me.map(Ct=>this._layers[Ct.id]),Ve=ke[0];if("none"===Ve.visibility)continue;const Ne=Ve.source||"";let Ae=this.familiesBySource[Ne];Ae||(Ae=this.familiesBySource[Ne]={});const je=Ve.sourceLayer||"_geojsonTileLayer";let ut=Ae[je];ut||(ut=Ae[je]=[]),ut.push(ke)}}}class Ie{loadTile(j,Y){const{uid:ae,encoding:me,rawImageData:ke,padding:Ve,buildQuadTree:Ne}=j,Ae=p.window.ImageBitmap&&ke instanceof p.window.ImageBitmap?this.getImageData(ke,Ve):ke;Y(null,new p.DEMData(ae,Ae,me,Ve<1,Ne))}getImageData(j,Y){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(j.width,j.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=j.width,this.offscreenCanvas.height=j.height,this.offscreenCanvasContext.drawImage(j,0,0,j.width,j.height);const ae=this.offscreenCanvasContext.getImageData(-Y,-Y,j.width+2*Y,j.height+2*Y);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ae}}var ht=function de(j,Y){var ae,me=j&&j.type;if("FeatureCollection"===me)for(ae=0;ae<j.features.length;ae++)de(j.features[ae],Y);else if("GeometryCollection"===me)for(ae=0;ae<j.geometries.length;ae++)de(j.geometries[ae],Y);else if("Feature"===me)de(j.geometry,Y);else if("Polygon"===me)ai(j.coordinates,Y);else if("MultiPolygon"===me)for(ae=0;ae<j.coordinates.length;ae++)ai(j.coordinates[ae],Y);return j};function ai(de,j){if(0!==de.length){Bi(de[0],j);for(var Y=1;Y<de.length;Y++)Bi(de[Y],!j)}}function Bi(de,j){for(var Y=0,ae=0,me=0,ke=de.length,Ve=ke-1;me<ke;Ve=me++){var Ne=(de[me][0]-de[Ve][0])*(de[Ve][1]+de[me][1]),Ae=Y+Ne;ae+=Math.abs(Y)>=Math.abs(Ne)?Y-Ae+Ne:Ne-Ae+Y,Y=Ae}Y+ae>=0!=!!j&&de.reverse()}const xt=p.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Xt{constructor(j){this._feature=j,this.extent=p.EXTENT,this.type=j.type,this.properties=j.tags,"id"in j&&!isNaN(j.id)&&(this.id=parseInt(j.id,10))}loadGeometry(){if(1===this._feature.type){const j=[];for(const Y of this._feature.geometry)j.push([new p.pointGeometry(Y[0],Y[1])]);return j}{const j=[];for(const Y of this._feature.geometry){const ae=[];for(const me of Y)ae.push(new p.pointGeometry(me[0],me[1]));j.push(ae)}return j}}toGeoJSON(j,Y,ae){return xt.call(this,j,Y,ae)}}class Vi{constructor(j){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.EXTENT,this.length=j.length,this._features=j}feature(j){return new Xt(this._features[j])}}var sn=p.vectorTile.VectorTileFeature,mn=vi;function vi(de,j){this.options=j||{},this.features=de,this.length=de.length}function Et(de,j){this.id="number"==typeof de.id?de.id:void 0,this.type=de.type,this.rawGeometry=1===de.type?[de.geometry]:de.geometry,this.properties=de.tags,this.extent=j||4096}vi.prototype.feature=function(de){return new Et(this.features[de],this.options.extent)},Et.prototype.loadGeometry=function(){var de=this.rawGeometry;this.geometry=[];for(var j=0;j<de.length;j++){for(var Y=de[j],ae=[],me=0;me<Y.length;me++)ae.push(new p.pointGeometry(Y[me][0],Y[me][1]));this.geometry.push(ae)}return this.geometry},Et.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var de=this.geometry,j=1/0,Y=-1/0,ae=1/0,me=-1/0,ke=0;ke<de.length;ke++)for(var Ve=de[ke],Ne=0;Ne<Ve.length;Ne++){var Ae=Ve[Ne];j=Math.min(j,Ae.x),Y=Math.max(Y,Ae.x),ae=Math.min(ae,Ae.y),me=Math.max(me,Ae.y)}return[j,ae,Y,me]},Et.prototype.toGeoJSON=sn.prototype.toGeoJSON;var zt=ur,Di=mn;function ur(de){var j=new p.pbf;return function(Y,ae){for(var me in Y.layers)ae.writeMessage(3,Ar,Y.layers[me])}(de,j),j.finish()}function Ar(de,j){var Y;j.writeVarintField(15,de.version||1),j.writeStringField(1,de.name||""),j.writeVarintField(5,de.extent||4096);var ae={keys:[],values:[],keycache:{},valuecache:{}};for(Y=0;Y<de.length;Y++)ae.feature=de.feature(Y),j.writeMessage(2,Wt,ae);var me=ae.keys;for(Y=0;Y<me.length;Y++)j.writeStringField(3,me[Y]);var ke=ae.values;for(Y=0;Y<ke.length;Y++)j.writeMessage(4,Si,ke[Y])}function Wt(de,j){var Y=de.feature;void 0!==Y.id&&j.writeVarintField(1,Y.id),j.writeMessage(2,Ni,de),j.writeVarintField(3,Y.type),j.writeMessage(4,Ii,Y)}function Ni(de,j){var Y=de.feature,ae=de.keys,me=de.values,ke=de.keycache,Ve=de.valuecache;for(var Ne in Y.properties){var Ae=Y.properties[Ne],je=ke[Ne];if(null!==Ae){void 0===je&&(ae.push(Ne),ke[Ne]=je=ae.length-1),j.writeVarint(je);var ut=typeof Ae;"string"!==ut&&"boolean"!==ut&&"number"!==ut&&(Ae=JSON.stringify(Ae));var Ct=ut+":"+Ae,pt=Ve[Ct];void 0===pt&&(me.push(Ae),Ve[Ct]=pt=me.length-1),j.writeVarint(pt)}}}function bi(de,j){return(j<<3)+(7&de)}function ni(de){return de<<1^de>>31}function Ii(de,j){for(var Y=de.loadGeometry(),ae=de.type,me=0,ke=0,Ve=Y.length,Ne=0;Ne<Ve;Ne++){var Ae=Y[Ne],je=1;1===ae&&(je=Ae.length),j.writeVarint(bi(1,je));for(var ut=3===ae?Ae.length-1:Ae.length,Ct=0;Ct<ut;Ct++){1===Ct&&1!==ae&&j.writeVarint(bi(2,ut-1));var pt=Ae[Ct].x-me,ti=Ae[Ct].y-ke;j.writeVarint(ni(pt)),j.writeVarint(ni(ti)),me+=pt,ke+=ti}3===ae&&j.writeVarint(bi(7,1))}}function Si(de,j){var Y=typeof de;"string"===Y?j.writeStringField(1,de):"boolean"===Y?j.writeBooleanField(7,de):"number"===Y&&(de%1!=0?j.writeDoubleField(3,de):de<0?j.writeSVarintField(6,de):j.writeVarintField(5,de))}function hi(de,j,Y,ae,me,ke){if(me-ae<=Y)return;const Ve=ae+me>>1;ki(de,j,Ve,ae,me,ke%2),hi(de,j,Y,ae,Ve-1,ke+1),hi(de,j,Y,Ve+1,me,ke+1)}function ki(de,j,Y,ae,me,ke){for(;me>ae;){if(me-ae>600){const je=me-ae+1,ut=Y-ae+1,Ct=Math.log(je),pt=.5*Math.exp(2*Ct/3),ti=.5*Math.sqrt(Ct*pt*(je-pt)/je)*(ut-je/2<0?-1:1);ki(de,j,Y,Math.max(ae,Math.floor(Y-ut*pt/je+ti)),Math.min(me,Math.floor(Y+(je-ut)*pt/je+ti)),ke)}const Ve=j[2*Y+ke];let Ne=ae,Ae=me;for(Ai(de,j,ae,Y),j[2*me+ke]>Ve&&Ai(de,j,ae,me);Ne<Ae;){for(Ai(de,j,Ne,Ae),Ne++,Ae--;j[2*Ne+ke]<Ve;)Ne++;for(;j[2*Ae+ke]>Ve;)Ae--}j[2*ae+ke]===Ve?Ai(de,j,ae,Ae):(Ae++,Ai(de,j,Ae,me)),Ae<=Y&&(ae=Ae+1),Y<=Ae&&(me=Ae-1)}}function Ai(de,j,Y,ae){Hr(de,Y,ae),Hr(j,2*Y,2*ae),Hr(j,2*Y+1,2*ae+1)}function Hr(de,j,Y){const ae=de[j];de[j]=de[Y],de[Y]=ae}function $i(de,j,Y,ae){const me=de-Y,ke=j-ae;return me*me+ke*ke}zt.fromVectorTileJs=ur,zt.fromGeojsonVt=function(de,j){j=j||{};var Y={};for(var ae in de)Y[ae]=new mn(de[ae].features,j),Y[ae].name=ae,Y[ae].version=j.version,Y[ae].extent=j.extent;return ur({layers:Y})},zt.GeoJSONWrapper=Di;const Js=de=>de[0],lr=de=>de[1];class so{constructor(j,Y=Js,ae=lr,me=64,ke=Float64Array){this.nodeSize=me,this.points=j;const Ve=j.length<65536?Uint16Array:Uint32Array,Ne=this.ids=new Ve(j.length),Ae=this.coords=new ke(2*j.length);for(let je=0;je<j.length;je++)Ne[je]=je,Ae[2*je]=Y(j[je]),Ae[2*je+1]=ae(j[je]);hi(Ne,Ae,me,0,Ne.length-1,0)}range(j,Y,ae,me){return function(ke,Ve,Ne,Ae,je,ut,Ct){const pt=[0,ke.length-1,0],ti=[];let Ei,ri;for(;pt.length;){const _i=pt.pop(),Gi=pt.pop(),In=pt.pop();if(Gi-In<=Ct){for(let mi=In;mi<=Gi;mi++)Ei=Ve[2*mi],ri=Ve[2*mi+1],Ei>=Ne&&Ei<=je&&ri>=Ae&&ri<=ut&&ti.push(ke[mi]);continue}const qi=Math.floor((In+Gi)/2);Ei=Ve[2*qi],ri=Ve[2*qi+1],Ei>=Ne&&Ei<=je&&ri>=Ae&&ri<=ut&&ti.push(ke[qi]);const Hn=(_i+1)%2;(0===_i?Ne<=Ei:Ae<=ri)&&(pt.push(In),pt.push(qi-1),pt.push(Hn)),(0===_i?je>=Ei:ut>=ri)&&(pt.push(qi+1),pt.push(Gi),pt.push(Hn))}return ti}(this.ids,this.coords,j,Y,ae,me,this.nodeSize)}within(j,Y,ae){return function(me,ke,Ve,Ne,Ae,je){const ut=[0,me.length-1,0],Ct=[],pt=Ae*Ae;for(;ut.length;){const ti=ut.pop(),Ei=ut.pop(),ri=ut.pop();if(Ei-ri<=je){for(let Hn=ri;Hn<=Ei;Hn++)$i(ke[2*Hn],ke[2*Hn+1],Ve,Ne)<=pt&&Ct.push(me[Hn]);continue}const _i=Math.floor((ri+Ei)/2),Gi=ke[2*_i],In=ke[2*_i+1];$i(Gi,In,Ve,Ne)<=pt&&Ct.push(me[_i]);const qi=(ti+1)%2;(0===ti?Ve-Ae<=Gi:Ne-Ae<=In)&&(ut.push(ri),ut.push(_i-1),ut.push(qi)),(0===ti?Ve+Ae>=Gi:Ne+Ae>=In)&&(ut.push(_i+1),ut.push(Ei),ut.push(qi))}return Ct}(this.ids,this.coords,j,Y,ae,this.nodeSize)}}const Go={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:de=>de},St=Math.fround||(Io=new Float32Array(1),de=>(Io[0]=+de,Io[0]));var Io;class is{constructor(j){this.options=Ba(Object.create(Go),j),this.trees=new Array(this.options.maxZoom+1)}load(j){const{log:Y,minZoom:ae,maxZoom:me,nodeSize:ke}=this.options;Y&&console.time("total time");const Ve=`prepare ${j.length} points`;Y&&console.time(Ve),this.points=j;let Ne=[];for(let Ae=0;Ae<j.length;Ae++)j[Ae].geometry&&Ne.push(Qi(j[Ae],Ae));this.trees[me+1]=new so(Ne,xn,ao,ke,Float32Array),Y&&console.timeEnd(Ve);for(let Ae=me;Ae>=ae;Ae--){const je=+Date.now();Ne=this._cluster(Ne,Ae),this.trees[Ae]=new so(Ne,xn,ao,ke,Float32Array),Y&&console.log("z%d: %d clusters in %dms",Ae,Ne.length,+Date.now()-je)}return Y&&console.timeEnd("total time"),this}getClusters(j,Y){let ae=((j[0]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,j[1]));let ke=180===j[2]?180:((j[2]+180)%360+360)%360-180;const Ve=Math.max(-90,Math.min(90,j[3]));if(j[2]-j[0]>=360)ae=-180,ke=180;else if(ae>ke){const ut=this.getClusters([ae,me,180,Ve],Y),Ct=this.getClusters([-180,me,ke,Ve],Y);return ut.concat(Ct)}const Ne=this.trees[this._limitZoom(Y)],Ae=Ne.range(tr(ae),qo(Ve),tr(ke),qo(me)),je=[];for(const ut of Ae){const Ct=Ne.points[ut];je.push(Ct.numPoints?Wr(Ct):this.points[Ct.index])}return je}getChildren(j){const Y=this._getOriginId(j),ae=this._getOriginZoom(j),me="No cluster with the specified id.",ke=this.trees[ae];if(!ke)throw new Error(me);const Ve=ke.points[Y];if(!Ve)throw new Error(me);const Ne=this.options.radius/(this.options.extent*Math.pow(2,ae-1)),Ae=ke.within(Ve.x,Ve.y,Ne),je=[];for(const ut of Ae){const Ct=ke.points[ut];Ct.parentId===j&&je.push(Ct.numPoints?Wr(Ct):this.points[Ct.index])}if(0===je.length)throw new Error(me);return je}getLeaves(j,Y,ae){const me=[];return this._appendLeaves(me,j,Y=Y||10,ae=ae||0,0),me}getTile(j,Y,ae){const me=this.trees[this._limitZoom(j)],ke=Math.pow(2,j),{extent:Ve,radius:Ne}=this.options,Ae=Ne/Ve,je=(ae-Ae)/ke,ut=(ae+1+Ae)/ke,Ct={features:[]};return this._addTileFeatures(me.range((Y-Ae)/ke,je,(Y+1+Ae)/ke,ut),me.points,Y,ae,ke,Ct),0===Y&&this._addTileFeatures(me.range(1-Ae/ke,je,1,ut),me.points,ke,ae,ke,Ct),Y===ke-1&&this._addTileFeatures(me.range(0,je,Ae/ke,ut),me.points,-1,ae,ke,Ct),Ct.features.length?Ct:null}getClusterExpansionZoom(j){let Y=this._getOriginZoom(j)-1;for(;Y<=this.options.maxZoom;){const ae=this.getChildren(j);if(Y++,1!==ae.length)break;j=ae[0].properties.cluster_id}return Y}_appendLeaves(j,Y,ae,me,ke){const Ve=this.getChildren(Y);for(const Ne of Ve){const Ae=Ne.properties;if(Ae&&Ae.cluster?ke+Ae.point_count<=me?ke+=Ae.point_count:ke=this._appendLeaves(j,Ae.cluster_id,ae,me,ke):ke<me?ke++:j.push(Ne),j.length===ae)break}return ke}_addTileFeatures(j,Y,ae,me,ke,Ve){for(const Ne of j){const Ae=Y[Ne],je=Ae.numPoints;let ut,Ct,pt;if(je)ut=li(Ae),Ct=Ae.x,pt=Ae.y;else{const ri=this.points[Ae.index];ut=ri.properties,Ct=tr(ri.geometry.coordinates[0]),pt=qo(ri.geometry.coordinates[1])}const ti={type:1,geometry:[[Math.round(this.options.extent*(Ct*ke-ae)),Math.round(this.options.extent*(pt*ke-me))]],tags:ut};let Ei;je?Ei=Ae.id:this.options.generateId?Ei=Ae.index:this.points[Ae.index].id&&(Ei=this.points[Ae.index].id),void 0!==Ei&&(ti.id=Ei),Ve.features.push(ti)}}_limitZoom(j){return Math.max(this.options.minZoom,Math.min(+j,this.options.maxZoom+1))}_cluster(j,Y){const ae=[],{radius:me,extent:ke,reduce:Ve,minPoints:Ne}=this.options,Ae=me/(ke*Math.pow(2,Y));for(let je=0;je<j.length;je++){const ut=j[je];if(ut.zoom<=Y)continue;ut.zoom=Y;const Ct=this.trees[Y+1],pt=Ct.within(ut.x,ut.y,Ae),ti=ut.numPoints||1;let Ei=ti;for(const ri of pt){const _i=Ct.points[ri];_i.zoom>Y&&(Ei+=_i.numPoints||1)}if(Ei>ti&&Ei>=Ne){let ri=ut.x*ti,_i=ut.y*ti,Gi=Ve&&ti>1?this._map(ut,!0):null;const In=(je<<5)+(Y+1)+this.points.length;for(const qi of pt){const Hn=Ct.points[qi];if(Hn.zoom<=Y)continue;Hn.zoom=Y;const mi=Hn.numPoints||1;ri+=Hn.x*mi,_i+=Hn.y*mi,Hn.parentId=In,Ve&&(Gi||(Gi=this._map(ut,!0)),Ve(Gi,this._map(Hn)))}ut.parentId=In,ae.push(Pn(ri/Ei,_i/Ei,In,Ei,Gi))}else if(ae.push(ut),Ei>1)for(const ri of pt){const _i=Ct.points[ri];_i.zoom<=Y||(_i.zoom=Y,ae.push(_i))}}return ae}_getOriginId(j){return j-this.points.length>>5}_getOriginZoom(j){return(j-this.points.length)%32}_map(j,Y){if(j.numPoints)return Y?Ba({},j.properties):j.properties;const ae=this.points[j.index].properties,me=this.options.map(ae);return Y&&me===ae?Ba({},me):me}}function Pn(de,j,Y,ae,me){return{x:St(de),y:St(j),zoom:1/0,id:Y,parentId:-1,numPoints:ae,properties:me}}function Qi(de,j){const[Y,ae]=de.geometry.coordinates;return{x:St(tr(Y)),y:St(qo(ae)),zoom:1/0,index:j,parentId:-1}}function Wr(de){return{type:"Feature",id:de.id,properties:li(de),geometry:{type:"Point",coordinates:[(j=de.x,360*(j-.5)),an(de.y)]}};var j}function li(de){const j=de.numPoints,Y=j>=1e4?`${Math.round(j/1e3)}k`:j>=1e3?Math.round(j/100)/10+"k":j;return Ba(Ba({},de.properties),{cluster:!0,cluster_id:de.id,point_count:j,point_count_abbreviated:Y})}function tr(de){return de/360+.5}function qo(de){const j=Math.sin(de*Math.PI/180),Y=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return Y<0?0:Y>1?1:Y}function an(de){const j=(180-360*de)*Math.PI/180;return 360*Math.atan(Math.exp(j))/Math.PI-90}function Ba(de,j){for(const Y in j)de[Y]=j[Y];return de}function xn(de){return de.x}function ao(de){return de.y}function lo(de,j,Y,ae){for(var me,ke=ae,Ve=Y-j>>1,Ne=Y-j,Ae=de[j],je=de[j+1],ut=de[Y],Ct=de[Y+1],pt=j+3;pt<Y;pt+=3){var ti=ea(de[pt],de[pt+1],Ae,je,ut,Ct);if(ti>ke)me=pt,ke=ti;else if(ti===ke){var Ei=Math.abs(pt-Ve);Ei<Ne&&(me=pt,Ne=Ei)}}ke>ae&&(me-j>3&&lo(de,j,me,ae),de[me+2]=ke,Y-me>3&&lo(de,me,Y,ae))}function ea(de,j,Y,ae,me,ke){var Ve=me-Y,Ne=ke-ae;if(0!==Ve||0!==Ne){var Ae=((de-Y)*Ve+(j-ae)*Ne)/(Ve*Ve+Ne*Ne);Ae>1?(Y=me,ae=ke):Ae>0&&(Y+=Ve*Ae,ae+=Ne*Ae)}return(Ve=de-Y)*Ve+(Ne=j-ae)*Ne}function Li(de,j,Y,ae){var me={id:void 0===de?null:de,type:j,geometry:Y,tags:ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ke){var Ve=ke.geometry,Ne=ke.type;if("Point"===Ne||"MultiPoint"===Ne||"LineString"===Ne)Ir(ke,Ve);else if("Polygon"===Ne||"MultiLineString"===Ne)for(var Ae=0;Ae<Ve.length;Ae++)Ir(ke,Ve[Ae]);else if("MultiPolygon"===Ne)for(Ae=0;Ae<Ve.length;Ae++)for(var je=0;je<Ve[Ae].length;je++)Ir(ke,Ve[Ae][je])}(me),me}function Ir(de,j){for(var Y=0;Y<j.length;Y+=3)de.minX=Math.min(de.minX,j[Y]),de.minY=Math.min(de.minY,j[Y+1]),de.maxX=Math.max(de.maxX,j[Y]),de.maxY=Math.max(de.maxY,j[Y+1])}function Na(de,j,Y,ae){if(j.geometry){var me=j.geometry.coordinates,ke=j.geometry.type,Ve=Math.pow(Y.tolerance/((1<<Y.maxZoom)*Y.extent),2),Ne=[],Ae=j.id;if(Y.promoteId?Ae=j.properties[Y.promoteId]:Y.generateId&&(Ae=ae||0),"Point"===ke)bs(me,Ne);else if("MultiPoint"===ke)for(var je=0;je<me.length;je++)bs(me[je],Ne);else if("LineString"===ke)Qr(me,Ne,Ve,!1);else if("MultiLineString"===ke){if(Y.lineMetrics){for(je=0;je<me.length;je++)Qr(me[je],Ne=[],Ve,!1),de.push(Li(Ae,"LineString",Ne,j.properties));return}Yc(me,Ne,Ve,!1)}else if("Polygon"===ke)Yc(me,Ne,Ve,!0);else{if("MultiPolygon"!==ke){if("GeometryCollection"===ke){for(je=0;je<j.geometry.geometries.length;je++)Na(de,{id:Ae,geometry:j.geometry.geometries[je],properties:j.properties},Y,ae);return}throw new Error("Input data is not a valid GeoJSON object.")}for(je=0;je<me.length;je++){var ut=[];Yc(me[je],ut,Ve,!0),Ne.push(ut)}}de.push(Li(Ae,ke,Ne,j.properties))}}function bs(de,j){j.push(Xc(de[0])),j.push(Kc(de[1])),j.push(0)}function Qr(de,j,Y,ae){for(var me,ke,Ve=0,Ne=0;Ne<de.length;Ne++){var Ae=Xc(de[Ne][0]),je=Kc(de[Ne][1]);j.push(Ae),j.push(je),j.push(0),Ne>0&&(Ve+=ae?(me*je-Ae*ke)/2:Math.sqrt(Math.pow(Ae-me,2)+Math.pow(je-ke,2))),me=Ae,ke=je}var ut=j.length-3;j[2]=1,lo(j,0,ut,Y),j[ut+2]=1,j.size=Math.abs(Ve),j.start=0,j.end=j.size}function Yc(de,j,Y,ae){for(var me=0;me<de.length;me++){var ke=[];Qr(de[me],ke,Y,ae),j.push(ke)}}function Xc(de){return de/360+.5}function Kc(de){var j=Math.sin(de*Math.PI/180),Y=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return Y<0?0:Y>1?1:Y}function $r(de,j,Y,ae,me,ke,Ve,Ne){if(ae/=j,ke>=(Y/=j)&&Ve<ae)return de;if(Ve<Y||ke>=ae)return null;for(var Ae=[],je=0;je<de.length;je++){var ut=de[je],Ct=ut.geometry,pt=ut.type,ti=0===me?ut.minX:ut.minY,Ei=0===me?ut.maxX:ut.maxY;if(ti>=Y&&Ei<ae)Ae.push(ut);else if(!(Ei<Y||ti>=ae)){var ri=[];if("Point"===pt||"MultiPoint"===pt)ma(Ct,ri,Y,ae,me);else if("LineString"===pt)tc(Ct,ri,Y,ae,me,!1,Ne.lineMetrics);else if("MultiLineString"===pt)Vs(Ct,ri,Y,ae,me,!1);else if("Polygon"===pt)Vs(Ct,ri,Y,ae,me,!0);else if("MultiPolygon"===pt)for(var _i=0;_i<Ct.length;_i++){var Gi=[];Vs(Ct[_i],Gi,Y,ae,me,!0),Gi.length&&ri.push(Gi)}if(ri.length){if(Ne.lineMetrics&&"LineString"===pt){for(_i=0;_i<ri.length;_i++)Ae.push(Li(ut.id,pt,ri[_i],ut.tags));continue}"LineString"!==pt&&"MultiLineString"!==pt||(1===ri.length?(pt="LineString",ri=ri[0]):pt="MultiLineString"),"Point"!==pt&&"MultiPoint"!==pt||(pt=3===ri.length?"Point":"MultiPoint"),Ae.push(Li(ut.id,pt,ri,ut.tags))}}}return Ae.length?Ae:null}function ma(de,j,Y,ae,me){for(var ke=0;ke<de.length;ke+=3){var Ve=de[ke+me];Ve>=Y&&Ve<=ae&&(j.push(de[ke]),j.push(de[ke+1]),j.push(de[ke+2]))}}function tc(de,j,Y,ae,me,ke,Ve){for(var Ne,Ae,je=yn(de),ut=0===me?Bd:Nd,Ct=de.start,pt=0;pt<de.length-3;pt+=3){var ti=de[pt],Ei=de[pt+1],ri=de[pt+2],_i=de[pt+3],Gi=de[pt+4],In=0===me?ti:Ei,qi=0===me?_i:Gi,Hn=!1;Ve&&(Ne=Math.sqrt(Math.pow(ti-_i,2)+Math.pow(Ei-Gi,2))),In<Y?qi>Y&&(Ae=ut(je,ti,Ei,_i,Gi,Y),Ve&&(je.start=Ct+Ne*Ae)):In>ae?qi<ae&&(Ae=ut(je,ti,Ei,_i,Gi,ae),Ve&&(je.start=Ct+Ne*Ae)):za(je,ti,Ei,ri),qi<Y&&In>=Y&&(Ae=ut(je,ti,Ei,_i,Gi,Y),Hn=!0),qi>ae&&In<=ae&&(Ae=ut(je,ti,Ei,_i,Gi,ae),Hn=!0),!ke&&Hn&&(Ve&&(je.end=Ct+Ne*Ae),j.push(je),je=yn(de)),Ve&&(Ct+=Ne)}var mi=de.length-3;ti=de[mi],Ei=de[mi+1],ri=de[mi+2],(In=0===me?ti:Ei)>=Y&&In<=ae&&za(je,ti,Ei,ri),mi=je.length-3,ke&&mi>=3&&(je[mi]!==je[0]||je[mi+1]!==je[1])&&za(je,je[0],je[1],je[2]),je.length&&j.push(je)}function yn(de){var j=[];return j.size=de.size,j.start=de.start,j.end=de.end,j}function Vs(de,j,Y,ae,me,ke){for(var Ve=0;Ve<de.length;Ve++)tc(de[Ve],j,Y,ae,me,ke,!1)}function za(de,j,Y,ae){de.push(j),de.push(Y),de.push(ae)}function Bd(de,j,Y,ae,me,ke){var Ve=(ke-j)/(ae-j);return de.push(ke),de.push(Y+(me-Y)*Ve),de.push(1),Ve}function Nd(de,j,Y,ae,me,ke){var Ve=(ke-Y)/(me-Y);return de.push(j+(ae-j)*Ve),de.push(ke),de.push(1),Ve}function zd(de,j){for(var Y=[],ae=0;ae<de.length;ae++){var me,ke=de[ae],Ve=ke.type;if("Point"===Ve||"MultiPoint"===Ve||"LineString"===Ve)me=ga(ke.geometry,j);else if("MultiLineString"===Ve||"Polygon"===Ve){me=[];for(var Ne=0;Ne<ke.geometry.length;Ne++)me.push(ga(ke.geometry[Ne],j))}else if("MultiPolygon"===Ve)for(me=[],Ne=0;Ne<ke.geometry.length;Ne++){for(var Ae=[],je=0;je<ke.geometry[Ne].length;je++)Ae.push(ga(ke.geometry[Ne][je],j));me.push(Ae)}Y.push(Li(ke.id,Ve,me,ke.tags))}return Y}function ga(de,j){var Y=[];Y.size=de.size,void 0!==de.start&&(Y.start=de.start,Y.end=de.end);for(var ae=0;ae<de.length;ae+=3)Y.push(de[ae]+j,de[ae+1],de[ae+2]);return Y}function Vd(de,j){if(de.transformed)return de;var Y,ae,me,ke=1<<de.z,Ve=de.x,Ne=de.y;for(Y=0;Y<de.features.length;Y++){var Ae=de.features[Y],je=Ae.geometry,ut=Ae.type;if(Ae.geometry=[],1===ut)for(ae=0;ae<je.length;ae+=2)Ae.geometry.push(ic(je[ae],je[ae+1],j,ke,Ve,Ne));else for(ae=0;ae<je.length;ae++){var Ct=[];for(me=0;me<je[ae].length;me+=2)Ct.push(ic(je[ae][me],je[ae][me+1],j,ke,Ve,Ne));Ae.geometry.push(Ct)}}return de.transformed=!0,de}function ic(de,j,Y,ae,me,ke){return[Math.round(Y*(de*ae-me)),Math.round(Y*(j*ae-ke))]}function Qc(de,j,Y,ae,me){for(var ke=j===me.maxZoom?0:me.tolerance/((1<<j)*me.extent),Ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Y,y:ae,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ne=0;Ne<de.length;Ne++){Ve.numFeatures++,jd(Ve,de[Ne],ke,me);var Ae=de[Ne].minX,je=de[Ne].minY,ut=de[Ne].maxX,Ct=de[Ne].maxY;Ae<Ve.minX&&(Ve.minX=Ae),je<Ve.minY&&(Ve.minY=je),ut>Ve.maxX&&(Ve.maxX=ut),Ct>Ve.maxY&&(Ve.maxY=Ct)}return Ve}function jd(de,j,Y,ae){var me=j.geometry,ke=j.type,Ve=[];if("Point"===ke||"MultiPoint"===ke)for(var Ne=0;Ne<me.length;Ne+=3)Ve.push(me[Ne]),Ve.push(me[Ne+1]),de.numPoints++,de.numSimplified++;else if("LineString"===ke)Va(Ve,me,de,Y,!1,!1);else if("MultiLineString"===ke||"Polygon"===ke)for(Ne=0;Ne<me.length;Ne++)Va(Ve,me[Ne],de,Y,"Polygon"===ke,0===Ne);else if("MultiPolygon"===ke)for(var Ae=0;Ae<me.length;Ae++){var je=me[Ae];for(Ne=0;Ne<je.length;Ne++)Va(Ve,je[Ne],de,Y,!0,0===Ne)}if(Ve.length){var ut=j.tags||null;if("LineString"===ke&&ae.lineMetrics){for(var Ct in ut={},j.tags)ut[Ct]=j.tags[Ct];ut.mapbox_clip_start=me.start/me.size,ut.mapbox_clip_end=me.end/me.size}var pt={geometry:Ve,type:"Polygon"===ke||"MultiPolygon"===ke?3:"LineString"===ke||"MultiLineString"===ke?2:1,tags:ut};null!==j.id&&(pt.id=j.id),de.features.push(pt)}}function Va(de,j,Y,ae,me,ke){var Ve=ae*ae;if(ae>0&&j.size<(me?Ve:ae))Y.numPoints+=j.length/3;else{for(var Ne=[],Ae=0;Ae<j.length;Ae+=3)(0===ae||j[Ae+2]>Ve)&&(Y.numSimplified++,Ne.push(j[Ae]),Ne.push(j[Ae+1])),Y.numPoints++;me&&function(je,ut){for(var Ct=0,pt=0,ti=je.length,Ei=ti-2;pt<ti;Ei=pt,pt+=2)Ct+=(je[pt]-je[Ei])*(je[pt+1]+je[Ei+1]);if(Ct>0===ut)for(pt=0,ti=je.length;pt<ti/2;pt+=2){var ri=je[pt],_i=je[pt+1];je[pt]=je[ti-2-pt],je[pt+1]=je[ti-1-pt],je[ti-2-pt]=ri,je[ti-1-pt]=_i}}(Ne,ke),de.push(Ne)}}function js(de,j){var Y=(j=this.options=function(me,ke){for(var Ve in ke)me[Ve]=ke[Ve];return me}(Object.create(this.options),j)).debug;if(Y&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var me,ke,Ve,Ne,Ae,je,ae=function(me,ke){var Ve=[];if("FeatureCollection"===me.type)for(var Ne=0;Ne<me.features.length;Ne++)Na(Ve,me.features[Ne],ke,Ne);else Na(Ve,"Feature"===me.type?me:{geometry:me},ke);return Ve}(de,j);this.tiles={},this.tileCoords=[],Y&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(me=ae,ke=j,Ve=ke.buffer/ke.extent,Ne=me,Ae=$r(me,1,-1-Ve,Ve,0,-1,2,ke),je=$r(me,1,1-Ve,2+Ve,0,-1,2,ke),(Ae||je)&&(Ne=$r(me,1,-Ve,1+Ve,0,-1,2,ke)||[],Ae&&(Ne=zd(Ae,1).concat(Ne)),je&&(Ne=Ne.concat(zd(je,-1)))),ae=Ne).length&&this.splitTile(ae,0,0,0),Y&&(ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function nc(de,j,Y){return 32*((1<<de)*Y+j)+de}function Jc(de,j){const Y=de.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);const ae=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!ae)return j(null,null);const me=new Vi(ae.features);let ke=zt(me);0===ke.byteOffset&&ke.byteLength===ke.buffer.byteLength||(ke=new Uint8Array(ke)),j(null,{vectorTile:me,rawData:ke.buffer})}js.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},js.prototype.splitTile=function(de,j,Y,ae,me,ke,Ve){for(var Ne=[de,j,Y,ae],Ae=this.options,je=Ae.debug;Ne.length;){ae=Ne.pop(),Y=Ne.pop(),j=Ne.pop(),de=Ne.pop();var ut=1<<j,Ct=nc(j,Y,ae),pt=this.tiles[Ct];if(!pt&&(je>1&&console.time("creation"),pt=this.tiles[Ct]=Qc(de,j,Y,ae,Ae),this.tileCoords.push({z:j,x:Y,y:ae}),je)){je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,Y,ae,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));var ti="z"+j;this.stats[ti]=(this.stats[ti]||0)+1,this.total++}if(pt.source=de,me){if(j===Ae.maxZoom||j===me)continue;var Ei=1<<me-j;if(Y!==Math.floor(ke/Ei)||ae!==Math.floor(Ve/Ei))continue}else if(j===Ae.indexMaxZoom||pt.numPoints<=Ae.indexMaxPoints)continue;if(pt.source=null,0!==de.length){je>1&&console.time("clipping");var ri,_i,Gi,In,qi,Hn,mi=.5*Ae.buffer/Ae.extent,Qe=.5-mi,ns=.5+mi,Rr=1+mi;ri=_i=Gi=In=null,qi=$r(de,ut,Y-mi,Y+ns,0,pt.minX,pt.maxX,Ae),Hn=$r(de,ut,Y+Qe,Y+Rr,0,pt.minX,pt.maxX,Ae),de=null,qi&&(ri=$r(qi,ut,ae-mi,ae+ns,1,pt.minY,pt.maxY,Ae),_i=$r(qi,ut,ae+Qe,ae+Rr,1,pt.minY,pt.maxY,Ae),qi=null),Hn&&(Gi=$r(Hn,ut,ae-mi,ae+ns,1,pt.minY,pt.maxY,Ae),In=$r(Hn,ut,ae+Qe,ae+Rr,1,pt.minY,pt.maxY,Ae),Hn=null),je>1&&console.timeEnd("clipping"),Ne.push(ri||[],j+1,2*Y,2*ae),Ne.push(_i||[],j+1,2*Y,2*ae+1),Ne.push(Gi||[],j+1,2*Y+1,2*ae),Ne.push(In||[],j+1,2*Y+1,2*ae+1)}}},js.prototype.getTile=function(de,j,Y){var ae=this.options,me=ae.extent,ke=ae.debug;if(de<0||de>24)return null;var Ve=1<<de,Ne=nc(de,j=(j%Ve+Ve)%Ve,Y);if(this.tiles[Ne])return Vd(this.tiles[Ne],me);ke>1&&console.log("drilling down to z%d-%d-%d",de,j,Y);for(var Ae,je=de,ut=j,Ct=Y;!Ae&&je>0;)je--,ut=Math.floor(ut/2),Ct=Math.floor(Ct/2),Ae=this.tiles[nc(je,ut,Ct)];return Ae&&Ae.source?(ke>1&&console.log("found parent tile z%d-%d-%d",je,ut,Ct),ke>1&&console.time("drilling down"),this.splitTile(Ae.source,je,ut,Ct,de,j,Y),ke>1&&console.timeEnd("drilling down"),this.tiles[Ne]?Vd(this.tiles[Ne],me):null):null};class Jr extends p.VectorTileWorkerSource{constructor(j,Y,ae,me,ke){super(j,Y,ae,me,Jc),ke&&(this.loadGeoJSON=ke)}loadData(j,Y){const ae=j&&j.request,me=ae&&ae.collectResourceTiming;this.loadGeoJSON(j,(ke,Ve)=>{if(ke||!Ve)return Y(ke);if("object"!=typeof Ve)return Y(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));{ht(Ve,!0);try{if(j.filter){const Ae=p.createExpression(j.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===Ae.result)throw new Error(Ae.value.map(ut=>`${ut.key}: ${ut.message}`).join(", "));const je=Ve.features.filter(ut=>Ae.value.evaluate({zoom:0},ut));Ve={type:"FeatureCollection",features:je}}this._geoJSONIndex=j.cluster?new is(function({superclusterOptions:Ae,clusterProperties:je}){if(!je||!Ae)return Ae;const ut={},Ct={},pt={accumulated:null,zoom:0},ti={properties:null},Ei=Object.keys(je);for(const ri of Ei){const[_i,Gi]=je[ri],In=p.createExpression(Gi),qi=p.createExpression("string"==typeof _i?[_i,["accumulated"],["get",ri]]:_i);ut[ri]=In.value,Ct[ri]=qi.value}return Ae.map=ri=>{ti.properties=ri;const _i={};for(const Gi of Ei)_i[Gi]=ut[Gi].evaluate(pt,ti);return _i},Ae.reduce=(ri,_i)=>{ti.properties=_i;for(const Gi of Ei)pt.accumulated=ri[Gi],ri[Gi]=Ct[Gi].evaluate(pt,ti)},Ae}(j)).load(Ve.features):new js(Ae=Ve,j.geojsonVtOptions)}catch(Ae){return Y(Ae)}this.loaded={};const Ne={};if(me){const Ae=p.getPerformanceMeasurement(ae);Ae&&(Ne.resourceTiming={},Ne.resourceTiming[j.source]=JSON.parse(JSON.stringify(Ae)))}Y(null,Ne)}var Ae})}reloadTile(j,Y){const ae=this.loaded;return ae&&ae[j.uid]?super.reloadTile(j,Y):this.loadTile(j,Y)}loadGeoJSON(j,Y){if(j.request)p.getJSON(j.request,Y);else{if("string"!=typeof j.data)return Y(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));try{return Y(null,JSON.parse(j.data))}catch{return Y(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(j,Y){try{Y(null,this._geoJSONIndex.getClusterExpansionZoom(j.clusterId))}catch(ae){Y(ae)}}getClusterChildren(j,Y){try{Y(null,this._geoJSONIndex.getChildren(j.clusterId))}catch(ae){Y(ae)}}getClusterLeaves(j,Y){try{Y(null,this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset))}catch(ae){Y(ae)}}}class rc{constructor(j){this.self=j,this.actor=new p.Actor(j,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=p.getProjection({name:"mercator"}),this.workerSourceTypes={vector:p.VectorTileWorkerSource,geojson:Jr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Y,ae)=>{if(this.workerSourceTypes[Y])throw new Error(`Worker source with name "${Y}" already registered.`);this.workerSourceTypes[Y]=ae},this.self.registerRTLTextPlugin=Y=>{if(p.plugin.isParsed())throw new Error("RTL text plugin already registered.");p.plugin.applyArabicShaping=Y.applyArabicShaping,p.plugin.processBidirectionalText=Y.processBidirectionalText,p.plugin.processStyledBidirectionalText=Y.processStyledBidirectionalText}}clearCaches(j,Y,ae){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j],ae()}checkIfReady(j,Y,ae){ae()}setReferrer(j,Y){this.referrer=Y}spriteLoaded(j,Y){this.isSpriteLoaded[j]=Y;for(const ae in this.workerSources[j]){const me=this.workerSources[j][ae];for(const ke in me)me[ke]instanceof p.VectorTileWorkerSource&&(me[ke].isSpriteLoaded=Y,me[ke].fire(new p.Event("isSpriteLoaded")))}}setImages(j,Y,ae){this.availableImages[j]=Y;for(const me in this.workerSources[j]){const ke=this.workerSources[j][me];for(const Ve in ke)ke[Ve].availableImages=Y}ae()}enableTerrain(j,Y,ae){this.terrain=Y,ae()}setProjection(j,Y){this.projections[j]=p.getProjection(Y)}setLayers(j,Y,ae){this.getLayerIndex(j).replace(Y),ae()}updateLayers(j,Y,ae){this.getLayerIndex(j).update(Y.layers,Y.removedIds),ae()}loadTile(j,Y,ae){const me=this.enableTerrain?p.extend({enableTerrain:this.terrain},Y):Y;me.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,Y.type,Y.source).loadTile(me,ae)}loadDEMTile(j,Y,ae){const me=this.enableTerrain?p.extend({buildQuadTree:this.terrain},Y):Y;this.getDEMWorkerSource(j,Y.source).loadTile(me,ae)}reloadTile(j,Y,ae){const me=this.enableTerrain?p.extend({enableTerrain:this.terrain},Y):Y;me.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,Y.type,Y.source).reloadTile(me,ae)}abortTile(j,Y,ae){this.getWorkerSource(j,Y.type,Y.source).abortTile(Y,ae)}removeTile(j,Y,ae){this.getWorkerSource(j,Y.type,Y.source).removeTile(Y,ae)}removeSource(j,Y,ae){if(!this.workerSources[j]||!this.workerSources[j][Y.type]||!this.workerSources[j][Y.type][Y.source])return;const me=this.workerSources[j][Y.type][Y.source];delete this.workerSources[j][Y.type][Y.source],void 0!==me.removeSource?me.removeSource(Y,ae):ae()}loadWorkerSource(j,Y,ae){try{this.self.importScripts(Y.url),ae()}catch(me){ae(me.toString())}}syncRTLPluginState(j,Y,ae){try{p.plugin.setState(Y);const me=p.plugin.getPluginURL();if(p.plugin.isLoaded()&&!p.plugin.isParsed()&&null!=me){this.self.importScripts(me);const ke=p.plugin.isParsed();ae(ke?void 0:new Error(`RTL Text Plugin failed to import scripts from ${me}`),ke)}}catch(me){ae(me.toString())}}getAvailableImages(j){let Y=this.availableImages[j];return Y||(Y=[]),Y}getLayerIndex(j){let Y=this.layerIndexes[j];return Y||(Y=this.layerIndexes[j]=new Je),Y}getWorkerSource(j,Y,ae){return this.workerSources[j]||(this.workerSources[j]={}),this.workerSources[j][Y]||(this.workerSources[j][Y]={}),this.workerSources[j][Y][ae]||(this.workerSources[j][Y][ae]=new this.workerSourceTypes[Y]({send:(me,ke,Ve,Ne,Ae,je)=>{this.actor.send(me,ke,Ve,j,Ae,je)},scheduler:this.actor.scheduler},this.getLayerIndex(j),this.getAvailableImages(j),this.isSpriteLoaded[j])),this.workerSources[j][Y][ae]}getDEMWorkerSource(j,Y){return this.demWorkerSources[j]||(this.demWorkerSources[j]={}),this.demWorkerSources[j][Y]||(this.demWorkerSources[j][Y]=new Ie),this.demWorkerSources[j][Y]}enforceCacheSizeLimit(j,Y){p.enforceCacheSizeLimit(Y)}getWorkerPerformanceMetrics(j,Y,ae){ae(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new rc(self)),rc}),he(0,function(p){function ce(m,c){if(Array.isArray(m)){if(!Array.isArray(c)||m.length!==c.length)return!1;for(let h=0;h<m.length;h++)if(!ce(m[h],c[h]))return!1;return!0}if("object"==typeof m&&null!==m&&null!==c){if("object"!=typeof c||Object.keys(m).length!==Object.keys(c).length)return!1;for(const h in m)if(!ce(m[h],c[h]))return!1;return!0}return m===c}var We=Je;function Je(m){return c=m,!(typeof window>"u"||typeof document>"u"||!(Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray)||!Function.prototype||!Function.prototype.bind||!(Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions)||!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)||!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,w,C=new Blob([""],{type:"text/javascript"}),E=URL.createObjectURL(C);try{w=new Worker(E),y=!0}catch{y=!1}return w&&w.terminate(),URL.revokeObjectURL(E),y}()||!("Uint8ClampedArray"in window)||!ArrayBuffer.isView||!function(){var y=document.createElement("canvas");y.width=y.height=1;var w=y.getContext("2d");if(!w)return!1;var C=w.getImageData(0,0,1,1);return C&&C.width===y.width}()||(void 0===Ie[h=c&&c.failIfMajorPerformanceCaveat]&&(Ie[h]=function(y){var w,E,T,I,C=(E=y,T=document.createElement("canvas"),(I=Object.create(Je.webGLContextAttributes)).failIfMajorPerformanceCaveat=E,T.getContext("webgl",I)||T.getContext("experimental-webgl",I));if(!C)return!1;try{w=C.createShader(C.VERTEX_SHADER)}catch{return!1}return!(!w||C.isContextLost())&&(C.shaderSource(w,"void main() {}"),C.compileShader(w),!0===C.getShaderParameter(w,C.COMPILE_STATUS))}(h)),!Ie[h]||document.documentMode));var c,h}var Ie={};function ht(m,c,h){const y=p.window.document.createElement(m);return void 0!==c&&(y.className=c),h&&h.appendChild(y),y}function ai(m,c,h){const y=p.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const w of Object.keys(c))y.setAttributeNS(null,w,c[w]);return h&&h.appendChild(y),y}Je.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Bi=p.window.document&&p.window.document.documentElement.style,xt=Bi&&void 0!==Bi.userSelect?"userSelect":"WebkitUserSelect";let Xt;function Vi(){Bi&&xt&&(Xt=Bi[xt],Bi[xt]="none")}function sn(){Bi&&xt&&(Bi[xt]=Xt)}function mn(m){m.preventDefault(),m.stopPropagation(),p.window.removeEventListener("click",mn,!0)}function vi(){p.window.addEventListener("click",mn,!0),p.window.setTimeout(()=>{p.window.removeEventListener("click",mn,!0)},0)}function Et(m,c){const h=m.getBoundingClientRect();return ur(m,h,c)}function zt(m,c){const h=m.getBoundingClientRect(),y=[];for(let w=0;w<c.length;w++)y.push(ur(m,h,c[w]));return y}function Di(m){return void 0!==p.window.InstallTrigger&&2===m.button&&m.ctrlKey&&p.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function ur(m,c,h){const y=m.offsetWidth===c.width?1:m.offsetWidth/c.width;return new p.pointGeometry((h.clientX-c.left)*y,(h.clientY-c.top)*y)}function Ar(m,c){var h=c[0],y=c[1],w=c[2],C=c[3],E=h*C-w*y;return E?(m[0]=C*(E=1/E),m[1]=-y*E,m[2]=-w*E,m[3]=h*E,m):null}function Wt(m){const{userImage:c}=m;return!!(c&&c.render&&c.render())&&(m.data.replace(new Uint8Array(c.data.buffer)),!0)}class Ni extends p.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new p.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:h,callback:y}of this.requestors)this._notify(h,y);this.requestors=[]}}hasImage(c){return!!this.getImage(c)}getImage(c){return this.images[c]}addImage(c,h){this._validate(c,h)&&(this.images[c]=h)}_validate(c,h){let y=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new p.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),y=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new p.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),y=!1),this._validateContent(h.content,h)||(this.fire(new p.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),y=!1),y}_validateStretch(c,h){if(!c)return!0;let y=0;for(const w of c){if(w[0]<y||w[1]<w[0]||h<w[1])return!1;y=w[1]}return!0}_validateContent(c,h){return!(c&&(4!==c.length||c[0]<0||h.data.width<c[0]||c[1]<0||h.data.height<c[1]||c[2]<0||h.data.width<c[2]||c[3]<0||h.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,h){h.version=this.images[c].version+1,this.images[c]=h,this.updatedImages[c]=!0}removeImage(c){const h=this.images[c];delete this.images[c],delete this.patterns[c],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,h){let y=!0;if(!this.isLoaded())for(const w of c)this.images[w]||(y=!1);this.isLoaded()||y?this._notify(c,h):this.requestors.push({ids:c,callback:h})}_notify(c,h){const y={};for(const w of c){this.images[w]||this.fire(new p.Event("styleimagemissing",{id:w}));const C=this.images[w];C?y[w]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:Boolean(C.userImage&&C.userImage.render)}:p.warnOnce(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,y)}getPixelSize(){const{width:c,height:h}=this.atlasImage;return{width:c,height:h}}getPattern(c){const h=this.patterns[c],y=this.getImage(c);if(!y)return null;if(h&&h.position.version===y.version)return h.position;if(h)h.position.version=y.version;else{const w={w:y.data.width+2,h:y.data.height+2,x:0,y:0},C=new p.ImagePosition(w,y);this.patterns[c]={bin:w,position:C}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const h=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new p.Texture(c,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const C in this.patterns)c.push(this.patterns[C].bin);const{w:h,h:y}=p.potpack(c),w=this.atlasImage;w.resize({width:h||1,height:y||1});for(const C in this.patterns){const{bin:E}=this.patterns[C],T=E.x+1,I=E.y+1,L=this.images[C].data,N=L.width,G=L.height;p.RGBAImage.copy(L,w,{x:0,y:0},{x:T,y:I},{width:N,height:G}),p.RGBAImage.copy(L,w,{x:0,y:G-1},{x:T,y:I-1},{width:N,height:1}),p.RGBAImage.copy(L,w,{x:0,y:0},{x:T,y:I+G},{width:N,height:1}),p.RGBAImage.copy(L,w,{x:N-1,y:0},{x:T-1,y:I},{width:1,height:G}),p.RGBAImage.copy(L,w,{x:0,y:0},{x:T+N,y:I},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const h of c){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const y=this.images[h];Wt(y)&&this.updateImage(h,y)}}}const bi=new p.Properties({anchor:new p.DataConstantProperty(p.spec.light.anchor),position:new class{constructor(){this.specification=p.spec.light.position}possiblyEvaluate(m,c){return function([h,y,w]){const C=p.degToRad(y+90),E=p.degToRad(w);return{x:h*Math.cos(C)*Math.sin(E),y:h*Math.sin(C)*Math.sin(E),z:h*Math.cos(E),azimuthal:y,polar:w}}(m.expression.evaluate(c))}interpolate(m,c,h){return{x:p.number(m.x,c.x,h),y:p.number(m.y,c.y,h),z:p.number(m.z,c.z,h),azimuthal:p.number(m.azimuthal,c.azimuthal,h),polar:p.number(m.polar,c.polar,h)}}},color:new p.DataConstantProperty(p.spec.light.color),intensity:new p.DataConstantProperty(p.spec.light.intensity)}),ni="-transition";class Ii extends p.Evented{constructor(c){super(),this._transitionable=new p.Transitionable(bi),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,h={}){if(!this._validate(p.validateLight,c,h))for(const y in c){const w=c[y];p.endsWith(y,ni)?this._transitionable.setTransition(y.slice(0,-ni.length),w):this._transitionable.setValue(y,w)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,h,y){return(!y||!1!==y.validate)&&p.emitValidationErrors(this,c.call(p.validateStyle,p.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:p.spec})))}}const Si=new p.Properties({source:new p.DataConstantProperty(p.spec.terrain.source),exaggeration:new p.DataConstantProperty(p.spec.terrain.exaggeration)}),hi="-transition";class ki extends p.Evented{constructor(c,h){super(),this._transitionable=new p.Transitionable(Si),this.set(c),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=h}get(){return this._transitionable.serialize()}set(c){for(const h in c){const y=c[h];p.endsWith(h,hi)?this._transitionable.setTransition(h.slice(0,-hi.length),y):this._transitionable.setValue(h,y)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}}function Ai(m,c,h,y){const w=p.smoothstep(45,65,h),[C,E]=Hr(m,y),T=p.length(c);let I=1-Math.min(1,Math.exp((T-C)/(E-C)*-6));return I*=I*I,I=Math.min(1,1.00747*I),I*w*m.alpha}function Hr(m,c){const h=.5/Math.tan(.5*c);return[m.range[0]+h,m.range[1]+h]}const $i=new p.Properties({range:new p.DataConstantProperty(p.spec.fog.range),color:new p.DataConstantProperty(p.spec.fog.color),"high-color":new p.DataConstantProperty(p.spec.fog["high-color"]),"space-color":new p.DataConstantProperty(p.spec.fog["space-color"]),"horizon-blend":new p.DataConstantProperty(p.spec.fog["horizon-blend"]),"star-intensity":new p.DataConstantProperty(p.spec.fog["star-intensity"])}),Js="-transition";class lr extends p.Evented{constructor(c,h){super(),this._transitionable=new p.Transitionable($i),this.set(c),this._transitioning=this._transitionable.untransitioned(),this._transform=h}get state(){const c=this._transform,h="globe"===c.projection.name,y=p.globeToMercatorTransition(c.zoom),w=this.properties.get("range"),C=[.5,3];return{range:h?[p.number(C[0],w[0],y),p.number(C[1],w[1],y)]:w,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,h={}){if(!this._validate(p.validateFog,c,h)){for(const y of Object.keys(p.spec.fog))c&&void 0===c[y]&&(c[y]=p.spec.fog[y].default);for(const y in c){const w=c[y];p.endsWith(y,Js)?this._transitionable.setTransition(y.slice(0,-Js.length),w):this._transitionable.setValue(y,w)}}}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:p.smoothstep(45,65,c))*h.a}getOpacityAtLatLng(c,h){return this._transform.projection.supportsFog?function(y,w,C){const E=p.MercatorCoordinate.fromLngLat(w),T=C.elevation?C.elevation.getAtPointOrZero(E):0,I=[E.x,E.y,T];return p.transformMat4(I,I,C.mercatorFogMatrix),Ai(y,I,C.pitch,C._fov)}(this.state,c,h):0}getFovAdjustedRange(c){return this._transform.projection.supportsFog?Hr(this.state,c):[0,1]}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,h,y){return(!y||!1!==y.validate)&&p.emitValidationErrors(this,c.call(p.validateStyle,p.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:p.spec})))}}class so{constructor(c,h){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=p.uniqueId();const y=this.workerPool.acquire(this.id);for(let w=0;w<y.length;w++){const C=new so.Actor(y[w],h,this.id);C.name=`Worker ${w}`,this.actors.push(C)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(c,h,y){p.asyncAll(this.actors,(w,C)=>{w.send(c,h,C)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(c=>{c.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Go(m,c,h){return c*(p.EXTENT/(m.tileSize*Math.pow(2,h-m.tileID.overscaledZ)))}so.Actor=p.Actor;class St{constructor(c,h,y,w){this.screenBounds=c,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,w)}static createFromScreenPoints(c,h){let y,w;if(c instanceof p.pointGeometry||"number"==typeof c[0]){const C=p.pointGeometry.convert(c);y=[p.pointGeometry.convert(c)],w=h.isPointAboveHorizon(C)}else{const C=p.pointGeometry.convert(c[0]),E=p.pointGeometry.convert(c[1]);y=[C,E],w=p.polygonizeBounds(C,E).every(T=>h.isPointAboveHorizon(T))}return new St(y,h.getCameraPoint(),w,h)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(c){return p.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const h=this.screenBounds[0],y=1===this.screenBounds.length?this.screenBounds[0].add(new p.pointGeometry(1,1)):this.screenBounds[1],w=p.polygonizeBounds(h,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<y.x?w.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?w[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(w[3]=this.cameraPoint)),p.bufferConvexPolygon(w,c)}bufferedCameraGeometryGlobe(c){const h=this.screenBounds[0],y=1===this.screenBounds.length?this.screenBounds[0].add(new p.pointGeometry(1,1)):this.screenBounds[1],w=p.polygonizeBounds(h,y,c),C=this.cameraPoint.clone();switch(3*((C.y>h.y)+(C.y>y.y))+((C.x>h.x)+(C.x>y.x))){case 0:w[0]=C,w[4]=C.clone();break;case 1:w.splice(1,0,C);break;case 2:w[1]=C;break;case 3:w.splice(4,0,C);break;case 5:w.splice(2,0,C);break;case 6:w[3]=C;break;case 7:w.splice(3,0,C);break;case 8:w[2]=C}return w}containsTile(c,h,y,w=0){const C=c.queryPadding/h._pixelsPerMercatorPixel+1,E=y?this._bufferedCameraMercator(C,h):this._bufferedScreenMercator(C,h);let T=c.tileID.wrap+(E.unwrapped?w:0);const I=E.polygon.map(ne=>p.getTilePoint(c.tileTransform,ne,T));if(!p.polygonIntersectsBox(I,0,0,p.EXTENT,p.EXTENT))return;T=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?w:0);const L=this.screenGeometryMercator.polygon.map(ne=>p.getTileVec3(c.tileTransform,ne,T)),N=L.map(ne=>new p.pointGeometry(ne[0],ne[1])),G=h.getFreeCameraOptions().position||new p.MercatorCoordinate(0,0,0),Q=p.getTileVec3(c.tileTransform,G,T),oe=L.map(ne=>{const ee=p.sub(ne,ne,Q);return p.normalize(ee,ee),new p.Ray(Q,ee)}),te=Go(c,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:N,tilespaceRays:oe,bufferedTilespaceGeometry:I,bufferedTilespaceBounds:(ie=p.getBounds(I),ie.min.x=p.clamp(ie.min.x,0,p.EXTENT),ie.min.y=p.clamp(ie.min.y,0,p.EXTENT),ie.max.x=p.clamp(ie.max.x,0,p.EXTENT),ie.max.y=p.clamp(ie.max.y,0,p.EXTENT),ie),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:te};var ie}_bufferedScreenMercator(c,h){const y=Pn(c);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let w;return w="globe"===h.projection.name?this._projectAndResample(this.bufferedScreenGeometry(c),h):{polygon:this.bufferedScreenGeometry(c).map(C=>h.pointCoordinate3D(C)),unwrapped:!0},this._screenRaycastCache[y]=w,w}}_bufferedCameraMercator(c,h){const y=Pn(c);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let w;return w="globe"===h.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),h):{polygon:this.bufferedCameraGeometry(c).map(C=>h.pointCoordinate3D(C)),unwrapped:!0},this._cameraRaycastCache[y]=w,w}}_projectAndResample(c,h){const y=function(C,E){const T=p.multiply([],E.pixelMatrix,E.globeMatrix),I=[0,-p.GLOBE_RADIUS,0,1],L=[0,p.GLOBE_RADIUS,0,1],N=[0,0,0,1];p.transformMat4$1(I,I,T),p.transformMat4$1(L,L,T),p.transformMat4$1(N,N,T);const G=new p.pointGeometry(I[0]/I[3],I[1]/I[3]),Q=new p.pointGeometry(L[0]/L[3],L[1]/L[3]),oe=p.polygonContainsPoint(C,G)&&I[3]<N[3],te=p.polygonContainsPoint(C,Q)&&L[3]<N[3];if(!oe&&!te)return null;const ie=function(Se,Ce,Re){for(let He=1;He<Se.length;He++){const _t=is(Ce.pointCoordinate3D(Se[He-1]).x),ze=is(Ce.pointCoordinate3D(Se[He]).x);if(Re<0){if(_t<ze)return{idx:He,t:-_t/(ze-1-_t)}}else if(ze<_t)return{idx:He,t:(1-_t)/(ze+1-_t)}}return null}(C,E,oe?-1:1);if(!ie)return null;const{idx:ne,t:ee}=ie;let pe=ne>1?Io(C.slice(0,ne),E):[],se=ne<C.length?Io(C.slice(ne),E):[];pe=pe.map(Se=>new p.pointGeometry(is(Se.x),Se.y)),se=se.map(Se=>new p.pointGeometry(is(Se.x),Se.y));const Ee=[...pe];0===Ee.length&&Ee.push(se[se.length-1]);const De=p.number(Ee[Ee.length-1].y,(0===se.length?pe[0]:se[0]).y,ee);let be;return be=oe?[new p.pointGeometry(0,De),new p.pointGeometry(0,0),new p.pointGeometry(1,0),new p.pointGeometry(1,De)]:[new p.pointGeometry(1,De),new p.pointGeometry(1,1),new p.pointGeometry(0,1),new p.pointGeometry(0,De)],Ee.push(...be),0===se.length?Ee.push(pe[0]):Ee.push(...se),{polygon:Ee.map(Se=>new p.MercatorCoordinate(Se.x,Se.y)),unwrapped:!1}}(c,h);if(y)return y;const w=function(C,E){let T=!1,I=-1/0,L=0;for(let G=0;G<C.length-1;G++)C[G].x>I&&(I=C[G].x,L=G);for(let G=0;G<C.length-1;G++){const Q=(L+G)%(C.length-1),oe=C[Q],te=C[Q+1];Math.abs(oe.x-te.x)>.5&&(oe.x<te.x?(oe.x+=1,0===Q&&(C[C.length-1].x+=1)):(te.x+=1,Q+1===C.length-1&&(C[0].x+=1)),T=!0)}const N=p.mercatorXfromLng(E.center.lng);return T&&N<Math.abs(N-1)&&C.forEach(G=>{G.x-=1}),{polygon:C,unwrapped:T}}(Io(c,h).map(C=>new p.pointGeometry(is(C.x),C.y)),h);return{polygon:w.polygon.map(C=>new p.MercatorCoordinate(C.x,C.y)),unwrapped:w.unwrapped}}}function Io(m,c){return p.resample(m,h=>{const y=c.pointCoordinate3D(h);h.x=y.x,h.y=y.y},1/256)}function is(m){return m<0?1+m%1:m%1}function Pn(m){return 100*m|0}function Qi(m,c,h,y,w){const C=function(E,T){if(E)return w(E);if(T){const I=p.pick(p.extend(T,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);T.vector_layers&&(I.vectorLayers=T.vector_layers,I.vectorLayerIds=I.vectorLayers.map(L=>L.id)),T.language_options&&(I.languageOptions=T.language_options),T.language&&T.language[T.id]&&(I.language=T.language[T.id]),T.worldview_options&&(I.worldviewOptions=T.worldview_options),T.worldview?I.worldview=T.worldview[T.id]:T.worldview_default&&(I.worldview=T.worldview_default),I.tiles=c.canonicalizeTileset(I,m.url),w(null,I)}};return m.url?p.getJSON(c.transformRequest(c.normalizeSourceURL(m.url,null,h,y),p.ResourceType.Source),C):p.exported.frame(()=>C(null,m))}class Wr{constructor(c,h,y){this.bounds=p.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=h||0,this.maxzoom=y||24}validateBounds(c){return Array.isArray(c)&&4===c.length?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const h=Math.pow(2,c.z),y=Math.floor(p.mercatorXfromLng(this.bounds.getWest())*h),w=Math.floor(p.mercatorYfromLat(this.bounds.getNorth())*h),C=Math.ceil(p.mercatorXfromLng(this.bounds.getEast())*h),E=Math.ceil(p.mercatorYfromLat(this.bounds.getSouth())*h);return c.x>=y&&c.x<C&&c.y>=w&&c.y<E}}class li{constructor(c,h,y){this.context=c;const w=c.gl;this.buffer=w.createBuffer(),this.dynamicDraw=Boolean(y),this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const tr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class qo{constructor(c,h,y,w){this.length=h.length,this.attributes=y,this.itemSize=h.bytesPerElement,this.dynamicDraw=w,this.context=c;const C=c.gl;this.buffer=C.createBuffer(),c.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,h){for(let y=0;y<this.attributes.length;y++){const w=h.attributes[this.attributes[y].name];void 0!==w&&c.enableVertexAttribArray(w)}}setVertexAttribPointers(c,h,y){for(let w=0;w<this.attributes.length;w++){const C=this.attributes[w],E=h.attributes[C.name];void 0!==E&&c.vertexAttribPointer(E,C.components,c[tr[C.type]],!1,this.itemSize,C.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class an{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ba extends an{getDefault(){return p.Color.transparent}set(c){const h=this.current;(c.r!==h.r||c.g!==h.g||c.b!==h.b||c.a!==h.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class xn extends an{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class ao extends an{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class lo extends an{getDefault(){return[!0,!0,!0,!0]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class ea extends an{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class Li extends an{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Ir extends an{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const h=this.current;(c.func!==h.func||c.ref!==h.ref||c.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class Na extends an{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class bs extends an{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=c,this.dirty=!1}}class Qr extends an{getDefault(){return[0,1]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class Yc extends an{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=c,this.dirty=!1}}class Xc extends an{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class Kc extends an{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.BLEND):h.disable(h.BLEND),this.current=c,this.dirty=!1}}class $r extends an{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class ma extends an{getDefault(){return p.Color.transparent}set(c){const h=this.current;(c.r!==h.r||c.g!==h.g||c.b!==h.b||c.a!==h.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class tc extends an{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class yn extends an{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;c?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=c,this.dirty=!1}}class Vs extends an{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class za extends an{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class Bd extends an{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class Nd extends an{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class zd extends an{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const h=this.current;(c[0]!==h[0]||c[1]!==h[1]||c[2]!==h[2]||c[3]!==h[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class ga extends an{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class Vd extends an{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class ic extends an{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Qc extends an{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class jd extends an{getDefault(){return null}set(c){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Va extends an{constructor(c){super(c),this.vao=c.extVertexArrayObject}getDefault(){return null}set(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class js extends an{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class nc extends an{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Jc extends an{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Jr extends an{constructor(c,h){super(c),this.context=c,this.parent=h}getDefault(){return null}}class rc extends Jr{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class de extends Jr{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class j extends de{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Y{constructor(c,h,y,w){this.context=c,this.width=h,this.height=y;const C=this.framebuffer=c.gl.createFramebuffer();this.colorAttachment=new rc(c,C),w&&(this.depthAttachment=new de(c,C))}destroy(){const c=this.context.gl,h=this.colorAttachment.get();if(h&&c.deleteTexture(h),this.depthAttachment){const y=this.depthAttachment.get();y&&c.deleteRenderbuffer(y)}c.deleteFramebuffer(this.framebuffer)}}class ae{constructor(c){this.gl=c,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ba(this),this.clearDepth=new xn(this),this.clearStencil=new ao(this),this.colorMask=new lo(this),this.depthMask=new ea(this),this.stencilMask=new Li(this),this.stencilFunc=new Ir(this),this.stencilOp=new Na(this),this.stencilTest=new bs(this),this.depthRange=new Qr(this),this.depthTest=new Yc(this),this.depthFunc=new Xc(this),this.blend=new Kc(this),this.blendFunc=new $r(this),this.blendColor=new ma(this),this.blendEquation=new tc(this),this.cullFace=new yn(this),this.cullFaceSide=new Vs(this),this.frontFace=new za(this),this.program=new Bd(this),this.activeTexture=new Nd(this),this.viewport=new zd(this),this.bindFramebuffer=new ga(this),this.bindRenderbuffer=new Vd(this),this.bindTexture=new ic(this),this.bindVertexBuffer=new Qc(this),this.bindElementBuffer=new jd(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Va(this),this.pixelStoreUnpack=new js(this),this.pixelStoreUnpackPremultiplyAlpha=new nc(this),this.pixelStoreUnpackFlipY=new Jc(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=c.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(c.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=c.getExtension("OES_standard_derivatives"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,h){return new li(this,c,h)}createVertexBuffer(c,h,y){return new qo(this,c,h,y)}createRenderbuffer(c,h,y){const w=this.gl,C=w.createRenderbuffer();return this.bindRenderbuffer.set(C),w.renderbufferStorage(w.RENDERBUFFER,c,h,y),this.bindRenderbuffer.set(null),C}createFramebuffer(c,h,y){return new Y(this,c,h,y)}clear({color:c,depth:h,stencil:y}){const w=this.gl;let C=0;c&&(C|=w.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),void 0!==h&&(C|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),void 0!==y&&(C|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),w.clear(C)}setCullFace(c){!1===c.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){ce(c.blendFunction,p.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class me extends p.Evented{constructor(c,h,y,w){super(),this.id=c,this.dispatcher=y,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=p.extend({type:"raster"},h),p.extend(this,p.pick(h,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Qi(this._options,this.map._requestManager,null,null,(c,h)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new p.ErrorEvent(c)):h&&(p.extend(this,h),h.bounds&&(this.tileBounds=new Wr(h.bounds,this.minzoom,this.maxzoom)),p.postTurnstileEvent(h.tiles),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return p.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,h){const y=p.exported.devicePixelRatio>=2,w=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);c.request=p.getImage(this.map._requestManager.transformRequest(w,p.ResourceType.Tile),(C,E,T,I)=>(delete c.request,c.aborted?(c.state="unloaded",h(null)):C?(c.state="errored",h(C)):E?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:T,expires:I}),c.setTexture(E,this.map.painter),c.state="loaded",p.cacheEntryPossiblyAdded(this.dispatcher),void h(null)):h(null)))}static loadTileData(c,h,y){c.setTexture(h,y)}static unloadTileData(c,h){c.texture&&h.saveTileTexture(c.texture)}abortTile(c,h){c.request&&(c.request.cancel(),delete c.request),h()}unloadTile(c,h){c.texture&&this.map.painter.saveTileTexture(c.texture),h()}hasTransition(){return!1}}let ke;function Ve(m,c,h,y,w,C,E,T){const I=[m,h,w,c,y,C,1,1,1],L=[E,T,1],N=p.adjoint([],I),[G,Q,oe]=p.transformMat3(L,L,p.transpose(N,N));return p.multiply$1(I,[G,0,0,0,Q,0,0,0,oe],I)}class Ne extends p.Evented{constructor(c,h,y,w){super(),this.id=c,this.dispatcher=y,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=h}load(c,h){this._loaded=h||!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this.url=this.options.url,p.getImage(this.map._requestManager.transformRequest(this.url,p.ResourceType.Image),(y,w)=>{if(this._loaded=!0,y)this.fire(new p.ErrorEvent(y));else if(w){const{HTMLImageElement:C}=p.window;this.image=w instanceof C?p.exported.getImageData(w):w,this.width=this.image.width,this.height=this.image.height,c&&(this.coordinates=c),this._finishLoading()}})}loaded(){return this._loaded}updateImage(c){return this.image&&c.url?(this.options.url=c.url,this.load(c.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(c){this.coordinates=c,this._boundsArray=void 0;const h=c.map(p.MercatorCoordinate.fromLngLat);return this.tileID=function(y){let w=1/0,C=1/0,E=-1/0,T=-1/0;for(const G of y)w=Math.min(w,G.x),C=Math.min(C,G.y),E=Math.max(E,G.x),T=Math.max(T,G.y);const I=Math.max(E-w,T-C),L=Math.max(0,Math.floor(-Math.log(I)/Math.LN2)),N=Math.pow(2,L);return new p.CanonicalTileID(L,Math.floor((w+E)/2*N),Math.floor((C+T)/2*N))}(h),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(c){for(const I in this.tiles){const L=this.tiles[I];"loaded"!==L.state&&(L.state="loaded",L.texture=this.texture)}if(this._boundsArray)return;const h=p.tileTransform(this.tileID,this.map.transform.projection),[y,w,C,E]=this.coordinates.map(I=>{const L=h.projection.project(I[0],I[1]);return p.getTilePoint(h,L)._round()});this.perspectiveTransform=function(I,L,N,G,Q,oe,te,ie,ne,ee){const pe=Ve(0,0,I,0,0,L,I,L),se=Ve(N,G,Q,oe,te,ie,ne,ee);return p.multiply$1(se,p.adjoint(pe,pe),se),[se[6]/se[8]*I/p.EXTENT,se[7]/se[8]*L/p.EXTENT]}(this.width,this.height,y.x,y.y,w.x,w.y,E.x,E.y,C.x,C.y);const T=this._boundsArray=new p.StructArrayLayout4i8;T.emplaceBack(y.x,y.y,0,0),T.emplaceBack(w.x,w.y,p.EXTENT,0),T.emplaceBack(E.x,E.y,0,p.EXTENT),T.emplaceBack(C.x,C.y,p.EXTENT,p.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=c.createVertexBuffer(T,p.boundsAttributes.members),this.boundsSegments=p.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const c=this.map.painter.context,h=c.gl;this.texture?this.texture.update(this.image):(this.texture=new p.Texture(c,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._prepareData(c)}loadTile(c,h){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},h(null)):(c.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ae={vector:class extends p.Evented{constructor(m,c,h,y){if(super(),this.id=m,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,p.extend(this,p.pick(c,["url","scheme","tileSize","promoteId"])),this._options=p.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y),this._tileWorkers={},this._deduped=new p.DedupedRequest}load(m){this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"}));const c=this.language||this.map._language,h=this.worldview||this.map._worldview;this._tileJSONRequest=Qi(this._options,this.map._requestManager,c,h,(y,w)=>{this._tileJSONRequest=null,this._loaded=!0,y?(c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${c}`),h&&2!==h.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${h}`),this.fire(new p.ErrorEvent(y))):w&&(p.extend(this,w),w.bounds&&(this.tileBounds=new Wr(w.bounds,this.minzoom,this.maxzoom)),p.postTurnstileEvent(w.tiles,this.map._requestManager._customAccessToken),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))),m&&m(y)})}loaded(){return this._loaded}hasTile(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)}onAdd(m){this.map=m,this.load()}setSourceProperty(m){this._tileJSONRequest&&this._tileJSONRequest.cancel(),m(),this.load(()=>{const c=this.map.style._getSourceCaches(this.id);for(const h of c)h.clearTiles()})}setTiles(m){return this.setSourceProperty(()=>{this._options.tiles=m}),this}setUrl(m){return this.setSourceProperty(()=>{this.url=m,this._options.url=m}),this}_setLanguage(m){return m===this.language||this.setSourceProperty(()=>{this.language=m}),this}_setWorldview(m){return m===this.worldview?this:this.worldviewOptions&&m&&!this.worldviewOptions[m]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${m}".`),this):(this.setSourceProperty(()=>{this.worldview=m}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return p.extend({},this._options)}loadTile(m,c){const h=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme)),y={request:this.map._requestManager.transformRequest(h,p.ResourceType.Tile),data:void 0,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,tileSize:this.tileSize*m.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:p.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:m.isSymbolTile};if(y.request.collectResourceTiming=this._collectResourceTiming,m.actor&&"expired"!==m.state)"loading"===m.state?m.reloadCallback=c:m.request=m.actor.send("reloadTile",y,w.bind(this));else if(m.actor=this._tileWorkers[h]=this._tileWorkers[h]||this.dispatcher.getActor(),this.dispatcher.ready)m.request=m.actor.send("loadTile",y,w.bind(this),void 0,!0);else{const C=p.loadVectorTile.call({deduped:this._deduped},y,(E,T)=>{E||!T?w.call(this,E):(y.data={cacheControl:T.cacheControl,expires:T.expires,rawData:T.rawData.slice(0)},m.actor&&m.actor.send("loadTile",y,w.bind(this),void 0,!0))},!0);m.request={cancel:C}}function w(C,E){return delete m.request,m.aborted?c(null):C&&404!==C.status?c(C):(E&&E.resourceTiming&&(m.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&E&&m.setExpiryData(E),m.loadVectorData(E,this.map.painter),p.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(m.reloadCallback&&(this.loadTile(m,m.reloadCallback),m.reloadCallback=null)))}}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.actor&&m.actor.send("abortTile",{uid:m.uid,type:this.type,source:this.id})}unloadTile(m){m.unloadVectorData(),m.actor&&m.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:me,"raster-dem":class extends me{constructor(m,c,h,y){super(m,c,h,y),this.type="raster-dem",this.maxzoom=22,this._options=p.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(m,c){const h=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(w,C){w&&(m.state="errored",c(w)),C&&(m.dem=C,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",c(null))}m.request=p.getImage(this.map._requestManager.transformRequest(h,p.ResourceType.Tile),function(w,C,E,T){if(delete m.request,m.aborted)m.state="unloaded",c(null);else if(w)m.state="errored",c(w);else if(C){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:E,expires:T});const I=p.window.ImageBitmap&&C instanceof p.window.ImageBitmap&&(null==ke&&(ke=p.window.OffscreenCanvas&&new p.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof p.window.createImageBitmap),ke),L=1-(C.width-p.prevPowerOfTwo(C.width))/2;L<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const N=I?C:p.exported.getImageData(C,L),G={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:N,encoding:this.encoding,padding:L};m.actor&&"expired"!==m.state||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",G,y.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(m){const c=m.canonical,h=Math.pow(2,c.z),y=(c.x-1+h)%h,w=0===c.x?m.wrap-1:m.wrap,C=(c.x+1+h)%h,E=c.x+1===h?m.wrap+1:m.wrap,T={};return T[new p.OverscaledTileID(m.overscaledZ,w,c.z,y,c.y).key]={backfilled:!1},T[new p.OverscaledTileID(m.overscaledZ,E,c.z,C,c.y).key]={backfilled:!1},c.y>0&&(T[new p.OverscaledTileID(m.overscaledZ,w,c.z,y,c.y-1).key]={backfilled:!1},T[new p.OverscaledTileID(m.overscaledZ,m.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},T[new p.OverscaledTileID(m.overscaledZ,E,c.z,C,c.y-1).key]={backfilled:!1}),c.y+1<h&&(T[new p.OverscaledTileID(m.overscaledZ,w,c.z,y,c.y+1).key]={backfilled:!1},T[new p.OverscaledTileID(m.overscaledZ,m.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},T[new p.OverscaledTileID(m.overscaledZ,E,c.z,C,c.y+1).key]={backfilled:!1}),T}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends p.Evented{constructor(m,c,h,y){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(y),this._data=c.data,this._options=p.extend({},c),this._collectResourceTiming=c.collectResourceTiming,void 0!==c.maxzoom&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const w=p.EXTENT/this.tileSize;this.workerOptions=p.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(void 0!==c.buffer?c.buffer:128)*w,tolerance:(void 0!==c.tolerance?c.tolerance:.375)*w,extent:p.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:void 0!==c.clusterMaxZoom?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:p.EXTENT,radius:(void 0!==c.clusterRadius?c.clusterRadius:50)*w,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},c),this}getClusterChildren(m,c){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},c),this}getClusterLeaves(m,c,h,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:c,offset:h},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new p.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=p.extend({},this.workerOptions),c=this._data;"string"==typeof c?(m.request=this.map._requestManager.transformRequest(p.exported.resolveURL(c),p.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(h,y)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new p.ErrorEvent(h));else{const w={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(w.resourceTiming=y.resourceTiming[this.id]),this.fire(new p.Event("data",w)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,c){const h=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(h,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:p.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(y,w)=>(delete m.request,m.unloadVectorData(),m.aborted?c(null):y?c(y):(m.loadVectorData(w,this.map.painter,"reloadTile"===h),c(null))),void 0,"loadTile"===h)}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return p.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Ne{constructor(m,c,h,y){super(m,c,h,y),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const c of m.urls)this.urls.push(this.map._requestManager.transformRequest(c,p.ResourceType.Source).url);p.getVideo(this.urls,(c,h)=>{this._loaded=!0,c?this.fire(new p.ErrorEvent(c)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const c=this.video.seekable;m<c.start(0)||m>c.end(0)?this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const m=this.map.painter.context,c=m.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new p.Texture(m,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Ne,canvas:class extends Ne{constructor(m,c,h,y){super(m,c,h,y),c.coordinates?Array.isArray(c.coordinates)&&4===c.coordinates.length&&!c.coordinates.some(w=>!Array.isArray(w)||2!==w.length||w.some(C=>"number"!=typeof C))||this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),c.animate&&"boolean"!=typeof c.animate&&this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),c.canvas?"string"==typeof c.canvas||c.canvas instanceof p.window.HTMLCanvasElement||this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new p.ErrorEvent(new p.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=c,this.animate=void 0===c.animate||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof p.window.HTMLCanvasElement?this.options.canvas:p.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new p.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const c=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new p.Texture(c,this.canvas,c.gl.RGBA,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends p.Evented{constructor(m,c,h,y){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=c,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new p.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new p.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Wr(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.coveringTiles=this._coveringTiles.bind(this),p.extend(this,p.pick(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return p.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:c,y:h,z:y}=m.canonical;return this._implementation.hasTile({x:c,y:h,z:y})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,c){const{x:h,y,z:w}=m.tileID.canonical,C=new p.window.AbortController,E=this._implementation.loadTile({x:h,y,z:w},{signal:C.signal});if(!E)return this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",c(null);E.cancel=()=>C.abort(),m.request=E.then(function(T){return delete m.request,m.aborted?(m.state="unloaded",c(null)):T?(I=T)instanceof p.window.ImageData||I instanceof p.window.ImageBitmap||I instanceof p.window.HTMLCanvasElement?(this.loadTileData(m,T),m.state="loaded",void c(null)):(m.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",c(null));var I}.bind(this)).catch(T=>{20!==T.code&&(m.state="errored",c(T))})}loadTileData(m,c){me.loadTileData(m,c,this._map.painter)}unloadTileData(m){me.unloadTileData(m,this._map.painter)}prepareTile(m){if(!this._implementation.prepareTile)return null;const{x:c,y:h,z:y}=m.tileID.canonical,w=this._implementation.prepareTile({x:c,y:h,z:y});return w?(this.loadTileData(m,w),m.state="loaded",w):null}unloadTile(m,c){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:h,y,z:w}=m.tileID.canonical;this._implementation.unloadTile({x:h,y,z:w})}c()}abortTile(m,c){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),c()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_update(){this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"}))}}},je=function(m,c,h,y){const w=new Ae[c.type](m,c,h,y);if(w.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${w.id}`);return p.bindAll(["load","abort","unload","serialize","prepare"],w),w};function ut(m,c){const h=p.identity([]);return p.scale(h,h,[.5*m.width,.5*-m.height,1]),p.translate(h,h,[1,-1,0]),p.multiply(h,h,m.calculateProjMatrix(c.toUnwrapped())),Float32Array.from(h)}function Ct(m,c,h,y,w,C,E,T=!1){const I=m.tilesIn(y,E,T);I.sort(ti);const L=[];for(const G of I)L.push({wrappedTileID:G.tile.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(c,h,m._state,G,w,C,ut(m.transform,G.tile.tileID),T)});const N=function(G){const Q={},oe={};for(const te of G){const ie=te.queryResults,ne=te.wrappedTileID,ee=oe[ne]=oe[ne]||{};for(const pe in ie){const se=ie[pe],Ee=ee[pe]=ee[pe]||{},De=Q[pe]=Q[pe]||[];for(const be of se)Ee[be.featureIndex]||(Ee[be.featureIndex]=!0,De.push(be))}}return Q}(L);for(const G in N)N[G].forEach(Q=>{const oe=Q.feature,te=oe.layer;te&&"background"!==te.type&&"sky"!==te.type&&(oe.source=te.source,te["source-layer"]&&(oe.sourceLayer=te["source-layer"]),oe.state=void 0!==oe.id?m.getFeatureState(te["source-layer"],oe.id):{})});return N}function pt(m,c){const h=m.getRenderableIds().map(C=>m.getTileByID(C)),y=[],w={};for(let C=0;C<h.length;C++){const E=h[C],T=E.tileID.canonical.key;w[T]||(w[T]=!0,E.querySourceFeatures(y,c))}return y}function ti(m,c){const h=m.tileID,y=c.tileID;return h.overscaledZ-y.overscaledZ||h.canonical.y-y.canonical.y||h.wrap-y.wrap||h.canonical.x-y.canonical.x}function Ei(){return null!=sh.workerClass?new sh.workerClass:new p.window.Worker(sh.workerUrl)}const ri="mapboxgl_preloaded_worker_pool";class _i{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<_i.workerCount;)this.workers.push(new Ei);return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],0===this.numActive()&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ri]}numActive(){return Object.keys(this.active).length}}let Gi;function In(){return Gi||(Gi=new _i),Gi}function qi(m,c){const h={};for(const y in m)"ref"!==y&&(h[y]=m[y]);return p.refProperties.forEach(y=>{y in c&&(h[y]=c[y])}),h}function Hn(m){m=m.slice();const c=Object.create(null);for(let h=0;h<m.length;h++)c[m[h].id]=m[h];for(let h=0;h<m.length;h++)"ref"in m[h]&&(m[h]=qi(m[h],c[m[h].ref]));return m}_i.workerCount=2;const mi={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Qe(m,c,h){h.push({command:mi.addSource,args:[m,c[m]]})}function ns(m,c,h){c.push({command:mi.removeSource,args:[m]}),h[m]=!0}function Rr(m,c,h,y){ns(m,h,y),Qe(m,c,h)}function el(m,c,h){let y;for(y in m[h])if(m[h].hasOwnProperty(y)&&"data"!==y&&!ce(m[h][y],c[h][y]))return!1;for(y in c[h])if(c[h].hasOwnProperty(y)&&"data"!==y&&!ce(m[h][y],c[h][y]))return!1;return!0}function Ud(m,c,h,y,w,C){let E;for(E in c=c||{},m=m||{})m.hasOwnProperty(E)&&(ce(m[E],c[E])||h.push({command:C,args:[y,E,c[E],w]}));for(E in c)c.hasOwnProperty(E)&&!m.hasOwnProperty(E)&&(ce(m[E],c[E])||h.push({command:C,args:[y,E,c[E],w]}))}function xs(m){return m.id}function Hd(m,c){return m[c.id]=c,m}class Wh{constructor(c,h){this.reset(c,h)}reset(c,h){this.points=c||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(1===this.points.length)return this.points[0];c=p.clamp(c,0,1);let h=1,y=this._distances[h];const w=c*this.paddedLength+this.padding;for(;y<w&&h<this._distances.length;)y=this._distances[++h];const C=h-1,E=this._distances[C],T=y-E,I=T>0?(w-E)/T:0;return this.points[C].mult(1-I).add(this.points[h].mult(I))}}class vr{constructor(c,h,y){const w=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(c/y),this.yCellCount=Math.ceil(h/y);for(let E=0;E<this.xCellCount*this.yCellCount;E++)w.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=h,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,h,y,w,C){this._forEachCell(h,y,w,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(w),this.bboxes.push(C)}insertCircle(c,h,y,w){this._forEachCell(h-w,y-w,h+w,y+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(h),this.circles.push(y),this.circles.push(w)}_insertBoxCell(c,h,y,w,C,E){this.boxCells[C].push(E)}_insertCircleCell(c,h,y,w,C,E){this.circleCells[C].push(E)}_query(c,h,y,w,C,E){if(y<0||c>this.width||w<0||h>this.height)return!C&&[];const T=[];if(c<=0&&h<=0&&this.width<=y&&this.height<=w){if(C)return!0;for(let I=0;I<this.boxKeys.length;I++)T.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(let I=0;I<this.circleKeys.length;I++){const L=this.circles[3*I],N=this.circles[3*I+1],G=this.circles[3*I+2];T.push({key:this.circleKeys[I],x1:L-G,y1:N-G,x2:L+G,y2:N+G})}return E?T.filter(E):T}return this._forEachCell(c,h,y,w,this._queryCell,T,{hitTest:C,seenUids:{box:{},circle:{}}},E),C?T.length>0:T}_queryCircle(c,h,y,w,C){const E=c-y,T=c+y,I=h-y,L=h+y;if(T<0||E>this.width||L<0||I>this.height)return!w&&[];const N=[];return this._forEachCell(E,I,T,L,this._queryCellCircle,N,{hitTest:w,circle:{x:c,y:h,radius:y},seenUids:{box:{},circle:{}}},C),w?N.length>0:N}query(c,h,y,w,C){return this._query(c,h,y,w,!1,C)}hitTest(c,h,y,w,C){return this._query(c,h,y,w,!0,C)}hitTestCircle(c,h,y,w){return this._queryCircle(c,h,y,!0,w)}_queryCell(c,h,y,w,C,E,T,I){const L=T.seenUids,N=this.boxCells[C];if(null!==N){const Q=this.bboxes;for(const oe of N)if(!L.box[oe]){L.box[oe]=!0;const te=4*oe;if(c<=Q[te+2]&&h<=Q[te+3]&&y>=Q[te+0]&&w>=Q[te+1]&&(!I||I(this.boxKeys[oe]))){if(T.hitTest)return E.push(!0),!0;E.push({key:this.boxKeys[oe],x1:Q[te],y1:Q[te+1],x2:Q[te+2],y2:Q[te+3]})}}}const G=this.circleCells[C];if(null!==G){const Q=this.circles;for(const oe of G)if(!L.circle[oe]){L.circle[oe]=!0;const te=3*oe;if(this._circleAndRectCollide(Q[te],Q[te+1],Q[te+2],c,h,y,w)&&(!I||I(this.circleKeys[oe]))){if(T.hitTest)return E.push(!0),!0;{const ie=Q[te],ne=Q[te+1],ee=Q[te+2];E.push({key:this.circleKeys[oe],x1:ie-ee,y1:ne-ee,x2:ie+ee,y2:ne+ee})}}}}}_queryCellCircle(c,h,y,w,C,E,T,I){const L=T.circle,N=T.seenUids,G=this.boxCells[C];if(null!==G){const oe=this.bboxes;for(const te of G)if(!N.box[te]){N.box[te]=!0;const ie=4*te;if(this._circleAndRectCollide(L.x,L.y,L.radius,oe[ie+0],oe[ie+1],oe[ie+2],oe[ie+3])&&(!I||I(this.boxKeys[te])))return E.push(!0),!0}}const Q=this.circleCells[C];if(null!==Q){const oe=this.circles;for(const te of Q)if(!N.circle[te]){N.circle[te]=!0;const ie=3*te;if(this._circlesCollide(oe[ie],oe[ie+1],oe[ie+2],L.x,L.y,L.radius)&&(!I||I(this.circleKeys[te])))return E.push(!0),!0}}}_forEachCell(c,h,y,w,C,E,T,I){const L=this._convertToXCellCoord(c),N=this._convertToYCellCoord(h),G=this._convertToXCellCoord(y),Q=this._convertToYCellCoord(w);for(let oe=L;oe<=G;oe++)for(let te=N;te<=Q;te++)if(C.call(this,c,h,y,w,this.xCellCount*te+oe,E,T,I))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,h,y,w,C,E){const T=w-c,I=C-h,L=y+E;return L*L>T*T+I*I}_circleAndRectCollide(c,h,y,w,C,E,T){const I=(E-w)/2,L=Math.abs(c-(w+I));if(L>I+y)return!1;const N=(T-C)/2,G=Math.abs(h-(C+N));if(G>N+y)return!1;if(L<=I||G<=N)return!0;const Q=L-I,oe=G-N;return Q*Q+oe*oe<=y*y}}const wt=Math.tan(85*Math.PI/180);function on(m,c,h,y,w,C,E){const T=p.create();if(h)if("globe"===C.name){const I=p.calculateGlobeLabelMatrix(w,c);p.multiply(T,T,I)}else{const I=Ar([],E);T[0]=I[0],T[1]=I[1],T[4]=I[2],T[5]=I[3],y||p.rotateZ(T,T,w.angle)}else p.multiply(T,w.labelPlaneMatrix,m);return T}function Ji(m,c,h,y,w,C,E){const T=on(m,c,h,y,w,C,E);return"globe"===C.name&&h||(T[2]=T[6]=T[10]=T[14]=0),T}function Mn(m,c,h,y,w,C,E){if(h){if("globe"===C.name){const T=on(m,c,h,y,w,C,E);return p.invert(T,T),p.multiply(T,m,T),T}{const T=p.clone(m),I=p.identity([]);return I[0]=E[0],I[1]=E[1],I[4]=E[2],I[5]=E[3],p.multiply(T,T,I),y||p.rotateZ(T,T,-w.angle),T}}return w.glCoordMatrix}function ws(m,c,h=0){const y=[m.x,m.y,h,1];h?p.transformMat4$1(y,y,c):Ro(y,y,c);const w=y[3];return{point:[y[0]/w,y[1]/w,y[2]/w],signedDistanceFromCamera:w}}function Qt(m,c){const h=[m[0],m[1],m[2],1];p.transformMat4$1(h,h,c);const y=h[3];return{point:[h[0]/y,h[1]/y,h[2]/y],signedDistanceFromCamera:y}}function tl(m,c){return Math.min(.5+m/c*.5,1.5)}function oc(m,c){const h=m[0]/m[3],y=m[1]/m[3];return h>=-c[0]&&h<=c[0]&&y>=-c[1]&&y<=c[1]}function en(m,c,h,y,w,C,E,T,I,L){const N=h.transform,G=y?m.textSizeData:m.iconSizeData,Q=p.evaluateSizeForZoom(G,h.transform.zoom),oe="globe"===N.projection.name,te=[256/h.width*2+1,256/h.height*2+1],ie=y?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;ie.clear();let ne=null;oe&&(ne=y?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const ee=m.lineVertexArray,pe=y?m.text.placedSymbolArray:m.icon.placedSymbolArray,se=h.transform.width/h.transform.height;let Ee=!1;for(let De=0;De<pe.length;De++){const be=pe.get(De);if(be.writingMode!==p.WritingMode.vertical||Ee||0!==De&&pe.get(De-1).writingMode===p.WritingMode.horizontal||(Ee=!0),(be.hidden||be.writingMode===p.WritingMode.vertical)&&!Ee){il(be.numGlyphs,ie);continue}Ee=!1;const Se=new p.pointGeometry(be.tileAnchorX,be.tileAnchorY),Ce=I?I(Se):[0,0,0],Re=N.projection.projectTilePoint(Se.x,Se.y,L.canonical),He=[Re.x+Ce[0],Re.y+Ce[1],Re.z+Ce[2]],_t=[...He,1];if(p.transformMat4$1(_t,_t,c),!oc(_t,te)){il(be.numGlyphs,ie);continue}const ze=tl(h.transform.cameraToCenterDistance,_t[3]),ot=p.evaluateSizeForFeature(G,Q,be),lt=E?ot/ze:ot*ze,Pt=ws(new p.pointGeometry(He[0],He[1]),w,He[2]);if(Pt.signedDistanceFromCamera<=0){il(be.numGlyphs,ie);continue}let Ye={};const yt=E?null:I,dt=Zh(be,lt,!1,T,c,w,C,m.glyphOffsetArray,ee,ie,ne,Pt.point,Se,Ye,se,yt,N.projection,L,E);Ee=dt.useVertical,yt&&dt.needsFlipping&&(Ye={}),(dt.notEnoughRoom||Ee||dt.needsFlipping&&Zh(be,lt,!0,T,c,w,C,m.glyphOffsetArray,ee,ie,ne,Pt.point,Se,Ye,se,yt,N.projection,L,E).notEnoughRoom)&&il(be.numGlyphs,ie)}y?(m.text.dynamicLayoutVertexBuffer.updateData(ie),ne&&m.text.globeExtVertexBuffer.updateData(ne)):(m.icon.dynamicLayoutVertexBuffer.updateData(ie),ne&&m.icon.globeExtVertexBuffer.updateData(ne))}function xi(m,c,h,y,w,C,E,T,I,L,N,G,Q,oe,te,ie){const ne=T.glyphStartIndex+T.numGlyphs,ee=T.lineStartIndex,pe=T.lineStartIndex+T.lineLength,se=c.getoffsetX(T.glyphStartIndex),Ee=c.getoffsetX(ne-1),De=Ri(m*se,h,y,w,C,E,T.segment,ee,pe,I,L,N,G,Q,!0,oe,te,ie);if(!De)return null;const be=Ri(m*Ee,h,y,w,C,E,T.segment,ee,pe,I,L,N,G,Q,!0,oe,te,ie);return be?{first:De,last:be}:null}function hr(m,c,h,y){return m.writingMode===p.WritingMode.horizontal&&Math.abs(h.y-c.y)>Math.abs(h.x-c.x)*y?{useVertical:!0}:m.writingMode===p.WritingMode.vertical?c.y<h.y?{needsFlipping:!0}:null:0!==m.flipState&&function(w,C,E){const T=(C.x-w.x)*E;return 0===T||Math.abs((C.y-w.y)/T)>wt}(c,h,y)?1===m.flipState?{needsFlipping:!0}:null:c.x>h.x?{needsFlipping:!0}:null}function Zh(m,c,h,y,w,C,E,T,I,L,N,G,Q,oe,te,ie,ne,ee,pe){const se=c/24,Ee=m.lineOffsetX*se,De=m.lineOffsetY*se;let be;if(m.numGlyphs>1){const Se=m.glyphStartIndex+m.numGlyphs,Ce=m.lineStartIndex,Re=m.lineStartIndex+m.lineLength,He=xi(se,T,Ee,De,h,G,Q,m,I,C,oe,ie,!1,ne,ee,pe);if(!He)return{notEnoughRoom:!0};const _t=Qt(He.first.point,E).point,ze=Qt(He.last.point,E).point,ot=new p.pointGeometry(_t[0],_t[1]),lt=new p.pointGeometry(ze[0],ze[1]);if(y&&!h){const Pt=hr(m,ot,lt,te);if(m.flipState=Pt&&Pt.needsFlipping?1:2,Pt)return Pt}be=[He.first];for(let Pt=m.glyphStartIndex+1;Pt<Se-1;Pt++)be.push(Ri(se*T.getoffsetX(Pt),Ee,De,h,G,Q,m.segment,Ce,Re,I,C,oe,ie,!1,!1,ne,ee,pe));be.push(He.last)}else{if(y&&!h){const Ce=ws(Q,w).point,Re=m.lineStartIndex+m.segment+1,He=new p.pointGeometry(I.getx(Re),I.gety(Re)),_t=ws(He,w),ze=_t.signedDistanceFromCamera>0?_t.point:yl(Q,He,Ce,1,w,void 0,ne,ee.canonical),ot=hr(m,new p.pointGeometry(Ce[0],Ce[1]),new p.pointGeometry(ze[0],ze[1]),te);if(m.flipState=ot&&ot.needsFlipping?1:2,ot)return ot}const Se=Ri(se*T.getoffsetX(m.glyphStartIndex),Ee,De,h,G,Q,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,I,C,oe,ie,!1,!1,ne,ee,pe);if(!Se)return{notEnoughRoom:!0};be=[Se]}if(N)for(const Se of be)p.updateGlobeVertexNormal(N,L.length+0,Se.up[0],Se.up[1],Se.up[2]),p.updateGlobeVertexNormal(N,L.length+1,Se.up[0],Se.up[1],Se.up[2]),p.updateGlobeVertexNormal(N,L.length+2,Se.up[0],Se.up[1],Se.up[2]),p.updateGlobeVertexNormal(N,L.length+3,Se.up[0],Se.up[1],Se.up[2]),p.addDynamicAttributes(L,Se.point[0],Se.point[1],Se.point[2],Se.angle);else for(const Se of be)p.addDynamicAttributes(L,Se.point[0],Se.point[1],Se.point[2],Se.angle);return{}}function ft(m,c,h,y,w){const C=y.projectTilePoint(m.x,m.y,c);if(!w)return ws(C,h,C.z);const E=w(m);return ws(new p.pointGeometry(C.x+E[0],C.y+E[1]),h,C.z+E[2])}function yl(m,c,h,y,w,C,E,T){const I=ft(m.add(m.sub(c)._unit()),T,w,E,C).point,L=p.sub([],h,I);return p.scaleAndAdd([],h,L,y/p.length(L))}function Ri(m,c,h,y,w,C,E,T,I,L,N,G,Q,oe,te,ie,ne,ee){const pe=y?m-c:m+c;let se=pe>0?1:-1,Ee=0;y&&(se*=-1,Ee=Math.PI),se<0&&(Ee+=Math.PI);let De=se>0?T+E:T+E+1,be=w,Se=w,Ce=0,Re=0;const He=Math.abs(pe),_t=[],ze=[];let ot=C;const lt=()=>{const Kt=De-se;return 0===Ce?C:new p.pointGeometry(L.getx(Kt),L.gety(Kt))},Pt=()=>yl(lt(),ot,Se,He-Ce+1,N,Q,ie,ne.canonical);for(;Ce+Re<=He;){if(De+=se,De<T||De>=I)return null;if(Se=be,_t.push(be),oe&&ze.push(ot||lt()),be=G[De],void 0===be){ot=new p.pointGeometry(L.getx(De),L.gety(De));const Kt=ft(ot,ne.canonical,N,ie,Q);be=Kt.signedDistanceFromCamera>0?G[De]=Kt.point:Pt()}else ot=null;Ce+=Re,Re=p.distance(Se,be)}ot=ot||new p.pointGeometry(L.getx(De),L.gety(De));const Ye=lt();te&&Q&&(G[De]=be=void 0===G[De]?be:Pt(),Re=p.distance(Se,be));const yt=(He-Ce)/Re,dt=ot.sub(Ye).mult(yt)._add(Ye),It=p.sub([],be,Se),Ft=p.scaleAndAdd([],Se,It,yt);let Zt=[0,0,1],fi=It[0],Pi=It[1];if(ee&&(Zt=ie.upVector(ne.canonical,dt.x,dt.y),0!==Zt[0]||0!==Zt[1]||1!==Zt[2])){const Kt=[1,0,0],Hi=[0,1,0];Kt[0]=Zt[2],Kt[1]=0,Kt[2]=-Zt[0],p.cross(Hi,Zt,Kt),p.normalize(Kt,Kt),p.normalize(Hi,Hi),fi=p.dot(It,Kt),Pi=p.dot(It,Hi)}if(h){const Kt=p.cross([],Zt,It);p.normalize(Kt,Kt),p.scaleAndAdd(Ft,Ft,Kt,h*se)}const ln=Ee+Math.atan2(Pi,fi);return _t.push(Ft),oe&&ze.push(dt),{point:Ft,angle:ln,path:_t,tilePath:ze,up:Zt}}const Ln=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function il(m,c){for(let h=0;h<m;h++){const y=c.length;c.resize(y+4),c.float32.set(Ln,4*y)}}function Ro(m,c,h){const y=c[0],w=c[1];return m[0]=h[0]*y+h[4]*w+h[12],m[1]=h[1]*y+h[5]*w+h[13],m[3]=h[3]*y+h[7]*w+h[15],m}const $n=100;class sc{constructor(c,h,y=new vr(c.width+200,c.height+200,25),w=new vr(c.width+200,c.height+200,25)){this.transform=c,this.grid=y,this.ignoredGrid=w,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+$n,this.screenBottomBoundary=c.height+$n,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=h}placeCollisionBox(c,h,y,w,C,E,T,I){let L=y.projectedAnchorX,N=y.projectedAnchorY,G=y.projectedAnchorZ;const Q=y.elevation,oe=y.tileID;if(Q&&oe){const De=c.getProjection().upVector(oe.canonical,y.tileAnchorX,y.tileAnchorY),be=c.getProjection().upVectorScale(oe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;L+=De[0]*Q*be,N+=De[1]*Q*be,G+=De[2]*Q*be}const te=this.projectAndGetPerspectiveRatio(T,[L,N,G],y.tileID,"globe"===c.projection.name||!!Q||this.transform.pitch>0,c.getProjection()),ie=E*te.perspectiveRatio,ne=(y.x1*h+w.x-y.padding)*ie+te.point.x,ee=(y.y1*h+w.y-y.padding)*ie+te.point.y,pe=(y.x2*h+w.x+y.padding)*ie+te.point.x,se=(y.y2*h+w.y+y.padding)*ie+te.point.y,Ee=te.perspectiveRatio<=.55||te.occluded;return!this.isInsideGrid(ne,ee,pe,se)||!C&&this.grid.hitTest(ne,ee,pe,se,I)||Ee?{box:[],offscreen:!1,occluded:te.occluded}:{box:[ne,ee,pe,se],offscreen:this.isOffscreen(ne,ee,pe,se),occluded:!1}}placeCollisionCircles(c,h,y,w,C,E,T,I,L,N,G,Q,oe,te,ie){const ne=[],ee=this.transform.elevation,pe=ee?ee.getAtTileOffsetFunc(ie,this.transform.center.lat,this.transform.worldSize,c.getProjection()):Ye=>[0,0,0],se=new p.pointGeometry(y.tileAnchorX,y.tileAnchorY),Ee=c.getProjection().projectTilePoint(y.tileAnchorX,y.tileAnchorY,ie.canonical),De=pe(se),be=[Ee.x+De[0],Ee.y+De[1],Ee.z+De[2]],Se="globe"===c.projection.name,Ce=this.projectAndGetPerspectiveRatio(T,[be[0],be[1],be[2]],ie,Se||!!ee||this.transform.pitch>0,c.getProjection()),{perspectiveRatio:Re}=Ce,He=(G?E/Re:E*Re)/p.ONE_EM,_t=ws(new p.pointGeometry(be[0],be[1]),I,be[2]).point,ze=Ce.signedDistanceFromCamera>0?xi(He,C,y.lineOffsetX*He,y.lineOffsetY*He,!1,_t,se,y,w,I,{},ee&&!G?pe:null,G&&!!ee,c.getProjection(),ie,G):null;let ot=!1,lt=!1,Pt=!0;if(ze&&!Ce.occluded){const Ye=.5*oe*Re+te,yt=new p.pointGeometry(-100,-100),dt=new p.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),It=new Wh,Ft=ze.first,Zt=ze.last;let fi=[];for(let Kt=Ft.path.length-1;Kt>=1;Kt--)fi.push(Ft.path[Kt]);for(let Kt=1;Kt<Zt.path.length;Kt++)fi.push(Zt.path[Kt]);const Pi=2.5*Ye;if(L){const Kt=fi.map(ee&&!Se?(Hi,Rn)=>{const br=pe(Rn<Ft.path.length-1?Ft.tilePath[Ft.path.length-1-Rn]:Zt.tilePath[Rn-Ft.path.length+2]);return Hi[2]=br[2],Qt(Hi,L)}:Hi=>Qt(Hi,L));fi=Kt.some(Hi=>Hi.signedDistanceFromCamera<=0)?[]:Kt.map(Hi=>Hi.point)}let ln=[];if(fi.length>0){const Kt=fi.map(ir=>new p.pointGeometry(ir[0],ir[1]));let Hi=1/0,Rn=-1/0,br=1/0,zr=-1/0;for(let ir=0;ir<Kt.length;ir++)Hi=Math.min(Hi,Kt[ir].x),br=Math.min(br,Kt[ir].y),Rn=Math.max(Rn,Kt[ir].x),zr=Math.max(zr,Kt[ir].y);ln=Hi>=yt.x&&Rn<=dt.x&&br>=yt.y&&zr<=dt.y?[Kt]:Rn<yt.x||Hi>dt.x||zr<yt.y||br>dt.y?[]:p.clipLine([Kt],yt.x,yt.y,dt.x,dt.y)}for(const Kt of ln){It.reset(Kt,.25*Ye);let Hi=0;Hi=It.length<=.5*Ye?1:Math.ceil(It.paddedLength/Pi)+1;for(let Rn=0;Rn<Hi;Rn++){const br=Rn/Math.max(Hi-1,1),zr=It.lerp(br),ir=zr.x+$n,Xo=zr.y+$n;ne.push(ir,Xo,Ye,0);const $s=ir-Ye,aa=Xo-Ye,Er=ir+Ye,Tr=Xo+Ye;if(Pt=Pt&&this.isOffscreen($s,aa,Er,Tr),lt=lt||this.isInsideGrid($s,aa,Er,Tr),!h&&this.grid.hitTestCircle(ir,Xo,Ye,Q)&&(ot=!0,!N))return{circles:[],offscreen:!1,collisionDetected:ot,occluded:!1}}}}return{circles:!N&&ot||!lt?[]:ne,offscreen:Pt,collisionDetected:ot,occluded:Ce.occluded}}queryRenderedSymbols(c){if(0===c.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const h=[];let y=1/0,w=1/0,C=-1/0,E=-1/0;for(const N of c){const G=new p.pointGeometry(N.x+$n,N.y+$n);y=Math.min(y,G.x),w=Math.min(w,G.y),C=Math.max(C,G.x),E=Math.max(E,G.y),h.push(G)}const T=this.grid.query(y,w,C,E).concat(this.ignoredGrid.query(y,w,C,E)),I={},L={};for(const N of T){const G=N.key;if(void 0===I[G.bucketInstanceId]&&(I[G.bucketInstanceId]={}),I[G.bucketInstanceId][G.featureIndex])continue;const Q=[new p.pointGeometry(N.x1,N.y1),new p.pointGeometry(N.x2,N.y1),new p.pointGeometry(N.x2,N.y2),new p.pointGeometry(N.x1,N.y2)];p.polygonIntersectsPolygon(h,Q)&&(I[G.bucketInstanceId][G.featureIndex]=!0,void 0===L[G.bucketInstanceId]&&(L[G.bucketInstanceId]=[]),L[G.bucketInstanceId].push(G.featureIndex))}return L}insertCollisionBox(c,h,y,w,C){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:w,collisionGroupID:C},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,h,y,w,C){const E=h?this.ignoredGrid:this.grid,T={bucketInstanceId:y,featureIndex:w,collisionGroupID:C};for(let I=0;I<c.length;I+=4)E.insertCircle(T,c[I],c[I+1],c[I+2])}projectAndGetPerspectiveRatio(c,h,y,w,C){const E=[h[0],h[1],h[2],1];let T=!1;if(h[2]||this.transform.pitch>0){p.transformMat4$1(E,E,c);const I="globe"===C.name;this.fogState&&y&&!I&&(T=function(L,N,G,Q,oe,te){const ie=te.calculateFogTileMatrix(oe),ne=[N,G,Q];return p.transformMat4(ne,ne,ie),Ai(L,ne,te.pitch,te._fov)}(this.fogState,h[0],h[1],h[2],y.toUnwrapped(),this.transform)>.9)}else Ro(E,E,c);return{point:new p.pointGeometry((E[0]/E[3]+1)/2*this.transform.width+$n,(-E[1]/E[3]+1)/2*this.transform.height+$n),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(C)/E[3]*.5,1.5),signedDistanceFromCamera:E[3],occluded:w&&E[2]>E[3]||T}}isOffscreen(c,h,y,w){return y<$n||c>=this.screenRightBoundary||w<$n||h>this.screenBottomBoundary}isInsideGrid(c,h,y,w){return y>=0&&c<this.gridRightBoundary&&w>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const c=p.identity([]);return p.translate(c,c,[-100,-100,0]),c}}function yo(m,c,h){const y=c.createTileMatrix(m,m.worldSize,h.toUnwrapped());return p.multiply(new Float32Array(16),m.projMatrix,y)}function Cs(m,c,h){if(c.projection.name===h.projection.name)return m.projMatrix;const y=h.clone();return y.setProjection(c.projection),yo(y,c.getProjection(),m)}function rs(m,c,h){return c.name===h.projection.name?m.projMatrix:yo(h,c,m)}class Yh{constructor(c,h,y,w){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?h:-h))):w&&y?1:0,this.placed=y}isHidden(){return 0===this.opacity&&!this.placed}}class Po{constructor(c,h,y,w,C,E=!1){this.text=new Yh(c?c.text:null,h,y,C),this.icon=new Yh(c?c.icon:null,h,w,C),this.clipped=E}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Cr{constructor(c,h,y,w=!1){this.text=c,this.icon=h,this.skipFade=y,this.clipped=w}}class $d{constructor(){this.invProjMatrix=p.create(),this.viewportMatrix=p.create(),this.circles=[]}}class Wu{constructor(c,h,y,w,C){this.bucketInstanceId=c,this.featureIndex=h,this.sourceLayerIndex=y,this.bucketIndex=w,this.tileID=C}}class Gd{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const h=++this.maxGroupID;this.collisionGroups[c]={ID:h,predicate:y=>y.collisionGroupID===h}}return this.collisionGroups[c]}}function co(m,c,h,y,w){const{horizontalAlign:C,verticalAlign:E}=p.getAnchorAlignment(m),T=-(C-.5)*c,I=-(E-.5)*h,L=p.evaluateVariableOffset(m,y);return new p.pointGeometry(T+L[0]*w,I+L[1]*w)}function qd(m,c,h,y,w){const C=new p.pointGeometry(m,c);return h&&C._rotate(y?w:-w),C}class Zu{constructor(c,h,y,w,C){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new sc(this.transform,C),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Gd(y),this.collisionCircleArrays={},this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,h,y,w){const C=y.getBucket(h),E=y.latestFeatureIndex;if(!C||!E||h.id!==C.layerIds[0])return;const T=C.layers[0].layout,I=y.collisionBoxArray,L=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),N=y.tileSize/p.EXTENT,G=y.tileID.toUnwrapped();this.transform.setProjection(C.projection);const Q=(oe=y.tileID,te=C.getProjection(),ie=this.transform,te.name===this.projection?ie.calculateProjMatrix(oe.toUnwrapped()):yo(ie,te,oe));var oe,te,ie;const ne="map"===T.get("text-pitch-alignment"),ee="map"===T.get("text-rotation-alignment");h.compileFilter();const pe=h.dynamicFilter(),se=h.dynamicFilterNeedsFeature(),Ee=this.transform.calculatePixelsToTileUnitsMatrix(y),De=Ji(Q,y.tileID.canonical,ne,ee,this.transform,C.getProjection(),Ee);let be=null;if(ne){const Re=Mn(Q,y.tileID.canonical,ne,ee,this.transform,C.getProjection(),Ee);be=p.multiply([],this.transform.labelPlaneMatrix,Re)}let Se=null;pe&&y.latestFeatureIndex&&(Se={unwrappedTileID:G,dynamicFilter:pe,dynamicFilterNeedsFeature:se,featureIndex:y.latestFeatureIndex}),this.retainedQueryData[C.bucketInstanceId]=new Wu(C.bucketInstanceId,E,C.sourceLayerIndex,C.index,y.tileID);const Ce={bucket:C,layout:T,posMatrix:Q,textLabelPlaneMatrix:De,labelToScreenMatrix:be,clippingData:Se,scale:L,textPixelRatio:N,holdingForFade:y.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:p.evaluateSizeForZoom(C.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:p.evaluateSizeForZoom(C.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(w)for(const Re of C.sortKeyRanges){const{sortKey:He,symbolInstanceStart:_t,symbolInstanceEnd:ze}=Re;c.push({sortKey:He,symbolInstanceStart:_t,symbolInstanceEnd:ze,parameters:Ce})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Ce})}attemptAnchorPlacement(c,h,y,w,C,E,T,I,L,N,G,Q,oe,te,ie,ne,ee,pe){const se=[Q.textOffset0,Q.textOffset1],Ee=co(c,y,w,se,C),De=this.collisionIndex.placeCollisionBox(te,C,h,qd(Ee.x,Ee.y,E,T,this.transform.angle),G,I,L,N.predicate);if((!ne||0!==this.collisionIndex.placeCollisionBox(te,te.getSymbolInstanceIconSize(pe,this.transform.zoom,oe),ne,qd(Ee.x,Ee.y,E,T,this.transform.angle),G,I,L,N.predicate).box.length)&&De.box.length>0){let be;return this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(be=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),this.variableOffsets[Q.crossTileID]={textOffset:se,width:y,height:w,anchor:c,textScale:C,prevAnchor:be},this.markUsedJustification(te,c,Q,ie),te.allowVerticalPlacement&&(this.markUsedOrientation(te,ie,Q),this.placedOrientations[Q.crossTileID]=ie),{shift:Ee,placedGlyphBoxes:De}}}placeLayerBucketPart(c,h,y,w){const{bucket:C,layout:E,posMatrix:T,textLabelPlaneMatrix:I,labelToScreenMatrix:L,clippingData:N,textPixelRatio:G,holdingForFade:Q,collisionBoxArray:oe,partiallyEvaluatedTextSize:te,partiallyEvaluatedIconSize:ie,collisionGroup:ne}=c.parameters,ee=E.get("text-optional"),pe=E.get("icon-optional"),se=E.get("text-allow-overlap"),Ee=E.get("icon-allow-overlap"),De="map"===E.get("text-rotation-alignment"),be="map"===E.get("text-pitch-alignment"),Se="none"!==E.get("icon-text-fit"),Ce="viewport-y"===E.get("symbol-z-order");this.transform.setProjection(C.projection);let Re=se&&(Ee||!C.hasIconData()||pe),He=Ee&&(se||!C.hasTextData()||ee);!C.collisionArrays&&oe&&C.deserializeCollisionBoxes(oe),y&&w&&C.updateCollisionDebugBuffers(this.transform.zoom,oe);const _t=(ze,ot,lt)=>{if(N){const Er={zoom:this.transform.zoom,pitch:this.transform.pitch};let Tr=null;if(N.dynamicFilterNeedsFeature){const cn=this.retainedQueryData[C.bucketInstanceId];Tr=N.featureIndex.loadFeature({featureIndex:ze.featureIndex,bucketIndex:cn.bucketIndex,sourceLayerIndex:cn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,N.dynamicFilter)(Er,Tr,this.retainedQueryData[C.bucketInstanceId].tileID.canonical,new p.pointGeometry(ze.tileAnchorX,ze.tileAnchorY),this.transform.calculateDistanceTileData(N.unwrappedTileID)))return this.placements[ze.crossTileID]=new Cr(!1,!1,!1,!0),void(h[ze.crossTileID]=!0)}if(h[ze.crossTileID])return;if(Q)return void(this.placements[ze.crossTileID]=new Cr(!1,!1,!1));let Pt=!1,Ye=!1,yt=!0,dt=!1,It=!1,Ft=null,Zt={box:null,offscreen:null,occluded:null},fi={box:null,offscreen:null,occluded:null},Pi=null,ln=null,Kt=null,Hi=0,Rn=0,br=0;lt.textFeatureIndex?Hi=lt.textFeatureIndex:ze.useRuntimeCollisionCircles&&(Hi=ze.featureIndex),lt.verticalTextFeatureIndex&&(Rn=lt.verticalTextFeatureIndex);const zr=Er=>{Er.tileID=this.retainedQueryData[C.bucketInstanceId].tileID,(this.transform.elevation||Er.elevation)&&(Er.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[C.bucketInstanceId].tileID,Er.tileAnchorX,Er.tileAnchorY):0)},ir=lt.textBox;if(ir){zr(ir);const Er=cn=>{let Pr=p.WritingMode.horizontal;if(C.allowVerticalPlacement&&!cn&&this.prevPlacement){const ds=this.prevPlacement.placedOrientations[ze.crossTileID];ds&&(this.placedOrientations[ze.crossTileID]=ds,Pr=ds,this.markUsedOrientation(C,Pr,ze))}return Pr},Tr=(cn,Pr)=>{if(C.allowVerticalPlacement&&ze.numVerticalGlyphVertices>0&&lt.verticalTextBox){for(const ds of C.writingModes)if(ds===p.WritingMode.vertical?(Zt=Pr(),fi=Zt):Zt=cn(),Zt&&Zt.box&&Zt.box.length)break}else Zt=cn()};if(E.get("text-variable-anchor")){let cn=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ze.crossTileID]){const Yt=this.prevPlacement.variableOffsets[ze.crossTileID];cn.indexOf(Yt.anchor)>0&&(cn=cn.filter(Lo=>Lo!==Yt.anchor),cn.unshift(Yt.anchor))}const Pr=(Yt,Lo,ud)=>{const us=C.getSymbolInstanceTextSize(te,ze,this.transform.zoom,ot),Vr=(Yt.x2-Yt.x1)*us+2*Yt.padding,ba=(Yt.y2-Yt.y1)*us+2*Yt.padding,xa=Se&&!Ee?Lo:null;xa&&zr(xa);let fo={box:[],offscreen:!1,occluded:!1};const bc=se?2*cn.length:cn.length;for(let ll=0;ll<bc;++ll){const cl=this.attemptAnchorPlacement(cn[ll%cn.length],Yt,Vr,ba,us,De,be,G,T,ne,ll>=cn.length,ze,ot,C,ud,xa,te,ie);if(cl&&(fo=cl.placedGlyphBoxes,fo&&fo.box&&fo.box.length)){Pt=!0,Ft=cl.shift;break}}return fo};Tr(()=>Pr(ir,lt.iconBox,p.WritingMode.horizontal),()=>{const Yt=lt.verticalTextBox;return Yt&&zr(Yt),C.allowVerticalPlacement&&!(Zt&&Zt.box&&Zt.box.length)&&ze.numVerticalGlyphVertices>0&&Yt?Pr(Yt,lt.verticalIconBox,p.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Zt&&(Pt=Zt.box,yt=Zt.offscreen,dt=Zt.occluded);const ds=Er(Zt&&Zt.box);if(!Pt&&this.prevPlacement){const Yt=this.prevPlacement.variableOffsets[ze.crossTileID];Yt&&(this.variableOffsets[ze.crossTileID]=Yt,this.markUsedJustification(C,Yt.anchor,ze,ds))}}else{const cn=(Pr,ds)=>{const Yt=C.getSymbolInstanceTextSize(te,ze,this.transform.zoom,ot),Lo=this.collisionIndex.placeCollisionBox(C,Yt,Pr,new p.pointGeometry(0,0),se,G,T,ne.predicate);return Lo&&Lo.box&&Lo.box.length&&(this.markUsedOrientation(C,ds,ze),this.placedOrientations[ze.crossTileID]=ds),Lo};Tr(()=>cn(ir,p.WritingMode.horizontal),()=>{const Pr=lt.verticalTextBox;return C.allowVerticalPlacement&&ze.numVerticalGlyphVertices>0&&Pr?(zr(Pr),cn(Pr,p.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Er(Zt&&Zt.box&&Zt.box.length)}}if(Pi=Zt,Pt=Pi&&Pi.box&&Pi.box.length>0,yt=Pi&&Pi.offscreen,dt=Pi&&Pi.occluded,ze.useRuntimeCollisionCircles){const Er=C.text.placedSymbolArray.get(ze.centerJustifiedTextSymbolIndex>=0?ze.centerJustifiedTextSymbolIndex:ze.verticalPlacedTextSymbolIndex),Tr=p.evaluateSizeForFeature(C.textSizeData,te,Er),cn=E.get("text-padding");ln=this.collisionIndex.placeCollisionCircles(C,se,Er,C.lineVertexArray,C.glyphOffsetArray,Tr,T,I,L,y,be,ne.predicate,ze.collisionCircleDiameter*Tr/p.ONE_EM,cn,this.retainedQueryData[C.bucketInstanceId].tileID),Pt=se||ln.circles.length>0&&!ln.collisionDetected,yt=yt&&ln.offscreen,dt=ln.occluded}if(lt.iconFeatureIndex&&(br=lt.iconFeatureIndex),lt.iconBox){const Er=Tr=>{zr(Tr);const cn=Se&&Ft?qd(Ft.x,Ft.y,De,be,this.transform.angle):new p.pointGeometry(0,0),Pr=C.getSymbolInstanceIconSize(ie,this.transform.zoom,ot);return this.collisionIndex.placeCollisionBox(C,Pr,Tr,cn,Ee,G,T,ne.predicate)};fi&&fi.box&&fi.box.length&&lt.verticalIconBox?(Kt=Er(lt.verticalIconBox),Ye=Kt.box.length>0):(Kt=Er(lt.iconBox),Ye=Kt.box.length>0),yt=yt&&Kt.offscreen,It=Kt.occluded}const Xo=ee||0===ze.numHorizontalGlyphVertices&&0===ze.numVerticalGlyphVertices,$s=pe||0===ze.numIconVertices;if(Xo||$s?$s?Xo||(Ye=Ye&&Pt):Pt=Ye&&Pt:Ye=Pt=Ye&&Pt,Pt&&Pi&&Pi.box&&this.collisionIndex.insertCollisionBox(Pi.box,E.get("text-ignore-placement"),C.bucketInstanceId,fi&&fi.box&&Rn?Rn:Hi,ne.ID),Ye&&Kt&&this.collisionIndex.insertCollisionBox(Kt.box,E.get("icon-ignore-placement"),C.bucketInstanceId,br,ne.ID),ln&&(Pt&&this.collisionIndex.insertCollisionCircles(ln.circles,E.get("text-ignore-placement"),C.bucketInstanceId,Hi,ne.ID),y)){const Er=C.bucketInstanceId;let Tr=this.collisionCircleArrays[Er];void 0===Tr&&(Tr=this.collisionCircleArrays[Er]=new $d);for(let cn=0;cn<ln.circles.length;cn+=4)Tr.circles.push(ln.circles[cn+0]),Tr.circles.push(ln.circles[cn+1]),Tr.circles.push(ln.circles[cn+2]),Tr.circles.push(ln.collisionDetected?1:0)}const aa="globe"!==C.projection.name;Re=Re&&(aa||!dt),He=He&&(aa||!It),this.placements[ze.crossTileID]=new Cr(Pt||Re,Ye||He,yt||C.justReloaded),h[ze.crossTileID]=!0};if(Ce){const ze=C.getSortedSymbolIndexes(this.transform.angle);for(let ot=ze.length-1;ot>=0;--ot){const lt=ze[ot];_t(C.symbolInstances.get(lt),lt,C.collisionArrays[lt])}}else for(let ze=c.symbolInstanceStart;ze<c.symbolInstanceEnd;ze++)_t(C.symbolInstances.get(ze),ze,C.collisionArrays[ze]);if(y&&C.bucketInstanceId in this.collisionCircleArrays){const ze=this.collisionCircleArrays[C.bucketInstanceId];p.invert(ze.invProjMatrix,T),ze.viewportMatrix=this.collisionIndex.getViewportMatrix()}C.justReloaded=!1}markUsedJustification(c,h,y,w){let C;C=w===p.WritingMode.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[p.getAnchorJustification(h)];const E=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const T of E)T>=0&&(c.text.placedSymbolArray.get(T).crossTileID=C>=0&&T!==C?0:y.crossTileID)}markUsedOrientation(c,h,y){const w=h===p.WritingMode.horizontal||h===p.WritingMode.horizontalOnly?h:0,C=h===p.WritingMode.vertical?h:0,E=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const T of E)c.text.placedSymbolArray.get(T).placedOrientation=w;y.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=C)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let y=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const w=h?h.symbolFadeChange(c):1,C=h?h.opacities:{},E=h?h.variableOffsets:{},T=h?h.placedOrientations:{};for(const I in this.placements){const L=this.placements[I],N=C[I];N?(this.opacities[I]=new Po(N,w,L.text,L.icon,null,L.clipped),y=y||L.text!==N.text.placed||L.icon!==N.icon.placed):(this.opacities[I]=new Po(null,w,L.text,L.icon,L.skipFade,L.clipped),y=y||L.text||L.icon)}for(const I in C){const L=C[I];if(!this.opacities[I]){const N=new Po(L,w,!1,!1);N.isHidden()||(this.opacities[I]=N,y=y||L.text.placed||L.icon.placed)}}for(const I in E)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=E[I]);for(const I in T)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=T[I]);y?this.lastPlacementChangeTime=c:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:c)}updateLayerOpacities(c,h){const y={};for(const w of h){const C=w.getBucket(c);C&&w.latestFeatureIndex&&c.id===C.layerIds[0]&&this.updateBucketOpacities(C,y,w.collisionBoxArray)}}updateBucketOpacities(c,h,y){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const w=c.layers[0].layout,C=!!c.layers[0].dynamicFilter(),E=new Po(null,0,!1,!1,!0),T=w.get("text-allow-overlap"),I=w.get("icon-allow-overlap"),L=w.get("text-variable-anchor"),N="map"===w.get("text-rotation-alignment"),G="map"===w.get("text-pitch-alignment"),Q="none"!==w.get("icon-text-fit"),oe=new Po(null,0,T&&(I||!c.hasIconData()||w.get("icon-optional")),I&&(T||!c.hasTextData()||w.get("text-optional")),!0);!c.collisionArrays&&y&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(y);const te=(ne,ee,pe)=>{for(let se=0;se<ee/4;se++)ne.opacityVertexArray.emplaceBack(pe)};let ie=0;for(let ne=0;ne<c.symbolInstances.length;ne++){const ee=c.symbolInstances.get(ne),{numHorizontalGlyphVertices:pe,numVerticalGlyphVertices:se,crossTileID:Ee}=ee;let De=this.opacities[Ee];h[Ee]?De=E:De||(De=oe,this.opacities[Ee]=De),h[Ee]=!0;const be=pe>0||se>0,Se=ee.numIconVertices>0,Ce=this.placedOrientations[ee.crossTileID],Re=Ce===p.WritingMode.vertical,He=Ce===p.WritingMode.horizontal||Ce===p.WritingMode.horizontalOnly;if(!be&&!Se||De.isHidden()||ie++,be){const _t=jt(De.text);te(c.text,pe,Re?os:_t),te(c.text,se,He?os:_t);const ze=De.text.isHidden();[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach(Pt=>{Pt>=0&&(c.text.placedSymbolArray.get(Pt).hidden=ze||Re?1:0)}),ee.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(ee.verticalPlacedTextSymbolIndex).hidden=ze||He?1:0);const ot=this.variableOffsets[ee.crossTileID];ot&&this.markUsedJustification(c,ot.anchor,ee,Ce);const lt=this.placedOrientations[ee.crossTileID];lt&&(this.markUsedJustification(c,"left",ee,lt),this.markUsedOrientation(c,lt,ee))}if(Se){const _t=jt(De.icon);ee.placedIconSymbolIndex>=0&&(te(c.icon,ee.numIconVertices,Re?os:_t),c.icon.placedSymbolArray.get(ee.placedIconSymbolIndex).hidden=De.icon.isHidden()),ee.verticalPlacedIconSymbolIndex>=0&&(te(c.icon,ee.numVerticalIconVertices,He?os:_t),c.icon.placedSymbolArray.get(ee.verticalPlacedIconSymbolIndex).hidden=De.icon.isHidden())}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const _t=c.collisionArrays[ne];if(_t){let ze=new p.pointGeometry(0,0),ot=!0;if(_t.textBox||_t.verticalTextBox){if(L){const Pt=this.variableOffsets[Ee];Pt?(ze=co(Pt.anchor,Pt.width,Pt.height,Pt.textOffset,Pt.textScale),N&&ze._rotate(G?this.transform.angle:-this.transform.angle)):ot=!1}C&&(ot=!De.clipped),_t.textBox&&ta(c.textCollisionBox.collisionVertexArray,De.text.placed,!ot||Re,ze.x,ze.y),_t.verticalTextBox&&ta(c.textCollisionBox.collisionVertexArray,De.text.placed,!ot||He,ze.x,ze.y)}const lt=ot&&Boolean(!He&&_t.verticalIconBox);_t.iconBox&&ta(c.iconCollisionBox.collisionVertexArray,De.icon.placed,lt,Q?ze.x:0,Q?ze.y:0),_t.verticalIconBox&&ta(c.iconCollisionBox.collisionVertexArray,De.icon.placed,!lt,Q?ze.x:0,Q?ze.y:0)}}}if(c.fullyClipped=0===ie,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const ne=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=ne.invProjMatrix,c.placementViewportMatrix=ne.viewportMatrix,c.collisionCircleArray=ne.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return 0===this.fadeDuration?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,h){const y=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*y>c}setStale(){this.stale=!0}}function ta(m,c,h,y,w){m.emplaceBack(c?1:0,h?1:0,y||0,w||0),m.emplaceBack(c?1:0,h?1:0,y||0,w||0),m.emplaceBack(c?1:0,h?1:0,y||0,w||0),m.emplaceBack(c?1:0,h?1:0,y||0,w||0)}const vo=Math.pow(2,25),jn=Math.pow(2,24),Um=Math.pow(2,17),Xh=Math.pow(2,16),ac=Math.pow(2,9),Tt=Math.pow(2,8),Wd=Math.pow(2,1);function jt(m){if(0===m.opacity&&!m.placed)return 0;if(1===m.opacity&&m.placed)return 4294967295;const c=m.placed?1:0,h=Math.floor(127*m.opacity);return h*vo+c*jn+h*Um+c*Xh+h*ac+c*Tt+h*Wd+c}const os=0;class Zd{constructor(c){this._sortAcrossTiles="viewport-y"!==c.layout.get("symbol-z-order")&&void 0!==c.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,h,y,w,C){const E=this._bucketParts;for(;this._currentTileIndex<c.length;)if(h.getBucketParts(E,w,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((T,I)=>T.sortKey-I.sortKey));this._currentPartIndex<E.length;){const T=E[this._currentPartIndex];if(h.placeLayerBucketPart(T,this._seenCrossTileIDs,y,0===T.symbolInstanceStart),this._currentPartIndex++,C())return!0}return!1}}class Ms{constructor(c,h,y,w,C,E,T,I){this.placement=new Zu(c,C,E,T,I),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(c,h,y){const w=p.exported.now(),C=()=>{const E=p.exported.now()-w;return!this._forceFullPlacement&&E>2};for(;this._currentPlacementIndex>=0;){const E=h[c[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if("symbol"===E.type&&(!E.minzoom||E.minzoom<=T)&&(!E.maxzoom||E.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Zd(E)),this._inProgressLayer.continuePlacement(y[E.source],this.placement,this._showCollisionBoxes,E,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const Yu=512/p.EXTENT/2;class Yd{constructor(c,h,y){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=y;for(let w=0;w<h.length;w++){const C=h.get(w),E=C.key;this.indexedSymbolInstances[E]||(this.indexedSymbolInstances[E]=[]),this.indexedSymbolInstances[E].push({crossTileID:C.crossTileID,coord:this.getScaledCoordinates(C,c)})}}getScaledCoordinates(c,h){const y=Yu/Math.pow(2,h.canonical.z-this.tileID.canonical.z);return{x:Math.floor((h.canonical.x*p.EXTENT+c.tileAnchorX)*y),y:Math.floor((h.canonical.y*p.EXTENT+c.tileAnchorY)*y)}}findMatches(c,h,y){const w=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let C=0;C<c.length;C++){const E=c.get(C);if(E.crossTileID)continue;const T=this.indexedSymbolInstances[E.key];if(!T)continue;const I=this.getScaledCoordinates(E,h);for(const L of T)if(Math.abs(L.coord.x-I.x)<=w&&Math.abs(L.coord.y-I.y)<=w&&!y[L.crossTileID]){y[L.crossTileID]=!0,E.crossTileID=L.crossTileID;break}}}}class Kh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ed{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const h=Math.round((c-this.lng)/360);if(0!==h)for(const y in this.indexes){const w=this.indexes[y],C={};for(const E in w){const T=w[E];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+h),C[T.tileID.key]=T}this.indexes[y]=C}this.lng=c}addBucket(c,h,y){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let C=0;C<h.symbolInstances.length;C++)h.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const w=this.usedCrossTileIDs[c.overscaledZ];for(const C in this.indexes){const E=this.indexes[C];if(Number(C)>c.overscaledZ)for(const T in E){const I=E[T];I.tileID.isChildOf(c)&&I.findMatches(h.symbolInstances,c,w)}else{const T=E[c.scaledTo(Number(C)).key];T&&T.findMatches(h.symbolInstances,c,w)}}for(let C=0;C<h.symbolInstances.length;C++){const E=h.symbolInstances.get(C);E.crossTileID||(E.crossTileID=y.generate(),w[E.crossTileID]=!0)}return void 0===this.indexes[c.overscaledZ]&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Yd(c,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(c,h){for(const y in h.indexedSymbolInstances)for(const w of h.indexedSymbolInstances[y])delete this.usedCrossTileIDs[c][w.crossTileID]}removeStaleBuckets(c){let h=!1;for(const y in this.indexes){const w=this.indexes[y];for(const C in w)c[w[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,w[C]),delete w[C],h=!0)}return h}}class vl{constructor(){this.layerIndexes={},this.crossTileIDs=new Kh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,h,y,w){let C=this.layerIndexes[c.id];void 0===C&&(C=this.layerIndexes[c.id]=new ed);let E=!1;const T={};"globe"!==w.name&&C.handleWrapJump(y);for(const I of h){const L=I.getBucket(c);L&&c.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),C.addBucket(I.tileID,L,this.crossTileIDs)&&(E=!0),T[L.bucketInstanceId]=!0)}return C.removeStaleBuckets(T)&&(E=!0),E}pruneUnusedLayers(c){const h={};c.forEach(y=>{h[y]=!0});for(const y in this.layerIndexes)h[y]||delete this.layerIndexes[y]}}const lc=(m,c)=>p.emitValidationErrors(m,c&&c.filter(h=>"source.canvas"!==h.identifier)),Qh=p.pick(mi,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),zi=p.pick(mi,["setCenter","setZoom","setBearing","setPitch"]),Xd={version:8,layers:[],sources:{}},cf={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Br extends p.Evented{constructor(c,h={}){super(),this.map=c,this.dispatcher=new so(In(),this),this.imageManager=new Ni,this.imageManager.setEventedParent(this),this.glyphManager=new p.GlyphManager(c._requestManager,h.localFontFamily?p.LocalGlyphMode.all:h.localIdeographFontFamily?p.LocalGlyphMode.ideographs:p.LocalGlyphMode.none,h.localFontFamily||h.localIdeographFontFamily),this.lineAtlas=new p.LineAtlas(256,512),this.crossTileSymbolIndex=new vl,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new p.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",p.getReferrer());const y=this;this._rtlTextPluginCallback=Br.registerForPluginStateChange(w=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},(C,E)=>{if(p.triggerPluginCompletionEvent(C),E&&E.every(T=>T))for(const T in y._sourceCaches){const I=y._sourceCaches[T],L=I.getSource().type;"vector"!==L&&"geojson"!==L||I.reload()}})}),this.on("data",w=>{if("source"!==w.dataType||"metadata"!==w.sourceDataType)return;const C=this.getSource(w.sourceId);if(C&&C.vectorLayerIds)for(const E in this._layers){const T=this._layers[E];T.source===C.id&&this._validateLayer(T)}})}loadURL(c,h={}){this.fire(new p.Event("dataloading",{dataType:"style"}));const y="boolean"==typeof h.validate?h.validate:!p.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,h.accessToken);const w=this.map._requestManager.transformRequest(c,p.ResourceType.Style);this._request=p.getJSON(w,(C,E)=>{this._request=null,C?this.fire(new p.ErrorEvent(C)):E&&this._load(E,y)})}loadJSON(c,h={}){this.fire(new p.Event("dataloading",{dataType:"style"})),this._request=p.exported.frame(()=>{this._request=null,this._load(c,!1!==h.validate)})}loadEmpty(){this.fire(new p.Event("dataloading",{dataType:"style"})),this._load(Xd,!1)}_updateLayerCount(c,h){const y=h?1:-1;c.is3D()&&(this._num3DLayers+=y),"circle"===c.type&&(this._numCircleLayers+=y),"symbol"===c.type&&(this._numSymbolLayers+=y)}_load(c,h){if(h&&lc(this,p.validateStyle(c)))return;this._loaded=!0,this.stylesheet=p.clone$1(c),this._updateMapProjection();for(const w in c.sources)this.addSource(w,c.sources[w],{validate:!1});this._changed=!1,c.sprite?this._loadSprite(c.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(c.glyphs);const y=Hn(this.stylesheet.layers);this._order=y.map(w=>w.id),this._layers={},this._serializedLayers={};for(let w of y)w=p.createStyleLayer(w),w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ii(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new p.Event("data",{dataType:"style"})),this.fire(new p.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(c){this._spriteRequest=function(h,y,w){let C,E,T;const I=p.exported.devicePixelRatio>1?"@2x":"";let L=p.getJSON(y.transformRequest(y.normalizeSpriteURL(h,I,".json"),p.ResourceType.SpriteJSON),(Q,oe)=>{L=null,T||(T=Q,C=oe,G())}),N=p.getImage(y.transformRequest(y.normalizeSpriteURL(h,I,".png"),p.ResourceType.SpriteImage),(Q,oe)=>{N=null,T||(T=Q,E=oe,G())});function G(){if(T)w(T);else if(C&&E){const Q=p.exported.getImageData(E),oe={};for(const te in C){const{width:ie,height:ne,x:ee,y:pe,sdf:se,pixelRatio:Ee,stretchX:De,stretchY:be,content:Se}=C[te],Ce=new p.RGBAImage({width:ie,height:ne});p.RGBAImage.copy(Q,Ce,{x:ee,y:pe},{x:0,y:0},{width:ie,height:ne}),oe[te]={data:Ce,pixelRatio:Ee,sdf:se,stretchX:De,stretchY:be,content:Se}}w(null,oe)}}return{cancel(){L&&(L.cancel(),L=null),N&&(N.cancel(),N=null)}}}(c,this.map._requestManager,(h,y)=>{if(this._spriteRequest=null,h)this.fire(new p.ErrorEvent(h));else if(y)for(const w in y)this.imageManager.addImage(w,y[w]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new p.Event("data",{dataType:"style"}))})}_validateLayer(c){const h=this.getSource(c.source);if(!h)return;const y=c.sourceLayer;y&&("geojson"===h.type||h.vectorLayerIds&&-1===h.vectorLayerIds.indexOf(y))&&this.fire(new p.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${h.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(c){const h=[];for(const y of c){const w=this._layers[y];"custom"!==w.type&&h.push(w.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(c){return!!this.terrain&&cf[c.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(c){if(!this._loaded)return;const h=this._changed;if(this._changed){const w=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(w.length||C.length)&&this._updateWorkerLayers(w,C);for(const E in this._updatedSources){const T=this._updatedSources[E];"reload"===T?this._reloadSource(E):"clear"===T&&this._clearSource(E)}this._updateTilesForChangedImages();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(c);this.light.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this._resetUpdates()}const y={};for(const w in this._sourceCaches){const C=this._sourceCaches[w];y[w]=C.used,C.used=!1}for(const w of this._order){const C=this._layers[w];if(C.recalculate(c,this._availableImages),!C.isHidden(c.zoom)){const T=this._getLayerSourceCache(C);T&&(T.used=!0)}const E=this.map.painter;if(E){const T=C.getProgramIds();if(!T)continue;const I=C.getProgramConfiguration(c.zoom);for(const L of T)E.useProgram(L,I)}}for(const w in y){const C=this._sourceCaches[w];y[w]!==C.used&&C.getSource().fire(new p.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:C.getSource().id}))}this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),h&&this.fire(new p.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateWorkerLayers(c,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(c){if(this._checkLoaded(),lc(this,p.validateStyle(c)))return!1;(c=p.clone$1(c)).layers=Hn(c.layers);const h=function(w,C){if(!w)return[{command:mi.setStyle,args:[C]}];let E=[];try{if(!ce(w.version,C.version))return[{command:mi.setStyle,args:[C]}];ce(w.center,C.center)||E.push({command:mi.setCenter,args:[C.center]}),ce(w.zoom,C.zoom)||E.push({command:mi.setZoom,args:[C.zoom]}),ce(w.bearing,C.bearing)||E.push({command:mi.setBearing,args:[C.bearing]}),ce(w.pitch,C.pitch)||E.push({command:mi.setPitch,args:[C.pitch]}),ce(w.sprite,C.sprite)||E.push({command:mi.setSprite,args:[C.sprite]}),ce(w.glyphs,C.glyphs)||E.push({command:mi.setGlyphs,args:[C.glyphs]}),ce(w.transition,C.transition)||E.push({command:mi.setTransition,args:[C.transition]}),ce(w.light,C.light)||E.push({command:mi.setLight,args:[C.light]}),ce(w.fog,C.fog)||E.push({command:mi.setFog,args:[C.fog]}),ce(w.projection,C.projection)||E.push({command:mi.setProjection,args:[C.projection]});const T={},I=[];!function(G,Q,oe,te){let ie;for(ie in Q=Q||{},G=G||{})G.hasOwnProperty(ie)&&(Q.hasOwnProperty(ie)||ns(ie,oe,te));for(ie in Q)Q.hasOwnProperty(ie)&&(G.hasOwnProperty(ie)?ce(G[ie],Q[ie])||("geojson"===G[ie].type&&"geojson"===Q[ie].type&&el(G,Q,ie)?oe.push({command:mi.setGeoJSONSourceData,args:[ie,Q[ie].data]}):Rr(ie,Q,oe,te)):Qe(ie,Q,oe))}(w.sources,C.sources,I,T);const L=[];w.layers&&w.layers.forEach(G=>{G.source&&T[G.source]?E.push({command:mi.removeLayer,args:[G.id]}):L.push(G)});let N=w.terrain;N&&T[N.source]&&(E.push({command:mi.setTerrain,args:[void 0]}),N=void 0),E=E.concat(I),ce(N,C.terrain)||E.push({command:mi.setTerrain,args:[C.terrain]}),function(G,Q,oe){Q=Q||[];const te=(G=G||[]).map(xs),ie=Q.map(xs),ne=G.reduce(Hd,{}),ee=Q.reduce(Hd,{}),pe=te.slice(),se=Object.create(null);let Ee,De,be,Se,Ce,Re,He;for(Ee=0,De=0;Ee<te.length;Ee++)be=te[Ee],ee.hasOwnProperty(be)?De++:(oe.push({command:mi.removeLayer,args:[be]}),pe.splice(pe.indexOf(be,De),1));for(Ee=0,De=0;Ee<ie.length;Ee++)be=ie[ie.length-1-Ee],pe[pe.length-1-Ee]!==be&&(ne.hasOwnProperty(be)?(oe.push({command:mi.removeLayer,args:[be]}),pe.splice(pe.lastIndexOf(be,pe.length-De),1)):De++,Re=pe[pe.length-Ee],oe.push({command:mi.addLayer,args:[ee[be],Re]}),pe.splice(pe.length-Ee,0,be),se[be]=!0);for(Ee=0;Ee<ie.length;Ee++)if(be=ie[Ee],Se=ne[be],Ce=ee[be],!se[be]&&!ce(Se,Ce))if(ce(Se.source,Ce.source)&&ce(Se["source-layer"],Ce["source-layer"])&&ce(Se.type,Ce.type)){for(He in Ud(Se.layout,Ce.layout,oe,be,null,mi.setLayoutProperty),Ud(Se.paint,Ce.paint,oe,be,null,mi.setPaintProperty),ce(Se.filter,Ce.filter)||oe.push({command:mi.setFilter,args:[be,Ce.filter]}),ce(Se.minzoom,Ce.minzoom)&&ce(Se.maxzoom,Ce.maxzoom)||oe.push({command:mi.setLayerZoomRange,args:[be,Ce.minzoom,Ce.maxzoom]}),Se)Se.hasOwnProperty(He)&&"layout"!==He&&"paint"!==He&&"filter"!==He&&"metadata"!==He&&"minzoom"!==He&&"maxzoom"!==He&&(0===He.indexOf("paint.")?Ud(Se[He],Ce[He],oe,be,He.slice(6),mi.setPaintProperty):ce(Se[He],Ce[He])||oe.push({command:mi.setLayerProperty,args:[be,He,Ce[He]]}));for(He in Ce)Ce.hasOwnProperty(He)&&!Se.hasOwnProperty(He)&&"layout"!==He&&"paint"!==He&&"filter"!==He&&"metadata"!==He&&"minzoom"!==He&&"maxzoom"!==He&&(0===He.indexOf("paint.")?Ud(Se[He],Ce[He],oe,be,He.slice(6),mi.setPaintProperty):ce(Se[He],Ce[He])||oe.push({command:mi.setLayerProperty,args:[be,He,Ce[He]]}))}else oe.push({command:mi.removeLayer,args:[be]}),Re=pe[pe.lastIndexOf(be)+1],oe.push({command:mi.addLayer,args:[Ce,Re]})}(L,C.layers,E)}catch(T){console.warn("Unable to compute style diff:",T),E=[{command:mi.setStyle,args:[C]}]}return E}(this.serialize(),c).filter(w=>!(w.command in zi));if(0===h.length)return!1;const y=h.filter(w=>!(w.command in Qh));if(y.length>0)throw new Error(`Unimplemented: ${y.map(w=>w.command).join(", ")}.`);return h.forEach(w=>{"setTransition"!==w.command&&"setProjection"!==w.command&&this[w.command].apply(this,w.args)}),this.stylesheet=c,this._updateMapProjection(),!0}addImage(c,h){return this.getImage(c)?this.fire(new p.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(c,h),this._afterImageUpdated(c),this)}updateImage(c,h){this.imageManager.updateImage(c,h)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c),this._afterImageUpdated(c),this):this.fire(new p.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new p.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(c,h,y={}){if(this._checkLoaded(),void 0!==this.getSource(c))throw new Error("There is already a source with this ID");if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(p.validateSource,`sources.${c}`,h,null,y))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const w=je(c,h,this.dispatcher,this);w.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(c),source:w.serialize(),sourceId:c}));const C=E=>{const T=(E?"symbol:":"other:")+c,I=this._sourceCaches[T]=new p.SourceCache(T,w,E);(E?this._symbolSourceCaches:this._otherSourceCaches)[c]=I,I.style=this,I.onAdd(this.map)};C(!1),"vector"!==h.type&&"geojson"!==h.type||C(!0),w.onAdd&&w.onAdd(this.map),this._changed=!0}removeSource(c){this._checkLoaded();const h=this.getSource(c);if(!h)throw new Error("There is no source with this ID");for(const w in this._layers)if(this._layers[w].source===c)return this.fire(new p.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${w}" is using it.`)));if(this.terrain&&this.terrain.get().source===c)return this.fire(new p.ErrorEvent(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(c);for(const w of y)delete this._sourceCaches[w.id],delete this._updatedSources[w.id],w.fire(new p.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:w.getSource().id})),w.setEventedParent(null),w.clearTiles();return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(c,h){this._checkLoaded(),this.getSource(c).setData(h),this._changed=!0}getSource(c){const h=this._getSourceCache(c);return h&&h.getSource()}addLayer(c,h,y={}){this._checkLoaded();const w=c.id;if(this.getLayer(w))return void this.fire(new p.ErrorEvent(new Error(`Layer with id "${w}" already exists on this map`)));let C;if("custom"===c.type){if(lc(this,p.validateCustomStyleLayer(c)))return;C=p.createStyleLayer(c)}else{if("object"==typeof c.source&&(this.addSource(w,c.source),c=p.clone$1(c),c=p.extend(c,{source:w})),this._validate(p.validateLayer,`layers.${w}`,c,{arrayIndex:-1},y))return;C=p.createStyleLayer(c),this._validateLayer(C),C.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[C.id]=C.serialize(),this._updateLayerCount(C,!0)}const E=h?this._order.indexOf(h):this._order.length;if(h&&-1===E)return void this.fire(new p.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`)));this._order.splice(E,0,w),this._layerOrderChanged=!0,this._layers[w]=C;const T=this._getLayerSourceCache(C);if(this._removedLayers[w]&&C.source&&T&&"custom"!==C.type){const I=this._removedLayers[w];delete this._removedLayers[w],I.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",T.pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(c,h){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new p.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===h)return;const y=this._order.indexOf(c);this._order.splice(y,1);const w=h?this._order.indexOf(h):this._order.length;h&&-1===w?this.fire(new p.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`))):(this._order.splice(w,0,c),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(c){this._checkLoaded();const h=this._layers[c];if(!h)return void this.fire(new p.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be removed.`)));h.setEventedParent(null),this._updateLayerCount(h,!1);const y=this._order.indexOf(c);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=h,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],h.onRemove&&h.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(c){return this._layers[c]}hasLayer(c){return c in this._layers}hasLayerType(c){for(const h in this._layers)if(this._layers[h].type===c)return!0;return!1}setLayerZoomRange(c,h,y){this._checkLoaded();const w=this.getLayer(c);w?w.minzoom===h&&w.maxzoom===y||(null!=h&&(w.minzoom=h),null!=y&&(w.maxzoom=y),this._updateLayer(w)):this.fire(new p.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(c,h,y={}){this._checkLoaded();const w=this.getLayer(c);if(w){if(!ce(w.filter,h))return null==h?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(p.validateFilter,`layers.${w.id}.filter`,h,{layerType:w.type},y)||(w.filter=p.clone$1(h),this._updateLayer(w)))}else this.fire(new p.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be filtered.`)))}getFilter(c){const h=this.getLayer(c);return h&&p.clone$1(h.filter)}setLayoutProperty(c,h,y,w={}){this._checkLoaded();const C=this.getLayer(c);C?ce(C.getLayoutProperty(h),y)||(C.setLayoutProperty(h,y,w),this._updateLayer(C)):this.fire(new p.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(c,h){const y=this.getLayer(c);if(y)return y.getLayoutProperty(h);this.fire(new p.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style.`)))}setPaintProperty(c,h,y,w={}){this._checkLoaded();const C=this.getLayer(c);C?ce(C.getPaintProperty(h),y)||(C.setPaintProperty(h,y,w)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new p.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(c,h){const y=this.getLayer(c);return y&&y.getPaintProperty(h)}setFeatureState(c,h){this._checkLoaded();const y=c.source,w=c.sourceLayer,C=this.getSource(y);if(!C)return void this.fire(new p.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const E=C.type;if("geojson"===E&&w)return void this.fire(new p.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===E&&!w)return void this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===c.id&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided.")));const T=this._getSourceCaches(y);for(const I of T)I.setFeatureState(w,c.id,h)}removeFeatureState(c,h){this._checkLoaded();const y=c.source,w=this.getSource(y);if(!w)return void this.fire(new p.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const C=w.type,E="vector"===C?c.sourceLayer:void 0;if("vector"===C&&!E)return void this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&"string"!=typeof c.id&&"number"!=typeof c.id)return void this.fire(new p.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const T=this._getSourceCaches(y);for(const I of T)I.removeFeatureState(E,c.id,h)}getFeatureState(c){this._checkLoaded();const h=c.source,y=c.sourceLayer,w=this.getSource(h);if(w){if("vector"!==w.type||y)return void 0===c.id&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(h)[0].getFeatureState(y,c.id);this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new p.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return p.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const c={};for(const h in this._sourceCaches){const y=this._sourceCaches[h].getSource();c[y.id]||(c[y.id]=y.serialize())}return p.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:c,layers:this._serializeLayers(this._order)},h=>void 0!==h)}_updateLayer(c){this._updatedLayers[c.id]=!0;const h=this._getLayerSourceCache(c);c.source&&!this._updatedSources[c.source]&&h&&"raster"!==h.getSource().type&&(this._updatedSources[c.source]="reload",h.pause()),this._changed=!0,c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const h=E=>"fill-extrusion"===this._layers[E].type,y={},w=[];for(let E=this._order.length-1;E>=0;E--){const T=this._order[E];if(h(T)){y[T]=E;for(const I of c){const L=I[T];if(L)for(const N of L)w.push(N)}}}w.sort((E,T)=>T.intersectionZ-E.intersectionZ);const C=[];for(let E=this._order.length-1;E>=0;E--){const T=this._order[E];if(h(T))for(let I=w.length-1;I>=0;I--){const L=w[I].feature;if(y[L.layer.id]<E)break;C.push(L),w.pop()}else for(const I of c){const L=I[T];if(L)for(const N of L)C.push(N.feature)}}return C}queryRenderedFeatures(c,h,y){h&&h.filter&&this._validate(p.validateFilter,"queryRenderedFeatures.filter",h.filter,null,h);const w={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new p.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const I of h.layers){const L=this._layers[I];if(!L)return this.fire(new p.ErrorEvent(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];w[L.source]=!0}}const C=[];h.availableImages=this._availableImages;const E=h&&h.layers?h.layers.some(I=>{const L=this.getLayer(I);return L&&L.is3D()}):this.has3DLayers(),T=St.createFromScreenPoints(c,y);for(const I in this._sourceCaches){const L=this._sourceCaches[I].getSource().id;h.layers&&!w[L]||C.push(Ct(this._sourceCaches[I],this._layers,this._serializedLayers,T,h,y,E,!!this.map._showQueryGeometry))}return this.placement&&C.push(function(I,L,N,G,Q,oe,te){const ie={},ne=oe.queryRenderedSymbols(G),ee=[];for(const pe of Object.keys(ne).map(Number))ee.push(te[pe]);ee.sort(ti);for(const pe of ee){const se=pe.featureIndex.lookupSymbolFeatures(ne[pe.bucketInstanceId],L,pe.bucketIndex,pe.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,I);for(const Ee in se){const De=ie[Ee]=ie[Ee]||[],be=se[Ee];be.sort((Se,Ce)=>{const Re=pe.featureSortOrder;if(Re){const He=Re.indexOf(Se.featureIndex);return Re.indexOf(Ce.featureIndex)-He}return Ce.featureIndex-Se.featureIndex});for(const Se of be)De.push(Se)}}for(const pe in ie)ie[pe].forEach(se=>{const Ee=se.feature,De=N(I[pe]).getFeatureState(Ee.layer["source-layer"],Ee.id);Ee.source=Ee.layer.source,Ee.layer["source-layer"]&&(Ee.sourceLayer=Ee.layer["source-layer"]),Ee.state=De});return ie}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),T.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(c,h){h&&h.filter&&this._validate(p.validateFilter,"querySourceFeatures.filter",h.filter,null,h);const y=this._getSourceCaches(c);let w=[];for(const C of y)w=w.concat(pt(C,h));return w}addSourceType(c,h,y){return Br.getSourceType(c)?y(new Error(`A source type called "${c}" already exists.`)):(Br.setSourceType(c,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:h.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(c,h={}){this._checkLoaded();const y=this.light.getLight();let w=!1;for(const E in c)if(!ce(c[E],y[E])){w=!0;break}if(!w)return;const C=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(c,h),this.light.updateTransitions(C)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(c,h=1){if(this._checkLoaded(),!c)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===h){if("object"==typeof c.source){const y="terrain-dem-src";this.addSource(y,c.source),c=p.clone$1(c),c=p.extend(c,{source:y})}if(this._validate(p.validateTerrain,"terrain",c))return}if(!this.terrain||this.terrain&&h!==this.terrain.drapeRenderMode)this._createTerrain(c,h);else{const y=this.terrain,w=y.get();for(const C of Object.keys(p.spec.terrain))!c.hasOwnProperty(C)&&p.spec.terrain[C].default&&(c[C]=p.spec.terrain[C].default);for(const C in c)if(!ce(c[C],w[C])){y.set(c),this.stylesheet.terrain=c;const E=this._setTransitionParameters({duration:0});y.updateTransitions(E);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const h=this.fog=new lr(c,this.map.transform);this.stylesheet.fog=c;const y=this._setTransitionParameters({duration:0});h.updateTransitions(y)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const c of this.map._markers)c._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog,y=h.get();0===Object.keys(c).length&&h.set(c);for(const w in c)if(!ce(c[w],y[w])){h.set(c),this.stylesheet.fog=c;const C=this._setTransitionParameters({duration:0});h.updateTransitions(C);break}}else this._createFog(c);this._markersNeedUpdate=!0}_setTransitionParameters(c){return{now:p.exported.now(),transition:p.extend(c,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const c=this._order.filter(y=>this.isLayerDraped(this._layers[y])),h=this._order.filter(y=>!this.isLayerDraped(this._layers[y]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...h)}_createTerrain(c,h){const y=this.terrain=new ki(c,h);this.stylesheet.terrain=c,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const w=this._setTransitionParameters({duration:0});y.updateTransitions(w)}_force3DLayerUpdate(){for(const c in this._layers){const h=this._layers[c];"fill-extrusion"===h.type&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const h=this._layers[c];"symbol"===h.type&&this._updateLayer(h)}}_validate(c,h,y,w,C={}){return(!C||!1!==C.validate)&&lc(this,c.call(p.validateStyle,p.extend({key:h,style:this.serialize(),value:y,styleSpec:p.spec},w)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),p.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this._sourceCaches)this._sourceCaches[c].clearTiles(),this._sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(c){const h=this._getSourceCaches(c);for(const y of h)y.clearTiles()}_reloadSource(c){const h=this._getSourceCaches(c);for(const y of h)y.resume(),y.reload()}_updateSources(c){for(const h in this._sourceCaches)this._sourceCaches[h].update(c)}_generateCollisionBoxes(){for(const c in this._sourceCaches){const h=this._sourceCaches[c];h.resume(),h.reload()}}_updatePlacement(c,h,y,w,C=!1){let E=!1,T=!1;const I={};for(const L of this._order){const N=this._layers[L];if("symbol"!==N.type)continue;if(!I[N.source]){const Q=this._getLayerSourceCache(N);if(!Q)continue;I[N.source]=Q.getRenderableIds(!0).map(oe=>Q.getTileByID(oe)).sort((oe,te)=>te.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(te.tileID)?-1:1))}const G=this.crossTileSymbolIndex.addLayer(N,I[N.source],c.center.lng,c.projection);E=E||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),C=C||this._layerOrderChanged||0===y,this._layerOrderChanged&&this.fire(new p.Event("neworder")),(C||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(p.exported.now(),c.zoom))&&(this.pauseablePlacement=new Ms(c,this._order,C,h,y,w,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(p.exported.now()),T=!0),E&&this.pauseablePlacement.placement.setStale()),T||E)for(const L of this._order){const N=this._layers[L];"symbol"===N.type&&this.placement.updateLayerOpacities(N,I[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(p.exported.now())}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,h,y){this.imageManager.getImages(h.icons,y),this._updateTilesForChangedImages();const w=C=>{C&&C.setDependencies(h.tileID.key,h.type,h.icons)};w(this._otherSourceCaches[h.source]),w(this._symbolSourceCaches[h.source])}getGlyphs(c,h,y){this.glyphManager.getGlyphs(h.stacks,y)}getResource(c,h,y){return p.makeRequest(h,y)}_getSourceCache(c){return this._otherSourceCaches[c]}_getLayerSourceCache(c){return"symbol"===c.type?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}_getSourceCaches(c){const h=[];return this._otherSourceCaches[c]&&h.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&h.push(this._symbolSourceCaches[c]),h}_isSourceCacheLoaded(c){const h=this._getSourceCaches(c);return 0===h.length?(this.fire(new p.ErrorEvent(new Error(`There is no source with ID '${c}'`))),!1):h.every(y=>y.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Br.getSourceType=function(m){return Ae[m]},Br.setSourceType=function(m,c){Ae[m]=c},Br.registerForPluginStateChange=p.registerForPluginStateChange;var Kd="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",Jh="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Wo="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",Ds="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",td="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let Xu={},uo={};const Bn=[];_a(Kd,Bn),_a(Wo,Bn),_a(Ds,Bn),_a(td,Bn),Xu=Dn("",Wo),uo=Dn(td,Ds);const cc=Dn("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Ku=Kd,ja="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var Nn={background:Dn("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Dn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Dn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);\n#else \nmat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Dn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Dn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Dn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Dn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Dn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Dn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Dn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Dn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Dn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Dn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Dn("uniform lowp vec3 u_lightpos;varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\nvoid main() {vec4 color=v_color;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Dn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Dn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Dn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Dn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nhighp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nvec4 out_color=color;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Dn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Dn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Dn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Dn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Dn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Dn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Dn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Dn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Jh),skyboxGradient:Dn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Jh),skyboxCapture:Dn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Dn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\nvec4 color=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;\n#ifdef GLOBE_POLES\nvec3 up_vector=normalize(globe_pos)*u_tile_up_scale;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Dn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);\n#ifdef PROJECTION_GLOBE_VIEW\nfloat globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nfloat horizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function _a(m,c){const h=m.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let y of h)if(y=y.trim(),"#"===y[0]&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const w=y.split(" ");for(const C of w)c.includes(C)||c.push(C)}}function Dn(m,c){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=c.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),w={},C=[...Bn];return _a(m,C),_a(c,C),{fragmentSource:m=m.replace(h,(E,T,I,L,N)=>(w[N]=!0,"define"===T?`\n#ifndef HAS_UNIFORM_u_${N}\nvarying ${I} ${L} ${N};\n#else\nuniform ${I} ${L} u_${N};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${N}\n    ${I} ${L} ${N} = u_${N};\n#endif\n`)),vertexSource:c=c.replace(h,(E,T,I,L,N)=>{const G="float"===L?"vec2":"vec4",Q=N.match(/color/)?"color":G;return w[N]?"define"===T?`\n#ifndef HAS_UNIFORM_u_${N}\nuniform lowp float u_${N}_t;\nattribute ${I} ${G} a_${N};\nvarying ${I} ${L} ${N};\n#else\nuniform ${I} ${L} u_${N};\n#endif\n`:"vec4"===Q?`\n#ifndef HAS_UNIFORM_u_${N}\n    ${N} = a_${N};\n#else\n    ${I} ${L} ${N} = u_${N};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${N}\n    ${N} = unpack_mix_${Q}(a_${N}, u_${N}_t);\n#else\n    ${I} ${L} ${N} = u_${N};\n#endif\n`:"define"===T?`\n#ifndef HAS_UNIFORM_u_${N}\nuniform lowp float u_${N}_t;\nattribute ${I} ${G} a_${N};\n#else\nuniform ${I} ${L} u_${N};\n#endif\n`:"vec4"===Q?`\n#ifndef HAS_UNIFORM_u_${N}\n    ${I} ${L} ${N} = a_${N};\n#else\n    ${I} ${L} ${N} = u_${N};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${N}\n    ${I} ${L} ${N} = unpack_mix_${Q}(a_${N}, u_${N}_t);\n#else\n    ${I} ${L} ${N} = u_${N};\n#endif\n`}),staticAttributes:y,usedDefines:C}}class dc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,h,y,w,C,E,T){this.context=c;let I=this.boundPaintVertexBuffers.length!==w.length;for(let N=0;!I&&N<w.length;N++)this.boundPaintVertexBuffers[N]!==w[N]&&(I=!0);let L=this.boundDynamicVertexBuffers.length!==T.length;for(let N=0;!L&&N<T.length;N++)this.boundDynamicVertexBuffers[N]!==T[N]&&(L=!0);if(!c.extVertexArrayObject||!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==y||I||L||this.boundIndexBuffer!==C||this.boundVertexOffset!==E)this.freshBind(h,y,w,C,E,T);else{c.bindVertexArrayOES.set(this.vao);for(const N of T)N&&N.bind();C&&C.dynamicDraw&&C.bind()}}freshBind(c,h,y,w,C,E){let T;const I=c.numAttributes,L=this.context,N=L.gl;if(L.extVertexArrayObject)this.vao&&this.destroy(),this.vao=L.extVertexArrayObject.createVertexArrayOES(),L.bindVertexArrayOES.set(this.vao),T=0,this.boundProgram=c,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=w,this.boundVertexOffset=C,this.boundDynamicVertexBuffers=E;else{T=L.currentNumAttributes||0;for(let G=I;G<T;G++)N.disableVertexAttribArray(G)}h.enableAttributes(N,c),h.bind(),h.setVertexAttribPointers(N,c,C);for(const G of y)G.enableAttributes(N,c),G.bind(),G.setVertexAttribPointers(N,c,C);for(const G of E)G&&(G.enableAttributes(N,c),G.bind(),G.setVertexAttribPointers(N,c,C));w&&w.bind(),L.currentNumAttributes=I}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Qd(m,c){const h=Math.pow(2,c.canonical.z),y=c.canonical.y;return[new p.MercatorCoordinate(0,y/h).toLngLat().lat,new p.MercatorCoordinate(0,(y+1)/h).toLngLat().lat]}function ia(m,c,h,y,w,C,E){const T=m.context,I=T.gl,L=h.fbo;if(!L)return;m.prepareDrawTile();const N=m.useProgram("hillshade");T.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,L.colorAttachment.get());const G=((ie,ne,ee,pe)=>{const se=ee.paint.get("hillshade-shadow-color"),Ee=ee.paint.get("hillshade-highlight-color"),De=ee.paint.get("hillshade-accent-color");let be=ee.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===ee.paint.get("hillshade-illumination-anchor")&&(be-=ie.transform.angle);const Se=!ie.options.moving;return{u_matrix:pe||ie.transform.calculateProjMatrix(ne.tileID.toUnwrapped(),Se),u_image:0,u_latrange:Qd(0,ne.tileID),u_light:[ee.paint.get("hillshade-exaggeration"),be],u_shadow:se,u_highlight:Ee,u_accent:De}})(m,h,y,m.terrain?c.projMatrix:null);m.prepareDrawProgram(T,N,c.toUnwrapped());const{tileBoundsBuffer:Q,tileBoundsIndexBuffer:oe,tileBoundsSegments:te}=m.getTileBoundsBuffers(h);N.draw(T,I.TRIANGLES,w,C,E,p.CullFaceMode.disabled,G,y.id,Q,oe,te)}function hn(m,c,h){if(!c.needsDEMTextureUpload)return;const y=m.context,w=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||m.getTileTexture(h.stride);const C=h.getPixels();c.demTexture?c.demTexture.update(C,{premultiply:!1}):c.demTexture=new p.Texture(y,C,w.RGBA,{premultiply:!1}),c.needsDEMTextureUpload=!1}function nl(m,c,h,y,w,C){const E=m.context,T=E.gl;if(!c.dem)return;const I=c.dem;if(E.activeTexture.set(T.TEXTURE1),hn(m,c,I),!c.demTexture)return;c.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);const L=I.dim;E.activeTexture.set(T.TEXTURE0);let N=c.fbo;if(!N){const te=new p.Texture(E,{width:L,height:L,data:null},T.RGBA);te.bind(T.LINEAR,T.CLAMP_TO_EDGE),N=c.fbo=E.createFramebuffer(L,L,!0),N.colorAttachment.set(te.texture)}E.bindFramebuffer.set(N.framebuffer),E.viewport.set([0,0,L,L]);const{tileBoundsBuffer:G,tileBoundsIndexBuffer:Q,tileBoundsSegments:oe}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(E,T.TRIANGLES,y,w,C,p.CullFaceMode.disabled,((te,ie)=>{const ne=ie.stride,ee=p.create();return p.ortho(ee,0,p.EXTENT,-p.EXTENT,0,0,1),p.translate(ee,ee,[0,-p.EXTENT,0]),{u_matrix:ee,u_image:1,u_dimension:[ne,ne],u_zoom:te.overscaledZ,u_unpack:ie.unpackVector}})(c.tileID,I),h.id,G,Q,oe),c.needsHillshadePrepare=!1}const wi=m=>({u_matrix:new p.UniformMatrix4f(m),u_image0:new p.Uniform1i(m),u_skirt_height:new p.Uniform1f(m)}),rl=(m,c)=>({u_matrix:m,u_image0:0,u_skirt_height:c}),Jd=(m,c,h,y,w,C,E,T,I,L,N,G,Q,oe)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:h,u_zoom_transition:w,u_merc_center:C,u_image0:0,u_frustum_tl:E,u_frustum_tr:T,u_frustum_br:I,u_frustum_bl:L,u_globe_pos:N,u_globe_radius:G,u_viewport:Q,u_grid_matrix:oe?Float32Array.from(oe):new Float32Array(9)});function eu(m,c){return null!=m&&null!=c&&!(!m.hasData()||!c.hasData())&&null!=m.demTexture&&null!=c.demTexture&&m.tileID.key!==c.tileID.key}const Ut=new class{constructor(){this.operations={}}newMorphing(m,c,h,y,w){if(m in this.operations){const C=this.operations[m];C.to.tileID.key!==h.tileID.key&&(C.queued=h)}else this.operations[m]={startTime:y,phase:0,duration:w,from:c,to:h,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const c=this.operations[m];return{from:c.from,to:c.to,phase:c.phase}}update(m){for(const c in this.operations){const h=this.operations[c];for(h.phase=(m-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,m)){delete this.operations[c];break}}}_nextOp(m,c){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=c,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},id={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function ep(m,c){const h=1<<m.z;return!c&&(0===m.x||m.x===h-1)||0===m.y||m.y===h-1}const Xe=m=>({u_matrix:m});function ho(m,c,h,y,w){if(w>0){const C=p.exported.now(),E=(C-m.timeAdded)/w,T=c?(C-c.timeAdded)/w:-1,I=h.getSource(),L=y.coveringZoomLevel({tileSize:I.tileSize,roundZoom:I.roundZoom}),N=!c||Math.abs(c.tileID.overscaledZ-L)>Math.abs(m.tileID.overscaledZ-L),G=N&&m.refreshedUponExpiration?1:p.clamp(N?E:1-T,0,1);return m.refreshedUponExpiration&&E>=1&&(m.refreshedUponExpiration=!1),c?{opacity:1,mix:1-G}:{opacity:G,mix:0}}return{opacity:1,mix:0}}class Qn extends p.SourceCache{constructor(c){const h={type:"raster-dem",maxzoom:c.transform.maxZoom},y=new so(In(),null),w=je("mock-dem",h,y,c.style);super("mock-dem",w,!1),w.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,h){c.state="loaded",h(null)}}class bo extends p.SourceCache{constructor(c){const h=je("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},new so(In(),null),c.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,h,y){if(c.freezeTileCoverage)return;this.transform=c;const w=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((C,E)=>{if(C[E.key]="",!this._tiles[E.key]){const T=new p.Tile(E,this._source.tileSize*E.overscaleFactor(),c.tileZoom);T.state="loaded",this._tiles[E.key]=T}return C},{});for(const C in this._tiles)C in w||(this.freeFBO(C),this._tiles[C].unloadVectorData(),delete this._tiles[C])}freeFBO(c){const h=this.proxyCachedFBO[c];if(void 0!==h){const y=Object.values(h);this.renderCachePool.push(...y),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach(c=>c.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Zr extends p.OverscaledTileID{constructor(c,h,y){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=h,this.projMatrix=y}}class ol extends p.Elevation{constructor(c,h){super(),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,w,C]=function(I){const L=new p.StructArrayLayout4i8,N=new p.StructArrayLayout3ui6,G=131;L.reserve(17161),N.reserve(33800);const Q=p.EXTENT/128,oe=p.EXTENT+Q/2,te=oe+Q;for(let ne=-Q;ne<te;ne+=Q)for(let ee=-Q;ee<te;ee+=Q){const pe=ee<0||ee>oe||ne<0||ne>oe?24575:0,se=p.clamp(Math.round(ee),0,p.EXTENT),Ee=p.clamp(Math.round(ne),0,p.EXTENT);L.emplaceBack(se+pe,Ee,se,Ee)}const ie=(ne,ee)=>{const pe=ee*G+ne;N.emplaceBack(pe+1,pe,pe+G),N.emplaceBack(pe+G,pe+G+1,pe+1)};for(let ne=1;ne<129;ne++)for(let ee=1;ee<129;ee++)ie(ee,ne);return[0,129].forEach(ne=>{for(let ee=0;ee<130;ee++)ie(ee,ne),ie(ne,ee)}),[L,N,32768]}(),E=c.context;this.gridBuffer=E.createVertexBuffer(y,p.boundsAttributes.members),this.gridIndexBuffer=E.createIndexBuffer(w),this.gridSegments=p.SegmentVector.simpleSegment(0,0,y.length,w.length),this.gridNoSkirtSegments=p.SegmentVector.simpleSegment(0,0,y.length,C),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new bo(h.map),this.orthoMatrix=p.create(),p.ortho(this.orthoMatrix,0,p.EXTENT,0,p.EXTENT,0,1);const T=E.gl;this._overlapStencilMode=new p.StencilMode({func:T.GEQUAL,mask:255},0,255,T.KEEP,T.KEEP,T.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Qn(h.map)}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),c.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=c,this._checkRenderCacheEfficiency()}update(c,h,y){if(c&&c.terrain){this._style!==c&&(this.style=c),this.enabled=!0;const w=c.terrain.properties;this.sourceCache=0===c.terrain.drapeRenderMode?this._mockSourceCache:c._getSourceCache(w.get("source")),this._exaggeration=w.get("exaggeration");const C=()=>{this.sourceCache.used&&p.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const E=this.getScaledDemTileSize();this.sourceCache.update(h,E,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,C(),this._initializing=!0),C(),h.updateElevation(!y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const c=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==c.efficiency&&p.warnOnce(`Terrain render cache efficiency is not optimal (${c.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${c.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(c){c.coord&&"source"===c.dataType?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):"style"===c.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._sourceCaches)this._style._sourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(c=>c.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=0===y._centerAltitude&&-1===this.getAtPointOrZero(p.MercatorCoordinate.fromLngLat(y.center),-1),this._emptyDEMTextureDirty=!this._initializing);const w=this.proxyCoords=h.getIds().map(I=>{const L=h.getTileByID(I).tileID;return L.projMatrix=y.calculateProjMatrix(L.toUnwrapped()),L});(function(I,L){const N=L.transform.pointCoordinate(L.transform.getCameraPoint()),G=new p.pointGeometry(N.x,N.y);I.sort((Q,oe)=>{if(oe.overscaledZ-Q.overscaledZ)return oe.overscaledZ-Q.overscaledZ;const te=new p.pointGeometry(Q.canonical.x+(1<<Q.canonical.z)*Q.wrap,Q.canonical.y),ie=new p.pointGeometry(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),ne=G.mult(1<<Q.canonical.z);return ne.x-=.5,ne.y-=.5,ne.distSqr(te)-ne.distSqr(ie)})})(w,this.painter),this._previousZoom=y.zoom;const C=this.proxyToSource||{};this.proxyToSource={},w.forEach(I=>{this.proxyToSource[I.key]={}}),this.terrainTileForTile={};const E=this._style._sourceCaches;for(const I in E){const L=E[I];if(!L.used||(L!==this.sourceCache&&this.resetTileLookupCache(L.id),this._setupProxiedCoordsForOrtho(L,c[I],C),L.usedForTerrain))continue;const N=c[I];L.getSource().reparseOverscaled&&this._assignTerrainTiles(N)}this.proxiedCoords[h.id]=w.map(I=>new Zr(I,I.key,this.orthoMatrix)),this._assignTerrainTiles(w),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(C),this.renderingToTexture=!1,this._updateTimestamp=p.exported.now();const T={};this._visibleDemTiles=[];for(const I of this.proxyCoords){const L=this.terrainTileForTile[I.key];if(!L)continue;const N=L.tileID.key;N in T||(this._visibleDemTiles.push(L),T[N]=N)}}_assignTerrainTiles(c){this._initializing||c.forEach(h=>{if(this.terrainTileForTile[h.key])return;const y=this._findTileCoveringTileID(h,this.sourceCache);y&&(this.terrainTileForTile[h.key]=y)})}_prepareDEMTextures(){const c=this.painter.context,h=c.gl;for(const y in this.terrainTileForTile){const w=this.terrainTileForTile[y],C=w.dem;!C||w.demTexture&&!w.needsDEMTextureUpload||(c.activeTexture.set(h.TEXTURE1),hn(this.painter,w,C))}}_prepareDemTileUniforms(c,h,y,w){if(!h||null==h.demTexture)return!1;const C=c.tileID.canonical,E=Math.pow(2,h.tileID.canonical.z-C.z),T=w||"";return y[`u_dem_tl${T}`]=[C.x*E%1,C.y*E%1],y[`u_dem_scale${T}`]=E,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const c=this.painter.context,h=c.gl;if(!this._emptyDepthBufferTexture){const y=new p.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new p.Texture(c,y,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let c=0;const h=this._visibleDemTiles.reduce((y,w)=>{if(!w.dem)return y;const C=w.dem.tree.minimums[0];return C>0&&c++,y+C},0);return c?h/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,h=c.gl;c.activeTexture.set(h.TEXTURE2);const y=this._getLoadedAreaMinimum(),w=new p.RGBAImage({width:1,height:1},new Uint8Array(p.DEMData.pack(y,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let C=this._emptyDEMTexture;return C?C.update(w,{premultiply:!1}):C=this._emptyDEMTexture=new p.Texture(c,w,h.RGBA,{premultiply:!1}),C}setupElevationDraw(c,h,y){const w=this.painter.context,C=w.gl,E=(T=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:p.DEMData.getUnpackVector(T),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var T;E.u_dem_size=this.sourceCache.getSource().tileSize,E.u_exaggeration=this.exaggeration();const I=this.painter.transform,L=I.projection,N=c.tileID.canonical;E.u_tile_tl_up=L.upVector(N,0,0),E.u_tile_tr_up=L.upVector(N,p.EXTENT,0),E.u_tile_br_up=L.upVector(N,p.EXTENT,p.EXTENT),E.u_tile_bl_up=L.upVector(N,0,p.EXTENT),E.u_tile_up_scale=y&&y.useDenormalizedUpVectorScale?p.GLOBE_METERS_TO_ECEF:L.upVectorScale(N,I.center.lat,I.worldSize).metersToTile;let G=null,Q=null,oe=1;if(y&&y.morphing&&this._useVertexMorphing){const te=y.morphing.srcDemTile,ie=y.morphing.dstDemTile;oe=y.morphing.phase,te&&ie&&(this._prepareDemTileUniforms(c,te,E,"_prev")&&(Q=te),this._prepareDemTileUniforms(c,ie,E)&&(G=ie))}if(Q&&G?(w.activeTexture.set(C.TEXTURE2),G.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),w.activeTexture.set(C.TEXTURE4),Q.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE,C.NEAREST),E.u_dem_lerp=oe):(G=this.terrainTileForTile[c.tileID.key],w.activeTexture.set(C.TEXTURE2),(this._prepareDemTileUniforms(c,G,E)?G.demTexture:this.emptyDEMTexture).bind(C.NEAREST,C.CLAMP_TO_EDGE)),w.activeTexture.set(C.TEXTURE3),y&&y.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),this._depthFBO&&(E.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE),E.u_depth_size_inv=[1,1]),y&&y.useMeterToDem&&G){const te=(1<<G.tileID.canonical.z)*p.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;E.u_meter_to_dem=te}y&&y.labelPlaneMatrixInv&&(E.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),h.setTerrainUniformValues(w,E)}renderToBackBuffer(c){const h=this.painter,y=this.painter.context;0!==c.length&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(w,C,E,T,I){if("globe"===w.transform.projection.name)!function(L,N,G,Q,oe){const te=L.context,ie=te.gl;let ne,ee;const pe=L.options.showTerrainWireframe?2:0,se=L.transform,Ee=p.globeUseCustomAntiAliasing(L,te,se),De=(Pt,Ye)=>{if(ee===Pt)return;const yt=[id[Pt],"PROJECTION_GLOBE_VIEW"];Ee&&yt.push("CUSTOM_ANTIALIASING"),Ye&&yt.push(id[pe]),ne=L.useProgram("globeRaster",null,yt),ee=Pt},be=L.colorModeForRenderPass(),Se=new p.DepthMode(ie.LEQUAL,p.DepthMode.ReadWrite,L.depthRangeFor3D);Ut.update(oe);const Ce=p.calculateGlobeMercatorMatrix(se),Re=[p.mercatorXfromLng(se.center.lng),p.mercatorYfromLat(se.center.lat)],He=pe?[!1,!0]:[!1],_t=L.globeSharedBuffers,ze=[se.width*p.exported.devicePixelRatio,se.height*p.exported.devicePixelRatio],ot=Float32Array.from(se.globeMatrix),lt={useDenormalizedUpVectorScale:!0};if(He.forEach(Pt=>{ee=-1;const Ye=Pt?ie.LINES:ie.TRIANGLES;for(const yt of Q){const dt=G.getTile(yt),It=p.StencilMode.disabled,Ft=N.prevTerrainTileForTile[yt.key],Zt=N.terrainTileForTile[yt.key];eu(Ft,Zt)&&Ut.newMorphing(yt.key,Ft,Zt,oe,250),te.activeTexture.set(ie.TEXTURE0),dt.texture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE);const fi=Ut.getMorphValuesForProxy(yt.key),Pi=fi?1:0;fi&&p.extend$1(lt,{morphing:{srcDemTile:fi.from,dstDemTile:fi.to,phase:p.easeCubicInOut(fi.phase)}});const ln=p.tileCornersToBounds(yt.canonical),Kt=p.getLatitudinalLod(ln.getCenter().lat),Hi=p.getGridMatrix(yt.canonical,ln,Kt),Rn=p.globeNormalizeECEF(p.globeTileBounds(yt.canonical)),br=Jd(se.projMatrix,ot,Ce,Rn,p.globeToMercatorTransition(se.zoom),Re,se.frustumCorners.TL,se.frustumCorners.TR,se.frustumCorners.BR,se.frustumCorners.BL,se.globeCenterInViewSpace,se.globeRadius,ze,Hi);if(De(Pi,Pt),N.setupElevationDraw(dt,ne,lt),L.prepareDrawProgram(te,ne,yt.toUnwrapped()),_t){const[zr,ir,Xo]=Pt?_t.getWirefameBuffers(L.context,Kt):_t.getGridBuffers(Kt);ne.draw(te,Ye,Se,It,be,p.CullFaceMode.backCCW,br,"globe_raster",zr,ir,Xo)}}}),_t){const Pt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ee&&Pt.push("CUSTOM_ANTIALIASING"),ne=L.useProgram("globeRaster",null,Pt);for(const Ye of Q){const{x:yt,y:dt,z:It}=Ye.canonical,Ft=0===dt,Zt=dt===(1<<It)-1,[fi,Pi,ln,Kt]=_t.getPoleBuffers(It);if(Kt&&(Ft||Zt)){const Hi=G.getTile(Ye);te.activeTexture.set(ie.TEXTURE0),Hi.texture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE);let Rn=p.globePoleMatrixForTile(It,yt,se);const br=p.globeNormalizeECEF(p.globeTileBounds(Ye.canonical)),zr=(ir,Xo)=>ir.draw(te,ie.TRIANGLES,Se,p.StencilMode.disabled,be,p.CullFaceMode.disabled,Jd(se.projMatrix,Rn,Rn,br,0,Re,se.frustumCorners.TL,se.frustumCorners.TR,se.frustumCorners.BR,se.frustumCorners.BL,se.globeCenterInViewSpace,se.globeRadius,ze),"globe_pole_raster",Xo,ln,Kt);N.setupElevationDraw(Hi,ne,lt),L.prepareDrawProgram(te,ne,Ye.toUnwrapped()),Ft&&zr(ne,fi),Zt&&(Rn=p.scale(p.create(),Rn,[1,-1,1]),zr(ne,Pi))}}}}(w,C,E,T,I);else{const L=w.context,N=L.gl;let G,Q;const oe=w.options.showTerrainWireframe?2:0,te=(se,Ee)=>{if(Q===se)return;const De=[id[se]];Ee&&De.push(id[oe]),G=w.useProgram("terrainRaster",null,De),Q=se},ie=w.colorModeForRenderPass(),ne=new p.DepthMode(N.LEQUAL,p.DepthMode.ReadWrite,w.depthRangeFor3D);Ut.update(I);const ee=w.transform,pe=6*Math.pow(1.5,22-ee.zoom)*C.exaggeration();(oe?[!1,!0]:[!1]).forEach(se=>{Q=-1;const Ee=se?N.LINES:N.TRIANGLES,[De,be]=se?C.getWirefameBuffer():[C.gridIndexBuffer,C.gridSegments];for(const Se of T){const Ce=E.getTile(Se),Re=p.StencilMode.disabled,He=C.prevTerrainTileForTile[Se.key],_t=C.terrainTileForTile[Se.key];eu(He,_t)&&Ut.newMorphing(Se.key,He,_t,I,250),L.activeTexture.set(N.TEXTURE0),Ce.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST);const ze=Ut.getMorphValuesForProxy(Se.key),ot=ze?1:0;let lt;ze&&(lt={morphing:{srcDemTile:ze.from,dstDemTile:ze.to,phase:p.easeCubicInOut(ze.phase)}});const Pt=rl(Se.projMatrix,ep(Se.canonical,ee.renderWorldCopies)?pe/10:pe);te(ot,se),C.setupElevationDraw(Ce,G,lt),w.prepareDrawProgram(L,G,Se.toUnwrapped()),G.draw(L,Ee,ne,Re,ie,p.CullFaceMode.backCCW,Pt,"terrain_raster",C.gridBuffer,De,be)}})}}(h,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(0===this._drapedRenderBatches.length)return c+1;this.renderingToTexture=!0;const h=this.painter,y=this.painter.context,w=this.proxySourceCache,C=this.proxiedCoords[w.id],E=this._drapedRenderBatches.shift(),T=[],I=h.style.order;let L=0;for(const N of C){const G=w.getTileByID(N.proxyTileKey),Q=w.proxyCachedFBO[N.key]?w.proxyCachedFBO[N.key][c]:void 0,oe=void 0!==Q?w.renderCache[Q]:this.pool[L++],te=void 0!==Q;if(G.texture=oe.tex,te&&!oe.dirty){T.push(G.tileID);continue}let ie;y.bindFramebuffer.set(oe.fb.framebuffer),this.renderedToTile=!1,oe.dirty&&(y.clear({color:p.Color.transparent,stencil:0}),oe.dirty=!1);for(let ne=E.start;ne<=E.end;++ne){const ee=h.style._layers[I[ne]];if(ee.isHidden(h.transform.zoom))continue;const pe=h.style._getLayerSourceCache(ee),se=pe?this.proxyToSource[N.key][pe.id]:[N];if(!se)continue;const Ee=se;y.viewport.set([0,0,oe.fb.width,oe.fb.height]),ie!==(pe?pe.id:null)&&(this._setupStencil(oe,se,ee,pe),ie=pe?pe.id:null),h.renderLayer(h,pe,ee,Ee)}this.renderedToTile?(oe.dirty=!0,T.push(G.tileID)):te||--L,5===L&&(L=0,this.renderToBackBuffer(T))}return this.renderToBackBuffer(T),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,h.width,h.height]),E.end+1}postRender(){}renderCacheEfficiency(c){const h=c.order.length;if(0===h)return{efficiency:100};let y,w=0,C=0,E=!1;for(let T=0;T<h;++T){const I=c._layers[c.order[T]];this._style.isLayerDraped(I)?(E&&++w,++C):E||(E=!0,y=I.id)}return 0===C?{efficiency:100}:{efficiency:100*(1-w/C),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{c=Math.min(c,h.dem.tree.minimums[0])}),0===c?c:(c-30)*this._exaggeration}raycast(c,h,y){if(!this._visibleDemTiles)return null;const w=this._visibleDemTiles.filter(C=>C.dem).map(C=>{const E=C.tileID,T=1<<E.overscaledZ,{x:I,y:L}=E.canonical,N=I/T,G=(I+1)/T,Q=L/T,oe=(L+1)/T;return{minx:N,miny:Q,maxx:G,maxy:oe,t:C.dem.tree.raycastRoot(N,Q,G,oe,c,h,y),tile:C}});w.sort((C,E)=>(null!==C.t?C.t:Number.MAX_VALUE)-(null!==E.t?E.t:Number.MAX_VALUE));for(const C of w){if(null==C.t)return null;const E=C.tile.dem.tree.raycast(C.minx,C.miny,C.maxx,C.maxy,c,h,y);if(null!=E)return E}return null}_createFBO(){const c=this.painter.context,h=c.gl,y=this.drapeBufferSize;c.activeTexture.set(h.TEXTURE0);const w=new p.Texture(c,{width:y[0],height:y[1],data:null},h.RGBA);w.bind(h.LINEAR,h.CLAMP_TO_EDGE);const C=c.createFramebuffer(y[0],y[1],!1);return C.colorAttachment.set(w.texture),C.depthAttachment=new j(c,C.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,C.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):C.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&!c.extTextureFilterAnisotropicForceOff&&h.texParameterf(h.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:C,tex:w,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c].hasTransition())return!0;return this._style.order.some(c=>{const h=this._style._layers[c],y=h.isHidden(this.painter.transform.zoom),w=h.getCrossfadeParameters(),C=!!w&&1!==w.t,E=h.hasTransition();return"custom"!==h.type&&!y&&(C||E)})}_clearRasterFadeFromRenderCache(){let c=!1;for(const h in this._style._sourceCaches)if(this._style._sourceCaches[h]._source instanceof me){c=!0;break}if(c)for(let h=0;h<this._style.order.length;++h){const y=this._style._layers[this._style.order[h]],w=y.isHidden(this.painter.transform.zoom),C=this._style._getLayerSourceCache(y);if("raster"!==y.type||w||!C)continue;const E=y.paint.get("raster-fade-duration");for(const T of this.proxyCoords){const I=this.proxyToSource[T.key][C.id];if(I)for(const L of I){const N=ho(C.getTile(L),C.findLoadedParent(L,0),C,this.painter.transform,E);(1!==N.opacity||0!==N.mix)&&this._clearRenderCacheForTile(C.id,L)}}}}_setupDrapedRenderBatches(){const c=this._style.order,h=c.length;if(0===h)return;const y=[];let w,C=0,E=this._style._layers[c[C]];for(;!this._style.isLayerDraped(E)&&E.isHidden(this.painter.transform.zoom)&&++C<h;)E=this._style._layers[c[C]];for(;C<h;++C){const T=this._style._layers[c[C]];T.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(T)?void 0===w&&(w=C):void 0!==w&&(y.push({start:w,end:C-1}),w=void 0))}void 0!==w&&y.push({start:w,end:C-1}),this._drapedRenderBatches=y}_setupRenderCache(c){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const E=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let T=0;T<E.length;++T){const I=Object.values(E[T]);h.renderCachePool.push(...I)}}return}this._clearRasterFadeFromRenderCache();const y=this.proxyCoords,w=this._tilesDirty;for(let E=y.length-1;E>=0;E--){const T=y[E];if(h.getTileByID(T.key),void 0!==h.proxyCachedFBO[T.key]){const I=c[T.key],L=this.proxyToSource[T.key];let N=0;for(const G in L){const Q=L[G],oe=I[G];if(!oe||oe.length!==Q.length||Q.some((te,ie)=>te!==oe[ie]||w[G]&&w[G].hasOwnProperty(te.key))){N=-1;break}++N}for(const G in h.proxyCachedFBO[T.key])h.renderCache[h.proxyCachedFBO[T.key][G]].dirty=N<0||N!==Object.values(I).length}}const C=[...this._drapedRenderBatches];C.sort((E,T)=>T.end-T.start-(E.end-E.start));for(const E of C)for(const T of y){if(h.proxyCachedFBO[T.key])continue;let I=h.renderCachePool.pop();void 0===I&&h.renderCache.length<50&&(I=h.renderCache.length,h.renderCache.push(this._createFBO())),void 0!==I&&(h.proxyCachedFBO[T.key]={},h.proxyCachedFBO[T.key][E.start]=I,h.renderCache[I].dirty=!0)}this._tilesDirty={}}_setupStencil(c,h,y,w){if(!w||!this._sourceTilesOverlap[w.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const C=this.painter.context,E=C.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let T;if(y.isTileClipped())T=h.length,this._overlapStencilMode.test={func:E.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);T=1,this._overlapStencilMode.test={func:E.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+T>255&&(C.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=T,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):p.StencilMode.disabled}_renderTileClippingMasks(c,h){const y=this.painter,w=this.painter.context,C=w.gl;y._tileClippingMaskIDs={},w.setColorMode(p.ColorMode.disabled),w.setDepthMode(p.DepthMode.disabled);const E=y.useProgram("clippingMask");for(const T of c){const I=y._tileClippingMaskIDs[T.key]=--h;E.draw(w,C.TRIANGLES,p.DepthMode.disabled,new p.StencilMode({func:C.ALWAYS,mask:0},I,255,C.KEEP,C.KEEP,C.REPLACE),p.ColorMode.disabled,p.CullFaceMode.disabled,Xe(T.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(c){const h=this.painter.transform;if(c.x<0||c.x>h.width||c.y<0||c.y>h.height)return null;const y=[c.x,c.y,1,1];p.transformMat4$1(y,y,h.pixelMatrixInverse),p.scale$1(y,y,1/y[3]),y[0]/=h.worldSize,y[1]/=h.worldSize;const w=h._camera.position,C=p.mercatorZfromAltitude(1,h.center.lat),E=[w[0],w[1],w[2]/C,0],T=p.subtract([],y.slice(0,3),E);p.normalize(T,T);const I=this.raycast(E,T,this._exaggeration);return null!==I&&I?(p.scaleAndAdd(E,E,T,I),E[3]=E[2],E[2]*=C,E):null}drawDepth(){const c=this.painter,h=c.context,y=this.proxySourceCache,w=Math.ceil(c.width),C=Math.ceil(c.height);if(!this._depthFBO||this._depthFBO.width===w&&this._depthFBO.height===C||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const E=h.gl,T=h.createFramebuffer(w,C,!0);h.activeTexture.set(E.TEXTURE0);const I=new p.Texture(h,{width:w,height:C,data:null},E.RGBA);I.bind(E.NEAREST,E.CLAMP_TO_EDGE),T.colorAttachment.set(I.texture);const L=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,w,C);T.depthAttachment.set(L),this._depthFBO=T,this._depthTexture=I}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,w,C]),function(E,T,I,L){if("globe"===E.transform.projection.name)return;const N=E.context,G=N.gl;N.clear({depth:1});const Q=E.useProgram("terrainDepth"),oe=new p.DepthMode(G.LESS,p.DepthMode.ReadWrite,E.depthRangeFor3D);for(const te of L){const ie=I.getTile(te),ne=rl(te.projMatrix,0);T.setupElevationDraw(ie,Q),Q.draw(N,G.TRIANGLES,oe,p.StencilMode.disabled,p.ColorMode.unblended,p.CullFaceMode.backCCW,ne,"terrain_depth",T.gridBuffer,T.gridIndexBuffer,T.gridNoSkirtSegments)}}(c,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(c,h,y){if(c.getSource()instanceof Ne)return this._setupProxiedCoordsForImageSource(c,h,y);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const w=this.proxiedCoords[c.id]=[],C=this.proxyCoords;for(let T=0;T<C.length;T++){const I=C[T],L=this._findTileCoveringTileID(I,c);if(L){const N=this._createProxiedId(I,L,y[I.key]&&y[I.key][c.id]);w.push(N),this.proxyToSource[I.key][c.id]=[N]}}let E=!1;for(let T=0;T<h.length;T++){const I=c.getTile(h[T]);if(!I||!I.hasData())continue;const L=this._findTileCoveringTileID(I.tileID,this.proxySourceCache);if(L&&L.tileID.canonical.z!==I.tileID.canonical.z){const N=this.proxyToSource[L.tileID.key][c.id],G=this._createProxiedId(L.tileID,I,y[L.tileID.key]&&y[L.tileID.key][c.id]);N?N.splice(N.length-1,0,G):this.proxyToSource[L.tileID.key][c.id]=[G],w.push(G),E=!0}}this._sourceTilesOverlap[c.id]=E}_setupProxiedCoordsForImageSource(c,h,y){if(!c.getSource().loaded())return;const w=this.proxiedCoords[c.id]=[],C=this.proxyCoords,E=c.getSource(),T=new p.pointGeometry(E.tileID.x,E.tileID.y)._div(1<<E.tileID.z),I=E.coordinates.map(p.MercatorCoordinate.fromLngLat).reduce((N,G)=>(N.min.x=Math.min(N.min.x,G.x-T.x),N.min.y=Math.min(N.min.y,G.y-T.y),N.max.x=Math.max(N.max.x,G.x-T.x),N.max.y=Math.max(N.max.y,G.y-T.y),N),{min:new p.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new p.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),L=(N,G)=>{const Q=N.wrap+N.canonical.x/(1<<N.canonical.z),oe=N.canonical.y/(1<<N.canonical.z),te=p.EXTENT/(1<<N.canonical.z),ie=G.wrap+G.canonical.x/(1<<G.canonical.z),ne=G.canonical.y/(1<<G.canonical.z);return Q+te<ie+I.min.x||Q>ie+I.max.x||oe+te<ne+I.min.y||oe>ne+I.max.y};for(let N=0;N<C.length;N++){const G=C[N];for(let Q=0;Q<h.length;Q++){const oe=c.getTile(h[Q]);if(!oe||!oe.hasData()||L(G,oe.tileID))continue;const te=this._createProxiedId(G,oe,y[G.key]&&y[G.key][c.id]),ie=this.proxyToSource[G.key][c.id];ie?ie.push(te):this.proxyToSource[G.key][c.id]=[te],w.push(te)}}}_createProxiedId(c,h,y){let w=this.orthoMatrix;if(y){const C=y.find(E=>E.key===h.tileID.key);if(C)return C}if(h.tileID.key!==c.key){const C=c.canonical.z-h.tileID.canonical.z;let E,T,I;w=p.create();const L=h.tileID.wrap-c.wrap<<c.overscaledZ;C>0?(E=p.EXTENT>>C,T=E*((h.tileID.canonical.x<<C)-c.canonical.x+L),I=E*((h.tileID.canonical.y<<C)-c.canonical.y)):(E=p.EXTENT<<-C,T=p.EXTENT*(h.tileID.canonical.x-(c.canonical.x+L<<-C)),I=p.EXTENT*(h.tileID.canonical.y-(c.canonical.y<<-C))),p.ortho(w,0,E,0,E,0,1),p.translate(w,w,[T,I,0])}return new Zr(h.tileID,c.key,w)}_findTileCoveringTileID(c,h){let y=h.getTile(c);if(y&&y.hasData())return y;const w=this._findCoveringTileCache[h.id],C=w[c.key];if(y=C?h.getTileByID(C):null,y&&y.hasData()||null===C)return y;let E=y?y.tileID:c,T=E.overscaledZ;const I=h.getSource().minzoom,L=[];if(!C){const G=h.getSource().maxzoom;if(c.canonical.z>=G){const Q=c.canonical.z-G;h.getSource().reparseOverscaled?(T=Math.max(c.canonical.z+2,h.transform.tileZoom),E=new p.OverscaledTileID(T,c.wrap,G,c.canonical.x>>Q,c.canonical.y>>Q)):0!==Q&&(T=G,E=new p.OverscaledTileID(T,c.wrap,G,c.canonical.x>>Q,c.canonical.y>>Q))}E.key!==c.key&&(L.push(E.key),y=h.getTile(E))}const N=G=>{L.forEach(Q=>{w[Q]=G}),L.length=0};for(T-=1;T>=I&&(!y||!y.hasData());T--){y&&N(y.tileID.key);const G=E.calculateScaledKey(T);if(y=h.getTileByID(G),y&&y.hasData())break;const Q=w[G];if(null===Q)break;void 0===Q?L.push(G):y=h.getTileByID(Q)}return N(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,h){let y=this._tilesDirty[c];y||(y=this._tilesDirty[c]={}),y[h.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const c=function(h){let y=0;const w=new p.StructArrayLayout2ui4,C=131;for(let E=1;E<129;E++){for(let T=1;T<129;T++)y=E*C+T,w.emplaceBack(y,y+1),w.emplaceBack(y,y+C),w.emplaceBack(y+1,y+C),128===E&&w.emplaceBack(y+C,y+C+1);w.emplaceBack(y+1,y+1+C)}return w}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(c),this.wireframeSegments=p.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,c.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Zo{static cacheKey(c,h,y,w){let C=`${h}${w?w.cacheKey:""}`;for(const E of y)c.usedDefines.includes(E)&&(C+=`/${E}`);return C}constructor(c,h,y,w,C,E){const T=c.gl;this.program=T.createProgram();const I=function(ne){const ee=[];for(let pe=0;pe<ne.length;pe++){if(null===ne[pe])continue;const se=ne[pe].split(" ");ee.push(se.pop())}return ee}(y.staticAttributes),L=w?w.getBinderAttributes():[],N=I.concat(L);let G=w?w.defines():[];G=G.concat(E.map(ne=>`#define ${ne}`));const Q=G.concat(c.extStandardDerivatives?"#extension GL_OES_standard_derivatives : enable\n".concat(ja):ja,ja,Ku,cc.fragmentSource,uo.fragmentSource,y.fragmentSource).join("\n"),oe=G.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Ku,cc.vertexSource,uo.vertexSource,Xu.vertexSource,y.vertexSource).join("\n"),te=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);T.shaderSource(te,Q),T.compileShader(te),T.attachShader(this.program,te);const ie=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())this.failedToCreate=!0;else{T.shaderSource(ie,oe),T.compileShader(ie),T.attachShader(this.program,ie),this.attributes={},this.numAttributes=N.length;for(let ne=0;ne<this.numAttributes;ne++)N[ne]&&(T.bindAttribLocation(this.program,ne,N[ne]),this.attributes[N[ne]]=ne);T.linkProgram(this.program),T.deleteShader(ie),T.deleteShader(te),this.fixedUniforms=C(c),this.binderUniforms=w?w.getUniforms(c):[],-1!==E.indexOf("TERRAIN")&&(this.terrainUniforms={u_dem:new p.Uniform1i(ne=c),u_dem_prev:new p.Uniform1i(ne),u_dem_unpack:new p.Uniform4f(ne),u_dem_tl:new p.Uniform2f(ne),u_dem_scale:new p.Uniform1f(ne),u_dem_tl_prev:new p.Uniform2f(ne),u_dem_scale_prev:new p.Uniform1f(ne),u_dem_size:new p.Uniform1f(ne),u_dem_lerp:new p.Uniform1f(ne),u_exaggeration:new p.Uniform1f(ne),u_depth:new p.Uniform1i(ne),u_depth_size_inv:new p.Uniform2f(ne),u_meter_to_dem:new p.Uniform1f(ne),u_label_plane_matrix_inv:new p.UniformMatrix4f(ne),u_tile_tl_up:new p.Uniform3f(ne),u_tile_tr_up:new p.Uniform3f(ne),u_tile_br_up:new p.Uniform3f(ne),u_tile_bl_up:new p.Uniform3f(ne),u_tile_up_scale:new p.Uniform1f(ne)}),-1!==E.indexOf("FOG")&&(this.fogUniforms=(ne=>({u_fog_matrix:new p.UniformMatrix4f(ne),u_fog_range:new p.Uniform2f(ne),u_fog_color:new p.Uniform4f(ne),u_fog_horizon_blend:new p.Uniform1f(ne),u_fog_temporal_offset:new p.Uniform1f(ne),u_frustum_tl:new p.Uniform3f(ne),u_frustum_tr:new p.Uniform3f(ne),u_frustum_br:new p.Uniform3f(ne),u_frustum_bl:new p.Uniform3f(ne),u_globe_pos:new p.Uniform3f(ne),u_globe_radius:new p.Uniform1f(ne),u_globe_transition:new p.Uniform1f(ne),u_is_globe:new p.Uniform1i(ne),u_viewport:new p.Uniform2f(ne)}))(c))}var ne}setTerrainUniformValues(c,h){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const w in h)y[w].set(this.program,w,h[w])}}setFogUniformValues(c,h){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const w in h)y[w].set(this.program,w,h[w])}}draw(c,h,y,w,C,E,T,I,L,N,G,Q,oe,te,ie){const ne=c.gl;if(this.failedToCreate)return;c.program.set(this.program),c.setDepthMode(y),c.setStencilMode(w),c.setColorMode(C),c.setCullFace(E);for(const pe of Object.keys(this.fixedUniforms))this.fixedUniforms[pe].set(this.program,pe,T[pe]);te&&te.setUniforms(this.program,c,this.binderUniforms,Q,{zoom:oe});const ee={[ne.LINES]:2,[ne.TRIANGLES]:3,[ne.LINE_STRIP]:1}[h];for(const pe of G.get()){const se=pe.vaos||(pe.vaos={});(se[I]||(se[I]=new dc)).bind(c,this,L,te?te.getPaintVertexBuffers():[],N,pe.vertexOffset,ie||[]),ne.drawElements(h,pe.primitiveLength*ee,ne.UNSIGNED_SHORT,pe.primitiveOffset*ee*2)}}}function Ss(m,c,h){const y=1/Go(h,1,c.transform.tileZoom),w=Math.pow(2,h.tileID.overscaledZ),C=h.tileSize*Math.pow(2,c.transform.tileZoom)/w,E=C*(h.tileID.canonical.x+h.tileID.wrap*w),T=C*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[y,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[E>>16,T>>16],u_pixel_coord_lower:[65535&E,65535&T]}}const qt=p.create(),Ui=(m,c,h,y,w,C,E,T,I,L,N)=>{const G=c.style.light,Q=G.properties.get("position"),oe=[Q.x,Q.y,Q.z],te=p.create$1();"viewport"===G.properties.get("anchor")&&(p.fromRotation(te,-c.transform.angle),p.transformMat3(oe,oe,te));const ie=G.properties.get("color"),ne=c.transform,ee={u_matrix:m,u_lightpos:oe,u_lightintensity:G.properties.get("intensity"),u_lightcolor:[ie.r,ie.g,ie.b],u_vertical_gradient:+h,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:qt,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:w,u_edge_radius:C};return"globe"===ne.projection.name&&(ee.u_tile_id=[E.canonical.x,E.canonical.y,1<<E.canonical.z],ee.u_zoom_transition=I,ee.u_inv_rot_matrix=N,ee.u_merc_center=L,ee.u_up_dir=ne.projection.upVector(new p.CanonicalTileID(0,0,0),L[0]*p.EXTENT,L[1]*p.EXTENT),ee.u_height_lift=T),ee},Mr=(m,c,h,y,w,C,E,T,I,L,N,G,Q)=>{const oe=Ui(m,c,h,y,w,C,E,L,N,G,Q),te={u_height_factor:-Math.pow(2,E.overscaledZ)/I.tileSize/8};return p.extend(oe,Ss(T,c,I),te)},eo=m=>({u_matrix:m}),na=(m,c,h,y)=>p.extend(eo(m),Ss(h,c,y)),cr=(m,c)=>({u_matrix:m,u_world:c}),ra=(m,c,h,y,w)=>p.extend(na(m,c,h,y),{u_world:w}),Nr=p.create(),bl=(m,c,h,y,w,C)=>{const E=m.transform,T="globe"===E.projection.name;let I;if("map"===C.paint.get("circle-pitch-alignment"))if(T){const N=p.globePixelsToTileUnits(E.zoom,c.canonical)*E._pixelsPerMercatorPixel;I=Float32Array.from([N,0,0,N])}else I=E.calculatePixelsToTileUnitsMatrix(h);else I=new Float32Array([E.pixelsToGLUnits[0],0,0,E.pixelsToGLUnits[1]]);const L={u_camera_to_center_distance:E.cameraToCenterDistance,u_matrix:m.translatePosMatrix(c.projMatrix,h,C.paint.get("circle-translate"),C.paint.get("circle-translate-anchor")),u_device_pixel_ratio:p.exported.devicePixelRatio,u_extrude_scale:I,u_inv_rot_matrix:Nr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(T){L.u_inv_rot_matrix=y,L.u_merc_center=w,L.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],L.u_zoom_transition=p.globeToMercatorTransition(E.zoom);const N=w[0]*p.EXTENT,G=w[1]*p.EXTENT;L.u_up_dir=E.projection.upVector(new p.CanonicalTileID(0,0,0),N,G)}return L},uc=m=>{const c=[];return"map"===m.paint.get("circle-pitch-alignment")&&c.push("PITCH_WITH_MAP"),"map"===m.paint.get("circle-pitch-scale")&&c.push("SCALE_WITH_MAP"),c},tn=(m,c,h,y)=>{const w=p.EXTENT/h.tileSize;return{u_matrix:m,u_camera_to_center_distance:c.getCameraToCenterDistance(y),u_extrude_scale:[c.pixelsToGLUnits[0]/w,c.pixelsToGLUnits[1]/w]}},nd=(m,c,h=1)=>({u_matrix:m,u_color:c,u_overlay:0,u_overlay_scale:h}),sl=p.create(),Qu=(m,c,h,y,w,C,E)=>{const T=m.transform,I="globe"===T.projection.name,L=I?p.globePixelsToTileUnits(T.zoom,c.canonical)*T._pixelsPerMercatorPixel:Go(h,1,C),N={u_matrix:c.projMatrix,u_extrude_scale:L,u_intensity:E,u_inv_rot_matrix:sl,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(I){N.u_inv_rot_matrix=y,N.u_merc_center=w,N.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],N.u_zoom_transition=p.globeToMercatorTransition(T.zoom);const G=w[0]*p.EXTENT,Q=w[1]*p.EXTENT;N.u_up_dir=T.projection.upVector(new p.CanonicalTileID(0,0,0),G,Q)}return N},ya=(m,c,h,y,w,C,E,T)=>{const I=m.transform,L=I.calculatePixelsToTileUnitsMatrix(c),N={u_matrix:xl(m,c,h,w),u_pixels_to_tile_units:L,u_device_pixel_ratio:E,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:C,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:T};if(ss(h)){const G=al(c,m.transform);N.u_texsize=c.lineAtlasTexture.size,N.u_scale=[G,y.fromScale,y.toScale],N.u_mix=y.t}return N},xo=(m,c,h,y,w,C)=>{const E=m.transform,T=al(c,E);return{u_matrix:xl(m,c,h,w),u_texsize:c.imageAtlasTexture.size,u_pixels_to_tile_units:E.calculatePixelsToTileUnitsMatrix(c),u_device_pixel_ratio:C,u_image:0,u_scale:[T,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function al(m,c){return 1/Go(m,1,c.tileZoom)}function xl(m,c,h,y){return m.translatePosMatrix(y||c.tileID.projMatrix,c,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}function ss(m){const c=m.paint.get("line-dasharray").value;return c.value||"constant"!==c.kind}const hc=(m,c,h,y,w,C)=>{return{u_matrix:m,u_tl_parent:c,u_scale_parent:h,u_fade_t:y.mix,u_opacity:y.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(T=w.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(E=w.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:pc(w.paint.get("raster-hue-rotate")),u_perspective_transform:C};var E,T};function pc(m){m*=Math.PI/180;const c=Math.sin(m),h=Math.cos(m);return[(2*h+1)/3,(-Math.sqrt(3)*c-h+1)/3,(Math.sqrt(3)*c-h+1)/3]}const dr=p.create(),Ju=(m,c,h,y,w,C,E,T,I,L,N,G,Q,oe,te,ie)=>{const ne=w.transform,ee={u_is_size_zoom_constant:+("constant"===m||"source"===m),u_is_size_feature_constant:+("constant"===m||"camera"===m),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:ne.cameraToCenterDistance,u_rotate_symbol:+h,u_aspect_ratio:ne.width/ne.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:E,u_coord_matrix:T,u_is_text:+I,u_pitch_with_map:+y,u_texsize:L,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:dr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:dr,u_up_vector:[0,-1,0]};return"globe"===ie.name&&(ee.u_tile_id=[N.canonical.x,N.canonical.y,1<<N.canonical.z],ee.u_zoom_transition=G,ee.u_inv_rot_matrix=oe,ee.u_merc_center=Q,ee.u_camera_forward=ne._camera.forward(),ee.u_ecef_origin=p.globeECEFOrigin(ne.globeMatrix,N.toUnwrapped()),ee.u_tile_matrix=Float32Array.from(ne.globeMatrix),ee.u_up_vector=te),ee},eh=(m,c,h,y,w,C,E,T,I,L,N,G,Q,oe,te,ie,ne)=>p.extend(Ju(m,c,h,y,w,C,E,T,I,L,G,Q,oe,te,ie,ne),{u_gamma_scale:y?w.transform.cameraToCenterDistance*Math.cos(w.terrain?0:w.transform._pitch):1,u_device_pixel_ratio:p.exported.devicePixelRatio,u_is_halo:+N}),Ua=(m,c,h,y,w,C,E,T,I,L,N,G,Q,oe,te,ie)=>p.extend(eh(m,c,h,y,w,C,E,T,!0,I,!0,N,G,Q,oe,te,ie),{u_texsize_icon:L,u_texture_icon:1}),tu=(m,c,h)=>({u_matrix:m,u_opacity:c,u_color:h}),wl=(m,c,h,y,w,C)=>p.extend(function(E,T,I,L){const N=I.imageManager.getPattern(E.from.toString()),G=I.imageManager.getPattern(E.to.toString()),{width:Q,height:oe}=I.imageManager.getPixelSize(),te=Math.pow(2,L.tileID.overscaledZ),ie=L.tileSize*Math.pow(2,I.transform.tileZoom)/te,ne=ie*(L.tileID.canonical.x+L.tileID.wrap*te),ee=ie*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[Q,oe],u_mix:T.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/Go(L,1,I.transform.tileZoom),u_pixel_coord_upper:[ne>>16,ee>>16],u_pixel_coord_lower:[65535&ne,65535&ee]}}(y,C,h,w),{u_matrix:m,u_opacity:c}),iu={fillExtrusion:m=>({u_matrix:new p.UniformMatrix4f(m),u_lightpos:new p.Uniform3f(m),u_lightintensity:new p.Uniform1f(m),u_lightcolor:new p.Uniform3f(m),u_vertical_gradient:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m),u_edge_radius:new p.Uniform1f(m),u_ao:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_up_dir:new p.Uniform3f(m),u_height_lift:new p.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_lightpos:new p.Uniform3f(m),u_lightintensity:new p.Uniform1f(m),u_lightcolor:new p.Uniform3f(m),u_vertical_gradient:new p.Uniform1f(m),u_height_factor:new p.Uniform1f(m),u_edge_radius:new p.Uniform1f(m),u_ao:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_up_dir:new p.Uniform3f(m),u_height_lift:new p.Uniform1f(m),u_image:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_scale:new p.Uniform3f(m),u_fade:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m)}),fill:m=>({u_matrix:new p.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_image:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_scale:new p.Uniform3f(m),u_fade:new p.Uniform1f(m)}),fillOutline:m=>({u_matrix:new p.UniformMatrix4f(m),u_world:new p.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_world:new p.Uniform2f(m),u_image:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_scale:new p.Uniform3f(m),u_fade:new p.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new p.Uniform1f(m),u_extrude_scale:new p.UniformMatrix2f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_up_dir:new p.Uniform3f(m)}),collisionBox:m=>({u_matrix:new p.UniformMatrix4f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_extrude_scale:new p.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new p.UniformMatrix4f(m),u_inv_matrix:new p.UniformMatrix4f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_viewport_size:new p.Uniform2f(m)}),debug:m=>({u_color:new p.UniformColor(m),u_matrix:new p.UniformMatrix4f(m),u_overlay:new p.Uniform1i(m),u_overlay_scale:new p.Uniform1f(m)}),clippingMask:m=>({u_matrix:new p.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new p.Uniform1f(m),u_intensity:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_up_dir:new p.Uniform3f(m)}),heatmapTexture:m=>({u_image:new p.Uniform1i(m),u_color_ramp:new p.Uniform1i(m),u_opacity:new p.Uniform1f(m)}),hillshade:m=>({u_matrix:new p.UniformMatrix4f(m),u_image:new p.Uniform1i(m),u_latrange:new p.Uniform2f(m),u_light:new p.Uniform2f(m),u_shadow:new p.UniformColor(m),u_highlight:new p.UniformColor(m),u_accent:new p.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new p.UniformMatrix4f(m),u_image:new p.Uniform1i(m),u_dimension:new p.Uniform2f(m),u_zoom:new p.Uniform1f(m),u_unpack:new p.Uniform4f(m)}),line:m=>({u_matrix:new p.UniformMatrix4f(m),u_pixels_to_tile_units:new p.UniformMatrix2f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_units_to_pixels:new p.Uniform2f(m),u_dash_image:new p.Uniform1i(m),u_gradient_image:new p.Uniform1i(m),u_image_height:new p.Uniform1f(m),u_texsize:new p.Uniform2f(m),u_scale:new p.Uniform3f(m),u_mix:new p.Uniform1f(m),u_alpha_discard_threshold:new p.Uniform1f(m),u_trim_offset:new p.Uniform2f(m)}),linePattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_texsize:new p.Uniform2f(m),u_pixels_to_tile_units:new p.UniformMatrix2f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_image:new p.Uniform1i(m),u_units_to_pixels:new p.Uniform2f(m),u_scale:new p.Uniform3f(m),u_fade:new p.Uniform1f(m),u_alpha_discard_threshold:new p.Uniform1f(m)}),raster:m=>({u_matrix:new p.UniformMatrix4f(m),u_tl_parent:new p.Uniform2f(m),u_scale_parent:new p.Uniform1f(m),u_fade_t:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m),u_image0:new p.Uniform1i(m),u_image1:new p.Uniform1i(m),u_brightness_low:new p.Uniform1f(m),u_brightness_high:new p.Uniform1f(m),u_saturation_factor:new p.Uniform1f(m),u_contrast_factor:new p.Uniform1f(m),u_spin_weights:new p.Uniform3f(m),u_perspective_transform:new p.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new p.Uniform1i(m),u_is_size_feature_constant:new p.Uniform1i(m),u_size_t:new p.Uniform1f(m),u_size:new p.Uniform1f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_rotate_symbol:new p.Uniform1i(m),u_aspect_ratio:new p.Uniform1f(m),u_fade_change:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_label_plane_matrix:new p.UniformMatrix4f(m),u_coord_matrix:new p.UniformMatrix4f(m),u_is_text:new p.Uniform1i(m),u_pitch_with_map:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_camera_forward:new p.Uniform3f(m),u_tile_matrix:new p.UniformMatrix4f(m),u_up_vector:new p.Uniform3f(m),u_ecef_origin:new p.Uniform3f(m),u_texture:new p.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new p.Uniform1i(m),u_is_size_feature_constant:new p.Uniform1i(m),u_size_t:new p.Uniform1f(m),u_size:new p.Uniform1f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_rotate_symbol:new p.Uniform1i(m),u_aspect_ratio:new p.Uniform1f(m),u_fade_change:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_label_plane_matrix:new p.UniformMatrix4f(m),u_coord_matrix:new p.UniformMatrix4f(m),u_is_text:new p.Uniform1i(m),u_pitch_with_map:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_texture:new p.Uniform1i(m),u_gamma_scale:new p.Uniform1f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_tile_id:new p.Uniform3f(m),u_zoom_transition:new p.Uniform1f(m),u_inv_rot_matrix:new p.UniformMatrix4f(m),u_merc_center:new p.Uniform2f(m),u_camera_forward:new p.Uniform3f(m),u_tile_matrix:new p.UniformMatrix4f(m),u_up_vector:new p.Uniform3f(m),u_ecef_origin:new p.Uniform3f(m),u_is_halo:new p.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new p.Uniform1i(m),u_is_size_feature_constant:new p.Uniform1i(m),u_size_t:new p.Uniform1f(m),u_size:new p.Uniform1f(m),u_camera_to_center_distance:new p.Uniform1f(m),u_rotate_symbol:new p.Uniform1i(m),u_aspect_ratio:new p.Uniform1f(m),u_fade_change:new p.Uniform1f(m),u_matrix:new p.UniformMatrix4f(m),u_label_plane_matrix:new p.UniformMatrix4f(m),u_coord_matrix:new p.UniformMatrix4f(m),u_is_text:new p.Uniform1i(m),u_pitch_with_map:new p.Uniform1i(m),u_texsize:new p.Uniform2f(m),u_texsize_icon:new p.Uniform2f(m),u_texture:new p.Uniform1i(m),u_texture_icon:new p.Uniform1i(m),u_gamma_scale:new p.Uniform1f(m),u_device_pixel_ratio:new p.Uniform1f(m),u_is_halo:new p.Uniform1i(m)}),background:m=>({u_matrix:new p.UniformMatrix4f(m),u_opacity:new p.Uniform1f(m),u_color:new p.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new p.UniformMatrix4f(m),u_opacity:new p.Uniform1f(m),u_image:new p.Uniform1i(m),u_pattern_tl_a:new p.Uniform2f(m),u_pattern_br_a:new p.Uniform2f(m),u_pattern_tl_b:new p.Uniform2f(m),u_pattern_br_b:new p.Uniform2f(m),u_texsize:new p.Uniform2f(m),u_mix:new p.Uniform1f(m),u_pattern_size_a:new p.Uniform2f(m),u_pattern_size_b:new p.Uniform2f(m),u_scale_a:new p.Uniform1f(m),u_scale_b:new p.Uniform1f(m),u_pixel_coord_upper:new p.Uniform2f(m),u_pixel_coord_lower:new p.Uniform2f(m),u_tile_units_to_pixels:new p.Uniform1f(m)}),terrainRaster:wi,terrainDepth:wi,skybox:m=>({u_matrix:new p.UniformMatrix4f(m),u_sun_direction:new p.Uniform3f(m),u_cubemap:new p.Uniform1i(m),u_opacity:new p.Uniform1f(m),u_temporal_offset:new p.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new p.UniformMatrix4f(m),u_color_ramp:new p.Uniform1i(m),u_center_direction:new p.Uniform3f(m),u_radius:new p.Uniform1f(m),u_opacity:new p.Uniform1f(m),u_temporal_offset:new p.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new p.UniformMatrix3f(m),u_sun_direction:new p.Uniform3f(m),u_sun_intensity:new p.Uniform1f(m),u_color_tint_r:new p.Uniform4f(m),u_color_tint_m:new p.Uniform4f(m),u_luminance:new p.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new p.UniformMatrix4f(m),u_globe_matrix:new p.UniformMatrix4f(m),u_normalize_matrix:new p.UniformMatrix4f(m),u_merc_matrix:new p.UniformMatrix4f(m),u_zoom_transition:new p.Uniform1f(m),u_merc_center:new p.Uniform2f(m),u_image0:new p.Uniform1i(m),u_grid_matrix:new p.UniformMatrix3f(m),u_frustum_tl:new p.Uniform3f(m),u_frustum_tr:new p.Uniform3f(m),u_frustum_br:new p.Uniform3f(m),u_frustum_bl:new p.Uniform3f(m),u_globe_pos:new p.Uniform3f(m),u_globe_radius:new p.Uniform1f(m),u_viewport:new p.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new p.Uniform3f(m),u_frustum_tr:new p.Uniform3f(m),u_frustum_br:new p.Uniform3f(m),u_frustum_bl:new p.Uniform3f(m),u_horizon:new p.Uniform1f(m),u_transition:new p.Uniform1f(m),u_fadeout_range:new p.Uniform1f(m),u_color:new p.Uniform4f(m),u_high_color:new p.Uniform4f(m),u_space_color:new p.Uniform4f(m),u_star_intensity:new p.Uniform1f(m),u_star_density:new p.Uniform1f(m),u_star_size:new p.Uniform1f(m),u_temporal_offset:new p.Uniform1f(m),u_horizon_angle:new p.Uniform1f(m),u_rotation_matrix:new p.UniformMatrix4f(m)})};let va;function wo(m,c,h,y,w,C,E){const T=m.context,I=T.gl,L=m.transform,N=m.useProgram("collisionBox"),G=[];let Q=0,oe=0;for(let Ee=0;Ee<y.length;Ee++){const De=y[Ee],be=c.getTile(De),Se=be.getBucket(h);if(!Se)continue;const Ce=Cs(De,Se,L);let Re=Ce;0===w[0]&&0===w[1]||(Re=m.translatePosMatrix(Ce,be,w,C));const He=E?Se.textCollisionBox:Se.iconCollisionBox,_t=Se.collisionCircleArray;if(_t.length>0){const ze=p.create(),ot=Re;p.mul(ze,Se.placementInvProjMatrix,L.glCoordMatrix),p.mul(ze,ze,Se.placementViewportMatrix),G.push({circleArray:_t,circleOffset:oe,transform:ot,invTransform:ze,projection:Se.getProjection()}),Q+=_t.length/4,oe=Q}He&&(m.terrain&&m.terrain.setupElevationDraw(be,N),N.draw(T,I.LINES,p.DepthMode.disabled,p.StencilMode.disabled,m.colorModeForRenderPass(),p.CullFaceMode.disabled,tn(Re,L,be,Se.getProjection()),h.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,null,L.zoom,null,[He.collisionVertexBuffer,He.collisionVertexBufferExt]))}if(!E||!G.length)return;const te=m.useProgram("collisionCircle"),ie=new p.StructArrayLayout2f1f2i16;ie.resize(4*Q),ie._trim();let ne=0;for(const Ee of G)for(let De=0;De<Ee.circleArray.length/4;De++){const be=4*De,Se=Ee.circleArray[be+0],Ce=Ee.circleArray[be+1],Re=Ee.circleArray[be+2],He=Ee.circleArray[be+3];ie.emplace(ne++,Se,Ce,Re,He,0),ie.emplace(ne++,Se,Ce,Re,He,1),ie.emplace(ne++,Se,Ce,Re,He,2),ie.emplace(ne++,Se,Ce,Re,He,3)}(!va||va.length<2*Q)&&(va=function(Ee){const De=2*Ee,be=new p.StructArrayLayout3ui6;be.resize(De),be._trim();for(let Se=0;Se<De;Se++){const Ce=6*Se;be.uint16[Ce+0]=4*Se+0,be.uint16[Ce+1]=4*Se+1,be.uint16[Ce+2]=4*Se+2,be.uint16[Ce+3]=4*Se+2,be.uint16[Ce+4]=4*Se+3,be.uint16[Ce+5]=4*Se+0}return be}(Q));const ee=T.createIndexBuffer(va,!0),pe=T.createVertexBuffer(ie,p.collisionCircleLayout.members,!0);for(const Ee of G){const De={u_matrix:Ee.transform,u_inv_matrix:Ee.invTransform,u_camera_to_center_distance:(se=L).getCameraToCenterDistance(Ee.projection),u_viewport_size:[se.width,se.height]};te.draw(T,I.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,m.colorModeForRenderPass(),p.CullFaceMode.disabled,De,h.id,pe,ee,p.SegmentVector.simpleSegment(0,2*Ee.circleOffset,Ee.circleArray.length,Ee.circleArray.length/2),null,L.zoom)}var se;pe.destroy(),ee.destroy()}const tp=p.create();function Co(m,c,h,y,w,C){const{horizontalAlign:E,verticalAlign:T}=p.getAnchorAlignment(m),I=-(E-.5)*c,L=-(T-.5)*h,N=p.evaluateVariableOffset(m,y);return new p.pointGeometry((I/w+N[0])*C,(L/w+N[1])*C)}function Es(m,c,h,y,w,C,E,T,I,L,N){const G=m.text.placedSymbolArray,Q=m.text.dynamicLayoutVertexArray,oe=m.icon.dynamicLayoutVertexArray,te={},ie=rs(T,m.getProjection(),C),ne=C.elevation,ee=m.getProjection().upVectorScale(T.canonical,C.center.lat,C.worldSize);Q.clear();for(let pe=0;pe<G.length;pe++){const se=G.get(pe),Ee=m.allowVerticalPlacement&&!se.placedOrientation,De=se.hidden||!se.crossTileID||Ee?null:y[se.crossTileID];if(De){const be=new p.pointGeometry(se.tileAnchorX,se.tileAnchorY),Se=m.getProjection().upVector(T.canonical,be.x,be.y),Ce=ne?ne.getAtTileOffset(T,be.x,be.y):0,Re=Qt([se.projectedAnchorX+Ce*Se[0]*ee.metersToTile,se.projectedAnchorY+Ce*Se[1]*ee.metersToTile,se.projectedAnchorZ+Ce*Se[2]*ee.metersToTile],h?ie:E),He=tl(C.getCameraToCenterDistance(m.getProjection()),Re.signedDistanceFromCamera);let _t=w.evaluateSizeForFeature(m.textSizeData,L,se)*He/p.ONE_EM;h&&(_t*=m.tilePixelRatio/I);const{width:ze,height:ot,anchor:lt,textOffset:Pt,textScale:Ye}=De,yt=Co(lt,ze,ot,Pt,Ye,_t);let dt;if(h){const Ft=be.add(yt),{x:Zt,y:fi,z:Pi}=m.getProjection().projectTilePoint(Ft.x,Ft.y,T.canonical);dt=Qt([Zt+Ce*Se[0]*ee.metersToTile,fi+Ce*Se[1]*ee.metersToTile,Pi+Ce*Se[2]*ee.metersToTile],E).point}else{const Ft=c?yt.rotate(-C.angle):yt;dt=[Re.point[0]+Ft.x,Re.point[1]+Ft.y,0]}const It=m.allowVerticalPlacement&&se.placedOrientation===p.WritingMode.vertical?Math.PI/2:0;for(let Ft=0;Ft<se.numGlyphs;Ft++)p.addDynamicAttributes(Q,dt[0],dt[1],dt[2],It);N&&se.associatedIconIndex>=0&&(te[se.associatedIconIndex]={shiftedAnchor:dt,angle:It})}else il(se.numGlyphs,Q)}if(N){oe.clear();const pe=m.icon.placedSymbolArray;for(let se=0;se<pe.length;se++){const Ee=pe.get(se);if(Ee.hidden)il(Ee.numGlyphs,oe);else{const De=te[se];if(De)for(let be=0;be<Ee.numGlyphs;be++)p.addDynamicAttributes(oe,De.shiftedAnchor[0],De.shiftedAnchor[1],De.shiftedAnchor[2],De.angle);else il(Ee.numGlyphs,oe)}}m.icon.dynamicLayoutVertexBuffer.updateData(oe)}m.text.dynamicLayoutVertexBuffer.updateData(Q)}function nu(m,c,h){return h.iconsInText&&c?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function fc(m,c,h,y,w,C,E,T,I,L,N,G){const Q=m.context,oe=Q.gl,te=m.transform,ie="map"===T,ne="map"===I,ee=ie&&"point"!==h.layout.get("symbol-placement"),pe=ie&&!ne&&!ee,se=void 0!==h.layout.get("symbol-sort-key").constantOr(1);let Ee=!1;const De=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),be=[p.mercatorXfromLng(te.center.lng),p.mercatorYfromLat(te.center.lat)],Se=h.layout.get("text-variable-anchor"),Ce="globe"===te.projection.name,Re=[],He=[0,-1,0];let _t=He;!Ce&&!te.mercatorFromTransition||ie||(_t=function(ze){const ot=ze._camera.getWorldToCamera(ze.worldSize,1),lt=p.multiply([],ot,ze.globeMatrix);p.invert(lt,lt);const Pt=[0,0,0],Ye=[0,1,0,0];return p.transformMat4$1(Ye,Ye,lt),Pt[0]=Ye[0],Pt[1]=Ye[1],Pt[2]=Ye[2],p.normalize(Pt,Pt),Pt}(te));for(const ze of y){const ot=c.getTile(ze),lt=ot.getBucket(h);if(!lt||"mercator"===lt.projection.name&&Ce)continue;const Pt=w?lt.text:lt.icon;if(!Pt||lt.fullyClipped||!Pt.segments.get().length)continue;const Ye=Pt.programConfigurations.get(h.id),yt=w||lt.sdfIcons,dt=w?lt.textSizeData:lt.iconSizeData,It=ne||0!==te.pitch,Ft=p.evaluateSizeForZoom(dt,te.zoom);let Zt,fi,Pi,ln,Kt=[0,0],Hi=null;if(w){if(fi=ot.glyphAtlasTexture,Pi=oe.LINEAR,Zt=ot.glyphAtlasTexture.size,lt.iconsInText){Kt=ot.imageAtlasTexture.size,Hi=ot.imageAtlasTexture;const fo="composite"===dt.kind||"camera"===dt.kind;ln=It||m.options.rotating||m.options.zooming||fo?oe.LINEAR:oe.NEAREST}}else{const fo=1!==h.layout.get("icon-size").constantOr(0)||lt.iconsNeedLinear;fi=ot.imageAtlasTexture,Pi=yt||m.options.rotating||m.options.zooming||fo||It?oe.LINEAR:oe.NEAREST,Zt=ot.imageAtlasTexture.size}const Rn="globe"===lt.projection.name,br=Rn?_t:He,zr=Rn?p.globeToMercatorTransition(te.zoom):0,ir=rs(ze,lt.getProjection(),te),Xo=te.calculatePixelsToTileUnitsMatrix(ot),$s=on(ir,ot.tileID.canonical,ne,ie,te,lt.getProjection(),Xo),aa=m.terrain&&ne&&ee?p.invert(p.create(),$s):tp,Er=Mn(ir,ot.tileID.canonical,ne,ie,te,lt.getProjection(),Xo),Tr=Se&&lt.hasTextData(),cn="none"!==h.layout.get("icon-text-fit")&&Tr&&lt.hasIconData();if(ee){const fo=te.elevation,bc=fo?fo.getAtTileOffsetFunc(ze,te.center.lat,te.worldSize,lt.getProjection()):cl=>[0,0,0],ll=Ji(ir,ot.tileID.canonical,ne,ie,te,lt.getProjection(),Xo);en(lt,ir,m,w,ll,Er,ne,L,bc,ze)}const Pr=ee||w&&Se||cn,ds=m.translatePosMatrix(ir,ot,C,E),Yt=Pr?tp:$s,Lo=m.translatePosMatrix(Er,ot,C,E,!0),ud=lt.getProjection().createInversionMatrix(te,ze.canonical),us=[];m.terrain&&ne&&us.push("PITCH_WITH_MAP_TERRAIN"),Rn&&us.push("PROJECTION_GLOBE_VIEW"),Pr&&us.push("PROJECTED_POS_ON_VIEWPORT");const Vr=yt&&0!==h.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1);let ba;ba=yt?lt.iconsInText?Ua(dt.kind,Ft,pe,ne,m,ds,Yt,Lo,Zt,Kt,ze,zr,be,ud,br,lt.getProjection()):eh(dt.kind,Ft,pe,ne,m,ds,Yt,Lo,w,Zt,!0,ze,zr,be,ud,br,lt.getProjection()):Ju(dt.kind,Ft,pe,ne,m,ds,Yt,Lo,w,Zt,ze,zr,be,ud,br,lt.getProjection());const xa={program:m.useProgram(nu(yt,w,lt),Ye,us),buffers:Pt,uniformValues:ba,atlasTexture:fi,atlasTextureIcon:Hi,atlasInterpolation:Pi,atlasInterpolationIcon:ln,isSDF:yt,hasHalo:Vr,tile:ot,labelPlaneMatrixInv:aa};if(se&&lt.canOverlap){Ee=!0;const fo=Pt.segments.get();for(const bc of fo)Re.push({segments:new p.SegmentVector([bc]),sortKey:bc.sortKey,state:xa})}else Re.push({segments:Pt.segments,sortKey:0,state:xa})}Ee&&Re.sort((ze,ot)=>ze.sortKey-ot.sortKey);for(const ze of Re){const ot=ze.state;if(m.terrain&&m.terrain.setupElevationDraw(ot.tile,ot.program,{useDepthForOcclusion:!Ce,labelPlaneMatrixInv:ot.labelPlaneMatrixInv}),Q.activeTexture.set(oe.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,oe.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(Q.activeTexture.set(oe.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),ot.isSDF){const lt=ot.uniformValues;ot.hasHalo&&(lt.u_is_halo=1,mc(ot.buffers,ze.segments,h,m,ot.program,De,N,G,lt)),lt.u_is_halo=0}mc(ot.buffers,ze.segments,h,m,ot.program,De,N,G,ot.uniformValues)}}function mc(m,c,h,y,w,C,E,T,I){const L=y.context,N=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];w.draw(L,L.gl.TRIANGLES,C,E,T,p.CullFaceMode.disabled,I,h.id,m.layoutVertexBuffer,m.indexBuffer,c,h.paint,y.transform.zoom,m.programConfigurations.get(h.id),N)}function as(m,c,h,y,w,C,E){const T=m.context.gl,I=h.paint.get("fill-pattern"),L=I&&I.constantOr(1),N=h.getCrossfadeParameters();let G,Q,oe,te,ie;E?(Q=L&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",G=T.LINES):(Q=L?"fillPattern":"fill",G=T.TRIANGLES);for(const ne of y){const ee=c.getTile(ne);if(L&&!ee.patternsLoaded())continue;const pe=ee.getBucket(h);if(!pe)continue;m.prepareDrawTile();const se=pe.programConfigurations.get(h.id),Ee=m.useProgram(Q,se);L&&(m.context.activeTexture.set(T.TEXTURE0),ee.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),se.updatePaintBuffers(N));const De=I.constantOr(null);if(De&&ee.imageAtlas){const Se=ee.imageAtlas,Ce=Se.patternPositions[De.to.toString()],Re=Se.patternPositions[De.from.toString()];Ce&&Re&&se.setConstantPatternPositions(Ce,Re)}const be=m.translatePosMatrix(ne.projMatrix,ee,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(E){te=pe.indexBuffer2,ie=pe.segments2;const Se=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[T.drawingBufferWidth,T.drawingBufferHeight];oe="fillOutlinePattern"===Q&&L?ra(be,m,N,ee,Se):cr(be,Se)}else te=pe.indexBuffer,ie=pe.segments,oe=L?na(be,m,N,ee):eo(be);m.prepareDrawProgram(m.context,Ee,ne.toUnwrapped()),Ee.draw(m.context,G,w,m.stencilModeForClipping(ne),C,p.CullFaceMode.disabled,oe,h.id,pe.layoutVertexBuffer,te,ie,h.paint,m.transform.zoom,se)}}function Ha(m,c,h,y,w,C,E){const T=m.context,I=T.gl,L=m.transform,N=h.paint.get("fill-extrusion-pattern"),G=N.constantOr(1),Q=h.getCrossfadeParameters(),oe=h.paint.get("fill-extrusion-opacity"),te=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),h.paint.get("fill-extrusion-ambient-occlusion-radius")],ie=h.layout.get("fill-extrusion-edge-radius"),ne="globe"===L.projection.name?p.fillExtrusionHeightLift():0,ee="globe"===L.projection.name,pe=ee?p.globeToMercatorTransition(L.zoom):0,se=[p.mercatorXfromLng(L.center.lng),p.mercatorYfromLat(L.center.lat)],Ee=[];ee&&(Ee.push("PROJECTION_GLOBE_VIEW"),m.style.terrainSetForDrapingOnly()&&Ee.push("TERRAIN")),te[0]>0&&Ee.push("FAUX_AO");for(const De of y){const be=c.getTile(De),Se=be.getBucket(h);if(!Se||Se.projection.name!==L.projection.name)continue;const Ce=Se.programConfigurations.get(h.id),Re=m.useProgram(G?"fillExtrusionPattern":"fillExtrusion",Ce,Ee);if(m.terrain){const Ye=m.terrain;if(m.style.terrainSetForDrapingOnly())Ye.setupElevationDraw(be,Re,{useMeterToDem:!0});else{if(!Se.enableTerrain)continue;if(Ye.setupElevationDraw(be,Re,{useMeterToDem:!0}),ru(T,c,De,Se,h,Ye),!Se.centroidVertexBuffer){const yt=Re.attributes.a_centroid_pos;void 0!==yt&&I.vertexAttrib2f(yt,0,0)}}}G&&(m.context.activeTexture.set(I.TEXTURE0),be.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),Ce.updatePaintBuffers(Q));const He=N.constantOr(null);if(He&&be.imageAtlas){const Ye=be.imageAtlas,yt=Ye.patternPositions[He.to.toString()],dt=Ye.patternPositions[He.from.toString()];yt&&dt&&Ce.setConstantPatternPositions(yt,dt)}const _t=m.translatePosMatrix(De.projMatrix,be,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),ze=L.projection.createInversionMatrix(L,De.canonical),ot=h.paint.get("fill-extrusion-vertical-gradient"),lt=G?Mr(_t,m,ot,oe,te,ie,De,Q,be,ne,pe,se,ze):Ui(_t,m,ot,oe,te,ie,De,ne,pe,se,ze);m.prepareDrawProgram(T,Re,De.toUnwrapped());const Pt=[];m.terrain&&Pt.push(Se.centroidVertexBuffer),ee&&Pt.push(Se.layoutVertexExtBuffer),Re.draw(T,T.gl.TRIANGLES,w,C,E,p.CullFaceMode.backCCW,lt,h.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,h.paint,m.transform.zoom,Ce,Pt)}}function ru(m,c,h,y,w,C){const E=[ee=>{let pe=ee.canonical.x-1,se=ee.wrap;return pe<0&&(pe=(1<<ee.canonical.z)-1,se--),new p.OverscaledTileID(ee.overscaledZ,se,ee.canonical.z,pe,ee.canonical.y)},ee=>{let pe=ee.canonical.x+1,se=ee.wrap;return pe===1<<ee.canonical.z&&(pe=0,se++),new p.OverscaledTileID(ee.overscaledZ,se,ee.canonical.z,pe,ee.canonical.y)},ee=>new p.OverscaledTileID(ee.overscaledZ,ee.wrap,ee.canonical.z,ee.canonical.x,(0===ee.canonical.y?1<<ee.canonical.z:ee.canonical.y)-1),ee=>new p.OverscaledTileID(ee.overscaledZ,ee.wrap,ee.canonical.z,ee.canonical.x,ee.canonical.y===(1<<ee.canonical.z)-1?0:ee.canonical.y+1)],T=ee=>{const pe=c.getSource().minzoom,se=De=>{const be=c.getTileByID(De);if(be&&be.hasData())return be.getBucket(w)},Ee=[0,-1,1];for(const De of Ee){if(ee.overscaledZ+De<pe)continue;const be=se(ee.calculateScaledKey(ee.overscaledZ+De));if(be)return be}},I=[0,0,0],L=(ee,pe)=>(I[0]=Math.min(ee.min.y,pe.min.y),I[1]=Math.max(ee.max.y,pe.max.y),I[2]=p.EXTENT-pe.min.x>ee.max.x?pe.min.x-p.EXTENT:ee.max.x,I),N=(ee,pe)=>(I[0]=Math.min(ee.min.x,pe.min.x),I[1]=Math.max(ee.max.x,pe.max.x),I[2]=p.EXTENT-pe.min.y>ee.max.y?pe.min.y-p.EXTENT:ee.max.y,I),G=[(ee,pe)=>L(ee,pe),(ee,pe)=>L(pe,ee),(ee,pe)=>N(ee,pe),(ee,pe)=>N(pe,ee)],Q=new p.pointGeometry(0,0);let oe,te,ie;const ne=(ee,pe,se,Ee,De)=>{const be=[[Ee?se:ee,Ee?ee:se,0],[Ee?se:pe,Ee?pe:se,0]],Se=De<0?p.EXTENT+De:De,Ce=[Ee?Se:(ee+pe)/2,Ee?(ee+pe)/2:Se,0];return 0===se&&De<0||0!==se&&De>0?C.getForTilePoints(ie,[Ce],!0,te):be.push(Ce),C.getForTilePoints(h,be,!0,oe),Math.max(be[0][2],be[1][2],Ce[2])/C.exaggeration()};for(let ee=0;ee<4;ee++){const pe=(ee<2?1:5)-ee,se=y.borders[ee];if(0===se.length)continue;const Ee=ie=E[ee](h),De=T(Ee);if(!(De&&De instanceof p.FillExtrusionBucket&&De.enableTerrain)||y.borderDoneWithNeighborZ[ee]===De.canonical.z&&De.borderDoneWithNeighborZ[pe]===y.canonical.z||(te=C.findDEMTileFor(Ee),!te||!te.dem))continue;if(!oe){const Re=C.findDEMTileFor(h);if(!Re||!Re.dem)return;oe=Re}const be=De.borders[pe];let Se=0;const Ce=De.borderDoneWithNeighborZ[pe]!==y.canonical.z;if(y.canonical.z===De.canonical.z){for(let Re=0;Re<se.length;Re++){const He=y.featuresOnBorder[se[Re]],_t=He.borders[ee];let ze;for(;Se<be.length&&(ze=De.featuresOnBorder[be[Se]],!(ze.borders[pe][1]>_t[0]+3));)Ce&&De.encodeCentroid(void 0,ze,!1),Se++;if(ze&&Se<be.length){const ot=Se;let lt=0;for(;!(ze.borders[pe][0]>_t[1]-3)&&(lt++,++Se!==be.length);)ze=De.featuresOnBorder[be[Se]];if(ze=De.featuresOnBorder[be[ot]],He.intersectsCount()>1||ze.intersectsCount()>1||1!==lt){1!==lt&&(Se=ot),y.encodeCentroid(void 0,He,!1),Ce&&De.encodeCentroid(void 0,ze,!1);continue}const Pt=G[ee](He,ze),Ye=ee%2?p.EXTENT-1:0;Q.x=ne(Pt[0],Math.min(p.EXTENT-1,Pt[1]),Ye,ee<2,Pt[2]),Q.y=0,y.encodeCentroid(Q,He,!1),Ce&&De.encodeCentroid(Q,ze,!1)}else y.encodeCentroid(void 0,He,!1)}y.borderDoneWithNeighborZ[ee]=De.canonical.z,y.needsCentroidUpdate=!0,Ce&&(De.borderDoneWithNeighborZ[pe]=y.canonical.z,De.needsCentroidUpdate=!0)}else{for(const Re of se)y.encodeCentroid(void 0,y.featuresOnBorder[Re],!1);if(Ce){for(const Re of be)De.encodeCentroid(void 0,De.featuresOnBorder[Re],!1);De.borderDoneWithNeighborZ[pe]=y.canonical.z,De.needsCentroidUpdate=!0}y.borderDoneWithNeighborZ[ee]=De.canonical.z,y.needsCentroidUpdate=!0}}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&0!==y.centroidVertexArray.length)&&y.uploadCentroid(m)}const ip=new p.Color(1,0,0,1),gc=new p.Color(0,1,0,1),oa=new p.Color(0,0,1,1),np=new p.Color(1,0,1,1),rp=new p.Color(0,1,1,1);function zn(m,c,h){const y=m.context,w=m.transform,C=y.gl,E="globe"===w.projection.name,T=E?["PROJECTION_GLOBE_VIEW"]:null;let I=h.projMatrix;if(E&&p.globeToMercatorTransition(w.zoom)>0){const He=p.transitionTileAABBinECEF(h.canonical,w),_t=p.globeDenormalizeECEF(He);I=p.multiply(new Float32Array(16),w.globeMatrix,_t),p.multiply(I,w.projMatrix,I)}const L=m.useProgram("debug",null,T),N=c.getTileByID(h.key);m.terrain&&m.terrain.setupElevationDraw(N,L);const G=p.DepthMode.disabled,Q=p.StencilMode.disabled,oe=m.colorModeForRenderPass();y.activeTexture.set(C.TEXTURE0),m.emptyTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),E?N._makeGlobeTileDebugBuffers(m.context,w):N._makeDebugTileBoundsBuffers(m.context,w.projection);const ie=N._tileDebugBuffer||m.debugBuffer,ne=N._tileDebugIndexBuffer||m.debugIndexBuffer,ee=N._tileDebugSegments||m.debugSegments;L.draw(y,C.LINE_STRIP,G,Q,oe,p.CullFaceMode.disabled,nd(I,p.Color.red),"$debug",ie,ne,ee,null,null,null,[N._globeTileDebugBorderBuffer]);const pe=N.latestRawTileData,se=Math.floor((pe&&pe.byteLength||0)/1024),Ee=c.getTile(h).tileSize,De=512/Math.min(Ee,512)*(h.overscaledZ/w.zoom)*.5;let be=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(be+=` => ${h.overscaledZ}`),be+=` ${se}kb`,function(He,_t){He.initDebugOverlayCanvas();const ze=He.debugOverlayCanvas,ot=He.context.gl,lt=He.debugOverlayCanvas.getContext("2d");lt.clearRect(0,0,ze.width,ze.height),lt.shadowColor="white",lt.shadowBlur=2,lt.lineWidth=1.5,lt.strokeStyle="white",lt.textBaseline="top",lt.font="bold 36px Open Sans, sans-serif",lt.fillText(_t,5,5),lt.strokeText(_t,5,5),He.debugOverlayTexture.update(ze),He.debugOverlayTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE)}(m,be);const Se=N._tileDebugTextBuffer||m.debugBuffer,Ce=N._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,Re=N._tileDebugTextSegments||m.debugSegments;L.draw(y,C.TRIANGLES,G,Q,p.ColorMode.alphaBlended,p.CullFaceMode.disabled,nd(I,p.Color.transparent,De),"$debug",Se,Ce,Re,null,null,null,[N._globeTileDebugTextBuffer])}function ou(m,c,h,y){su(m,0,c+h/2,m.transform.width,h,y)}function df(m,c,h,y){su(m,c-h/2,0,h,m.transform.height,y)}function su(m,c,h,y,w,C){const E=m.context,T=E.gl;T.enable(T.SCISSOR_TEST),T.scissor(c*p.exported.devicePixelRatio,h*p.exported.devicePixelRatio,y*p.exported.devicePixelRatio,w*p.exported.devicePixelRatio),E.clear({color:C}),T.disable(T.SCISSOR_TEST)}const rd=p.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Hm}=rd;function Cl(m,c,h,y){m.emplaceBack(c,h,y)}class op{constructor(c){this.vertexArray=new p.StructArrayLayout3f12,this.indices=new p.StructArrayLayout3ui6,Cl(this.vertexArray,-1,-1,1),Cl(this.vertexArray,1,-1,1),Cl(this.vertexArray,-1,1,1),Cl(this.vertexArray,1,1,1),Cl(this.vertexArray,-1,-1,-1),Cl(this.vertexArray,1,-1,-1),Cl(this.vertexArray,-1,1,-1),Cl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,Hm),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=p.SegmentVector.simpleSegment(0,0,36,12)}}function ls(m,c,h,y,w,C){const E=m.gl,T=c.paint.get("sky-atmosphere-color"),I=c.paint.get("sky-atmosphere-halo-color"),L=c.paint.get("sky-atmosphere-sun-intensity"),N={u_matrix_3f:p.fromMat4(p.create$1(),y),u_sun_direction:w,u_sun_intensity:L,u_color_tint_r:[(te=T).r,te.g,te.b,te.a],u_color_tint_m:[(ie=I).r,ie.g,ie.b,ie.a],u_luminance:5e-5};var te,ie;E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+C,c.skyboxTexture,0),h.draw(m,E.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,p.ColorMode.unblended,p.CullFaceMode.frontCW,N,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const Ml=p.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class th{constructor(c){const h=new p.StructArrayLayout5f20;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const y=new p.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(h,Ml.members),this.indexBuffer=c.createIndexBuffer(y),this.segments=p.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Dl={symbol:function(m,c,h,y,w){if("translucent"!==m.renderPass)return;const C=p.StencilMode.disabled,E=m.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(T,I,L,N,G,Q,oe){const te=I.transform,ie="map"===G,ne="map"===Q;for(const ee of T){const pe=N.getTile(ee),se=pe.getBucket(L);if(!se||!se.text||!se.text.segments.get().length)continue;const Ee=p.evaluateSizeForZoom(se.textSizeData,te.zoom),De=rs(ee,se.getProjection(),te),be=te.calculatePixelsToTileUnitsMatrix(pe),Se=on(De,pe.tileID.canonical,ne,ie,te,se.getProjection(),be),Ce="none"!==L.layout.get("icon-text-fit")&&se.hasIconData();if(Ee){const Re=Math.pow(2,te.zoom-pe.tileID.overscaledZ);Es(se,ie,ne,oe,p.symbolSize,te,Se,ee,Re,Ee,Ce)}}}(y,m,h,c,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),w),0!==h.paint.get("icon-opacity").constantOr(1)&&fc(m,c,h,y,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),C,E),0!==h.paint.get("text-opacity").constantOr(1)&&fc(m,c,h,y,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),C,E),c.map.showCollisionBoxes&&(wo(m,c,h,y,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),wo(m,c,h,y,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(m,c,h,y){if("translucent"!==m.renderPass)return;const w=h.paint.get("circle-opacity"),C=h.paint.get("circle-stroke-width"),E=h.paint.get("circle-stroke-opacity"),T=void 0!==h.layout.get("circle-sort-key").constantOr(1);if(0===w.constantOr(1)&&(0===C.constantOr(1)||0===E.constantOr(1)))return;const I=m.context,L=I.gl,N=m.transform,G=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),Q=p.StencilMode.disabled,oe=m.colorModeForRenderPass(),te="globe"===N.projection.name,ie=[p.mercatorXfromLng(N.center.lng),p.mercatorYfromLat(N.center.lat)],ne=[];for(let pe=0;pe<y.length;pe++){const se=y[pe],Ee=c.getTile(se),De=Ee.getBucket(h);if(!De||De.projection.name!==N.projection.name)continue;const be=De.programConfigurations.get(h.id),Se=uc(h);te&&Se.push("PROJECTION_GLOBE_VIEW");const Ce=m.useProgram("circle",be,Se),Re=De.layoutVertexBuffer,He=De.globeExtVertexBuffer,_t=De.indexBuffer,ze=N.projection.createInversionMatrix(N,se.canonical),ot={programConfiguration:be,program:Ce,layoutVertexBuffer:Re,globeExtVertexBuffer:He,indexBuffer:_t,uniformValues:bl(m,se,Ee,ze,ie,h),tile:Ee};if(T){const lt=De.segments.get();for(const Pt of lt)ne.push({segments:new p.SegmentVector([Pt]),sortKey:Pt.sortKey,state:ot})}else ne.push({segments:De.segments,sortKey:0,state:ot})}T&&ne.sort((pe,se)=>pe.sortKey-se.sortKey);const ee={useDepthForOcclusion:!te};for(const pe of ne){const{programConfiguration:se,program:Ee,layoutVertexBuffer:De,globeExtVertexBuffer:be,indexBuffer:Se,uniformValues:Ce,tile:Re}=pe.state,He=pe.segments;m.terrain&&m.terrain.setupElevationDraw(Re,Ee,ee),m.prepareDrawProgram(I,Ee,Re.tileID.toUnwrapped()),Ee.draw(I,L.TRIANGLES,G,Q,oe,p.CullFaceMode.disabled,Ce,h.id,De,Se,He,h.paint,N.zoom,se,[be])}},heatmap:function(m,c,h,y){if(0!==h.paint.get("heatmap-opacity"))if("offscreen"===m.renderPass){const w=m.context,C=w.gl,E=p.StencilMode.disabled,T=new p.ColorMode([C.ONE,C.ONE],p.Color.transparent,[!0,!0,!0,!0]);(function(oe,te,ie,ne){const ee=oe.gl,pe=te.width*ne,se=te.height*ne;oe.activeTexture.set(ee.TEXTURE1),oe.viewport.set([0,0,pe,se]);let Ee=ie.heatmapFbo;if(!Ee||Ee&&(Ee.width!==pe||Ee.height!==se)){Ee&&Ee.destroy();const De=ee.createTexture();ee.bindTexture(ee.TEXTURE_2D,De),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_S,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_WRAP_T,ee.CLAMP_TO_EDGE),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MIN_FILTER,ee.LINEAR),ee.texParameteri(ee.TEXTURE_2D,ee.TEXTURE_MAG_FILTER,ee.LINEAR),Ee=ie.heatmapFbo=oe.createFramebuffer(pe,se,!1),function(be,Se,Ce,Re,He,_t){const ze=be.gl;ze.texImage2D(ze.TEXTURE_2D,0,ze.RGBA,He,_t,0,ze.RGBA,be.extRenderToTextureHalfFloat?be.extTextureHalfFloat.HALF_FLOAT_OES:ze.UNSIGNED_BYTE,null),Re.colorAttachment.set(Ce)}(oe,0,De,Ee,pe,se)}else ee.bindTexture(ee.TEXTURE_2D,Ee.colorAttachment.get()),oe.bindFramebuffer.set(Ee.framebuffer)})(w,m,h,"globe"===m.transform.projection.name?.5:.25),w.clear({color:p.Color.transparent});const I=m.transform,L="globe"===I.projection.name,N=L?["PROJECTION_GLOBE_VIEW"]:null,G=L?p.CullFaceMode.frontCCW:p.CullFaceMode.disabled,Q=[p.mercatorXfromLng(I.center.lng),p.mercatorYfromLat(I.center.lat)];for(let oe=0;oe<y.length;oe++){const te=y[oe];if(c.hasRenderableParent(te))continue;const ie=c.getTile(te),ne=ie.getBucket(h);if(!ne||ne.projection.name!==I.projection.name)continue;const ee=ne.programConfigurations.get(h.id),pe=m.useProgram("heatmap",ee,N),{zoom:se}=m.transform;m.terrain&&m.terrain.setupElevationDraw(ie,pe),m.prepareDrawProgram(w,pe,te.toUnwrapped());const Ee=I.projection.createInversionMatrix(I,te.canonical);pe.draw(w,C.TRIANGLES,p.DepthMode.disabled,E,T,G,Qu(m,te,ie,Ee,Q,se,h.paint.get("heatmap-intensity")),h.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,h.paint,m.transform.zoom,ee,L?[ne.globeExtVertexBuffer]:null)}w.viewport.set([0,0,m.width,m.height])}else"translucent"===m.renderPass&&(m.context.setColorMode(m.colorModeForRenderPass()),function(w,C){const E=w.context,T=E.gl,I=C.heatmapFbo;if(!I)return;E.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,I.colorAttachment.get()),E.activeTexture.set(T.TEXTURE1);let L=C.colorRampTexture;L||(L=C.colorRampTexture=new p.Texture(E,C.colorRamp,T.RGBA)),L.bind(T.LINEAR,T.CLAMP_TO_EDGE),w.useProgram("heatmapTexture").draw(E,T.TRIANGLES,p.DepthMode.disabled,p.StencilMode.disabled,w.colorModeForRenderPass(),p.CullFaceMode.disabled,{u_image:0,u_color_ramp:1,u_opacity:C.paint.get("heatmap-opacity")},C.id,w.viewportBuffer,w.quadTriangleIndexBuffer,w.viewportSegments,C.paint,w.transform.zoom)}(m,h))},line:function(m,c,h,y){if("translucent"!==m.renderPass)return;const w=h.paint.get("line-opacity"),C=h.paint.get("line-width");if(0===w.constantOr(1)||0===C.constantOr(1))return;const E=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),T=m.colorModeForRenderPass(),I=m.terrain&&m.terrain.renderingToTexture?1:p.exported.devicePixelRatio,L=h.paint.get("line-dasharray"),N=L.constantOr(1),G=h.layout.get("line-cap"),Q=h.paint.get("line-pattern"),oe=Q.constantOr(1),te=h.paint.get("line-gradient"),ie=h.getCrossfadeParameters(),ne=oe?"linePattern":"line",ee=m.context,pe=ee.gl,se=(De=>{const be=[];ss(De)&&be.push("RENDER_LINE_DASH"),De.paint.get("line-gradient")&&be.push("RENDER_LINE_GRADIENT");const Se=De.paint.get("line-trim-offset");0===Se[0]&&0===Se[1]||be.push("RENDER_LINE_TRIM_OFFSET");const Ce=De.paint.get("line-pattern").constantOr(1),Re=1!==De.paint.get("line-opacity").constantOr(1);return!Ce&&Re&&be.push("RENDER_LINE_ALPHA_DISCARD"),be})(h);let Ee=se.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(Ee=!1);for(const De of y){const be=c.getTile(De);if(oe&&!be.patternsLoaded())continue;const Se=be.getBucket(h);if(!Se)continue;m.prepareDrawTile();const Ce=Se.programConfigurations.get(h.id),Re=m.useProgram(ne,Ce,se),He=Q.constantOr(null);if(He&&be.imageAtlas){const dt=be.imageAtlas,It=dt.patternPositions[He.to.toString()],Ft=dt.patternPositions[He.from.toString()];It&&Ft&&Ce.setConstantPatternPositions(It,Ft)}const _t=L.constantOr(null),ze=G.constantOr(null);if(!oe&&_t&&ze&&be.lineAtlas){const dt=be.lineAtlas,It=dt.getDash(_t.to,ze),Ft=dt.getDash(_t.from,ze);It&&Ft&&Ce.setConstantPatternPositions(It,Ft)}let[ot,lt]=h.paint.get("line-trim-offset");("round"===ze||"square"===ze)&&ot!==lt&&(0===ot&&(ot-=1),1===lt&&(lt+=1));const Pt=m.terrain?De.projMatrix:null,Ye=oe?xo(m,be,h,ie,Pt,I):ya(m,be,h,ie,Pt,Se.lineClipsArray.length,I,[ot,lt]);if(te){const dt=Se.gradients[h.id];let It=dt.texture;if(h.gradientVersion!==dt.version){let Ft=256;if(h.stepInterpolant){const Zt=c.getSource().maxzoom,fi=De.canonical.z===Zt?Math.ceil(1<<m.transform.maxZoom-De.canonical.z):1;Ft=p.clamp(p.nextPowerOfTwo(Se.maxLineLength/p.EXTENT*1024*fi),256,ee.maxTextureSize)}dt.gradient=p.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:Ft,image:dt.gradient||void 0,clips:Se.lineClipsArray}),dt.texture?dt.texture.update(dt.gradient):dt.texture=new p.Texture(ee,dt.gradient,pe.RGBA),dt.version=h.gradientVersion,It=dt.texture}ee.activeTexture.set(pe.TEXTURE1),It.bind(h.stepInterpolant?pe.NEAREST:pe.LINEAR,pe.CLAMP_TO_EDGE)}N&&(ee.activeTexture.set(pe.TEXTURE0),be.lineAtlasTexture.bind(pe.LINEAR,pe.REPEAT),Ce.updatePaintBuffers(ie)),oe&&(ee.activeTexture.set(pe.TEXTURE0),be.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Ce.updatePaintBuffers(ie)),m.prepareDrawProgram(ee,Re,De.toUnwrapped());const yt=dt=>{Re.draw(ee,pe.TRIANGLES,E,dt,T,p.CullFaceMode.disabled,Ye,h.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,h.paint,m.transform.zoom,Ce,[Se.layoutVertexBuffer2])};if(Ee){const dt=m.stencilModeForClipping(De).ref;0===dt&&m.terrain&&ee.clear({stencil:0});const It={func:pe.EQUAL,mask:255};Ye.u_alpha_discard_threshold=.8,yt(new p.StencilMode(It,dt,255,pe.KEEP,pe.KEEP,pe.INVERT)),Ye.u_alpha_discard_threshold=0,yt(new p.StencilMode(It,dt,255,pe.KEEP,pe.KEEP,pe.KEEP))}else yt(m.stencilModeForClipping(De))}Ee&&(m.resetStencilClippingMasks(),m.terrain&&ee.clear({stencil:0}))},fill:function(m,c,h,y){const w=h.paint.get("fill-color"),C=h.paint.get("fill-opacity");if(0===C.constantOr(1))return;const E=m.colorModeForRenderPass(),T=h.paint.get("fill-pattern"),I=m.opaquePassEnabledForLayer()&&!T.constantOr(1)&&1===w.constantOr(p.Color.transparent).a&&1===C.constantOr(0)?"opaque":"translucent";if(m.renderPass===I){const L=m.depthModeForSublayer(1,"opaque"===m.renderPass?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly);as(m,c,h,y,L,E,!1)}if("translucent"===m.renderPass&&h.paint.get("fill-antialias")){const L=m.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,p.DepthMode.ReadOnly);as(m,c,h,y,L,E,!0)}},"fill-extrusion":function(m,c,h,y){const w=h.paint.get("fill-extrusion-opacity");if(0!==w&&"translucent"===m.renderPass){const C=new p.DepthMode(m.context.gl.LEQUAL,p.DepthMode.ReadWrite,m.depthRangeFor3D);if(1!==w||h.paint.get("fill-extrusion-pattern").constantOr(1))Ha(m,c,h,y,C,p.StencilMode.disabled,p.ColorMode.disabled),Ha(m,c,h,y,C,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const E=m.colorModeForRenderPass();Ha(m,c,h,y,C,p.StencilMode.disabled,E)}}},hillshade:function(m,c,h,y){if("offscreen"!==m.renderPass&&"translucent"!==m.renderPass)return;const w=m.context,C=m.depthModeForSublayer(0,p.DepthMode.ReadOnly),E=m.colorModeForRenderPass(),T=m.terrain&&m.terrain.renderingToTexture,[I,L]="translucent"!==m.renderPass||T?[{},y]:m.stencilConfigForOverlap(y);for(const N of L){const G=c.getTile(N);if(G.needsHillshadePrepare&&"offscreen"===m.renderPass)nl(m,G,h,C,p.StencilMode.disabled,E);else if("translucent"===m.renderPass){const Q=T&&m.terrain?m.terrain.stencilModeForRTTOverlap(N):I[N.overscaledZ];ia(m,N,G,h,C,Q,E)}}w.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,c,h,y,w,C){if("translucent"!==m.renderPass||0===h.paint.get("raster-opacity")||!y.length)return;const E=m.context,T=E.gl,I=c.getSource(),L=m.useProgram("raster"),N=m.colorModeForRenderPass(),G=m.terrain&&m.terrain.renderingToTexture,[Q,oe]=I instanceof Ne||G?[{},y]:m.stencilConfigForOverlap(y),te=oe[oe.length-1].overscaledZ,ie=!m.options.moving;for(const ne of oe){const ee=G?p.DepthMode.disabled:m.depthModeForSublayer(ne.overscaledZ-te,1===h.paint.get("raster-opacity")?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly,T.LESS),pe=ne.toUnwrapped(),se=c.getTile(ne);if(G&&(!se||!se.hasData()))continue;const Ee=G?ne.projMatrix:m.transform.calculateProjMatrix(pe,ie),De=m.terrain&&G?m.terrain.stencilModeForRTTOverlap(ne):Q[ne.overscaledZ],be=C?0:h.paint.get("raster-fade-duration");se.registerFadeDuration(be);const Se=c.findLoadedParent(ne,0),Ce=ho(se,Se,c,m.transform,be);let Re,He;m.terrain&&m.terrain.prepareDrawTile();const _t="nearest"===h.paint.get("raster-resampling")?T.NEAREST:T.LINEAR;E.activeTexture.set(T.TEXTURE0),se.texture.bind(_t,T.CLAMP_TO_EDGE),E.activeTexture.set(T.TEXTURE1),Se?(Se.texture.bind(_t,T.CLAMP_TO_EDGE),Re=Math.pow(2,Se.tileID.overscaledZ-se.tileID.overscaledZ),He=[se.tileID.canonical.x*Re%1,se.tileID.canonical.y*Re%1]):se.texture.bind(_t,T.CLAMP_TO_EDGE);const ze=hc(Ee,He||[0,0],Re||1,Ce,h,I instanceof Ne?I.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(E,L,pe),I instanceof Ne)I.boundsBuffer&&I.boundsSegments&&L.draw(E,T.TRIANGLES,ee,p.StencilMode.disabled,N,p.CullFaceMode.disabled,ze,h.id,I.boundsBuffer,m.quadTriangleIndexBuffer,I.boundsSegments);else{const{tileBoundsBuffer:ot,tileBoundsIndexBuffer:lt,tileBoundsSegments:Pt}=m.getTileBoundsBuffers(se);L.draw(E,T.TRIANGLES,ee,De,N,p.CullFaceMode.disabled,ze,h.id,ot,lt,Pt)}}m.resetStencilClippingMasks()},background:function(m,c,h,y){const w=h.paint.get("background-color"),C=h.paint.get("background-opacity");if(0===C)return;const E=m.context,T=E.gl,I=m.transform,L=I.tileSize,N=h.paint.get("background-pattern");if(m.isPatternMissing(N))return;const G=!N&&1===w.a&&1===C&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==G)return;const Q=p.StencilMode.disabled,oe=m.depthModeForSublayer(0,"opaque"===G?p.DepthMode.ReadWrite:p.DepthMode.ReadOnly),te=m.colorModeForRenderPass(),ie=m.useProgram(N?"backgroundPattern":"background");let ne,ee=y;ee||(ne=m.getBackgroundTiles(),ee=Object.values(ne).map(se=>se.tileID)),N&&(E.activeTexture.set(T.TEXTURE0),m.imageManager.bind(m.context));const pe=h.getCrossfadeParameters();for(const se of ee){const Ee=se.toUnwrapped(),De=y?se.projMatrix:m.transform.calculateProjMatrix(Ee);m.prepareDrawTile();const be=c?c.getTile(se):ne?ne[se.key]:new p.Tile(se,L,I.zoom,m),Se=N?wl(De,C,m,N,{tileID:se,tileSize:L},pe):tu(De,C,w);m.prepareDrawProgram(E,ie,Ee);const{tileBoundsBuffer:Ce,tileBoundsIndexBuffer:Re,tileBoundsSegments:He}=m.getTileBoundsBuffers(be);ie.draw(E,T.TRIANGLES,oe,Q,te,p.CullFaceMode.disabled,Se,h.id,Ce,Re,He)}},sky:function(m,c,h){const y=m.transform,w="mercator"===y.projection.name||"globe"===y.projection.name?1:p.smoothstep(7,8,y.zoom),C=h.paint.get("sky-opacity")*w;if(0===C)return;const E=m.context,T=h.paint.get("sky-type"),I=new p.DepthMode(E.gl.LEQUAL,p.DepthMode.ReadOnly,[0,1]),L=m.frameCounter/1e3%1;"atmosphere"===T?"offscreen"===m.renderPass?h.needsSkyboxCapture(m)&&(function(N,G,Q,oe){const te=N.context,ie=te.gl;let ne=G.skyboxFbo;if(!ne){ne=G.skyboxFbo=te.createFramebuffer(32,32,!1),G.skyboxGeometry=new op(te),G.skyboxTexture=te.gl.createTexture(),ie.bindTexture(ie.TEXTURE_CUBE_MAP,G.skyboxTexture),ie.texParameteri(ie.TEXTURE_CUBE_MAP,ie.TEXTURE_WRAP_S,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_CUBE_MAP,ie.TEXTURE_WRAP_T,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_CUBE_MAP,ie.TEXTURE_MIN_FILTER,ie.LINEAR),ie.texParameteri(ie.TEXTURE_CUBE_MAP,ie.TEXTURE_MAG_FILTER,ie.LINEAR);for(let Ee=0;Ee<6;++Ee)ie.texImage2D(ie.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,ie.RGBA,32,32,0,ie.RGBA,ie.UNSIGNED_BYTE,null)}te.bindFramebuffer.set(ne.framebuffer),te.viewport.set([0,0,32,32]);const ee=G.getCenter(N,!0),pe=N.useProgram("skyboxCapture"),se=new Float64Array(16);p.identity(se),p.rotateY(se,se,.5*-Math.PI),ls(te,G,pe,se,ee,0),p.identity(se),p.rotateY(se,se,.5*Math.PI),ls(te,G,pe,se,ee,1),p.identity(se),p.rotateX(se,se,.5*-Math.PI),ls(te,G,pe,se,ee,2),p.identity(se),p.rotateX(se,se,.5*Math.PI),ls(te,G,pe,se,ee,3),p.identity(se),ls(te,G,pe,se,ee,4),p.identity(se),p.rotateY(se,se,Math.PI),ls(te,G,pe,se,ee,5),te.viewport.set([0,0,N.width,N.height])}(m,h),h.markSkyboxValid(m)):"sky"===m.renderPass&&function(N,G,Q,oe,te){const ie=N.context,ne=ie.gl,ee=N.transform,pe=N.useProgram("skybox");ie.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_CUBE_MAP,G.skyboxTexture);const se={u_matrix:ee.skyboxMatrix,u_sun_direction:G.getCenter(N,!1),u_cubemap:0,u_opacity:oe,u_temporal_offset:te};N.prepareDrawProgram(ie,pe),pe.draw(ie,ne.TRIANGLES,Q,p.StencilMode.disabled,N.colorModeForRenderPass(),p.CullFaceMode.backCW,se,"skybox",G.skyboxGeometry.vertexBuffer,G.skyboxGeometry.indexBuffer,G.skyboxGeometry.segment)}(m,h,I,C,L):"gradient"===T&&"sky"===m.renderPass&&function(N,G,Q,oe,te){const ie=N.context,ne=ie.gl,ee=N.transform,pe=N.useProgram("skyboxGradient");G.skyboxGeometry||(G.skyboxGeometry=new op(ie)),ie.activeTexture.set(ne.TEXTURE0);let se=G.colorRampTexture;se||(se=G.colorRampTexture=new p.Texture(ie,G.colorRamp,ne.RGBA)),se.bind(ne.LINEAR,ne.CLAMP_TO_EDGE);const Ee=(De=ee.skyboxMatrix,be=G.getCenter(N,!1),Se=G.paint.get("sky-gradient-radius"),Ce=oe,Re=te,{u_matrix:De,u_color_ramp:0,u_center_direction:be,u_radius:p.degToRad(Se),u_opacity:Ce,u_temporal_offset:Re});var De,be,Se,Ce,Re;N.prepareDrawProgram(ie,pe),pe.draw(ie,ne.TRIANGLES,Q,p.StencilMode.disabled,N.colorModeForRenderPass(),p.CullFaceMode.backCW,Ee,"skyboxGradient",G.skyboxGeometry.vertexBuffer,G.skyboxGeometry.indexBuffer,G.skyboxGeometry.segment)}(m,h,I,C,L)},debug:function(m,c,h){for(let y=0;y<h.length;y++)zn(m,c,h[y])},custom:function(m,c,h){const y=m.context,w=h.implementation;if(m.transform.projection.unsupportedLayers&&m.transform.projection.unsupportedLayers.includes("custom"))p.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===m.renderPass){const C=w.prerender;C&&(m.setCustomLayerDefaults(),y.setColorMode(m.colorModeForRenderPass()),C.call(w,y.gl,m.transform.customLayerMatrix()),y.setDirty(),m.setBaseState())}else if("translucent"===m.renderPass){m.setCustomLayerDefaults(),y.setColorMode(m.colorModeForRenderPass()),y.setStencilMode(p.StencilMode.disabled);const C="3d"===w.renderingMode?new p.DepthMode(m.context.gl.LEQUAL,p.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,p.DepthMode.ReadOnly);y.setDepthMode(C),w.render(y.gl,m.transform.customLayerMatrix()),y.setDirty(),m.setBaseState(),y.bindFramebuffer.set(null)}}};class od{constructor(c,h){this.context=new ae(c),this.transform=h,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=p.SourceCache.maxUnderzooming+p.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vl,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(c,h){const y=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new ol(this,c));const w=this._terrain;this.transform.elevation=y?w:null,w.update(c,this.transform,h)}_updateFog(c){const h=c.fog;if(!h||"globe"===this.transform.projection.name||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,w]=h.getFovAdjustedRange(this.transform._fov);if(y>w)return void(this.transform.fogCullDistSq=null);const C=y+.78*(w-y);this.transform.fogCullDistSq=C*C}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(c,h){if(this.width=c*p.exported.devicePixelRatio,this.height=h*p.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const c=this.context,h=new p.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(p.EXTENT,0),h.emplaceBack(0,p.EXTENT),h.emplaceBack(p.EXTENT,p.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(h,p.posAttributes.members),this.tileExtentSegments=p.SegmentVector.simpleSegment(0,0,4,2);const y=new p.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(p.EXTENT,0),y.emplaceBack(0,p.EXTENT),y.emplaceBack(p.EXTENT,p.EXTENT),this.debugBuffer=c.createVertexBuffer(y,p.posAttributes.members),this.debugSegments=p.SegmentVector.simpleSegment(0,0,4,5);const w=new p.StructArrayLayout2i4;w.emplaceBack(-1,-1),w.emplaceBack(1,-1),w.emplaceBack(-1,1),w.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(w,p.posAttributes.members),this.viewportSegments=p.SegmentVector.simpleSegment(0,0,4,2);const C=new p.StructArrayLayout4i8;C.emplaceBack(0,0,0,0),C.emplaceBack(p.EXTENT,0,p.EXTENT,0),C.emplaceBack(0,p.EXTENT,0,p.EXTENT),C.emplaceBack(p.EXTENT,p.EXTENT,p.EXTENT,p.EXTENT),this.mercatorBoundsBuffer=c.createVertexBuffer(C,p.boundsAttributes.members),this.mercatorBoundsSegments=p.SegmentVector.simpleSegment(0,0,4,2);const E=new p.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(E);const T=new p.StructArrayLayout1ui2;for(const L of[0,1,3,2,0])T.emplaceBack(L);this.debugIndexBuffer=c.createIndexBuffer(T),this.emptyTexture=new p.Texture(c,new p.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA),this.identityMat=p.create();const I=this.context.gl;this.stencilClearMode=new p.StencilMode({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO),this.loadTimeStamps.push(p.window.performance.now()),this.atmosphereBuffer=new th(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context,h=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(c,h.TRIANGLES,p.DepthMode.disabled,this.stencilClearMode,p.ColorMode.disabled,p.CullFaceMode.disabled,Xe(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,h,y){if(!h||this.currentStencilSource===h.id||!c.isTileClipped()||!y||0===y.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let T=!1;for(const I of y)if(void 0===this._tileClippingMaskIDs[I.key]){T=!0;break}if(!T)return}this.currentStencilSource=h.id;const w=this.context,C=w.gl;this.nextStencilID+y.length>256&&this.clearStencil(),w.setColorMode(p.ColorMode.disabled),w.setDepthMode(p.DepthMode.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of y){const I=h.getTile(T),L=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,{tileBoundsBuffer:N,tileBoundsIndexBuffer:G,tileBoundsSegments:Q}=this.getTileBoundsBuffers(I);E.draw(w,C.TRIANGLES,p.DepthMode.disabled,new p.StencilMode({func:C.ALWAYS,mask:0},L,255,C.KEEP,C.KEEP,C.REPLACE),p.ColorMode.disabled,p.CullFaceMode.disabled,Xe(T.projMatrix),"$clipping",N,G,Q)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,h=this.context.gl;return new p.StencilMode({func:h.NOTEQUAL,mask:255},c,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const h=this.context.gl;return new p.StencilMode({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(c){const h=this.context.gl,y=c.sort((E,T)=>T.overscaledZ-E.overscaledZ),w=y[y.length-1].overscaledZ,C=y[0].overscaledZ-w+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const E={};for(let T=0;T<C;T++)E[T+w]=new p.StencilMode({func:h.GEQUAL,mask:255},T+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=C,[E,y]}return[{[w]:p.StencilMode.disabled},y]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new p.ColorMode([c.CONSTANT_COLOR,c.ONE],new p.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?p.ColorMode.unblended:p.ColorMode.alphaBlended}depthModeForSublayer(c,h,y){if(!this.opaquePassEnabledForLayer())return p.DepthMode.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new p.DepthMode(y||this.context.gl.LEQUAL,h,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,h){this.style=c,this.options=h,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(p.exported.now()),this.imageManager.beginFrame();const y=this.style.order,w=this.style._sourceCaches;for(const I in w){const L=w[I];L.used&&L.prepare(this.context)}const C={},E={},T={};for(const I in w){const L=w[I];C[I]=L.getVisibleCoordinates(),E[I]=C[I].slice().reverse(),T[I]=L.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<y.length;I++)if(this.style._layers[y[I]].is3D()){this.opaquePassCutoff=I;break}if(this.terrain&&(this.terrain.updateTileBinding(T),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new p.GlobeSharedBuffers(this.context)),p.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const I of y){const L=this.style._layers[I],N=c._getLayerSourceCache(L);if(!L.hasOffscreenPass()||L.isHidden(this.transform.zoom))continue;const G=N?E[N.id]:void 0;("custom"===L.type||L.isSky()||G&&G.length)&&this.renderLayer(this,N,L,G)}if(this.depthRangeFor3D=[0,1-(c.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:h.showOverdrawInspector?p.Color.black:p.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[y[this.currentLayer]],L=c._getLayerSourceCache(I);if(I.isSky())continue;const N=L?E[L.id]:void 0;this._renderTileClippingMasks(I,L,N),this.renderLayer(this,L,I,N)}if(this.style.fog&&this.transform.projection.supportsFog&&function(I,L){const N=I.context,G=N.gl,Q=I.transform,oe=new p.DepthMode(G.LEQUAL,p.DepthMode.ReadOnly,[0,1]),te=I.useProgram("globeAtmosphere",null,"globe"===Q.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),ie=p.globeToMercatorTransition(Q.zoom),ne=L.properties.get("color").toArray01(),ee=L.properties.get("high-color").toArray01(),pe=L.properties.get("space-color").toArray01PremultipliedAlpha(),se=p.identity$1([]);p.rotateY$1(se,se,-p.degToRad(Q._center.lng)),p.rotateX$1(se,se,p.degToRad(Q._center.lat)),p.rotateZ$1(se,se,Q.angle),p.rotateX$1(se,se,-Q._pitch);const Ee=p.fromQuat(new Float32Array(16),se),De=p.mapValue(L.properties.get("star-intensity"),0,1,0,.25),Se=p.mapValue(L.properties.get("horizon-blend"),0,1,5e-4,.25),Ce=p.globeUseCustomAntiAliasing(I,N,Q)&&5e-4===Se?Q.worldSize/(2*Math.PI*1.025)-1:Q.globeRadius,Re=I.frameCounter/1e3%1,He=p.length(Q.globeCenterInViewSpace),_t=Math.sqrt(Math.pow(He,2)-Math.pow(Ce,2)),ze=Math.acos(_t/He),ot={u_frustum_tl:Q.frustumCorners.TL,u_frustum_tr:Q.frustumCorners.TR,u_frustum_br:Q.frustumCorners.BR,u_frustum_bl:Q.frustumCorners.BL,u_horizon:Q.frustumCorners.horizon,u_transition:ie,u_fadeout_range:Se,u_color:ne,u_high_color:ee,u_space_color:pe,u_star_intensity:De,u_star_size:5*p.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Re,u_horizon_angle:ze,u_rotation_matrix:Ee};I.prepareDrawProgram(N,te);const lt=I.atmosphereBuffer;lt&&te.draw(N,G.TRIANGLES,oe,p.StencilMode.disabled,p.ColorMode.alphaBlended,p.CullFaceMode.backCW,ot,"skybox",lt.vertexBuffer,lt.indexBuffer,lt.segments)}(this,this.style.fog),this.renderPass="sky",(p.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const I=this.style._layers[y[this.currentLayer]],L=c._getLayerSourceCache(I);I.isSky()&&this.renderLayer(this,L,I,L?E[L.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const I=this.style._layers[y[this.currentLayer]],L=c._getLayerSourceCache(I);if(I.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(I)){if(I.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const N=L?("symbol"===I.type?T:E)[L.id]:void 0;this._renderTileClippingMasks(I,L,L?C[L.id]:void 0),this.renderLayer(this,L,I,N),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let I=null;p.values(this.style._layers).forEach(L=>{const N=c._getLayerSourceCache(L);N&&!L.isHidden(this.transform.zoom)&&(!I||I.getSource().maxzoom<N.getSource().maxzoom)&&(I=N)}),I&&this.options.showTileBoundaries&&Dl.debug(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const L=I.transform.padding;ou(I,I.transform.height-(L.top||0),3,ip),ou(I,L.bottom||0,3,gc),df(I,L.left||0,3,oa),df(I,I.transform.width-(L.right||0),3,np);const N=I.transform.centerPoint;var G,Q,oe,te;su(G=I,(Q=N.x)-1,(oe=I.transform.height-N.y)-10,2,20,te=rp),su(G,Q-10,oe-1,20,2,te)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(p.window.performance.now()),this.saveCanvasCopy())}}renderLayer(c,h,y,w){y.isHidden(this.transform.zoom)||("background"===y.type||"sky"===y.type||"custom"===y.type||w&&w.length)&&(this.id=y.id,this.gpuTimingStart(y),c.transform.projection.unsupportedLayers&&c.transform.projection.unsupportedLayers.includes(y.type)||Dl[y.type](c,h,y,w,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let y=this.gpuTimers[c.id];y||(y=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),y.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,y.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,h=c.createQueryEXT();this.deferredRenderGpuTimeQueries.push(h),c.beginQueryEXT(c.TIME_ELAPSED_EXT,h)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const h={};for(const y in c){const w=c[y],C=this.context.extTimerQuery,E=C.getQueryObjectEXT(w.query,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(w.query),h[y]=E}return h}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery;let y=0;for(const w of c)y+=h.getQueryObjectEXT(w,h.QUERY_RESULT_EXT)/1e6,h.deleteQueryEXT(w);return y}translatePosMatrix(c,h,y,w,C){if(!y[0]&&!y[1])return c;const E=C?"map"===w?this.transform.angle:0:"viewport"===w?-this.transform.angle:0;if(E){const L=Math.sin(E),N=Math.cos(E);y=[y[0]*N-y[1]*L,y[0]*L+y[1]*N]}const T=[C?y[0]:Go(h,y[0],this.transform.zoom),C?y[1]:Go(h,y[1],this.transform.zoom),0],I=new Float32Array(16);return p.translate(I,c,T),I}saveTileTexture(c){const h=this._tileTextures[c.size[0]];h?h.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const h=this._tileTextures[c];return h&&h.length>0?h.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const h=this.imageManager.getPattern(c.from.toString()),y=this.imageManager.getPattern(c.to.toString());return!h||!y}currentGlobalDefines(){const c=this.terrain&&this.terrain.renderingToTexture,h=this.style&&this.style.fog,y=[];return this.terrain&&!this.terrain.renderingToTexture&&y.push("TERRAIN"),h&&!c&&0!==h.getOpacity(this.transform.pitch)&&y.push("FOG"),c&&y.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&y.push("OVERDRAW_INSPECTOR"),y}useProgram(c,h,y){this.cache=this.cache||{};const w=y||[],C=this.currentGlobalDefines().concat(w),E=Zo.cacheKey(Nn[c],c,C,h);return this.cache[E]||(this.cache[E]=new Zo(this.context,c,Nn[c],h,iu[c],C)),this.cache[E]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=p.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new p.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(c,h,y){if(this.terrain&&this.terrain.renderingToTexture)return;const w=this.style.fog;if(w){const C=w.getOpacity(this.transform.pitch),E=((T,I,L,N,G,Q,oe,te,ie,ne,ee)=>{const pe=T.transform,se=I.properties.get("color").toArray01();se[3]=N;const Ee=T.frameCounter/1e3%1;return{u_fog_matrix:L?pe.calculateFogTileMatrix(L):T.identityMat,u_fog_range:I.getFovAdjustedRange(pe._fov),u_fog_color:se,u_fog_horizon_blend:I.properties.get("horizon-blend"),u_fog_temporal_offset:Ee,u_frustum_tl:G,u_frustum_tr:Q,u_frustum_br:oe,u_frustum_bl:te,u_globe_pos:ie,u_globe_radius:ne,u_viewport:ee,u_globe_transition:p.globeToMercatorTransition(pe.zoom),u_is_globe:+("globe"===pe.projection.name)}})(this,w,y,C,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*p.exported.devicePixelRatio,this.transform.height*p.exported.devicePixelRatio]);h.setFogUniformValues(c,E)}}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const c=this.context.gl,h=c.createTexture();return c.bindTexture(c.TEXTURE_2D,h),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&0!==c.getOpacity(this.transform.pitch)}getBackgroundTiles(){const c=this._backgroundTiles,h=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const w of y)h[w.key]=c[w.key]||new p.Tile(w,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}}class au{constructor(c=0,h=0,y=0,w=0){if(isNaN(c)||c<0||isNaN(h)||h<0||isNaN(y)||y<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=h,this.left=y,this.right=w}interpolate(c,h,y){return null!=h.top&&null!=c.top&&(this.top=p.number(c.top,h.top,y)),null!=h.bottom&&null!=c.bottom&&(this.bottom=p.number(c.bottom,h.bottom,y)),null!=h.left&&null!=c.left&&(this.left=p.number(c.left,h.left,y)),null!=h.right&&null!=c.right&&(this.right=p.number(c.right,h.right,y)),this}getCenter(c,h){const y=p.clamp((this.left+c-this.right)/2,0,c),w=p.clamp((this.top+h-this.bottom)/2,0,h);return new p.pointGeometry(y,w)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new au(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function sp(m,c){const h=p.getColumn(m,3);p.fromQuat(m,c),p.setColumn(m,3,h)}function sd(m,c){const h=p.identity$1([]);return p.rotateZ$1(h,h,-c),p.rotateX$1(h,h,-m),h}function Us(m,c){const h=[m[0],m[1],0],y=[c[0],c[1],0];if(p.length(h)>=1e-15){const E=p.normalize([],h);p.scale$2(y,E,p.dot(y,E)),c[0]=y[0],c[1]=y[1]}const w=p.cross([],c,m);if(p.len(w)<1e-15)return null;const C=Math.atan2(-w[1],w[0]);return sd(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),C)}class Bt{constructor(c,h){this.position=c,this.orientation=h}get position(){return this._position}set position(c){if(c){const h=c instanceof p.MercatorCoordinate?c:new p.MercatorCoordinate(c[0],c[1],c[2]);this._renderWorldCopies&&(h.x=p.wrap(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(c,h){if(this.orientation=null,!this.position)return;const y=this._elevation?this._elevation.getAtPointOrZero(p.MercatorCoordinate.fromLngLat(c)):0,w=this.position,C=p.MercatorCoordinate.fromLngLat(c,y),E=[C.x-w.x,C.y-w.y,C.z-w.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=Us(E,h)}setPitchBearing(c,h){this.orientation=sd(p.degToRad(c),p.degToRad(-h))}}class R{constructor(c,h){this._transform=p.identity([]),this.orientation=h,this.position=c}get mercatorPosition(){const c=this.position;return new p.MercatorCoordinate(c[0],c[1],c[2])}get position(){const c=p.getColumn(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var h;c&&p.setColumn(this._transform,3,[(h=c)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||p.identity$1([]),c&&sp(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,h){this._orientation=sd(c,h),sp(this._transform,this._orientation)}forward(){const c=p.getColumn(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=p.getColumn(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=p.getColumn(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,h){const y=new Float64Array(16);return p.invert(y,this.getWorldToCamera(c,h)),y}getWorldToCameraPosition(c,h,y){const w=this.position;p.scale$2(w,w,-c);const C=new Float64Array(16);return p.fromScaling(C,[y,y,y]),p.translate(C,C,w),C[10]*=h,C}getWorldToCamera(c,h){const y=new Float64Array(16),w=new Float64Array(4),C=this.position;return p.conjugate(w,this._orientation),p.scale$2(C,C,-c),p.fromQuat(y,w),p.translate(y,y,C),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=h,y[9]*=h,y[10]*=h,y[11]*=h,y}getCameraToClipPerspective(c,h,y,w){const C=new Float64Array(16);return p.perspective(C,c,h,y,w),C}getDistanceToElevation(c){const h=0===c?0:p.mercatorZfromAltitude(c,this.position[1]),y=this.forward();return(h-this.position[2])/y[2]}clone(){return new R([...this.position],[...this.orientation])}}function F(m,c){const h=ve(m.projection,m.zoom,m.width,m.height),y=function(C,E,T,I,L){const N=new p.LngLat(T.lng-180*et,T.lat),G=new p.LngLat(T.lng+180*et,T.lat),Q=C.project(N.lng,N.lat),oe=C.project(G.lng,G.lat),te=-Math.atan2(oe.y-Q.y,oe.x-Q.x),ie=p.MercatorCoordinate.fromLngLat(T);ie.y=p.clamp(ie.y,-.999975,.999975);const ne=ie.toLngLat(),ee=C.project(ne.lng,ne.lat),pe=p.MercatorCoordinate.fromLngLat(ne);pe.x+=et;const se=pe.toLngLat(),Ee=C.project(se.lng,se.lat),De=Dr(Ee.x-ee.x,Ee.y-ee.y,te),be=p.MercatorCoordinate.fromLngLat(ne);be.y+=et;const Se=be.toLngLat(),Ce=C.project(Se.lng,Se.lat),Re=Dr(Ce.x-ee.x,Ce.y-ee.y,te),He=Math.abs(De.x)/Math.abs(Re.y),_t=p.identity([]);p.rotateZ(_t,_t,-te*(1-(L?0:I)));const ze=p.identity([]);return p.scale(ze,ze,[1,1-(1-He)*I,1]),ze[4]=-Re.x/Re.y*I,p.rotateZ(ze,ze,te),p.multiply(ze,_t,ze),ze}(m.projection,0,m.center,h,c),w=Z(m);return p.scale(y,y,[w,w,1]),y}function Z(m){const c=m.projection,h=ve(m.projection,m.zoom,m.width,m.height),y=oi(c,m.center),w=oi(c,p.LngLat.convert(c.center));return Math.pow(2,y*h+(1-h)*w)}function ve(m,c,h,y,w=1/0){const C=m.range;if(!C)return 0;const E=Math.min(w,Math.max(h,y)),T=Math.log(E/1024)/Math.LN2;return p.smoothstep(C[0]+T,C[1]+T,c)}const et=1/4e4;function oi(m,c){const h=p.clamp(c.lat,-p.MAX_MERCATOR_LATITUDE,p.MAX_MERCATOR_LATITUDE),y=new p.LngLat(c.lng-180*et,h),w=new p.LngLat(c.lng+180*et,h),C=m.project(y.lng,h),E=m.project(w.lng,h),T=p.MercatorCoordinate.fromLngLat(y),I=p.MercatorCoordinate.fromLngLat(w),L=E.x-C.x,N=E.y-C.y,G=I.x-T.x,Q=I.y-T.y,oe=Math.sqrt((G*G+Q*Q)/(L*L+N*N));return Math.log(oe)/Math.LN2}function Dr(m,c,h){const y=Math.cos(h),w=Math.sin(h);return{x:m*y-c*w,y:m*w+c*y}}class Oo{constructor(c,h,y,w,C,E,T){this.tileSize=512,this._renderWorldCopies=void 0===C||C,this._minZoom=c||0,this._maxZoom=h||22,this._minPitch=y??0,this._maxPitch=w??60,this.setProjection(E),this.setMaxBounds(T),this.width=0,this.height=0,this._center=new p.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new au,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new R,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const c=new Oo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(c){const h=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||h)&&this._updateCameraOnTerrain(),(c||h)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return p.pick(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=p.getProjection(this.projectionOptions);const y=!ce(h,this.getProjection());return y&&this._calcMatrices(),this.mercatorFromTransition=!1,y}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=p.getProjection({name:"mercator"});const h=c!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(c){void 0===c?c=!0:null===c&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return p.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new p.pointGeometry(this.width,this.height)}get bearing(){return p.wrap(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const h=-c*Math.PI/180;var y,w,C,E,T,I,L,N,G,Q;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(y=new p.ARRAY_TYPE(4),p.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),w=this.rotationMatrix,E=this.angle,T=(C=this.rotationMatrix)[0],I=C[1],L=C[2],N=C[3],G=Math.sin(E),Q=Math.cos(E),w[0]=T*Q+L*G,w[1]=I*Q+N*G,w[2]=T*-G+L*Q,w[3]=I*-G+N*Q)}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const h=p.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=c/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const h=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const c=this._elevation;this._centerAltitude=c.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=c.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let w=0,C=0;for(let E=0;E<h.length;E++){const T=new p.pointGeometry(h[E][0]*this.width,y+h[E][1]*(this.height-y)),I=c.pointCoordinate(T);if(!I)continue;const L=1/Math.hypot(I[0]-this._camera.position[0],I[1]-this._camera.position[1]);w+=I[3]*L,C+=L}return 0===C?NaN:w/C}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const c=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*h,w=this._mercatorZfromZoom(c),C=this._mercatorZfromZoom(this._maxZoom),E=Math.max(w-y,C);this._setZoom(this._zoomFromMercatorZ(E))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let y;y=c.z<this._camera.position[2]?[h.x,h.y,h.z]:[c.x,c.y,c.z];const w=p.length(p.sub([],this._camera.position,y));return p.clamp(this._zoomFromMercatorZ(w),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let h=!1;if(c.orientation&&!p.exactEquals(c.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(c.orientation)),c.position){const y=[c.position.x,c.position.y,c.position.z];p.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,h=new Bt;return h.position=new p.MercatorCoordinate(c[0],c[1],c[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(c){if(!p.length$1(c))return!1;p.normalize$1(c,c);const h=p.transformQuat([],[0,0,-1],c),y=p.transformQuat([],[0,-1,0],c);if(y[2]<0)return!1;const w=Us(h,y);return!!w&&(this._camera.orientation=w,!0)}_setCameraPosition(c){const h=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,w=this.cameraToCenterDistance;c[2]=p.clamp(c[2],w/y,w/h),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,h,y){this._unmodified=!1,this._edgeInsets.interpolate(c,h,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const h=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(c){const h=[new p.UnwrappedTileID(0,c)];if(this.renderWorldCopies){const y=this.pointCoordinate(new p.pointGeometry(0,0)),w=this.pointCoordinate(new p.pointGeometry(this.width,0)),C=this.pointCoordinate(new p.pointGeometry(this.width,this.height)),E=this.pointCoordinate(new p.pointGeometry(0,this.height)),T=Math.floor(Math.min(y.x,w.x,C.x,E.x)),I=Math.floor(Math.max(y.x,w.x,C.x,E.x)),L=1;for(let N=T-L;N<=I+L;N++)0!==N&&h.push(new p.UnwrappedTileID(N,c))}return h}coveringTiles(c){let h=this.coveringZoomLevel(c);const y=h,w=this.elevation&&!c.isTerrainDEM,C="mercator"===this.projection.name;if(void 0!==c.minzoom&&h<c.minzoom)return[];void 0!==c.maxzoom&&h>c.maxzoom&&(h=c.maxzoom);const E=this.locationCoordinate(this.center),T=this.center.lat,I=1<<h,L=[I*E.x,I*E.y,0],N="globe"===this.projection.name,G=!N,Q=p.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,G),oe=N?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),te=I*p.mercatorZfromAltitude(1,this.center.lat),ie=this._camera.position[2]/p.mercatorZfromAltitude(1,this.center.lat),ne=[I*oe.x,I*oe.y,ie*(G?1:te)],ee=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),pe=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?h:0,se=c.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Ee=c.isTerrainDEM?-se:this._elevation?this._elevation.getMinElevationBelowMSL():0,De=this.projection.isReprojectedInTileSpace?Z(this):1,be=Ye=>{const dt=new p.MercatorCoordinate(Ye.x+25e-6,Ye.y,Ye.z),It=new p.MercatorCoordinate(Ye.x,Ye.y+25e-6,Ye.z),Ft=Ye.toLngLat(),Zt=dt.toLngLat(),fi=It.toLngLat(),Pi=this.locationCoordinate(Ft),ln=this.locationCoordinate(Zt),Kt=this.locationCoordinate(fi),Hi=Math.hypot(ln.x-Pi.x,ln.y-Pi.y),Rn=Math.hypot(Kt.x-Pi.x,Kt.y-Pi.y);return Math.sqrt(Hi*Rn)*De/25e-6},Se=Ye=>{const yt=se,dt=Ee;return{aabb:p.tileAABB(this,I,0,0,0,Ye,dt,yt,this.projection),zoom:0,x:0,y:0,minZ:dt,maxZ:yt,wrap:Ye,fullyVisible:!1}},Ce=[];let Re=[];const He=h,_t=c.reparseOverscaled?y:h,ze=Ye=>Ye*Ye,ot=ze((ie-this._centerAltitude)*te),lt=Ye=>{if(!this._elevation||!Ye.tileID||!C)return;const yt=this._elevation.getMinMaxForTile(Ye.tileID),dt=Ye.aabb;yt?(dt.min[2]=yt.min,dt.max[2]=yt.max,dt.center[2]=(dt.min[2]+dt.max[2])/2):(Ye.shouldSplit=Pt(Ye),Ye.shouldSplit||(dt.min[2]=dt.max[2]=dt.center[2]=this._centerAltitude))},Pt=Ye=>{if(Ye.zoom<pe)return!0;if(Ye.zoom===He)return!1;if(null!=Ye.shouldSplit)return Ye.shouldSplit;const yt=Ye.aabb.distanceX(ne),dt=Ye.aabb.distanceY(ne);let It=ot,Ft=1;if(N){It=ze(Ye.aabb.distanceZ(ne));const fi=Math.pow(2,Ye.zoom),Pi=p.latFromMercatorY((Ye.y+1)/fi),ln=p.latFromMercatorY(Ye.y/fi),Kt=Math.min(Math.max(T,Pi),ln),Hi=p.circumferenceAtLatitude(Kt)/p.circumferenceAtLatitude(T);if(Ft=Kt===T?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Hi/this._mercatorScaleRatio),this.zoom<=p.GLOBE_ZOOM_THRESHOLD_MIN&&Ye.zoom===He-1&&Hi>=.9)return!0}else if(w&&(It=ze(Ye.aabb.distanceZ(ne)*te)),this.projection.isReprojectedInTileSpace&&y<=5){const fi=Math.pow(2,Ye.zoom),Pi=be(new p.MercatorCoordinate((Ye.x+.5)/fi,(Ye.y+.5)/fi));Ft=Pi>.85?1:Pi}const Zt=yt*yt+dt*dt+It;return Zt<ze((1<<He-Ye.zoom)*ee*Ft*((fi,Pi)=>{if(Pi*ze(.707)<fi)return 1;const ln=Math.sqrt(Pi/fi);return ln/(1.4144271570014144+(Math.pow(1.1,ln-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(It,ot),Zt))};if(this.renderWorldCopies)for(let Ye=1;Ye<=3;Ye++)Ce.push(Se(-Ye)),Ce.push(Se(Ye));for(Ce.push(Se(0));Ce.length>0;){const Ye=Ce.pop(),yt=Ye.x,dt=Ye.y;let It=Ye.fullyVisible;if(!It){const Ft=Ye.aabb.intersects(Q);if(0===Ft)continue;It=2===Ft}if(Ye.zoom!==He&&Pt(Ye))for(let Ft=0;Ft<4;Ft++){const Zt=(yt<<1)+Ft%2,fi=(dt<<1)+(Ft>>1),Pi={aabb:C?Ye.aabb.quadrant(Ft):p.tileAABB(this,I,Ye.zoom+1,Zt,fi,Ye.wrap,Ye.minZ,Ye.maxZ,this.projection),zoom:Ye.zoom+1,x:Zt,y:fi,wrap:Ye.wrap,fullyVisible:It,tileID:void 0,shouldSplit:void 0,minZ:Ye.minZ,maxZ:Ye.maxZ};w&&!N&&(Pi.tileID=new p.OverscaledTileID(Ye.zoom+1===He?_t:Ye.zoom+1,Ye.wrap,Ye.zoom+1,Zt,fi),lt(Pi)),Ce.push(Pi)}else{const Ft=Ye.zoom===He?_t:Ye.zoom;if(c.minzoom&&c.minzoom>Ft)continue;const Zt=L[0]-(.5+yt+(Ye.wrap<<Ye.zoom))*(1<<h-Ye.zoom),fi=L[1]-.5-dt,Pi=Ye.tileID?Ye.tileID:new p.OverscaledTileID(Ft,Ye.wrap,Ye.zoom,yt,dt);Re.push({tileID:Pi,distanceSq:Zt*Zt+fi*fi})}}if(this.fogCullDistSq){const Ye=this.fogCullDistSq,yt=this.horizonLineFromTop();Re=Re.filter(dt=>{const It=[0,0,0,1],Ft=[p.EXTENT,p.EXTENT,0,1],Zt=this.calculateFogTileMatrix(dt.tileID.toUnwrapped());p.transformMat4$1(It,It,Zt),p.transformMat4$1(Ft,Ft,Zt);const fi=p.getAABBPointSquareDist(It,Ft);if(0===fi)return!0;let Pi=!1;const ln=this._elevation;if(ln&&fi>Ye&&0!==yt){const Kt=this.calculateProjMatrix(dt.tileID.toUnwrapped());let Hi;c.isTerrainDEM||(Hi=ln.getMinMaxForTile(dt.tileID)),Hi||(Hi={min:Ee,max:se});const Rn=p.furthestTileCorner(this.rotation),br=[Rn[0]*p.EXTENT,Rn[1]*p.EXTENT,Hi.max];p.transformMat4(br,br,Kt),Pi=(1-br[1])*this.height*.5<yt}return fi<Ye||Pi})}return Re.sort((Ye,yt)=>Ye.distanceSq-yt.distanceSq).map(Ye=>Ye.tileID)}resize(c,h){this.width=c,this.height=h,this.pixelsToGLUnits=[2/c,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const h=p.clamp(c.lat,-p.MAX_MERCATOR_LATITUDE,p.MAX_MERCATOR_LATITUDE),y=this.projection.project(c.lng,h);return new p.pointGeometry(y.x*this.worldSize,y.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(c,h){let y,w;const C=this.centerPoint;if("globe"===this.projection.name){const T=this.worldSize;y=(h.x-C.x)/T,w=(h.y-C.y)/T}else{const T=this.pointCoordinate(h),I=this.pointCoordinate(C);y=T.x-I.x,w=T.y-I.y}const E=this.locationCoordinate(c);this.setLocation(new p.MercatorCoordinate(E.x-y,E.y-w))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c){return this.projection.locationPoint(this,c)}locationPoint3D(c){return this.projection.locationPoint(this,c,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c){return this.coordinateLocation(this.pointCoordinate3D(c))}locationCoordinate(c,h){const y=h?p.mercatorZfromAltitude(h,c.lat):void 0,w=this.projection.project(c.lng,c.lat);return new p.MercatorCoordinate(w.x,w.y,y)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,h){const y=h??this._centerAltitude,w=[c.x,c.y,0,1],C=[c.x,c.y,1,1];p.transformMat4$1(w,w,this.pixelMatrixInverse),p.transformMat4$1(C,C,this.pixelMatrixInverse);const E=C[3];p.scale$1(w,w,1/w[3]),p.scale$1(C,C,1/E);const T=w[2],I=C[2];return{p0:w,p1:C,t:T===I?0:(y-T)/(I-T)}}screenPointToMercatorRay(c){const h=[c.x,c.y,0,1],y=[c.x,c.y,1,1];return p.transformMat4$1(h,h,this.pixelMatrixInverse),p.transformMat4$1(y,y,this.pixelMatrixInverse),p.scale$1(h,h,1/h[3]),p.scale$1(y,y,1/y[3]),h[2]=p.mercatorZfromAltitude(h[2],this._center.lat)*this.worldSize,y[2]=p.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,p.scale$1(h,h,1/this.worldSize),p.scale$1(y,y,1/this.worldSize),new p.Ray([h[0],h[1],h[2]],p.normalize([],p.sub([],y,h)))}rayIntersectionCoordinate(c){const{p0:h,p1:y,t:w}=c,C=p.mercatorZfromAltitude(h[2],this._center.lat),E=p.mercatorZfromAltitude(y[2],this._center.lat);return new p.MercatorCoordinate(p.number(h[0],y[0],w)/this.worldSize,p.number(h[1],y[1],w)/this.worldSize,p.number(C,E,w))}pointCoordinate(c,h=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,h)}pointCoordinate3D(c){if(!this.elevation)return this.pointCoordinate(c);let h=this.projection.pointCoordinate3D(this,c.x,c.y);if(h)return new p.MercatorCoordinate(h[0],h[1],h[2]);let y=0,w=this.horizonLineFromTop();if(c.y>w)return this.pointCoordinate(c);const C=.02*w,E=c.clone();for(let T=0;T<10&&w-y>C;T++){E.y=p.number(y,w,.66);const I=this.projection.pointCoordinate3D(this,E.x,E.y);I?(w=E.y,h=I):y=E.y}return h?new p.MercatorCoordinate(h[0],h[1],h[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}_coordinatePoint(c,h){const y=h&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,w=[c.x*this.worldSize,c.y*this.worldSize,y+c.toAltitude(),1];return p.transformMat4$1(w,w,this.pixelMatrix),w[3]>0?new p.pointGeometry(w[0]/w[3],w[1]/w[3]):new p.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(c,h){const y=new p.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),w=new p.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),C=new p.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),E=new p.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let T=this.pointCoordinate(y,c),I=this.pointCoordinate(w,c);const L=this.pointCoordinate(C,h),N=this.pointCoordinate(E,h),G=(Q,oe)=>(oe.y-Q.y)/(oe.x-Q.x);return T.y>1&&I.y>=0?T=new p.MercatorCoordinate((1-N.y)/G(N,T)+N.x,1):T.y<0&&I.y<=1&&(T=new p.MercatorCoordinate(-N.y/G(N,T)+N.x,0)),I.y>1&&T.y>=0?I=new p.MercatorCoordinate((1-L.y)/G(L,I)+L.x,1):I.y<0&&T.y<=1&&(I=new p.MercatorCoordinate(-L.y/G(L,I)+L.x,0)),(new p.LngLatBounds).extend(this.coordinateLocation(T)).extend(this.coordinateLocation(I)).extend(this.coordinateLocation(N)).extend(this.coordinateLocation(L))}_getBounds3D(){const c=this.elevation;if(!c.visibleDemTiles.length)return this._getBounds(0,0);const h=c.visibleDemTiles.reduce((y,w)=>{if(w.dem){const C=w.dem.tree;y.min=Math.min(y.min,C.minimums[0]),y.max=Math.max(y.max,C.maximums[0])}return y},{min:Number.MAX_VALUE,max:0});return this._getBounds(h.min*c.exaggeration(),h.max*c.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(c=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-h*(1-this._horizonShift);return c?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-p.MAX_MERCATOR_LATITUDE,this.maxLat=p.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=p.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=p.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=p.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=p.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,h){return this.projection.createTileMatrix(this,h,c)}calculateDistanceTileData(c){const h=c.key,y=this._distanceTileDataCache;if(y[h])return y[h];const w=c.canonical,C=1/this.height,E=this.cameraWorldSize/this.zoomScale(w.z),T=(w.x+Math.pow(2,w.z)*c.wrap)*E,I=w.y*E,L=this.point,N=this.angle,G=Math.sin(-N),Q=-Math.cos(-N);return y[h]={bearing:[G,Q],center:[(L.x-T)*C,(L.y-I)*C],scale:E/p.EXTENT*C},y[h]}calculateFogTileMatrix(c){const h=c.key,y=this._fogTileMatrixCache;if(y[h])return y[h];const w=this.projection.createTileMatrix(this,this.cameraWorldSize,c);return p.multiply(w,this.worldToFogMatrix,w),y[h]=new Float32Array(w),y[h]}calculateProjMatrix(c,h=!1){const y=c.key,w=h?this._alignedProjMatrixCache:this._projMatrixCache;if(w[y])return w[y];const C=this.calculatePosMatrix(c,this.worldSize);return p.multiply(C,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:h?this.alignedProjMatrix:this.projMatrix,C),w[y]=new Float32Array(C),w[y]}calculatePixelsToTileUnitsMatrix(c){const h=c.tileID.key,y=this._pixelsToTileUnitsCache;if(y[h])return y[h];const w=function(C,E){const{scale:T}=C.tileTransform,I=T*p.EXTENT/(C.tileSize*Math.pow(2,E.zoom-C.tileID.overscaledZ+C.tileID.canonical.z));return L=new Float32Array(4),Q=(N=E.inverseAdjustmentMatrix)[1],oe=N[2],te=N[3],ne=(G=[I,I])[1],L[0]=N[0]*(ie=G[0]),L[1]=Q*ie,L[2]=oe*ne,L[3]=te*ne,L;var L,N,G,Q,oe,te,ie,ne}(c,this);return y[h]=w,y[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const c=this._elevation;this._updateCameraState();const h=p.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(h),w=this._camera.forward(),C=p.mercatorZfromAltitude(1,this._center.lat);y[2]/=C,w[2]/=C,p.normalize(w,w);const E=c.raycast(y,w,c.exaggeration());if(E){const T=p.scaleAndAdd([],y,w,E),I=new p.MercatorCoordinate(T[0],T[1],p.mercatorZfromAltitude(T[2],p.latFromMercatorY(T[1]))),L=(I.z+p.length([I.x-y[0],I.y-y[1],I.z-y[2]*C]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(L),this._centerAltitude=I.toAltitude(),this._center=this.coordinateLocation(I),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const c=this._elevation;this._updateCameraState();const h=p.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(h),w=c.getAtPointOrZero(new p.MercatorCoordinate(...y)),C=this._minimumHeightOverTerrain()*Math.cos(p.degToRad(this._maxPitch)),E=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*w;if(E<C){const T=this.locationCoordinate(this._center,this._centerAltitude),I=[T.x-y[0],T.y-y[1],T.z-y[2]],L=p.length(I);I[2]-=(C-E)/this._pixelsPerMercatorPixel;const N=p.length(I);if(0===N)return;p.scale$2(I,I,L/N*this._pixelsPerMercatorPixel),this._camera.position=[T.x-I[0],T.y-I[1],T.z*this._pixelsPerMercatorPixel-I[2]],this._camera.orientation=Us(I,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const Q=this.center;return Q.lat=p.clamp(Q.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(Q.lng=p.clamp(Q.lng,this.minLng,this.maxLng)),this.center=Q,void(this._constraining=!1)}const h=this._unmodified,{x:y,y:w}=this.point;let C=0,E=y,T=w;const I=this.width/2,L=this.height/2,N=this.worldMinY*this.scale,G=this.worldMaxY*this.scale;if(w-L<N&&(T=N+L),w+L>G&&(T=G-L),G-N<this.height&&(C=Math.max(C,this.height/(G-N)),T=(G+N)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Q=this.worldMinX*this.scale,oe=this.worldMaxX*this.scale,te=this.worldSize/2-(Q+oe)/2;E=(y+te+this.worldSize)%this.worldSize-te,E-I<Q&&(E=Q+I),E+I>oe&&(E=oe-I),oe-Q<this.width&&(C=Math.max(C,this.width/(oe-Q)),E=(oe+Q)/2)}E===y&&T===w||(this.center=this.unproject(new p.pointGeometry(E,T))),C&&(this.zoom+=this.scaleZoom(C)),this._constrainCameraAltitude(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,h=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=p.mercatorZfromAltitude(1,this.center.lat)/p.mercatorZfromAltitude(1,p.GLOBE_SCALE_MATCH_LATITUDE));const y=ve(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,y),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const w=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?h:1),C=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);C[8]=2*-c.x/this.width,C[9]=2*c.y/this.height;let E=p.mul([],C,w);if(this.projection.isReprojectedInTileSpace){const De=this.locationCoordinate(this.center),be=p.identity([]);p.translate(be,be,[De.x*this.worldSize,De.y*this.worldSize,0]),p.multiply(be,be,F(this)),p.translate(be,be,[-De.x*this.worldSize,-De.y*this.worldSize,0]),p.multiply(E,E,be),this.inverseAdjustmentMatrix=function(Se){const Ce=F(Se,!0);return Ar([],[Ce[0],Ce[1],Ce[4],Ce[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=p.scale([],E,[this.worldSize,this.worldSize,this.worldSize/h,1]),this.projMatrix=E,this.invProjMatrix=p.invert(new Float64Array(16),this.projMatrix);const T=p.invert([],C);this.frustumCorners=p.FrustumCorners.fromInvProjectionMatrix(T,this.horizonLineFromTop(),this.height);const I=new Float32Array(16);p.identity(I),p.scale(I,I,[1,-1,1]),p.rotateX(I,I,this._pitch),p.rotateZ(I,I,this.angle);const L=p.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),N=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;L[8]=2*-c.x/this.width,L[9]=2*(c.y+N)/this.height,this.skyboxMatrix=p.multiply(I,L,I);const G=this.point,Q=G.x,oe=G.y,te=this.width%2/2,ie=this.height%2/2,ne=Math.cos(this.angle),ee=Math.sin(this.angle),pe=Q-Math.round(Q)+ne*te+ee*ie,se=oe-Math.round(oe)+ne*ie+ee*te,Ee=new Float64Array(E);if(p.translate(Ee,Ee,[pe>.5?pe-1:pe,se>.5?se-1:se,0]),this.alignedProjMatrix=Ee,E=p.create(),p.scale(E,E,[this.width/2,-this.height/2,1]),p.translate(E,E,[1,-1,0]),this.labelPlaneMatrix=E,E=p.create(),p.scale(E,E,[1,-1,1]),p.translate(E,E,[-1,-1,0]),p.scale(E,E,[2/this.width,2/this.height,1]),this.glCoordMatrix=E,this.pixelMatrix=p.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},E=p.invert(new Float64Array(16),this.pixelMatrix),!E)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=E,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=p.calculateGlobeMatrix(this);const De=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=p.transformMat4(De,De,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=E;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSize,h=this.cameraPixelsPerMeter,y=this._camera.position,w=1/this.height/this._pixelsPerMercatorPixel,C=[c,c,h];p.scale$2(C,C,w),p.scale$2(y,y,-1),p.multiply$2(y,y,C);const E=p.create();p.translate(E,E,y),p.scale(E,E,C),this.mercatorFogMatrix=E,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,h,w)}_computeCameraPosition(c){const h=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),w=this.point,C=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-c/this.worldSize*this._centerAltitude;return[w.x/this.worldSize-y[0]*C,w.y/this.worldSize-y[1]*C,c/this.worldSize*this._centerAltitude-y[2]*C]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=c[2];let w=1;y>0&&(w=Math.min((h-this._camera.position[2])/y,1)),this._camera.position=p.scaleAndAdd([],this._camera.position,c,w),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const c=this._camera.position,h=this._camera.forward(),{pitch:y,bearing:w}=this._camera.getPitchBearing(),C=p.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,E=this._mercatorZfromZoom(this._maxZoom)*Math.cos(p.degToRad(this._maxPitch)),T=Math.max((c[2]-C)/Math.cos(y),E),I=this._zoomFromMercatorZ(T);p.scaleAndAdd(c,c,h,T),this._pitch=p.clamp(y,p.degToRad(this.minPitch),p.degToRad(this.maxPitch)),this.angle=p.wrap(w,-Math.PI,Math.PI),this._setZoom(p.clamp(I,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new p.MercatorCoordinate(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(c*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(p.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,h){const y=Math.min(c.x,h.x),w=Math.max(c.x,h.x),C=Math.min(c.y,h.y),E=Math.max(c.y,h.y);if(C<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const T=[new p.pointGeometry(y,C),new p.pointGeometry(w,E),new p.pointGeometry(y,E),new p.pointGeometry(w,C)],I=this.renderWorldCopies?-3:0,L=this.renderWorldCopies?4:1;for(const N of T){const G=this.pointRayIntersection(N);if(G.t<0)return!0;const Q=this.rayIntersectionCoordinate(G);if(Q.x<I||Q.y<0||Q.x>L||Q.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+p.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new p.pointGeometry(0,0),new p.pointGeometry(this.width,this.height))}zoomDeltaToMovement(c,h){const y=p.length(p.sub([],this._camera.position,c)),w=this._zoomFromMercatorZ(y)+h;return y-this._mercatorZfromZoom(w)}getCameraPoint(){if("globe"===this.projection.name){const c=function(h,y){const w=[h[0],h[1],h[2],1];p.transformMat4$1(w,w,y);const C=Math.max(w[3],1e-6);return[w[0]/C,w[1]/C,w[2]/C,C]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new p.pointGeometry(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new p.pointGeometry(0,c))}}getCameraToCenterDistance(c){const h=ve(c,this.zoom,this.width,this.height,1024),y=c.pixelSpaceConversion(this.center.lat,this.worldSize,h);return.5/Math.tan(.5*this._fov)*this.height*y}}function to(m,c){let h=!1,y=null;const w=()=>{y=null,h&&(m(),y=setTimeout(w,c),h=!1)};return()=>(h=!0,y||w(),y)}class po{constructor(c){this._hashName=c&&encodeURIComponent(c),p.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=to(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,p.window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),p.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const h=Sl(c);if(this._hashName){const y=this._hashName;let w=!1;const C=p.window.location.hash.slice(1).split("&").map(E=>{const T=E.split("=")[0];return T===y?(w=!0,`${T}=${h}`):E}).filter(E=>E);return w||C.push(`${y}=${h}`),`#${C.join("&")}`}return`#${h}`}_getCurrentHash(){const c=p.window.location.hash.replace("#","");if(this._hashName){let h;return c.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(h=y)}),(h&&h[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(y=>isNaN(y))){const y=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(h[3]||0):c.getBearing();return c.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:y,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){const c=p.window.location.href.replace(/(#.+)?$/,this.getHashString());p.window.history.replaceState(p.window.history.state,null,c)}}function Sl(m,c){const h=m.getCenter(),y=Math.round(100*m.getZoom())/100,w=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,w),E=Math.round(h.lng*C)/C,T=Math.round(h.lat*C)/C,I=m.getBearing(),L=m.getPitch();let N=c?`/${E}/${T}/${y}`:`${y}/${T}/${E}`;return(I||L)&&(N+="/"+Math.round(10*I)/10),L&&(N+=`/${Math.round(L)}`),N}const El={linearity:.3,easing:p.bezier(0,0,.3,1)},uf=p.extend({deceleration:2500,maxSpeed:1400},El),Y_=p.extend({deceleration:20,maxSpeed:1400},El),X_=p.extend({deceleration:1e3,maxSpeed:360},El),Gr=p.extend({deceleration:1e3,maxSpeed:90},El);class hf{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:p.exported.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,h=p.exported.now();for(;c.length>0&&h-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new p.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)h.zoom+=C.zoomDelta||0,h.bearing+=C.bearingDelta||0,h.pitch+=C.pitchDelta||0,C.panDelta&&h.pan._add(C.panDelta),C.around&&(h.around=C.around),C.pinchAround&&(h.pinchAround=C.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(h.pan.mag()){const C=_c(h.pan.mag(),y,p.extend({},uf,c||{}));w.offset=h.pan.mult(C.amount/h.pan.mag()),w.center=this._map.transform.center,ap(w,C)}if(h.zoom){const C=_c(h.zoom,y,Y_);w.zoom=this._map.transform.zoom+C.amount,ap(w,C)}if(h.bearing){const C=_c(h.bearing,y,X_);w.bearing=this._map.transform.bearing+p.clamp(C.amount,-179,179),ap(w,C)}if(h.pitch){const C=_c(h.pitch,y,Gr);w.pitch=this._map.transform.pitch+C.amount,ap(w,C)}if(w.zoom||w.bearing){const C=void 0===h.pinchAround?h.around:h.pinchAround;w.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),w.noMoveStart=!0,w}}function ap(m,c){(!m.duration||m.duration<c.duration)&&(m.duration=c.duration,m.easing=c.easing)}function _c(m,c,h){const{maxSpeed:y,linearity:w,deceleration:C}=h,E=p.clamp(m*w/(c/1e3),-y,y),T=Math.abs(E)/(C*w);return{easing:h.easing,duration:1e3*T,amount:E*(T/2)}}class Sr extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,y,w={}){const C=Et(h.getCanvasContainer(),y),E=h.unproject(C);super(c,p.extend({point:C,lngLat:E,originalEvent:y},w)),this._defaultPrevented=!1,this.target=h}}class lu extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,y){const w="touchend"===c?y.changedTouches:y.touches,C=zt(h.getCanvasContainer(),w),E=C.map(I=>h.unproject(I)),T=C.reduce((I,L,N,G)=>I.add(L.div(G.length)),new p.pointGeometry(0,0));super(c,{points:C,point:T,lngLats:E,lngLat:h.unproject(T),originalEvent:y}),this._defaultPrevented=!1}}class lp extends p.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,h,y){super(c,{originalEvent:y}),this._defaultPrevented=!1}}class ad{constructor(c,h){this._map=c,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new lp(c.type,this._map,c))}mousedown(c,h){return this._mousedownPos=h,this._firePreventable(new Sr(c.type,this._map,c))}mouseup(c){this._map.fire(new Sr(c.type,this._map,c))}preclick(c){const h=p.extend({},c);h.type="preclick",this._map.fire(new Sr(h.type,this._map,h))}click(c,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(c),this._map.fire(new Sr(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new Sr(c.type,this._map,c))}mouseover(c){this._map.fire(new Sr(c.type,this._map,c))}mouseout(c){this._map.fire(new Sr(c.type,this._map,c))}touchstart(c){return this._firePreventable(new lu(c.type,this._map,c))}touchmove(c){this._map.fire(new lu(c.type,this._map,c))}touchend(c){this._map.fire(new lu(c.type,this._map,c))}touchcancel(c){this._map.fire(new lu(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Hs{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new Sr(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Sr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new Sr(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $m{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,h){this.isEnabled()&&c.shiftKey&&0===c.button&&(Vi(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(c,h){if(!this._active)return;const y=h;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=y,this._box||(this._box=ht("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const C=Math.min(w.x,y.x),E=Math.max(w.x,y.x),T=Math.min(w.y,y.y),I=Math.max(w.y,y.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${C}px,${T}px)`,this._box.style.width=E-C+"px",this._box.style.height=I-T+"px")})}mouseupWindow(c,h){if(!this._active||0!==c.button)return;const y=this._startPos,w=h;if(this.reset(),vi(),y.x!==w.x||y.y!==w.y)return this._map.fire(new p.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:C=>C.fitScreenCoordinates(y,w,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&27===c.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),sn(),delete this._startPos,delete this._lastPos}_fireEvent(c,h){return this._map.fire(new p.Event(c,{originalEvent:h}))}}function ld(m,c){const h={};for(let y=0;y<m.length;y++)h[m[y].identifier]=c[y];return h}class cu{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,h,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=c.timeStamp),y.length===this.numTouches&&(this.centroid=function(w){const C=new p.pointGeometry(0,0);for(const E of w)C._add(E);return C.div(w.length)}(h),this.touches=ld(y,h)))}touchmove(c,h,y){if(this.aborted||!this.centroid)return;const w=ld(y,h);for(const C in this.touches){const E=this.touches[C],T=w[C];(!T||T.dist(E)>30)&&(this.aborted=!0)}}touchend(c,h,y){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),0===y.length){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class $a{constructor(c){this.singleTap=new cu(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,h,y){this.singleTap.touchstart(c,h,y)}touchmove(c,h,y){this.singleTap.touchmove(c,h,y)}touchend(c,h,y){const w=this.singleTap.touchend(c,h,y);if(w){const C=c.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(w)<30;if(C&&E||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class pf{constructor(){this._zoomIn=new $a({numTouches:1,numTaps:2}),this._zoomOut=new $a({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,h,y){this._zoomIn.touchstart(c,h,y),this._zoomOut.touchstart(c,h,y)}touchmove(c,h,y){this._zoomIn.touchmove(c,h,y),this._zoomOut.touchmove(c,h,y)}touchend(c,h,y){const w=this._zoomIn.touchend(c,h,y),C=this._zoomOut.touchend(c,h,y);return w?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(w)},{originalEvent:c})}):C?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(C)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const cp={0:1,2:2};class Xi{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,h){return!1}_move(c,h){return{}}mousedown(c,h){if(this._lastPoint)return;const y=Di(c);this._correctButton(c,y)&&(this._lastPoint=h,this._eventButton=y)}mousemoveWindow(c,h){const y=this._lastPoint;if(y)if(c.preventDefault(),null!=this._eventButton&&function(w,C){const E=cp[C];return void 0===w.buttons||(w.buttons&E)!==E}(c,this._eventButton))this.reset();else if(this._moved||!(h.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(y,h)}mouseupWindow(c){this._lastPoint&&Di(c)===this._eventButton&&(this._moved&&vi(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ff extends Xi{mousedown(c,h){super.mousedown(c,h),this._lastPoint&&(this._active=!0)}_correctButton(c,h){return 0===h&&!c.ctrlKey}_move(c,h){return{around:h,panDelta:h.sub(c)}}}class Gm extends Xi{_correctButton(c,h){return 0===h&&c.ctrlKey||2===h}_move(c,h){const y=.8*(h.x-c.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(c){c.preventDefault()}}class Yo extends Xi{_correctButton(c,h){return 0===h&&c.ctrlKey||2===h}_move(c,h){const y=-.5*(h.y-c.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(c){c.preventDefault()}}class K_{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),p.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new p.pointGeometry(0,0)}touchstart(c,h,y){return this._calculateTransform(c,h,y)}touchmove(c,h,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===y.length&&!p.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,h,y)}}touchend(c,h,y){this._calculateTransform(c,h,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,h,y){y.length>0&&(this._active=!0);const w=ld(y,h),C=new p.pointGeometry(0,0),E=new p.pointGeometry(0,0);let T=0;for(const L in w){const N=w[L],G=this._touches[L];G&&(C._add(N),E._add(N.sub(G)),T++,w[L]=N)}if(this._touches=w,T<this._minTouches||!E.mag())return;const I=E.div(T);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(T),panDelta:I}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ht("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class dp{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,h,y){return{}}touchstart(c,h,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([h[0],h[1]]))}touchmove(c,h,y){const w=this._firstTwoTouches;if(!w)return;c.preventDefault();const[C,E]=w,T=ih(y,h,C),I=ih(y,h,E);if(!T||!I)return;const L=this._aroundCenter?null:T.add(I).div(2);return this._move([T,I],L,c)}touchend(c,h,y){if(!this._firstTwoTouches)return;const[w,C]=this._firstTwoTouches,E=ih(y,h,w),T=ih(y,h,C);E&&T||(this._active&&vi(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&"center"===c.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ih(m,c,h){for(let y=0;y<m.length;y++)if(m[y].identifier===h)return c[y]}function qm(m,c){return Math.log(m/c)/Math.LN2}class Tl extends dp{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,h){const y=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(qm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qm(this._distance,y),pinchAround:h}}}function gt(m,c){return 180*m.angleWith(c)/Math.PI}class Sn extends dp{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,h){const y=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:gt(this._vector,y),pinchAround:h}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const h=25/(Math.PI*this._minDiameter)*360,y=gt(c,this._startVector);return Math.abs(y)<h}}function Jt(m){return Math.abs(m.y)>Math.abs(m.x)}class pi extends dp{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,Jt(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,h,y){const w=this._lastPoints;if(!w)return;const C=c[0].sub(w[0]),E=c[1].sub(w[1]);return this._map._cooperativeGestures&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(C,E,y.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(C.y+E.y)/2*-.5})}gestureBeginsVertically(c,h,y){if(void 0!==this._valid)return this._valid;const w=c.mag()>=2,C=h.mag()>=2;if(!w&&!C)return;if(!w||!C)return null==this._firstMove&&(this._firstMove=y),y-this._firstMove<100&&void 0;const E=c.y>0==h.y>0;return Jt(c)&&Jt(h)&&E}}const kt={panStep:100,bearingStep:15,pitchStep:10};class mf{constructor(){const c=kt;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let h=0,y=0,w=0,C=0,E=0;switch(c.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:c.shiftKey?y=-1:(c.preventDefault(),C=-1);break;case 39:c.shiftKey?y=1:(c.preventDefault(),C=1);break;case 38:c.shiftKey?w=1:(c.preventDefault(),E=-1);break;case 40:c.shiftKey?w=-1:(c.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(y=0,w=0),{cameraAnimation:T=>{const I=T.getZoom();T.easeTo({duration:300,easeId:"keyboardHandler",easing:du,zoom:h?Math.round(I)+h*(c.shiftKey?2:1):I,bearing:T.getBearing()+y*this._bearingStep,pitch:T.getPitch()+w*this._pitchStep,offset:[-C*this._panStep,-E*this._panStep],center:T.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function du(m){return m*(2-m)}const Ts=4.000244140625;class cd{constructor(c,h){this._map=c,this._el=c.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,p.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&"center"===c.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||p.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=c.deltaMode===p.window.WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const y=p.exported.now(),w=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,0!==h&&h%Ts==0?this._type="wheel":0!==h&&Math.abs(h)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(w*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),c.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=c,this._delta-=h,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=Et(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform,h=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(0!==this._delta){const I="wheel"===this._type&&Math.abs(this._delta)>Ts?this._wheelZoomRate:this._defaultZoomRate;let L=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&0!==L&&(L=1/L);const N=h(),G=Math.pow(2,N),Q="number"==typeof this._targetZoom?c.zoomScale(this._targetZoom):G;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(Q*L))),"wheel"===this._type&&(this._startZoom=N,this._easing=this._smoothOutEasing(200)),this._delta=0}const y="number"==typeof this._targetZoom?this._targetZoom:h(),w=this._startZoom,C=this._easing;let E,T=!1;if("wheel"===this._type&&w&&C){const I=Math.min((p.exported.now()-this._lastWheelEventTime)/200,1),L=C(I);E=p.number(w,y,L),I<1?this._frameId||(this._frameId=!0):T=!0}else E=y,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:E-h(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let h=p.ease;if(this._prevEase){const y=this._prevEase,w=(p.exported.now()-y.start)/y.duration,C=y.easing(w+.01)-y.easing(w),E=.27/Math.sqrt(C*C+1e-4)*.01,T=Math.sqrt(.0729-E*E);h=p.bezier(E,T,.25,1)}return this._prevEase={start:p.exported.now(),duration:c,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ht("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(p.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class up{constructor(c,h){this._clickZoom=c,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Q_{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,h){return c.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(c.shiftKey?-1:1),around:y.unproject(h)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wm{constructor(){this._tap=new $a({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,h,y){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=h[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(c,h,y))}touchmove(c,h,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const w=h[0],C=w.y-this._swipePoint.y;return this._swipePoint=w,c.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(c,h,y)}touchend(c,h,y){this._tapTime?this._swipePoint&&0===y.length&&this.reset():this._tap.touchend(c,h,y)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class J_{constructor(c,h,y){this._el=c,this._mousePan=h,this._touchPan=y}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class gf{constructor(c,h,y){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=h,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class cs{constructor(c,h,y,w){this._el=c,this._touchZoom=h,this._touchRotate=y,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const sa=m=>m.zoom||m.drag||m.pitch||m.rotate;class nh extends p.Event{}class yc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,h){const y=p.sub([],h,c);this.radius=p.length(y[2]<0?p.div([],y,this.constants):[y[0],y[1],0])}projectRay(c){p.div(c,c,this.constants),p.normalize(c,c),p.mul$1(c,c,this.constants);const h=p.scale$2([],c,this.radius);if(h[2]>0){const y=p.scale$2([],[0,0,1],p.dot(h,[0,0,1])),w=p.scale$2([],p.normalize([],[h[0],h[1],0]),this.radius),C=p.add([],h,p.scale$2([],p.sub([],p.add([],w,y),h),2));h[0]=C[0],h[1]=C[1]}return h}}function ks(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class Zm{constructor(c,h){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hf(c),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new yc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),p.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[p.window.document,"mousemove",{capture:!0}],[p.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[p.window,"blur",void 0]];for(const[w,C,E]of this._listeners)w.addEventListener(C,w===p.window.document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[c,h,y]of this._listeners)c.removeEventListener(h,c===p.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(c){const h=this._map,y=h.getCanvasContainer();this._add("mapEvent",new ad(h,c));const w=h.boxZoom=new $m(h,c);this._add("boxZoom",w);const C=new pf,E=new Q_;h.doubleClickZoom=new up(E,C),this._add("tapZoom",C),this._add("clickZoom",E);const T=new Wm;this._add("tapDragZoom",T);const I=h.touchPitch=new pi(h);this._add("touchPitch",I);const L=new Gm(c),N=new Yo(c);h.dragRotate=new gf(c,L,N),this._add("mouseRotate",L,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);const G=new ff(c),Q=new K_(h,c);h.dragPan=new J_(y,G,Q),this._add("mousePan",G),this._add("touchPan",Q,["touchZoom","touchRotate"]);const oe=new Sn,te=new Tl;h.touchZoomRotate=new cs(y,te,oe,T),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",te,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Hs(h));const ie=h.scrollZoom=new cd(h,this);this._add("scrollZoom",ie,["mousePan"]);const ne=h.keyboard=new mf;this._add("keyboard",ne);for(const ee of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[ee]&&h[ee].enable(c[ee])}_add(c,h,y){this._handlers.push({handlerName:c,handler:h,allowed:y}),this._handlersById[c]=h}stop(c){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!sa(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,h,y){for(const w in c)if(w!==y&&(!h||h.indexOf(w)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const h=[];for(const y of c)this._el.contains(y.target)&&h.push(y);return h}handleEvent(c,h){this._updatingCamera=!0;const y="renderFrame"===c.type,w=y?void 0:c,C={needsRenderFrame:!1},E={},T={},I=c.touches?this._getMapTouches(c.touches):void 0,L=I?zt(this._el,I):y?void 0:Et(this._el,c);for(const{handlerName:Q,handler:oe,allowed:te}of this._handlers){if(!oe.isEnabled())continue;let ie;this._blockedByActive(T,te,Q)?oe.reset():oe[h||c.type]&&(ie=oe[h||c.type](c,L,I),this.mergeHandlerResult(C,E,ie,Q,w),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||oe.isActive())&&(T[Q]=oe)}const N={};for(const Q in this._previousActiveHandlers)T[Q]||(N[Q]=w);this._previousActiveHandlers=T,(Object.keys(N).length||ks(C))&&(this._changes.push([C,E,N]),this._triggerRenderFrame()),(Object.keys(T).length||ks(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:G}=C;G&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],G(this._map))}mergeHandlerResult(c,h,y,w,C){if(!y)return;p.extend(c,y);const E={handlerName:w,originalEvent:y.originalEvent||C};void 0!==y.zoomDelta&&(h.zoom=E),void 0!==y.panDelta&&(h.drag=E),void 0!==y.pitchDelta&&(h.pitch=E),void 0!==y.bearingDelta&&(h.rotate=E)}_applyChanges(){const c={},h={},y={};for(const[w,C,E]of this._changes)w.panDelta&&(c.panDelta=(c.panDelta||new p.pointGeometry(0,0))._add(w.panDelta)),w.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+w.pitchDelta),void 0!==w.around&&(c.around=w.around),void 0!==w.aroundCoord&&(c.aroundCoord=w.aroundCoord),void 0!==w.pinchAround&&(c.pinchAround=w.pinchAround),w.noInertia&&(c.noInertia=w.noInertia),p.extend(h,C),p.extend(y,E);this._updateMapTransform(c,h,y),this._changes=[]}_updateMapTransform(c,h,y){const w=this._map,C=w.transform,E=pe=>[pe.x,pe.y,pe.z];if((pe=>{const se=this._eventsInProgress.drag;return se&&!this._handlersById[se.handlerName].isActive()})()&&!ks(c)){const pe=C.zoom;C.cameraElevationReference="sea",C.recenterOnTerrain(),C.cameraElevationReference="ground",pe!==C.zoom&&this._map._update(!0)}if(!ks(c))return void this._fireEvents(h,y,!0);let{panDelta:T,zoomDelta:I,bearingDelta:L,pitchDelta:N,around:G,aroundCoord:Q,pinchAround:oe}=c;void 0!==oe&&(G=oe),(pe=>h.drag&&!this._eventsInProgress.drag)()&&G&&(this._dragOrigin=E(C.pointCoordinate3D(G)),this._trackingEllipsoid.setup(C._camera.position,this._dragOrigin)),C.cameraElevationReference="sea",w._stop(!0),G=G||w.transform.centerPoint,L&&(C.bearing+=L),N&&(C.pitch+=N),C._updateCameraState();const te=[0,0,0];if(T)if("mercator"===C.projection.name){const pe=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(G).dir),se=this._trackingEllipsoid.projectRay(C.screenPointToMercatorRay(G.sub(T)).dir);te[0]=se[0]-pe[0],te[1]=se[1]-pe[1]}else{const pe=C.pointCoordinate(G);if("globe"===C.projection.name){T=T.rotate(-C.angle);const se=C._pixelsPerMercatorPixel/C.worldSize;te[0]=-T.x*p.mercatorScale(p.latFromMercatorY(pe.y))*se,te[1]=-T.y*p.mercatorScale(C.center.lat)*se}else{const se=C.pointCoordinate(G.sub(T));pe&&se&&(te[0]=se.x-pe.x,te[1]=se.y-pe.y)}}const ie=C.zoom,ne=[0,0,0];if(I){const pe=E(Q||C.pointCoordinate3D(G)),se={dir:p.normalize([],p.sub([],pe,C._camera.position))};if(se.dir[2]<0){const Ee=C.zoomDeltaToMovement(pe,I);p.scale$2(ne,se.dir,Ee)}}const ee=p.add(te,te,ne);C._translateCameraConstrained(ee),I&&Math.abs(C.zoom-ie)>1e-4&&C.recenterOnTerrain(),C.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(h,y,!0)}_fireEvents(c,h,y){const w=sa(this._eventsInProgress),C=sa(c),E={};for(const N in c){const{originalEvent:G}=c[N];this._eventsInProgress[N]||(E[`${N}start`]=G),this._eventsInProgress[N]=c[N]}!w&&C&&this._fireEvent("movestart",C.originalEvent);for(const N in E)this._fireEvent(N,E[N]);C&&this._fireEvent("move",C.originalEvent);for(const N in c){const{originalEvent:G}=c[N];this._fireEvent(N,G)}const T={};let I;for(const N in this._eventsInProgress){const{handlerName:G,originalEvent:Q}=this._eventsInProgress[N];this._handlersById[G].isActive()||(delete this._eventsInProgress[N],I=h[G]||Q,T[`${N}end`]=I)}for(const N in T)this._fireEvent(N,T[N]);const L=sa(this._eventsInProgress);if(y&&(w||C)&&!L){this._updatingCamera=!0;const N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),G=Q=>0!==Q&&-this._bearingSnap<Q&&Q<this._bearingSnap;N?(G(N.bearing||this._map.getBearing())&&(N.bearing=0),this._map.easeTo(N,{originalEvent:I})):(this._map.fire(new p.Event("moveend",{originalEvent:I})),G(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,h){this._map.fire(new p.Event(c,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{this._frameId=void 0,this.handleEvent(new nh("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const hp="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Ym extends p.Evented{constructor(c,h){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=h.bearingSnap,p.bindAll(["_renderFrameCallback"],this)}getCenter(){return new p.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,h){return this.jumpTo({center:c},h)}panBy(c,h,y){return c=p.pointGeometry.convert(c).mult(-1),this.panTo(this.transform.center,p.extend({offset:c},h),y)}panTo(c,h,y){return this.easeTo(p.extend({center:c},h),y)}getZoom(){return this.transform.zoom}setZoom(c,h){return this.jumpTo({zoom:c},h),this}zoomTo(c,h,y){return this.easeTo(p.extend({zoom:c},h),y)}zoomIn(c,h){return this.zoomTo(this.getZoom()+1,c,h),this}zoomOut(c,h){return this.zoomTo(this.getZoom()-1,c,h),this}getBearing(){return this.transform.bearing}setBearing(c,h){return this.jumpTo({bearing:c},h),this}getPadding(){return this.transform.padding}setPadding(c,h){return this.jumpTo({padding:c},h),this}rotateTo(c,h,y){return this.easeTo(p.extend({bearing:c},h),y)}resetNorth(c,h){return this.rotateTo(0,p.extend({duration:1e3},c),h),this}resetNorthPitch(c,h){return this.easeTo(p.extend({bearing:0,pitch:0,duration:1e3},c),h),this}snapToNorth(c,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,h):this}getPitch(){return this.transform.pitch}setPitch(c,h){return this.jumpTo({pitch:c},h),this}cameraForBounds(c,h){"globe"===this.transform.projection.name&&p.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),c=p.LngLatBounds.convert(c);const y=h&&h.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),y,h)}_extendCameraOptions(c){const h={top:0,bottom:0,right:0,left:0};if("number"==typeof(c=p.extend({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding){const y=c.padding;c.padding={top:y,bottom:y,right:y,left:y}}return c.padding=p.extend(h,c.padding),c}_cameraForBoxAndBearing(c,h,y,w){const C=this._extendCameraOptions(w),E=this.transform,T=E.padding,I=E.project(p.LngLat.convert(c)),L=E.project(p.LngLat.convert(h)),N=new p.pointGeometry(I.x,L.y),G=new p.pointGeometry(L.x,I.y),Q=-p.degToRad(y),oe=I.rotate(Q),te=L.rotate(Q),ie=N.rotate(Q),ne=G.rotate(Q),ee=new p.pointGeometry(Math.max(oe.x,te.x,ie.x,ne.x),Math.max(oe.y,te.y,ie.y,ne.y)),pe=new p.pointGeometry(Math.min(oe.x,te.x,ie.x,ne.x),Math.min(oe.y,te.y,ie.y,ne.y)),se=ee.sub(pe),Ee=(E.width-((T.left||0)+(T.right||0)+C.padding.left+C.padding.right))/se.x,De=(E.height-((T.top||0)+(T.bottom||0)+C.padding.top+C.padding.bottom))/se.y;if(De<0||Ee<0)return void p.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const be=Math.min(E.scaleZoom(E.scale*Math.min(Ee,De)),C.maxZoom),Se="number"==typeof C.offset.x&&"number"==typeof C.offset.y?new p.pointGeometry(C.offset.x,C.offset.y):p.pointGeometry.convert(C.offset),Ce=new p.pointGeometry((C.padding.left-C.padding.right)/2,(C.padding.top-C.padding.bottom)/2).rotate(y*Math.PI/180),Re=Se.add(Ce).mult(E.scale/E.zoomScale(be));return{center:E.unproject(I.add(L).div(2).sub(Re)),zoom:be,bearing:y}}_cameraForBox(c,h,y,w,C){const E=this._extendCameraOptions(C);y=y||0,w=w||0,c=p.LngLat.convert(c),h=p.LngLat.convert(h);const T=this.transform.clone();T.padding=E.padding;const I=this.getFreeCameraOptions(),L=new p.LngLat(.5*(c.lng+h.lng),.5*(c.lat+h.lat)),N=.5*(y+w);if(T._camera.position[2]<p.mercatorZfromAltitude(N,L.lat))return void p.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");I.lookAtPoint(L),T.setFreeCameraOptions(I);const G=p.MercatorCoordinate.fromLngLat(c),Q=p.MercatorCoordinate.fromLngLat(h),oe=T.pointRayIntersection(T.centerPoint,N),te=[(ie=T.rayIntersectionCoordinate(oe)).x,ie.y,ie.z];var ie;const ne=T.screenPointToMercatorRay(T.centerPoint),ee="globe"!==T.projection.name;let pe,se=0;do{const Ee=Math.floor(T.zoom),De=1<<Ee,be=Math.min(De*G.x,De*Q.x),Se=Math.min(De*G.y,De*Q.y),Ce=Math.max(De*G.x,De*Q.x),Re=Math.max(De*G.y,De*Q.y),He=new p.Aabb([be,Se,y],[Ce,Re,w]),_t=p.Frustum.fromInvProjectionMatrix(T.invProjMatrix,T.worldSize,Ee,ee);if(2!==He.intersects(_t)){pe&&(T._camera.position=p.scaleAndAdd([],T._camera.position,ne.dir,-pe),T._updateStateFromCamera());break}const ze=p.sub([],T._camera.position,te);pe=.5*p.length(ze),T._camera.position=p.scaleAndAdd([],T._camera.position,ne.dir,pe);try{T._updateStateFromCamera()}catch{return void p.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++se<10);return{center:T.center,zoom:T.zoom,bearing:T.bearing,pitch:T.pitch}}fitBounds(c,h,y){return"globe"===this.transform.projection.name&&p.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(c,h),h,y)}_raycastElevationBox(c,h){const y=this.transform.elevation;if(!y)return;const w=new p.pointGeometry(c.x,h.y),C=new p.pointGeometry(h.x,c.y),E=y.pointCoordinate(c);if(!E)return;const T=y.pointCoordinate(h);if(!T)return;const I=y.pointCoordinate(w);if(!I)return;const L=y.pointCoordinate(C);if(!L)return;const N=new p.MercatorCoordinate(E[0],E[1]).toLngLat(),G=new p.MercatorCoordinate(T[0],T[1]).toLngLat(),Q=new p.MercatorCoordinate(I[0],I[1]).toLngLat(),oe=new p.MercatorCoordinate(L[0],L[1]).toLngLat(),te=Math.min(N.lng,Math.min(G.lng,Math.min(Q.lng,oe.lng))),ie=Math.min(N.lat,Math.min(G.lat,Math.min(Q.lat,oe.lat))),ne=Math.max(N.lng,Math.max(G.lng,Math.max(Q.lng,oe.lng))),ee=Math.max(N.lat,Math.max(G.lat,Math.max(Q.lat,oe.lat))),pe=Math.min(E[3],Math.min(T[3],Math.min(I[3],L[3]))),se=Math.max(E[3],Math.max(T[3],Math.max(I[3],L[3])));return{minLngLat:new p.LngLat(te,ie),maxLngLat:new p.LngLat(ne,ee),minAltitude:pe,maxAltitude:se}}fitScreenCoordinates(c,h,y,w,C){let E,T,I,L;"globe"===this.transform.projection.name&&p.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const N=p.pointGeometry.convert(c),G=p.pointGeometry.convert(h),Q=this._raycastElevationBox(N,G);if(Q)E=Q.minLngLat,T=Q.maxLngLat,I=Q.minAltitude,L=Q.maxAltitude;else{if(this.transform.anyCornerOffEdge(N,G))return this;E=this.transform.pointLocation(N),T=this.transform.pointLocation(G)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(p.pointGeometry.convert(c)),this.transform.pointLocation(p.pointGeometry.convert(h)),y,w):this._cameraForBox(E,T,I,L,w),w,C)}_fitInternal(c,h,y){return c?(delete(h=p.extend(c,h)).padding,h.linear?this.easeTo(h,y):this.flyTo(h,y)):this}jumpTo(c,h){this.stop();const y=c.preloadOnly?this.transform.clone():this.transform;let w=!1,C=!1,E=!1;return"zoom"in c&&y.zoom!==+c.zoom&&(w=!0,y.zoom=+c.zoom),void 0!==c.center&&(y.center=p.LngLat.convert(c.center)),"bearing"in c&&y.bearing!==+c.bearing&&(C=!0,y.bearing=+c.bearing),"pitch"in c&&y.pitch!==+c.pitch&&(E=!0,y.pitch=+c.pitch),null==c.padding||y.isPaddingEqual(c.padding)||(y.padding=c.padding),c.preloadOnly?(this._preloadTiles(y),this):(this.fire(new p.Event("movestart",h)).fire(new p.Event("move",h)),w&&this.fire(new p.Event("zoomstart",h)).fire(new p.Event("zoom",h)).fire(new p.Event("zoomend",h)),C&&this.fire(new p.Event("rotatestart",h)).fire(new p.Event("rotate",h)).fire(new p.Event("rotateend",h)),E&&this.fire(new p.Event("pitchstart",h)).fire(new p.Event("pitch",h)).fire(new p.Event("pitchend",h)),this.fire(new p.Event("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||p.warnOnce(hp),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,h){const y=this.transform;if(!y.projection.supportsFreeCamera)return p.warnOnce(hp),this;this.stop();const w=y.zoom,C=y.pitch,E=y.bearing;y.setFreeCameraOptions(c);const T=w!==y.zoom,I=C!==y.pitch,L=E!==y.bearing;return this.fire(new p.Event("movestart",h)).fire(new p.Event("move",h)),T&&this.fire(new p.Event("zoomstart",h)).fire(new p.Event("zoom",h)).fire(new p.Event("zoomend",h)),L&&this.fire(new p.Event("rotatestart",h)).fire(new p.Event("rotate",h)).fire(new p.Event("rotateend",h)),I&&this.fire(new p.Event("pitchstart",h)).fire(new p.Event("pitch",h)).fire(new p.Event("pitchend",h)),this.fire(new p.Event("moveend",h)),this}easeTo(c,h){this._stop(!1,c.easeId),(!1===(c=p.extend({offset:[0,0],duration:500,easing:p.ease},c)).animate||!c.essential&&p.exported.prefersReducedMotion)&&(c.duration=0);const y=this.transform,w=this.getZoom(),C=this.getBearing(),E=this.getPitch(),T=this.getPadding(),I="zoom"in c?+c.zoom:w,L="bearing"in c?this._normalizeBearing(c.bearing,C):C,N="pitch"in c?+c.pitch:E,G="padding"in c?c.padding:y.padding,Q=p.pointGeometry.convert(c.offset);let oe,te,ie;if("globe"===y.projection.name){const Re=p.MercatorCoordinate.fromLngLat(y.center),He=Q.rotate(-y.angle);Re.x+=He.x/y.worldSize,Re.y+=He.y/y.worldSize;const _t=Re.toLngLat(),ze=p.LngLat.convert(c.center||_t);this._normalizeCenter(ze),oe=y.centerPoint.add(He),te=new p.pointGeometry(Re.x,Re.y).mult(y.worldSize),ie=new p.pointGeometry(p.mercatorXfromLng(ze.lng),p.mercatorYfromLat(ze.lat)).mult(y.worldSize).sub(te)}else{oe=y.centerPoint.add(Q);const Re=y.pointLocation(oe),He=p.LngLat.convert(c.center||Re);this._normalizeCenter(He),te=y.project(Re),ie=y.project(He).sub(te)}const ne=y.zoomScale(I-w);let ee,pe;c.around&&(ee=p.LngLat.convert(c.around),pe=y.locationPoint(ee));const se=this._zooming||I!==w,Ee=this._rotating||C!==L,De=this._pitching||N!==E,be=!y.isPaddingEqual(G),Se=Re=>He=>{if(se&&(Re.zoom=p.number(w,I,He)),Ee&&(Re.bearing=p.number(C,L,He)),De&&(Re.pitch=p.number(E,N,He)),be&&(Re.interpolatePadding(T,G,He),oe=Re.centerPoint.add(Q)),ee)Re.setLocationAtPoint(ee,pe);else{const _t=Re.zoomScale(Re.zoom-w),ze=I>w?Math.min(2,ne):Math.max(.5,ne),ot=Math.pow(ze,1-He),lt=Re.unproject(te.add(ie.mult(He*ot)).mult(_t));Re.setLocationAtPoint(Re.renderWorldCopies?lt.wrap():lt,oe)}return c.preloadOnly||this._fireMoveEvents(h),Re};if(c.preloadOnly){const Re=this._emulate(Se,c.duration,y);return this._preloadTiles(Re),this}const Ce={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=se,this._rotating=Ee,this._pitching=De,this._padding=be,this._easeId=c.easeId,this._prepareEase(h,c.noMoveStart,Ce),this._ease(Se(y),Re=>{y.recenterOnTerrain(),this._afterEase(h,Re)},c),this}_prepareEase(c,h,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",h||y.moving||this.fire(new p.Event("movestart",c)),this._zooming&&!y.zooming&&this.fire(new p.Event("zoomstart",c)),this._rotating&&!y.rotating&&this.fire(new p.Event("rotatestart",c)),this._pitching&&!y.pitching&&this.fire(new p.Event("pitchstart",c))}_fireMoveEvents(c){this.fire(new p.Event("move",c)),this._zooming&&this.fire(new p.Event("zoom",c)),this._rotating&&this.fire(new p.Event("rotate",c)),this._pitching&&this.fire(new p.Event("pitch",c))}_afterEase(c,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,w=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new p.Event("zoomend",c)),w&&this.fire(new p.Event("rotateend",c)),C&&this.fire(new p.Event("pitchend",c)),this.fire(new p.Event("moveend",c))}flyTo(c,h){if(!c.essential&&p.exported.prefersReducedMotion){const It=p.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(It,h)}this.stop(),c=p.extend({offset:[0,0],speed:1.2,curve:1.42,easing:p.ease},c);const y=this.transform,w=this.getZoom(),C=this.getBearing(),E=this.getPitch(),T=this.getPadding(),I="zoom"in c?p.clamp(+c.zoom,y.minZoom,y.maxZoom):w,L="bearing"in c?this._normalizeBearing(c.bearing,C):C,N="pitch"in c?+c.pitch:E,G="padding"in c?c.padding:y.padding,Q=y.zoomScale(I-w),oe=p.pointGeometry.convert(c.offset);let te=y.centerPoint.add(oe);const ie=y.pointLocation(te),ne=p.LngLat.convert(c.center||ie);this._normalizeCenter(ne);const ee=y.project(ie),pe=y.project(ne).sub(ee);let se=c.curve;const Ee=Math.max(y.width,y.height),De=Ee/Q,be=pe.mag();if("minZoom"in c){const It=p.clamp(Math.min(c.minZoom,w,I),y.minZoom,y.maxZoom),Ft=Ee/y.zoomScale(It-w);se=Math.sqrt(Ft/be*2)}const Se=se*se;function Ce(It){const Ft=(De*De-Ee*Ee+(It?-1:1)*Se*Se*be*be)/(2*(It?De:Ee)*Se*be);return Math.log(Math.sqrt(Ft*Ft+1)-Ft)}function Re(It){return(Math.exp(It)-Math.exp(-It))/2}function He(It){return(Math.exp(It)+Math.exp(-It))/2}const _t=Ce(0);let ze=function(It){return He(_t)/He(_t+se*It)},ot=function(It){return Ee*((He(_t)*(Re(Ft=_t+se*It)/He(Ft))-Re(_t))/Se)/be;var Ft},lt=(Ce(1)-_t)/se;if(Math.abs(be)<1e-6||!isFinite(lt)){if(Math.abs(Ee-De)<1e-6)return this.easeTo(c,h);const It=De<Ee?-1:1;lt=Math.abs(Math.log(De/Ee))/se,ot=function(){return 0},ze=function(Ft){return Math.exp(It*se*Ft)}}c.duration="duration"in c?+c.duration:1e3*lt/("screenSpeed"in c?+c.screenSpeed/se:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const Pt=C!==L,Ye=N!==E,yt=!y.isPaddingEqual(G),dt=It=>Ft=>{const Zt=Ft*lt,fi=1/ze(Zt);It.zoom=1===Ft?I:w+It.scaleZoom(fi),Pt&&(It.bearing=p.number(C,L,Ft)),Ye&&(It.pitch=p.number(E,N,Ft)),yt&&(It.interpolatePadding(T,G,Ft),te=It.centerPoint.add(oe));const Pi=1===Ft?ne:It.unproject(ee.add(pe.mult(ot(Zt))).mult(fi));return It.setLocationAtPoint(It.renderWorldCopies?Pi.wrap():Pi,te),It._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(h),It};if(c.preloadOnly){const It=this._emulate(dt,c.duration,y);return this._preloadTiles(It),this}return this._zooming=!0,this._rotating=Pt,this._pitching=Ye,this._padding=yt,this._prepareEase(h,!1),this._ease(dt(y),()=>this._afterEase(h),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,h)}if(!c){const y=this.handlers;y&&y.stop(!1)}return this}_ease(c,h,y){!1===y.animate||0===y.duration?(c(1),h()):(this._easeStart=p.exported.now(),this._easeOptions=y,this._onEaseFrame=c,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((p.exported.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,h){c=p.wrap(c,-180,180);const y=Math.abs(c-h);return Math.abs(c-360-h)<y&&(c-=360),Math.abs(c+360-h)<y&&(c+=360),c}_normalizeCenter(c){const h=this.transform;if(!h.renderWorldCopies||h.maxBounds)return;const y=c.lng-h.center.lng;c.lng+=y>180?-360:y<-180?360:0}_emulate(c,h,y){const w=Math.ceil(15*h/1e3),C=[],E=c(y.clone());for(let T=0;T<=w;T++){const I=E(T/w);C.push(I.clone())}return C}}class _f{constructor(c={}){this.options=c,p.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const h=this.options&&this.options.compact;return this._map=c,this._container=ht("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ht("button","mapboxgl-ctrl-attrib-button",this._container),ht("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=ht("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===h&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(c,h){const y=this._map._getUIString(`AttributionControl.${h}`);c.setAttribute("aria-label",y),c.removeAttribute("title"),c.firstElementChild&&c.firstElementChild.setAttribute("title",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||p.config.ACCESS_TOKEN}];if(c){const y=h.reduce((w,C,E)=>(C.value&&(w+=`${C.key}=${C.value}${E<h.length-1?"&":""}`),w),"?");c.href=`${p.config.FEEDBACK_URL}/${y}#${Sl(this._map,!0)}`,c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}}_updateData(c){!c||"metadata"!==c.sourceDataType&&"visibility"!==c.sourceDataType&&"style"!==c.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const h=this._map.style._sourceCaches;for(const w in h){const C=h[w];if(C.used){const E=C.getSource();E.attribution&&c.indexOf(E.attribution)<0&&c.push(E.attribution)}}c.sort((w,C)=>w.length-C.length),c=c.filter((w,C)=>{for(let E=C+1;E<c.length;E++)if(c[E].indexOf(w)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const y=c.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,c.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class rh{constructor(){p.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=ht("div","mapboxgl-ctrl");const h=ht("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&"metadata"!==c.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(0===Object.entries(c).length)return!0;for(const h in c){const y=c[h].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const h=c[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class oh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const h=++this._id;return this._queue.push({callback:c,id:h,cancelled:!1}),h}remove(c){const h=this._currentlyRunning,y=h?this._queue.concat(h):this._queue;for(const w of y)if(w.id===c)return void(w.cancelled=!0)}run(c=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const y of h)if(!y.cancelled&&(y.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function pp(m,c,h){if(m=new p.LngLat(m.lng,m.lat),c){const y=new p.LngLat(m.lng-360,m.lat),w=new p.LngLat(m.lng+360,m.lat),C=360*Math.ceil(Math.abs(m.lng-h.center.lng)/360),E=h.locationPoint(m).distSqr(c),T=c.x<0||c.y<0||c.x>h.width||c.y>h.height;h.locationPoint(y).distSqr(c)<E&&(T||Math.abs(y.lng-h.center.lng)<C)?m=y:h.locationPoint(w).distSqr(c)<E&&(T||Math.abs(w.lng-h.center.lng)<C)&&(m=w)}for(;Math.abs(m.lng-h.center.lng)>180;){const y=h.locationPoint(m);if(y.x>=0&&y.y>=0&&y.x<=h.width&&y.y<=h.height)break;m.lng>h.center.lng?m.lng-=360:m.lng+=360}return m}const dd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class fp extends p.Evented{constructor(c,h){if(super(),(c instanceof p.window.HTMLElement||h)&&(c=p.extend({element:c},h)),p.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),c&&c.element)this._element=c.element,this._offset=p.pointGeometry.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=ht("div");const w=41,C=27,E=ai("svg",{display:"block",height:w*this._scale+"px",width:C*this._scale+"px",viewBox:`0 0 ${C} ${w}`},this._element),T=ai("radialGradient",{id:"shadowGradient"},ai("defs",{},E));ai("stop",{offset:"10%","stop-opacity":.4},T),ai("stop",{offset:"100%","stop-opacity":.05},T),ai("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},E),ai("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},E),ai("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},E),ai("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},E),this._offset=p.pointGeometry.convert(c&&c.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",w=>{w.preventDefault()}),this._element.addEventListener("mousedown",w=>{w.preventDefault()});const y=this._element.classList;for(const w in dd)y.remove(`mapboxgl-marker-anchor-${w}`);y.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=p.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const w=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(24.6+w)],"bottom-right":[-w,-1*(24.6+w)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=c,c._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const h=c.code,y=c.charCode||c.keyCode;"Space"!==h&&"Enter"!==h&&32!==y&&13!==y||this.togglePopup()}_onMapClick(c){const h=c.originalEvent.target,y=this._element;this._popup&&(h===y||y.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map;if(!c)return!1;const h=c.unproject(this._pos),y=c.getFreeCameraOptions();if(!y.position)return!1;const w=y.position.toLngLat();return w.distanceTo(h)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const h=this._pos;if(!h||h.x<0||h.x>c.transform.width||h.y<0||h.y>c.transform.height)return void this._clearFadeTimer();const y=c.unproject(h);let w;c._showingGlobe()&&p.isLngLatBehindGlobe(c.transform,this._lngLat)?w=0:(w=1-c._queryFogOpacity(y),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(w*=.2)),this._element.style.opacity=`${w}`,this._element.style.pointerEvents=w>0?"auto":"none",this._popup&&this._popup._setOpacity(w),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${c.x}px,${c.y}px)\n            ${dd[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${h.x}px,${h.y}px)\n        `}_calculateXYTransform(){const c=this._pos,h=this._map,y=this.getPitchAlignment();if(!h||!c||"map"!==y)return"";if(!h._showingGlobe()){const I=h.getPitch();return I?`rotateX(${I}deg)`:""}const w=p.radToDeg(p.globeTiltAtLngLat(h.transform,this._lngLat)),C=c.sub(p.globeCenterToScreenPoint(h.transform)),E=Math.abs(C.x)+Math.abs(C.y);if(0===E)return"";const T=w/E;return`rotateX(${-C.y*T}deg) rotateY(${C.x*T}deg)`}_calculateZTransform(){const c=this._pos,h=this._map;if(!h||!c)return"";let y=0;const w=this.getRotationAlignment();if("map"===w)if(h._showingGlobe()){const C=h.project(new p.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),E=h.project(new p.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(C);y=p.radToDeg(Math.atan2(E.y,E.x))-90}else y=-h.getBearing();else if("horizon"===w){const C=p.smoothstep(4,6,h.getZoom()),E=p.globeCenterToScreenPoint(h.transform);E.y+=C*h.transform.height;const T=c.sub(E),I=p.radToDeg(Math.atan2(T.y,T.x));y=(I>90?I-270:I+90)*(1-C)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(c){p.window.cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=pp(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),!0===c?this._updateFrameId=p.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(c){return this._offset=p.pointGeometry.convert(c),this._update(),this}_onMove(c){const h=this._map;if(h){if(!this._isDragging){const y=this._clickTolerance||h._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new p.Event("dragstart"))),this.fire(new p.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new p.Event("dragend")),this._state="inactive"}_addDragHandler(c){const h=this._map;h&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos),this._pointerdownPos=c.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const h=this._map;return h&&(c?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}}class yf{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const h=p.easeCubicInOut((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,h,y){this._start=this.getValue(h),this._end=c,this._startTime=h,this._endTime=h+y}}const mp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},vf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function uu(m){m.parentNode&&m.parentNode.removeChild(m)}const bf={showCompass:!0,showZoom:!0,visualizePitch:!1};class gp{constructor(c,h,y=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new Gm({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,y&&(this.mousePitch=new Yo({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),p.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(c,h){this.mouseRotate.mousedown(c,h),this.mousePitch&&this.mousePitch.mousedown(c,h),Vi()}move(c,h){const y=this.map,w=this.mouseRotate.mousemoveWindow(c,h),C=w&&w.bearingDelta;if(C&&y.setBearing(y.getBearing()+C),this.mousePitch){const E=this.mousePitch.mousemoveWindow(c,h),T=E&&E.pitchDelta;T&&y.setPitch(y.getPitch()+T)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart,{passive:!1}),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){sn(),p.window.removeEventListener("mousemove",this.mousemove),p.window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(p.extend({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),Et(this.element,c)),p.window.addEventListener("mousemove",this.mousemove),p.window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,Et(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){1!==c.targetTouches.length?this.reset():(this._startPos=this._lastPos=zt(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){1!==c.targetTouches.length?this.reset():(this._lastPos=zt(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){0===c.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const _p={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},xf={maxWidth:100,unit:"metric"};function wf(m,c,h){const y=Fo(c),w=y/c,C={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[h];this._map._requestDomTask(()=>{this._container.style.width=m*w+"px",this._container.innerHTML=`${y}&nbsp;${C}`})}function Fo(m){const c=Math.pow(10,`${Math.floor(m)}`.length-1);let h=m/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:h>=1?1:function(y){const w=Math.pow(10,Math.ceil(-Math.log(y)/Math.LN10));return Math.round(y*w)/w}(h),c*h}const vc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Yr=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function As(m=new p.pointGeometry(0,0),c="bottom"){if("number"==typeof m){const h=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(c){case"top":return new p.pointGeometry(0,m);case"top-left":return new p.pointGeometry(h,h);case"top-right":return new p.pointGeometry(-h,h);case"bottom":return new p.pointGeometry(0,-m);case"bottom-left":return new p.pointGeometry(h,-h);case"bottom-right":return new p.pointGeometry(-h,-h);case"left":return new p.pointGeometry(m,0);case"right":return new p.pointGeometry(-m,0)}return new p.pointGeometry(0,0)}return m instanceof p.pointGeometry||Array.isArray(m)?p.pointGeometry.convert(m):p.pointGeometry.convert(m[c]||[0,0])}const sh={version:p.version,supported:We,setRTLTextPlugin:p.setRTLTextPlugin,getRTLTextPluginStatus:p.getRTLTextPluginStatus,Map:class extends Ym{constructor(m){if(null!=(m=p.extend({},vf,m)).minZoom&&null!=m.maxZoom&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=m.minPitch&&null!=m.maxPitch&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=m.minPitch&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=m.maxPitch&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&p.isSafariWithAntialiasingBug(p.window)&&(m.antialias=!1,p.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Oo(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language="auto"===m.language?p.window.navigator.language:m.language,this._worldview=m.worldview,this._renderTaskQueue=new oh,this._domRenderTaskQueue=new oh,this._controls=[],this._markers=[],this._mapId=p.uniqueId(),this._locale=p.extend({},mp,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new yf(0),this._useExplicitProjection=!1,this._requestManager=new p.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,"string"==typeof m.container){if(this._container=p.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof p.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&p.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),p.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==p.window&&(p.window.addEventListener("online",this._onWindowOnline,!1),p.window.addEventListener("resize",this._onWindowResize,!1),p.window.addEventListener("orientationchange",this._onWindowResize,!1),p.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Zm(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new po("string"==typeof m.hash&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,p.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new _f({customAttribution:m.customAttribution})),this._logoControl=new rh,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update("style"===c.dataType),this.fire(new p.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new p.Event(`${c.dataType}dataloading`,c))})}_getMapId(){return this._mapId}addControl(m,c){if(void 0===c&&(c=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=m.onAdd(this);this._controls.push(m);const y=this._controlPositions[c];return-1!==c.indexOf("bottom")?y.insertBefore(h,y.firstChild):y.appendChild(h),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(m);return c>-1&&this._controls.splice(c,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new p.Event("movestart",m)).fire(new p.Event("move",m)),this.fire(new p.Event("resize",m)),c&&this.fire(new p.Event("moveend",m)),this}getBounds(){return"globe"===this.transform.projection.name&&p.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(p.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new p.Event("zoomstart")).fire(new p.Event("zoom")).fire(new p.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new p.Event("zoomstart")).fire(new p.Event("zoom")).fire(new p.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new p.Event("pitchstart")).fire(new p.Event("pitch")).fire(new p.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new p.Event("pitchstart")).fire(new p.Event("pitch")).fire(new p.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}getLanguage(){return this._language}setLanguage(m){if(this._language="auto"===m?p.window.navigator.language:m,this.style)for(const c in this.style._sourceCaches){const h=this.style._sourceCaches[c]._source;h._setLanguage&&h._setLanguage(this._language)}for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){if(this._worldview=m,this.style)for(const c in this.style._sourceCaches){const h=this.style._sourceCaches[c]._source;h._setWorldview&&h._setWorldview(m)}return this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(m){return this._lazyInitEmptyStyle(),m?"string"==typeof m&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const m=this.transform,c=m.projection.name;let h;"globe"===c&&m.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),h=!0):"mercator"===c&&m.zoom<p.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,c){return this._updateProjection(m||c||{name:"mercator"})}_updateProjection(m){let c;if(c="globe"===m.name&&this.transform.zoom>=p.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),c){this.painter.clearBackgroundTiles();for(const h in this.style._sourceCaches)this.style._sourceCaches[h].clearTiles();this._update(!0)}return this}project(m){return this.transform.locationPoint3D(p.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(p.pointGeometry.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(m,c,h){if("mouseenter"===m||"mouseover"===m){let y=!1;const w=E=>{const T=c.filter(L=>this.getLayer(L)),I=T.length?this.queryRenderedFeatures(E.point,{layers:T}):[];I.length?y||(y=!0,h.call(this,new Sr(m,this,E.originalEvent,{features:I}))):y=!1},C=()=>{y=!1};return{layers:new Set(c),listener:h,delegates:{mousemove:w,mouseout:C}}}if("mouseleave"===m||"mouseout"===m){let y=!1;const w=E=>{const T=c.filter(I=>this.getLayer(I));(T.length?this.queryRenderedFeatures(E.point,{layers:T}):[]).length?y=!0:y&&(y=!1,h.call(this,new Sr(m,this,E.originalEvent)))},C=E=>{y&&(y=!1,h.call(this,new Sr(m,this,E.originalEvent)))};return{layers:new Set(c),listener:h,delegates:{mousemove:w,mouseout:C}}}{const y=w=>{const C=c.filter(T=>this.getLayer(T)),E=C.length?this.queryRenderedFeatures(w.point,{layers:C}):[];E.length&&(w.features=E,h.call(this,w),delete w.features)};return{layers:new Set(c),listener:h,delegates:{[m]:y}}}}on(m,c,h){if(void 0===h)return super.on(m,c);Array.isArray(c)||(c=[c]);const y=this._createDelegatedListener(m,c,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(y);for(const w in y.delegates)this.on(w,y.delegates[w]);return this}once(m,c,h){if(void 0===h)return super.once(m,c);Array.isArray(c)||(c=[c]);const y=this._createDelegatedListener(m,c,h);for(const w in y.delegates)this.once(w,y.delegates[w]);return this}off(m,c,h){if(void 0===h)return super.off(m,c);c=new Set(Array.isArray(c)?c:[c]);const y=(C,E)=>{if(C.size!==E.size)return!1;for(const T of C)if(!E.has(T))return!1;return!0},w=this._delegatedListeners?this._delegatedListeners[m]:void 0;return w&&(C=>{for(let E=0;E<C.length;E++){const T=C[E];if(T.listener===h&&y(T.layers,c)){for(const I in T.delegates)this.off(I,T.delegates[I]);return C.splice(E,1),this}}})(w),this}queryRenderedFeatures(m,c){return this.style?(void 0!==c||void 0===m||m instanceof p.pointGeometry||Array.isArray(m)||(c=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],c=c||{},this.transform)):[]}querySourceFeatures(m,c){return this.style.querySourceFeatures(m,c)}queryTerrainElevation(m,c){const h=this.transform.elevation;return h?(c=p.extend({},{exaggerated:!0},c),h.getAtPoint(p.MercatorCoordinate.fromLngLat(m),null,c.exaggerated)):null}setStyle(m,c){return!1!==(c=p.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c)).diff&&c.localIdeographFontFamily===this._localIdeographFontFamily&&c.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(m,c))}_getUIString(m){const c=this._locale[m];if(null==c)throw new Error(`Missing UI string '${m}'`);return c}_updateStyle(m,c){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new Br(this,c||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof m?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Br(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,c){if("string"==typeof m){const h=this._requestManager.normalizeStyleURL(m),y=this._requestManager.transformRequest(h,p.ResourceType.Style);p.getJSON(y,(w,C)=>{w?this.fire(new p.ErrorEvent(w)):C&&this._updateDiff(C,c)})}else"object"==typeof m&&this._updateDiff(m,c)}_updateDiff(m,c){try{this.style.setState(m)&&this._update(!0)}catch(h){p.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(m,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(p.warnOnce("There is no style added to the map."),!1)}addSource(m,c){return this._lazyInitEmptyStyle(),this.style.addSource(m,c),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const c in m){const h=m[c]._tiles;for(const y in h){const w=h[y];if("loaded"!==w.state&&"errored"!==w.state)return!1}}return!0}addSourceType(m,c,h){this._lazyInitEmptyStyle(),this.style.addSourceType(m,c,h)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,c,{pixelRatio:h=1,sdf:y=!1,stretchX:w,stretchY:C,content:E}={}){if(this._lazyInitEmptyStyle(),c instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&c instanceof p.window.ImageBitmap){const{width:T,height:I,data:L}=p.exported.getImageData(c);this.style.addImage(m,{data:new p.RGBAImage({width:T,height:I},L),pixelRatio:h,stretchX:w,stretchY:C,content:E,sdf:y,version:0})}else if(void 0===c.width||void 0===c.height)this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:T,height:I}=c,L=c;this.style.addImage(m,{data:new p.RGBAImage({width:T,height:I},new Uint8Array(L.data)),pixelRatio:h,stretchX:w,stretchY:C,content:E,sdf:y,version:0,userImage:L}),L.onAdd&&L.onAdd(this,m)}}updateImage(m,c){const h=this.style.getImage(m);if(!h)return void this.fire(new p.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=c instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&c instanceof p.window.ImageBitmap?p.exported.getImageData(c):c,{width:w,height:C}=y;void 0!==w&&void 0!==C?w===h.data.width&&C===h.data.height?(h.data.replace(y.data,!(c instanceof p.window.HTMLImageElement||p.window.ImageBitmap&&c instanceof p.window.ImageBitmap)),this.style.updateImage(m,h)):this.fire(new p.ErrorEvent(new Error(`The width and height of the updated image (${w}, ${C})\n                must be that same as the previous version of the image\n                (${h.data.width}, ${h.data.height})`))):this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new p.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,c){p.getImage(this._requestManager.transformRequest(m,p.ResourceType.Image),(h,y)=>{c(h,y instanceof p.window.HTMLImageElement?p.exported.getImageData(y):y)})}listImages(){return this.style.listImages()}addLayer(m,c){return this._lazyInitEmptyStyle(),this.style.addLayer(m,c),this._update(!0)}moveLayer(m,c){return this.style.moveLayer(m,c),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,c,h){return this.style.setLayerZoomRange(m,c,h),this._update(!0)}setFilter(m,c,h={}){return this.style.setFilter(m,c,h),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,c,h,y={}){return this.style.setPaintProperty(m,c,h,y),this._update(!0)}getPaintProperty(m,c){return this.style.getPaintProperty(m,c)}setLayoutProperty(m,c,h,y={}){return this.style.setLayoutProperty(m,c,h,y),this._update(!0)}getLayoutProperty(m,c){return this.style.getLayoutProperty(m,c)}setLight(m,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,c),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(p.LngLat.convert(m),this.transform):0}setFeatureState(m,c){return this.style.setFeatureState(m,c),this._update()}removeFeatureState(m,c){return this.style.removeFeatureState(m,c),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let h,y,w,C=this._container;for(;C&&(!y||!w);){const E=p.window.getComputedStyle(C).transform;E&&"none"!==E&&(h=E.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&"0"!==h[0]&&"1"!==h[0]&&(y=h[0]),h[3]&&"0"!==h[3]&&"1"!==h[3]&&(w=h[3])),C=C.parentElement}this._containerWidth=y?Math.abs(m/y):m,this._containerHeight=w?Math.abs(c/w):c}_detectMissingCSS(){"rgb(250, 128, 114)"!==p.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&p.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=ht("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=ht("div","mapboxgl-canvas-container",m);this._interactive&&c.classList.add("mapboxgl-interactive"),this._canvas=ht("canvas","mapboxgl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=ht("div","mapboxgl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{y[w]=ht("div",`mapboxgl-ctrl-${w}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,c){const h=p.exported.devicePixelRatio||1;this._canvas.width=h*Math.ceil(m),this._canvas.height=h*Math.ceil(c),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${c}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const c=this._markers.indexOf(m);-1!==c&&this._markers.splice(c,1)}_setupPainter(){const m=p.extend({},We.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);c?(p.storeAuthState(c,!0),this.painter=new od(c,this.transform),this.on("data",h=>{"source"===h.dataType&&this.painter.setTileLoadedFlag(!0)}),p.exported$1.testSupport(c)):this.fire(new p.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new p.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new p.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let c;const h=this.painter.context.extTimerQuery,y=p.exported.now();if(this.listens("gpu-timing-frame")&&(c=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();let w=!1;const C=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const I=this.transform.zoom,L=this.transform.pitch,N=p.exported.now();this.style.zoomHistory.update(I,N);const G=new p.EvaluationParameters(I,{now:N,fadeDuration:C,pitch:L,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Q=G.crossFadingFactor();1===Q&&Q===this._crossFadingFactor||(w=!0,this._crossFadingFactor=Q),this.style.update(G)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let E=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),E=this._updateAverageElevation(y),this.style._updateSources(this.transform),this._forceMarkerUpdate()):E=this._updateAverageElevation(y),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,C,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new p.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new p.Event("load"))),this.style&&(this.style.hasTransitions()||w)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const I=p.exported.now()-y;h.endQueryEXT(h.TIME_ELAPSED_EXT,c),setTimeout(()=>{const L=h.getQueryObjectEXT(c,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(c),this.fire(new p.Event("gpu-timing-frame",{cpuTime:I,gpuTime:L})),p.window.performance.mark("frame-gpu",{startTime:y,detail:{gpuTime:L}})},50)}if(this.listens("gpu-timing-layer")){const I=this.painter.collectGpuTimers();setTimeout(()=>{const L=this.painter.queryGpuTimers(I);this.fire(new p.Event("gpu-timing-layer",{layerTimes:L}))},50)}if(this.listens("gpu-timing-deferred-render")){const I=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const L=this.painter.queryGpuTimeDeferredRender(I);this.fire(new p.Event("gpu-timing-deferred-render",{gpuTime:L}))},50)}const T=this._sourcesDirty||this._styleDirty||this._placementDirty||E;if(T||this._repaint)this.triggerRepaint();else{const I=!this.isMoving()&&this.loaded();if(I&&(E=this._updateAverageElevation(y,!0)),E)this.triggerRepaint();else if(this._triggerFrame(!1),I&&(this.fire(new p.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const L=this._calculateSpeedIndex();this.fire(new p.Event("speedindexcompleted",{speedIndex:L})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||T||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const m of this._markers)m._update()}_updateAverageElevation(m,c=!1){const h=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&h(0);if((c||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const y=this.transform.averageElevation;let w=this.transform.sampleAverageElevation(),C=!1;this.transform.elevation&&(C=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(w)?w=0:this._averageElevationLastSampledAt=m;const E=Math.abs(y-w);if(E>1){if(this._isInitialLoad||C)return this._averageElevation.jumpTo(w),h(w);this._averageElevation.easeTo(w,m,300)}else if(E>1e-4)return this._averageElevation.jumpTo(w),h(w)}return!!this._averageElevation.isEasing(m)&&h(this._averageElevation.getValue(m))}_authenticate(){p.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===p.AUTH_ERR_MSG||401===m.status)){const c=this.painter.context.gl;p.storeAuthState(c,!1),this._logoControl instanceof rh&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new p.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),p.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const h=this.painter.context.gl,y=h.createFramebuffer();function w(C){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,C,0);const E=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,E),E}return h.bindFramebuffer(h.FRAMEBUFFER,y),this._canvasPixelComparison(w(m),c.canvasCopies.map(w),c.timeStamps)}_canvasPixelComparison(m,c,h){let y=h[1]-h[0];const w=m.length/4;for(let C=0;C<c.length;C++){const E=c[C];let T=0;for(let I=0;I<E.length;I+=4)E[I]===m[I]&&E[I+1]===m[I+1]&&E[I+2]===m[I+2]&&E[I+3]===m[I+3]&&(T+=1);y+=(h[C+2]-h[C+1])*(1-T/w)}return y}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==p.window&&(p.window.removeEventListener("resize",this._onWindowResize,!1),p.window.removeEventListener("orientationchange",this._onWindowResize,!1),p.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),p.window.removeEventListener("online",this._onWindowOnline,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),uu(this._canvasContainer),uu(this._controlContainer),uu(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),p.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new p.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=p.exported.frame(c=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(c)}))}_preloadTiles(m){const c=this.style?Object.values(this.style._sourceCaches):[];return p.asyncAll(c,(h,y)=>h._preloadTiles(m,y),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}_setCacheLimits(m,c){p.setCacheLimits(m,c)}get version(){return p.version}},NavigationControl:class{constructor(m){this.options=p.extend({},bf,m),this._container=ht("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(p.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",c=>{this._map&&this._map.zoomIn({},{originalEvent:c})}),ht("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",c=>{this._map&&this._map.zoomOut({},{originalEvent:c})}),ht("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(p.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",c=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:c}):h.resetNorth({},{originalEvent:c}))}),this._compassIcon=ht("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const c=m.getZoom(),h=c===m.getMaxZoom(),y=c===m.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=c)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new gp(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,c){const h=ht("button",m,this._container);return h.type="button",h.addEventListener("click",c),h}_setButtonTitle(m,c){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${c}`);m.setAttribute("aria-label",h),m.firstElementChild&&m.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends p.Evented{constructor(m){super(),this.options=p.extend({geolocation:p.window.navigator.geolocation},_p,m),p.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=to(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=ht("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){void 0!==this._supportsGeolocation?m(this._supportsGeolocation):void 0!==p.window.navigator.permissions?p.window.navigator.permissions.query({name:"geolocation"}).then(c=>{this._supportsGeolocation="denied"!==c.state,m(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,m(this._supportsGeolocation))}_isOutOfMapMaxBounds(m){const c=this._map.getMaxBounds(),h=m.coords;return!!c&&(h.longitude<c.getWest()||h.longitude>c.getEast()||h.latitude<c.getSouth()||h.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new p.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(m),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("geolocate",m)),this._finish()}}_updateCamera(m){const c=new p.LngLat(m.coords.longitude,m.coords.latitude),h=m.coords.accuracy,y=this._map.getBearing(),w=p.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(h),w,{geolocateSource:!0})}_updateMarker(m){if(m){const c=new p.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,c=p.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,h=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(1===m.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===m.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=ht("button","mapboxgl-ctrl-geolocate",this._container),ht("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===m){p.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ht("div","mapboxgl-user-location"),this._dotElement.appendChild(ht("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(ht("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new fp({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=ht("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fp({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||"ACTIVE_LOCK"!==this._watchState||c.originalEvent&&"resize"===c.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new p.Event("trackuserlocationend")))})}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:!0===m.absolute&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return p.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new p.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new p.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new p.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{p.window.addEventListener("ondeviceorientationabsolute"in p.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==p.window.DeviceMotionEvent&&"function"==typeof p.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(c=>{"granted"===c&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),p.window.removeEventListener("deviceorientation",this._onDeviceOrientation),p.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:_f,ScaleControl:class{constructor(m){this.options=p.extend({},xf,m),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=wf.bind(this)),p.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,c=this._map,h=c._containerHeight/2,y=c._containerWidth/2-m/2,w=c.unproject([y,h]),C=c.unproject([y+m,h]),E=w.distanceTo(C);if("imperial"===this.options.unit){const T=3.2808*E;T>5280?this._setScale(m,T/5280,"mile"):this._setScale(m,T,"foot")}else"nautical"===this.options.unit?this._setScale(m,E/1852,"nautical-mile"):E>=1e3?this._setScale(m,E/1e3,"kilometer"):this._setScale(m,E,"meter")}_setScale(m,c,h){const y=Fo(c),w=y/c;this._map._requestDomTask(()=>{this._container.style.width=m*w+"px",this._container.innerHTML="nautical-mile"!==h?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:h}).format(y):`${y}&nbsp;nm`})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=ht("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof p.window.HTMLElement?this._container=m.container:p.warnOnce("Full screen control 'container' must be a DOM element.")),p.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in p.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in p.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=ht("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",p.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,p.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!p.window.document.fullscreenEnabled&&!p.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=ht("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ht("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),p.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(p.window.document.fullscreenElement||p.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?p.window.document.exitFullscreen?p.window.document.exitFullscreen():p.window.document.webkitCancelFullScreen&&p.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends p.Evented{constructor(m){super(),this.options=p.extend(Object.create(vc),m),p.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new p.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new p.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=p.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(p.window.document.createTextNode(m))}setHTML(m){const c=p.window.document.createDocumentFragment(),h=p.window.document.createElement("body");let y;for(h.innerHTML=m;y=h.firstChild,y;)c.appendChild(y);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=ht("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(m),this.options.closeButton){const h=this._closeButton=ht("button","mapboxgl-popup-close-button",c);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let c;return this._classList.delete(m)?c=!1:(this._classList.add(m),c=!0),this._updateClassList(),c}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const c=this._map,h=this._container,y=this._pos;if(!c||!h||!y)return"bottom";const w=h.offsetWidth,C=h.offsetHeight,E=y.x<w/2,T=y.x>c.transform.width-w/2;if(y.y+m<C)return E?"top-left":T?"top-right":"top";if(y.y>c.transform.height-C){if(E)return"bottom-left";if(T)return"bottom-right"}return E?"left":T?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),m.className=c.join(" ")}_update(m){const c=this._map,h=this._content;if(!c||!this._lngLat&&!this._trackPointer||!h)return;let y=this._container;if(y||(y=this._container=ht("div","mapboxgl-popup",c.getContainer()),this._tip=ht("div","mapboxgl-popup-tip",y),y.appendChild(h)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=pp(this._lngLat,this._pos,c.transform)),!this._trackPointer||m){const w=this._pos=this._trackPointer&&m?m:c.project(this._lngLat),C=As(this.options.offset),E=this._anchor=this._getAnchor(C.y),T=As(this.options.offset,E),I=w.add(T).round();c._requestDomTask(()=>{this._container&&E&&(this._container.style.transform=`${dd[E]} translate(${I.x}px,${I.y}px)`)})}if(!this._marker&&c._showingGlobe()){const w=p.isLngLatBehindGlobe(c.transform,this._lngLat)?0:1;this._setOpacity(w)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(Yr);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:fp,Style:Br,LngLat:p.LngLat,LngLatBounds:p.LngLatBounds,Point:p.pointGeometry,MercatorCoordinate:p.MercatorCoordinate,FreeCameraOptions:Bt,Evented:p.Evented,config:p.config,prewarm:function(){In().acquire(ri)},clearPrewarmedResources:function(){const m=Gi;m&&(m.isPreloaded()&&1===m.numActive()?(m.release(ri),Gi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return p.config.ACCESS_TOKEN},set accessToken(m){p.config.ACCESS_TOKEN=m},get baseApiUrl(){return p.config.API_URL},set baseApiUrl(m){p.config.API_URL=m},get workerCount(){return _i.workerCount},set workerCount(m){_i.workerCount=m},get maxParallelImageRequests(){return p.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){p.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){p.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:p.exported.setNow,restoreNow:p.exported.restoreNow};return sh}),Oe}()},226:function(_n){_n.exports=function(){"use strict";var Be={awaitingPromise:new WeakMap,promise:new WeakMap,innerParams:new WeakMap,domCache:new WeakMap};const Oe=R=>{const F={};for(const Z in R)F[R[Z]]="swal2-"+R[Z];return F},he=Oe(["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","no-war"]),Fe=Oe(["success","warning","info","question","error"]),p="SweetAlert2:",We=R=>R.charAt(0).toUpperCase()+R.slice(1),Je=R=>{console.warn(`${p} ${"object"==typeof R?R.join(" "):R}`)},Ie=R=>{console.error(`${p} ${R}`)},ht=[],Bi=(R,F)=>{(R=>{ht.includes(R)||(ht.push(R),Je(R))})(`"${R}" is deprecated and will be removed in the next major release. Please use "${F}" instead.`)},xt=R=>"function"==typeof R?R():R,Xt=R=>R&&"function"==typeof R.toPromise,Vi=R=>Xt(R)?R.toPromise():Promise.resolve(R),sn=R=>R&&Promise.resolve(R)===R,mn=()=>document.body.querySelector(`.${he.container}`),vi=R=>{const F=mn();return F?F.querySelector(R):null},Et=R=>vi(`.${R}`),zt=()=>Et(he.popup),Di=()=>Et(he.icon),Ar=()=>Et(he.title),Wt=()=>Et(he["html-container"]),Ni=()=>Et(he.image),bi=()=>Et(he["progress-steps"]),ni=()=>Et(he["validation-message"]),Ii=()=>vi(`.${he.actions} .${he.confirm}`),Si=()=>vi(`.${he.actions} .${he.deny}`),ki=()=>vi(`.${he.loader}`),Ai=()=>vi(`.${he.actions} .${he.cancel}`),Hr=()=>Et(he.actions),$i=()=>Et(he.footer),Js=()=>Et(he["timer-progress-bar"]),lr=()=>Et(he.close),Go=()=>{const R=Array.from(zt().querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])')).sort((Z,ve)=>{const et=parseInt(Z.getAttribute("tabindex")),oi=parseInt(ve.getAttribute("tabindex"));return et>oi?1:et<oi?-1:0}),F=Array.from(zt().querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n')).filter(Z=>"-1"!==Z.getAttribute("tabindex"));return(R=>{const F=[];for(let Z=0;Z<R.length;Z++)-1===F.indexOf(R[Z])&&F.push(R[Z]);return F})(R.concat(F)).filter(Z=>Qr(Z))},St=()=>Wr(document.body,he.shown)&&!Wr(document.body,he["toast-shown"])&&!Wr(document.body,he["no-backdrop"]),Io=()=>zt()&&Wr(zt(),he.toast),Pn={previousBodyPadding:null},Qi=(R,F)=>{if(R.textContent="",F){const ve=(new DOMParser).parseFromString(F,"text/html");Array.from(ve.querySelector("head").childNodes).forEach(et=>{R.appendChild(et)}),Array.from(ve.querySelector("body").childNodes).forEach(et=>{et instanceof HTMLVideoElement||et instanceof HTMLAudioElement?R.appendChild(et.cloneNode(!0)):R.appendChild(et)})}},Wr=(R,F)=>{if(!F)return!1;const Z=F.split(/\s+/);for(let ve=0;ve<Z.length;ve++)if(!R.classList.contains(Z[ve]))return!1;return!0},tr=(R,F,Z)=>{if(((R,F)=>{Array.from(R.classList).forEach(Z=>{!Object.values(he).includes(Z)&&!Object.values(Fe).includes(Z)&&!Object.values(F.showClass).includes(Z)&&R.classList.remove(Z)})})(R,F),F.customClass&&F.customClass[Z]){if("string"!=typeof F.customClass[Z]&&!F.customClass[Z].forEach)return void Je(`Invalid type of customClass.${Z}! Expected string or iterable object, got "${typeof F.customClass[Z]}"`);xn(R,F.customClass[Z])}},qo=(R,F)=>{if(!F)return null;switch(F){case"select":case"textarea":case"file":return R.querySelector(`.${he.popup} > .${he[F]}`);case"checkbox":return R.querySelector(`.${he.popup} > .${he.checkbox} input`);case"radio":return R.querySelector(`.${he.popup} > .${he.radio} input:checked`)||R.querySelector(`.${he.popup} > .${he.radio} input:first-child`);case"range":return R.querySelector(`.${he.popup} > .${he.range} input`);default:return R.querySelector(`.${he.popup} > .${he.input}`)}},an=R=>{if(R.focus(),"file"!==R.type){const F=R.value;R.value="",R.value=F}},Ba=(R,F,Z)=>{!R||!F||("string"==typeof F&&(F=F.split(/\s+/).filter(Boolean)),F.forEach(ve=>{Array.isArray(R)?R.forEach(et=>{Z?et.classList.add(ve):et.classList.remove(ve)}):Z?R.classList.add(ve):R.classList.remove(ve)}))},xn=(R,F)=>{Ba(R,F,!0)},ao=(R,F)=>{Ba(R,F,!1)},lo=(R,F)=>{const Z=Array.from(R.children);for(let ve=0;ve<Z.length;ve++){const et=Z[ve];if(et instanceof HTMLElement&&Wr(et,F))return et}},ea=(R,F,Z)=>{Z===`${parseInt(Z)}`&&(Z=parseInt(Z)),Z||0===parseInt(Z)?R.style[F]="number"==typeof Z?`${Z}px`:Z:R.style.removeProperty(F)},Li=function(R){R.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex"},Ir=R=>{R.style.display="none"},Na=(R,F,Z,ve)=>{const et=R.querySelector(F);et&&(et.style[Z]=ve)},bs=function(R,F){F?Li(R,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):Ir(R)},Qr=R=>!(!R||!(R.offsetWidth||R.offsetHeight||R.getClientRects().length)),Xc=R=>R.scrollHeight>R.clientHeight,Kc=R=>{const F=window.getComputedStyle(R),Z=parseFloat(F.getPropertyValue("animation-duration")||"0"),ve=parseFloat(F.getPropertyValue("transition-duration")||"0");return Z>0||ve>0},$r=function(R){let F=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const Z=Js();Qr(Z)&&(F&&(Z.style.transition="none",Z.style.width="100%"),setTimeout(()=>{Z.style.transition=`width ${R/1e3}s linear`,Z.style.width="0%"},10))},yn={},za=R=>new Promise(F=>{if(!R)return F();const Z=window.scrollX,ve=window.scrollY;yn.restoreFocusTimeout=setTimeout(()=>{yn.previousActiveElement instanceof HTMLElement?(yn.previousActiveElement.focus(),yn.previousActiveElement=null):document.body&&document.body.focus(),F()},100),window.scrollTo(Z,ve)}),Bd=()=>typeof window>"u"||typeof document>"u",Nd=`\n <div aria-labelledby="${he.title}" aria-describedby="${he["html-container"]}" class="${he.popup}" tabindex="-1">\n   <button type="button" class="${he.close}"></button>\n   <ul class="${he["progress-steps"]}"></ul>\n   <div class="${he.icon}"></div>\n   <img class="${he.image}" />\n   <h2 class="${he.title}" id="${he.title}"></h2>\n   <div class="${he["html-container"]}" id="${he["html-container"]}"></div>\n   <input class="${he.input}" />\n   <input type="file" class="${he.file}" />\n   <div class="${he.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${he.select}"></select>\n   <div class="${he.radio}"></div>\n   <label for="${he.checkbox}" class="${he.checkbox}">\n     <input type="checkbox" />\n     <span class="${he.label}"></span>\n   </label>\n   <textarea class="${he.textarea}"></textarea>\n   <div class="${he["validation-message"]}" id="${he["validation-message"]}"></div>\n   <div class="${he.actions}">\n     <div class="${he.loader}"></div>\n     <button type="button" class="${he.confirm}"></button>\n     <button type="button" class="${he.deny}"></button>\n     <button type="button" class="${he.cancel}"></button>\n   </div>\n   <div class="${he.footer}"></div>\n   <div class="${he["timer-progress-bar-container"]}">\n     <div class="${he["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),ga=()=>{yn.currentInstance.resetValidationMessage()},Va=R=>{const F=(()=>{const R=mn();return!!R&&(R.remove(),ao([document.documentElement,document.body],[he["no-backdrop"],he["toast-shown"],he["has-column"]]),!0)})();if(Bd())return void Ie("SweetAlert2 requires document to initialize");const Z=document.createElement("div");Z.className=he.container,F&&xn(Z,he["no-transition"]),Qi(Z,Nd);const ve=(R=>"string"==typeof R?document.querySelector(R):R)(R.target);ve.appendChild(Z),(R=>{const F=zt();F.setAttribute("role",R.toast?"alert":"dialog"),F.setAttribute("aria-live",R.toast?"polite":"assertive"),R.toast||F.setAttribute("aria-modal","true")})(R),(R=>{"rtl"===window.getComputedStyle(R).direction&&xn(mn(),he.rtl)})(ve),(()=>{const R=zt(),F=lo(R,he.input),Z=lo(R,he.file),ve=R.querySelector(`.${he.range} input`),et=R.querySelector(`.${he.range} output`),oi=lo(R,he.select),Dr=R.querySelector(`.${he.checkbox} input`),Oo=lo(R,he.textarea);F.oninput=ga,Z.onchange=ga,oi.onchange=ga,Dr.onchange=ga,Oo.oninput=ga,ve.oninput=()=>{ga(),et.value=ve.value},ve.onchange=()=>{ga(),et.value=ve.value}})()},js=(R,F)=>{R instanceof HTMLElement?F.appendChild(R):"object"==typeof R?nc(R,F):R&&Qi(F,R)},nc=(R,F)=>{R.jquery?Jc(F,R):Qi(F,R.toString())},Jc=(R,F)=>{if(R.textContent="",0 in F)for(let Z=0;Z in F;Z++)R.appendChild(F[Z].cloneNode(!0));else R.appendChild(F.cloneNode(!0))},Jr=(()=>{if(Bd())return!1;const R=document.createElement("div"),F={WebkitAnimation:"webkitAnimationEnd",animation:"animationend"};for(const Z in F)if(Object.prototype.hasOwnProperty.call(F,Z)&&typeof R.style[Z]<"u")return F[Z];return!1})(),de=(R,F)=>{const Z=Hr(),ve=ki();F.showConfirmButton||F.showDenyButton||F.showCancelButton?Li(Z):Ir(Z),tr(Z,F,"actions"),function j(R,F,Z){const ve=Ii(),et=Si(),oi=Ai();ae(ve,"confirm",Z),ae(et,"deny",Z),ae(oi,"cancel",Z),function Y(R,F,Z,ve){ve.buttonsStyling?(xn([R,F,Z],he.styled),ve.confirmButtonColor&&(R.style.backgroundColor=ve.confirmButtonColor,xn(R,he["default-outline"])),ve.denyButtonColor&&(F.style.backgroundColor=ve.denyButtonColor,xn(F,he["default-outline"])),ve.cancelButtonColor&&(Z.style.backgroundColor=ve.cancelButtonColor,xn(Z,he["default-outline"]))):ao([R,F,Z],he.styled)}(ve,et,oi,Z),Z.reverseButtons&&(Z.toast?(R.insertBefore(oi,ve),R.insertBefore(et,ve)):(R.insertBefore(oi,F),R.insertBefore(et,F),R.insertBefore(ve,F)))}(Z,ve,F),Qi(ve,F.loaderHtml),tr(ve,F,"loader")};function ae(R,F,Z){bs(R,Z[`show${We(F)}Button`],"inline-block"),Qi(R,Z[`${F}ButtonText`]),R.setAttribute("aria-label",Z[`${F}ButtonAriaLabel`]),R.className=he[F],tr(R,Z,`${F}Button`),xn(R,Z[`${F}ButtonClass`])}const ke=(R,F)=>{const Z=mn();!Z||(function Ve(R,F){"string"==typeof F?R.style.background=F:F||xn([document.documentElement,document.body],he["no-backdrop"])}(Z,F.backdrop),function Ne(R,F){F in he?xn(R,he[F]):(Je('The "position" parameter is not valid, defaulting to "center"'),xn(R,he.center))}(Z,F.position),function Ae(R,F){if(F&&"string"==typeof F){const Z=`grow-${F}`;Z in he&&xn(R,he[Z])}}(Z,F.grow),tr(Z,F,"container"))};const je=["input","file","range","select","radio","checkbox","textarea"],Ct=R=>{if(!qi[R.input])return void Ie(`Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "${R.input}"`);const F=Gi(R.input),Z=qi[R.input](F,R);Li(F),setTimeout(()=>{an(Z)})},ti=(R,F)=>{const Z=qo(zt(),R);if(Z){(R=>{for(let F=0;F<R.attributes.length;F++){const Z=R.attributes[F].name;["type","value","style"].includes(Z)||R.removeAttribute(Z)}})(Z);for(const ve in F)Z.setAttribute(ve,F[ve])}},Ei=R=>{const F=Gi(R.input);"object"==typeof R.customClass&&xn(F,R.customClass.input)},ri=(R,F)=>{(!R.placeholder||F.inputPlaceholder)&&(R.placeholder=F.inputPlaceholder)},_i=(R,F,Z)=>{if(Z.inputLabel){R.id=he.input;const ve=document.createElement("label"),et=he["input-label"];ve.setAttribute("for",R.id),ve.className=et,"object"==typeof Z.customClass&&xn(ve,Z.customClass.inputLabel),ve.innerText=Z.inputLabel,F.insertAdjacentElement("beforebegin",ve)}},Gi=R=>lo(zt(),he[R]||he.input),In=(R,F)=>{["string","number"].includes(typeof F)?R.value=`${F}`:sn(F)||Je(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof F}"`)},qi={};qi.text=qi.email=qi.password=qi.number=qi.tel=qi.url=(R,F)=>(In(R,F.inputValue),_i(R,R,F),ri(R,F),R.type=F.input,R),qi.file=(R,F)=>(_i(R,R,F),ri(R,F),R),qi.range=(R,F)=>{const Z=R.querySelector("input"),ve=R.querySelector("output");return In(Z,F.inputValue),Z.type=F.input,In(ve,F.inputValue),_i(Z,R,F),R},qi.select=(R,F)=>{if(R.textContent="",F.inputPlaceholder){const Z=document.createElement("option");Qi(Z,F.inputPlaceholder),Z.value="",Z.disabled=!0,Z.selected=!0,R.appendChild(Z)}return _i(R,R,F),R},qi.radio=R=>(R.textContent="",R),qi.checkbox=(R,F)=>{const Z=qo(zt(),"checkbox");Z.value="1",Z.id=he.checkbox,Z.checked=Boolean(F.inputValue);const ve=R.querySelector("span");return Qi(ve,F.inputPlaceholder),Z},qi.textarea=(R,F)=>{In(R,F.inputValue),ri(R,F),_i(R,R,F);return setTimeout(()=>{if("MutationObserver"in window){const ve=parseInt(window.getComputedStyle(zt()).width);new MutationObserver(()=>{const oi=R.offsetWidth+(ve=>parseInt(window.getComputedStyle(ve).marginLeft)+parseInt(window.getComputedStyle(ve).marginRight))(R);zt().style.width=oi>ve?`${oi}px`:null}).observe(R,{attributes:!0,attributeFilter:["style"]})}}),R};const Hn=(R,F)=>{const Z=Wt();tr(Z,F,"htmlContainer"),F.html?(js(F.html,Z),Li(Z,"block")):F.text?(Z.textContent=F.text,Li(Z,"block")):Ir(Z),((R,F)=>{const Z=zt(),ve=Be.innerParams.get(R),et=!ve||F.input!==ve.input;je.forEach(oi=>{const Dr=lo(Z,he[oi]);ti(oi,F.inputAttributes),Dr.className=he[oi],et&&Ir(Dr)}),F.input&&(et&&Ct(F),Ei(F))})(R,F)},ns=(R,F)=>{for(const Z in Fe)F.icon!==Z&&ao(R,Fe[Z]);xn(R,Fe[F.icon]),Hd(R,F),Rr(),tr(R,F,"icon")},Rr=()=>{const R=zt(),F=window.getComputedStyle(R).getPropertyValue("background-color"),Z=R.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let ve=0;ve<Z.length;ve++)Z[ve].style.backgroundColor=F},xs=(R,F)=>{let ve,Z=R.innerHTML;F.iconHtml?ve=Wh(F.iconHtml):"success"===F.icon?(ve='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',Z=Z.replace(/ style=".*?"/g,"")):ve="error"===F.icon?'\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':Wh({question:"?",warning:"!",info:"i"}[F.icon]),Z.trim()!==ve.trim()&&Qi(R,ve)},Hd=(R,F)=>{if(F.iconColor){R.style.color=F.iconColor,R.style.borderColor=F.iconColor;for(const Z of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Na(R,Z,"backgroundColor",F.iconColor);Na(R,".swal2-success-ring","borderColor",F.iconColor)}},Wh=R=>`<div class="${he["icon-content"]}">${R}</div>`,on=(R,F)=>{R.className=`${he.popup} ${Qr(R)?F.showClass.popup:""}`,F.toast?(xn([document.documentElement,document.body],he["toast-shown"]),xn(R,he.toast)):xn(R,he.modal),tr(R,F,"popup"),"string"==typeof F.customClass&&xn(R,F.customClass),F.icon&&xn(R,he[`icon-${F.icon}`])},Mn=R=>{const F=document.createElement("li");return xn(F,he["progress-step"]),Qi(F,R),F},ws=R=>{const F=document.createElement("li");return xn(F,he["progress-step-line"]),R.progressStepsDistance&&ea(F,"width",R.progressStepsDistance),F},tl=(R,F)=>{((R,F)=>{const Z=mn(),ve=zt();F.toast?(ea(Z,"width",F.width),ve.style.width="100%",ve.insertBefore(ki(),Di())):ea(ve,"width",F.width),ea(ve,"padding",F.padding),F.color&&(ve.style.color=F.color),F.background&&(ve.style.background=F.background),Ir(ni()),on(ve,F)})(0,F),ke(0,F),((R,F)=>{const Z=bi();F.progressSteps&&0!==F.progressSteps.length?(Li(Z),Z.textContent="",F.currentProgressStep>=F.progressSteps.length&&Je("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),F.progressSteps.forEach((ve,et)=>{const oi=Mn(ve);if(Z.appendChild(oi),et===F.currentProgressStep&&xn(oi,he["active-progress-step"]),et!==F.progressSteps.length-1){const Dr=ws(F);Z.appendChild(Dr)}})):Ir(Z)})(0,F),((R,F)=>{const Z=Be.innerParams.get(R),ve=Di();Z&&F.icon===Z.icon?(xs(ve,F),ns(ve,F)):F.icon||F.iconHtml?F.icon&&-1===Object.keys(Fe).indexOf(F.icon)?(Ie(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${F.icon}"`),Ir(ve)):(Li(ve),xs(ve,F),ns(ve,F),xn(ve,F.showClass.icon)):Ir(ve)})(R,F),((R,F)=>{const Z=Ni();F.imageUrl?(Li(Z,""),Z.setAttribute("src",F.imageUrl),Z.setAttribute("alt",F.imageAlt),ea(Z,"width",F.imageWidth),ea(Z,"height",F.imageHeight),Z.className=he.image,tr(Z,F,"image")):Ir(Z)})(0,F),((R,F)=>{const Z=Ar();bs(Z,F.title||F.titleText,"block"),F.title&&js(F.title,Z),F.titleText&&(Z.innerText=F.titleText),tr(Z,F,"title")})(0,F),((R,F)=>{const Z=lr();Qi(Z,F.closeButtonHtml),tr(Z,F,"closeButton"),bs(Z,F.showCloseButton),Z.setAttribute("aria-label",F.closeButtonAriaLabel)})(0,F),Hn(R,F),de(0,F),((R,F)=>{const Z=$i();bs(Z,F.footer),F.footer&&js(F.footer,Z),tr(Z,F,"footer")})(0,F),"function"==typeof F.didRender&&F.didRender(zt())};function oc(){const R=Be.innerParams.get(this);if(!R)return;const F=Be.domCache.get(this);Ir(F.loader),Io()?R.icon&&Li(Di()):en(F),ao([F.popup,F.actions],he.loading),F.popup.removeAttribute("aria-busy"),F.popup.removeAttribute("data-loading"),F.confirmButton.disabled=!1,F.denyButton.disabled=!1,F.cancelButton.disabled=!1}const en=R=>{const F=R.popup.getElementsByClassName(R.loader.getAttribute("data-button-to-replace"));F.length?Li(F[0],"inline-block"):!Qr(Ii())&&!Qr(Si())&&!Qr(Ai())&&Ir(R.actions)};const Zh=()=>Ii()&&Ii().click(),Ri=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ln=R=>{R.keydownTarget&&R.keydownHandlerAdded&&(R.keydownTarget.removeEventListener("keydown",R.keydownHandler,{capture:R.keydownListenerCapture}),R.keydownHandlerAdded=!1)},Ro=(R,F,Z)=>{const ve=Go();if(ve.length)return(F+=Z)===ve.length?F=0:-1===F&&(F=ve.length-1),ve[F].focus();zt().focus()},$n=["ArrowRight","ArrowDown"],sc=["ArrowLeft","ArrowUp"],yo=(R,F,Z)=>{const ve=Be.innerParams.get(R);!ve||F.isComposing||229===F.keyCode||(ve.stopKeydownPropagation&&F.stopPropagation(),"Enter"===F.key?Cs(R,F,ve):"Tab"===F.key?rs(F,ve):[...$n,...sc].includes(F.key)?Yh(F.key):"Escape"===F.key&&Po(F,ve,Z))},Cs=(R,F,Z)=>{if(xt(Z.allowEnterKey)&&F.target&&R.getInput()&&F.target instanceof HTMLElement&&F.target.outerHTML===R.getInput().outerHTML){if(["textarea","file"].includes(Z.input))return;Zh(),F.preventDefault()}},rs=(R,F)=>{const Z=R.target,ve=Go();let et=-1;for(let oi=0;oi<ve.length;oi++)if(Z===ve[oi]){et=oi;break}Ro(0,et,R.shiftKey?-1:1),R.stopPropagation(),R.preventDefault()},Yh=R=>{const F=Ii(),Z=Si(),ve=Ai();if(document.activeElement instanceof HTMLElement&&![F,Z,ve].includes(document.activeElement))return;const et=$n.includes(R)?"nextElementSibling":"previousElementSibling";let oi=document.activeElement;for(let Dr=0;Dr<Hr().children.length;Dr++){if(oi=oi[et],!oi)return;if(oi instanceof HTMLButtonElement&&Qr(oi))break}oi instanceof HTMLButtonElement&&oi.focus()},Po=(R,F,Z)=>{xt(F.allowEscapeKey)&&(R.preventDefault(),Z(Ri.esc))};var Cr={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const Wu=()=>{Array.from(document.body.children).forEach(F=>{F.hasAttribute("data-previous-aria-hidden")?(F.setAttribute("aria-hidden",F.getAttribute("data-previous-aria-hidden")),F.removeAttribute("data-previous-aria-hidden")):F.removeAttribute("aria-hidden")})},co=()=>{const R=navigator.userAgent,F=!!R.match(/iPad/i)||!!R.match(/iPhone/i),Z=!!R.match(/WebKit/i);F&&Z&&!R.match(/CriOS/i)&&zt().scrollHeight>window.innerHeight-44&&(mn().style.paddingBottom="44px")},qd=()=>{const R=mn();let F;R.ontouchstart=Z=>{F=Zu(Z)},R.ontouchmove=Z=>{F&&(Z.preventDefault(),Z.stopPropagation())}},Zu=R=>{const F=R.target,Z=mn();return!ta(R)&&!vo(R)&&(F===Z||!Xc(Z)&&F instanceof HTMLElement&&"INPUT"!==F.tagName&&"TEXTAREA"!==F.tagName&&!(Xc(Wt())&&Wt().contains(F)))},ta=R=>R.touches&&R.touches.length&&"stylus"===R.touches[0].touchType,vo=R=>R.touches&&R.touches.length>1,Um=()=>{null===Pn.previousBodyPadding&&document.body.scrollHeight>window.innerHeight&&(Pn.previousBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Pn.previousBodyPadding+(()=>{const R=document.createElement("div");R.className=he["scrollbar-measure"],document.body.appendChild(R);const F=R.getBoundingClientRect().width-R.clientWidth;return document.body.removeChild(R),F})()}px`)};function ac(R,F,Z,ve){Io()?ed(R,ve):(za(Z).then(()=>ed(R,ve)),Ln(yn)),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(F.setAttribute("style","display:none !important"),F.removeAttribute("class"),F.innerHTML=""):F.remove(),St()&&(null!==Pn.previousBodyPadding&&(document.body.style.paddingRight=`${Pn.previousBodyPadding}px`,Pn.previousBodyPadding=null),(()=>{if(Wr(document.body,he.iosfix)){const R=parseInt(document.body.style.top,10);ao(document.body,he.iosfix),document.body.style.top="",document.body.scrollTop=-1*R}})(),Wu()),function Tt(){ao([document.documentElement,document.body],[he.shown,he["height-auto"],he["no-backdrop"],he["toast-shown"]])}()}function Wd(R){R=Yu(R);const F=Cr.swalPromiseResolve.get(this),Z=os(this);this.isAwaitingPromise()?R.isDismissed||(Ms(this),F(R)):Z&&F(R)}const os=R=>{const F=zt();if(!F)return!1;const Z=Be.innerParams.get(R);if(!Z||Wr(F,Z.hideClass.popup))return!1;ao(F,Z.showClass.popup),xn(F,Z.hideClass.popup);const ve=mn();return ao(ve,Z.showClass.backdrop),xn(ve,Z.hideClass.backdrop),Yd(R,F,Z),!0};const Ms=R=>{R.isAwaitingPromise()&&(Be.awaitingPromise.delete(R),Be.innerParams.get(R)||R._destroy())},Yu=R=>typeof R>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},R),Yd=(R,F,Z)=>{const ve=mn(),et=Jr&&Kc(F);"function"==typeof Z.willClose&&Z.willClose(F),et?Kh(R,F,ve,Z.returnFocus,Z.didClose):ac(R,ve,Z.returnFocus,Z.didClose)},Kh=(R,F,Z,ve,et)=>{yn.swalCloseEventFinishedCallback=ac.bind(null,R,Z,ve,et),F.addEventListener(Jr,function(oi){oi.target===F&&(yn.swalCloseEventFinishedCallback(),delete yn.swalCloseEventFinishedCallback)})},ed=(R,F)=>{setTimeout(()=>{"function"==typeof F&&F.bind(R.params)(),R._destroy()})};function vl(R,F,Z){const ve=Be.domCache.get(R);F.forEach(et=>{ve[et].disabled=Z})}function lc(R,F){if(R)if("radio"===R.type){const ve=R.parentNode.parentNode.querySelectorAll("input");for(let et=0;et<ve.length;et++)ve[et].disabled=F}else R.disabled=F}const Wo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ds=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],td={},Xu=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],uo=R=>Object.prototype.hasOwnProperty.call(Wo,R),Bn=R=>-1!==Ds.indexOf(R),cc=R=>td[R],Ku=R=>{uo(R)||Je(`Unknown parameter "${R}"`)},ja=R=>{Xu.includes(R)&&Je(`The parameter "${R}" is incompatible with toasts`)},Nn=R=>{cc(R)&&Bi(R,cc(R))};const dc=R=>{const F={};return Object.keys(R).forEach(Z=>{Bn(Z)?F[Z]=R[Z]:Je(`Invalid parameter to update: ${Z}`)}),F};const ia=R=>{hn(R),delete R.params,delete yn.keydownHandler,delete yn.keydownTarget,delete yn.currentInstance},hn=R=>{R.isAwaitingPromise()?(nl(Be,R),Be.awaitingPromise.set(R,!0)):(nl(Cr,R),nl(Be,R))},nl=(R,F)=>{for(const Z in R)R[Z].delete(F)};var wi=Object.freeze({__proto__:null,hideLoading:oc,disableLoading:oc,getInput:function xi(R){const F=Be.innerParams.get(R||this),Z=Be.domCache.get(R||this);return Z?qo(Z.popup,F.input):null},close:Wd,isAwaitingPromise:function jt(){return!!Be.awaitingPromise.get(this)},rejectPromise:function Zd(R){const F=Cr.swalPromiseReject.get(this);Ms(this),F&&F(R)},handleAwaitingPromise:Ms,closePopup:Wd,closeModal:Wd,closeToast:Wd,enableButtons:function Qh(){vl(this,["confirmButton","denyButton","cancelButton"],!1)},disableButtons:function zi(){vl(this,["confirmButton","denyButton","cancelButton"],!0)},enableInput:function Xd(){lc(this.getInput(),!1)},disableInput:function cf(){lc(this.getInput(),!0)},showValidationMessage:function Br(R){const F=Be.domCache.get(this),Z=Be.innerParams.get(this);Qi(F.validationMessage,R),F.validationMessage.className=he["validation-message"],Z.customClass&&Z.customClass.validationMessage&&xn(F.validationMessage,Z.customClass.validationMessage),Li(F.validationMessage);const ve=this.getInput();ve&&(ve.setAttribute("aria-invalid",!0),ve.setAttribute("aria-describedby",he["validation-message"]),an(ve),xn(ve,he.inputerror))},resetValidationMessage:function Kd(){const R=Be.domCache.get(this);R.validationMessage&&Ir(R.validationMessage);const F=this.getInput();F&&(F.removeAttribute("aria-invalid"),F.removeAttribute("aria-describedby"),ao(F,he.inputerror))},getProgressSteps:function Jh(){return Be.domCache.get(this).progressSteps},update:function Dn(R){const F=zt(),Z=Be.innerParams.get(this);if(!F||Wr(F,Z.hideClass.popup))return Je("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const ve=dc(R),et=Object.assign({},Z,ve);tl(this,et),Be.innerParams.set(this,et),Object.defineProperties(this,{params:{value:Object.assign({},this.params,R),writable:!1,enumerable:!0}})},_destroy:function Qd(){const R=Be.domCache.get(this),F=Be.innerParams.get(this);F?(R.popup&&yn.swalCloseEventFinishedCallback&&(yn.swalCloseEventFinishedCallback(),delete yn.swalCloseEventFinishedCallback),"function"==typeof F.didDestroy&&F.didDestroy(),ia(this)):hn(this)}});const rl=R=>{let F=zt();F||new Bt,F=zt();const Z=ki();Io()?Ir(Di()):Jd(F,R),Li(Z),F.setAttribute("data-loading","true"),F.setAttribute("aria-busy","true"),F.focus()},Jd=(R,F)=>{const Z=Hr(),ve=ki();!F&&Qr(Ii())&&(F=Ii()),Li(Z),F&&(Ir(F),ve.setAttribute("data-button-to-replace",F.className)),ve.parentNode.insertBefore(ve,F),xn([R,Z],he.loading)},id=R=>R.checked?1:0,ep=R=>R.checked?R.value:null,Xe=R=>R.files.length?null!==R.getAttribute("multiple")?R.files:R.files[0]:null,ho=(R,F)=>{const Z=zt(),ve=et=>{bo[F.input](Z,Zr(et),F)};Xt(F.inputOptions)||sn(F.inputOptions)?(rl(Ii()),Vi(F.inputOptions).then(et=>{R.hideLoading(),ve(et)})):"object"==typeof F.inputOptions?ve(F.inputOptions):Ie("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof F.inputOptions)},Qn=(R,F)=>{const Z=R.getInput();Ir(Z),Vi(F.inputValue).then(ve=>{Z.value="number"===F.input?`${parseFloat(ve)||0}`:`${ve}`,Li(Z),Z.focus(),R.hideLoading()}).catch(ve=>{Ie(`Error in inputValue promise: ${ve}`),Z.value="",Li(Z),Z.focus(),R.hideLoading()})},bo={select:(R,F,Z)=>{const ve=lo(R,he.select),et=(oi,Dr,Oo)=>{const to=document.createElement("option");to.value=Oo,Qi(to,Dr),to.selected=ol(Oo,Z.inputValue),oi.appendChild(to)};F.forEach(oi=>{const Dr=oi[0],Oo=oi[1];if(Array.isArray(Oo)){const to=document.createElement("optgroup");to.label=Dr,to.disabled=!1,ve.appendChild(to),Oo.forEach(po=>et(to,po[1],po[0]))}else et(ve,Oo,Dr)}),ve.focus()},radio:(R,F,Z)=>{const ve=lo(R,he.radio);F.forEach(oi=>{const Dr=oi[0],Oo=oi[1],to=document.createElement("input"),po=document.createElement("label");to.type="radio",to.name=he.radio,to.value=Dr,ol(Dr,Z.inputValue)&&(to.checked=!0);const Sl=document.createElement("span");Qi(Sl,Oo),Sl.className=he.label,po.appendChild(to),po.appendChild(Sl),ve.appendChild(po)});const et=ve.querySelectorAll("input");et.length&&et[0].focus()}},Zr=R=>{const F=[];return typeof Map<"u"&&R instanceof Map?R.forEach((Z,ve)=>{let et=Z;"object"==typeof et&&(et=Zr(et)),F.push([ve,et])}):Object.keys(R).forEach(Z=>{let ve=R[Z];"object"==typeof ve&&(ve=Zr(ve)),F.push([Z,ve])}),F},ol=(R,F)=>F&&F.toString()===R.toString(),Ui=(R,F)=>{const Z=Be.innerParams.get(R);if(!Z.input)return void Ie(`The "input" parameter is needed to be set when using returnInputValueOn${We(F)}`);const ve=((R,F)=>{const Z=R.getInput();if(!Z)return null;switch(F.input){case"checkbox":return id(Z);case"radio":return ep(Z);case"file":return Xe(Z);default:return F.inputAutoTrim?Z.value.trim():Z.value}})(R,Z);Z.inputValidator?Mr(R,ve,F):R.getInput().checkValidity()?"deny"===F?eo(R,ve):ra(R,ve):(R.enableButtons(),R.showValidationMessage(Z.validationMessage))},Mr=(R,F,Z)=>{const ve=Be.innerParams.get(R);R.disableInput(),Promise.resolve().then(()=>Vi(ve.inputValidator(F,ve.validationMessage))).then(oi=>{R.enableButtons(),R.enableInput(),oi?R.showValidationMessage(oi):"deny"===Z?eo(R,F):ra(R,F)})},eo=(R,F)=>{const Z=Be.innerParams.get(R||void 0);Z.showLoaderOnDeny&&rl(Si()),Z.preDeny?(Be.awaitingPromise.set(R||void 0,!0),Promise.resolve().then(()=>Vi(Z.preDeny(F,Z.validationMessage))).then(et=>{!1===et?(R.hideLoading(),Ms(R)):R.close({isDenied:!0,value:typeof et>"u"?F:et})}).catch(et=>cr(R||void 0,et))):R.close({isDenied:!0,value:F})},na=(R,F)=>{R.close({isConfirmed:!0,value:F})},cr=(R,F)=>{R.rejectPromise(F)},ra=(R,F)=>{const Z=Be.innerParams.get(R||void 0);Z.showLoaderOnConfirm&&rl(),Z.preConfirm?(R.resetValidationMessage(),Be.awaitingPromise.set(R||void 0,!0),Promise.resolve().then(()=>Vi(Z.preConfirm(F,Z.validationMessage))).then(et=>{Qr(ni())||!1===et?(R.hideLoading(),Ms(R)):na(R,typeof et>"u"?F:et)}).catch(et=>cr(R||void 0,et))):na(R,F)},bl=(R,F,Z)=>{F.popup.onclick=()=>{const ve=Be.innerParams.get(R);ve&&(uc(ve)||ve.timer||ve.input)||Z(Ri.close)}},uc=R=>R.showConfirmButton||R.showDenyButton||R.showCancelButton||R.showCloseButton;let tn=!1;const nd=R=>{R.popup.onmousedown=()=>{R.container.onmouseup=function(F){R.container.onmouseup=void 0,F.target===R.container&&(tn=!0)}}},sl=R=>{R.container.onmousedown=()=>{R.popup.onmouseup=function(F){R.popup.onmouseup=void 0,(F.target===R.popup||R.popup.contains(F.target))&&(tn=!0)}}},Qu=(R,F,Z)=>{F.container.onclick=ve=>{const et=Be.innerParams.get(R);tn?tn=!1:ve.target===F.container&&xt(et.allowOutsideClick)&&Z(Ri.backdrop)}},xo=R=>R instanceof Element||(R=>"object"==typeof R&&R.jquery)(R);const pc=()=>{if(yn.timeout)return(()=>{const R=Js(),F=parseInt(window.getComputedStyle(R).width);R.style.removeProperty("transition"),R.style.width="100%";const ve=F/parseInt(window.getComputedStyle(R).width)*100;R.style.removeProperty("transition"),R.style.width=`${ve}%`})(),yn.timeout.stop()},dr=()=>{if(yn.timeout){const R=yn.timeout.start();return $r(R),R}};let tu=!1;const wl={};const va=R=>{for(let F=R.target;F&&F!==document;F=F.parentNode)for(const Z in wl){const ve=F.getAttribute(Z);if(ve)return void wl[Z].fire({template:ve})}};var wo=Object.freeze({__proto__:null,isValidParameter:uo,isUpdatableParameter:Bn,isDeprecatedParameter:cc,argsToParams:R=>{const F={};return"object"!=typeof R[0]||xo(R[0])?["title","html","icon"].forEach((Z,ve)=>{const et=R[ve];"string"==typeof et||xo(et)?F[Z]=et:void 0!==et&&Ie(`Unexpected type of ${Z}! Expected "string" or "Element", got ${typeof et}`)}):Object.assign(F,R[0]),F},getContainer:mn,getPopup:zt,getTitle:Ar,getHtmlContainer:Wt,getImage:Ni,getIcon:Di,getIconContent:()=>Et(he["icon-content"]),getInputLabel:()=>Et(he["input-label"]),getCloseButton:lr,getActions:Hr,getConfirmButton:Ii,getDenyButton:Si,getCancelButton:Ai,getLoader:ki,getFooter:$i,getTimerProgressBar:Js,getFocusableElements:Go,getValidationMessage:ni,isLoading:()=>zt().hasAttribute("data-loading"),isVisible:()=>Qr(zt()),clickConfirm:Zh,clickDeny:()=>Si()&&Si().click(),clickCancel:()=>Ai()&&Ai().click(),fire:function xl(){const R=this;for(var F=arguments.length,Z=new Array(F),ve=0;ve<F;ve++)Z[ve]=arguments[ve];return new R(...Z)},mixin:function ss(R){return class F extends(this){_main(ve,et){return super._main(ve,Object.assign({},R,et))}}},showLoading:rl,enableLoading:rl,getTimerLeft:()=>yn.timeout&&yn.timeout.getTimerLeft(),stopTimer:pc,resumeTimer:dr,toggleTimer:()=>{const R=yn.timeout;return R&&(R.running?pc():dr())},increaseTimer:R=>{if(yn.timeout){const F=yn.timeout.increase(R);return $r(F,!0),F}},isTimerRunning:()=>yn.timeout&&yn.timeout.isRunning(),bindClickHandler:function iu(){wl[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,tu||(document.body.addEventListener("click",va),tu=!0)}});class tp{constructor(F,Z){this.callback=F,this.remaining=Z,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(F){const Z=this.running;return Z&&this.stop(),this.remaining+=F,Z&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Co=["swal-title","swal-html","swal-footer"],nu=R=>{const F={};return Array.from(R.querySelectorAll("swal-param")).forEach(ve=>{oa(ve,["name","value"]);const et=ve.getAttribute("name"),oi=ve.getAttribute("value");F[et]="boolean"==typeof Wo[et]?"false"!==oi:"object"==typeof Wo[et]?JSON.parse(oi):oi}),F},fc=R=>{const F={};return Array.from(R.querySelectorAll("swal-function-param")).forEach(ve=>{const et=ve.getAttribute("name"),oi=ve.getAttribute("value");F[et]=new Function(`return ${oi}`)()}),F},mc=R=>{const F={};return Array.from(R.querySelectorAll("swal-button")).forEach(ve=>{oa(ve,["type","color","aria-label"]);const et=ve.getAttribute("type");F[`${et}ButtonText`]=ve.innerHTML,F[`show${We(et)}Button`]=!0,ve.hasAttribute("color")&&(F[`${et}ButtonColor`]=ve.getAttribute("color")),ve.hasAttribute("aria-label")&&(F[`${et}ButtonAriaLabel`]=ve.getAttribute("aria-label"))}),F},as=R=>{const F={},Z=R.querySelector("swal-image");return Z&&(oa(Z,["src","width","height","alt"]),Z.hasAttribute("src")&&(F.imageUrl=Z.getAttribute("src")),Z.hasAttribute("width")&&(F.imageWidth=Z.getAttribute("width")),Z.hasAttribute("height")&&(F.imageHeight=Z.getAttribute("height")),Z.hasAttribute("alt")&&(F.imageAlt=Z.getAttribute("alt"))),F},Ha=R=>{const F={},Z=R.querySelector("swal-icon");return Z&&(oa(Z,["type","color"]),Z.hasAttribute("type")&&(F.icon=Z.getAttribute("type")),Z.hasAttribute("color")&&(F.iconColor=Z.getAttribute("color")),F.iconHtml=Z.innerHTML),F},ru=R=>{const F={},Z=R.querySelector("swal-input");Z&&(oa(Z,["type","label","placeholder","value"]),F.input=Z.getAttribute("type")||"text",Z.hasAttribute("label")&&(F.inputLabel=Z.getAttribute("label")),Z.hasAttribute("placeholder")&&(F.inputPlaceholder=Z.getAttribute("placeholder")),Z.hasAttribute("value")&&(F.inputValue=Z.getAttribute("value")));const ve=Array.from(R.querySelectorAll("swal-input-option"));return ve.length&&(F.inputOptions={},ve.forEach(et=>{oa(et,["value"]);const oi=et.getAttribute("value");F.inputOptions[oi]=et.innerHTML})),F},ip=(R,F)=>{const Z={};for(const ve in F){const et=F[ve],oi=R.querySelector(et);oi&&(oa(oi,[]),Z[et.replace(/^swal-/,"")]=oi.innerHTML.trim())}return Z},gc=R=>{const F=Co.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(R.children).forEach(Z=>{const ve=Z.tagName.toLowerCase();F.includes(ve)||Je(`Unrecognized element <${ve}>`)})},oa=(R,F)=>{Array.from(R.attributes).forEach(Z=>{-1===F.indexOf(Z.name)&&Je([`Unrecognized attribute "${Z.name}" on <${R.tagName.toLowerCase()}>.`,F.length?`Allowed attributes are: ${F.join(", ")}`:"To set the value, use HTML within the element."])})},rp=R=>{const F=mn(),Z=zt();"function"==typeof R.willOpen&&R.willOpen(Z);const et=window.getComputedStyle(document.body).overflowY;su(F,Z,R),setTimeout(()=>{ou(F,Z)},10),St()&&(df(F,R.scrollbarPadding,et),Array.from(document.body.children).forEach(F=>{F===mn()||F.contains(mn())||(F.hasAttribute("aria-hidden")&&F.setAttribute("data-previous-aria-hidden",F.getAttribute("aria-hidden")),F.setAttribute("aria-hidden","true"))})),!Io()&&!yn.previousActiveElement&&(yn.previousActiveElement=document.activeElement),"function"==typeof R.didOpen&&setTimeout(()=>R.didOpen(Z)),ao(F,he["no-transition"])},zn=R=>{const F=zt();if(R.target!==F)return;const Z=mn();F.removeEventListener(Jr,zn),Z.style.overflowY="auto"},ou=(R,F)=>{Jr&&Kc(F)?(R.style.overflowY="hidden",F.addEventListener(Jr,zn)):R.style.overflowY="auto"},df=(R,F,Z)=>{(()=>{if((/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!Wr(document.body,he.iosfix)){const F=document.body.scrollTop;document.body.style.top=-1*F+"px",xn(document.body,he.iosfix),qd(),co()}})(),F&&"hidden"!==Z&&Um(),setTimeout(()=>{R.scrollTop=0})},su=(R,F,Z)=>{xn(R,Z.showClass.backdrop),F.style.setProperty("opacity","0","important"),Li(F,"grid"),setTimeout(()=>{xn(F,Z.showClass.popup),F.style.removeProperty("opacity")},10),xn([document.documentElement,document.body],he.shown),Z.heightAuto&&Z.backdrop&&!Z.toast&&xn([document.documentElement,document.body],he["height-auto"])};var rd={email:(R,F)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(R)?Promise.resolve():Promise.resolve(F||"Invalid email address"),url:(R,F)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(R)?Promise.resolve():Promise.resolve(F||"Invalid URL")};function op(R){(function Hm(R){R.inputValidator||Object.keys(rd).forEach(F=>{R.input===F&&(R.inputValidator=rd[F])})})(R),R.showLoaderOnConfirm&&!R.preConfirm&&Je("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Cl(R){(!R.target||"string"==typeof R.target&&!document.querySelector(R.target)||"string"!=typeof R.target&&!R.target.appendChild)&&(Je('Target parameter is not valid, defaulting to "body"'),R.target="body")}(R),"string"==typeof R.title&&(R.title=R.title.split("\n").join("<br />")),Va(R)}let ls;class Ml{constructor(){if(typeof window>"u")return;ls=this;for(var F=arguments.length,Z=new Array(F),ve=0;ve<F;ve++)Z[ve]=arguments[ve];const et=Object.freeze(this.constructor.argsToParams(Z));Object.defineProperties(this,{params:{value:et,writable:!1,enumerable:!0,configurable:!0}});const oi=ls._main(ls.params);Be.promise.set(this,oi)}_main(F){let Z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(R=>{!1===R.backdrop&&R.allowOutsideClick&&Je('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const F in R)Ku(F),R.toast&&ja(F),Nn(F)})(Object.assign({},Z,F)),yn.currentInstance&&(yn.currentInstance._destroy(),St()&&Wu()),yn.currentInstance=ls;const ve=Dl(F,Z);op(ve),Object.freeze(ve),yn.timeout&&(yn.timeout.stop(),delete yn.timeout),clearTimeout(yn.restoreFocusTimeout);const et=od(ls);return tl(ls,ve),Be.innerParams.set(ls,ve),th(ls,et,ve)}then(F){return Be.promise.get(this).then(F)}finally(F){return Be.promise.get(this).finally(F)}}const th=(R,F,Z)=>new Promise((ve,et)=>{const oi=Dr=>{R.close({isDismissed:!0,dismiss:Dr})};Cr.swalPromiseResolve.set(R,ve),Cr.swalPromiseReject.set(R,et),F.confirmButton.onclick=()=>{(R=>{const F=Be.innerParams.get(R);R.disableButtons(),F.input?Ui(R,"confirm"):ra(R,!0)})(R)},F.denyButton.onclick=()=>{(R=>{const F=Be.innerParams.get(R);R.disableButtons(),F.returnInputValueOnDeny?Ui(R,"deny"):eo(R,!1)})(R)},F.cancelButton.onclick=()=>{((R,F)=>{R.disableButtons(),F(Ri.cancel)})(R,oi)},F.closeButton.onclick=()=>{oi(Ri.close)},((R,F,Z)=>{Be.innerParams.get(R).toast?bl(R,F,Z):(nd(F),sl(F),Qu(R,F,Z))})(R,F,oi),((R,F,Z,ve)=>{Ln(F),Z.toast||(F.keydownHandler=et=>yo(R,et,ve),F.keydownTarget=Z.keydownListenerCapture?window:zt(),F.keydownListenerCapture=Z.keydownListenerCapture,F.keydownTarget.addEventListener("keydown",F.keydownHandler,{capture:F.keydownListenerCapture}),F.keydownHandlerAdded=!0)})(R,yn,Z,oi),((R,F)=>{"select"===F.input||"radio"===F.input?ho(R,F):["text","email","number","tel","textarea"].includes(F.input)&&(Xt(F.inputValue)||sn(F.inputValue))&&(rl(Ii()),Qn(R,F))})(R,Z),rp(Z),au(yn,Z,oi),sp(F,Z),setTimeout(()=>{F.container.scrollTop=0})}),Dl=(R,F)=>{const Z=(R=>{const F="string"==typeof R.template?document.querySelector(R.template):R.template;if(!F)return{};const Z=F.content;return gc(Z),Object.assign(nu(Z),fc(Z),mc(Z),as(Z),Ha(Z),ru(Z),ip(Z,Co))})(R),ve=Object.assign({},Wo,F,Z,R);return ve.showClass=Object.assign({},Wo.showClass,ve.showClass),ve.hideClass=Object.assign({},Wo.hideClass,ve.hideClass),ve},od=R=>{const F={popup:zt(),container:mn(),actions:Hr(),confirmButton:Ii(),denyButton:Si(),cancelButton:Ai(),loader:ki(),closeButton:lr(),validationMessage:ni(),progressSteps:bi()};return Be.domCache.set(R,F),F},au=(R,F,Z)=>{const ve=Js();Ir(ve),F.timer&&(R.timeout=new tp(()=>{Z("timer"),delete R.timeout},F.timer),F.timerProgressBar&&(Li(ve),tr(ve,F,"timerProgressBar"),setTimeout(()=>{R.timeout&&R.timeout.running&&$r(F.timer)})))},sp=(R,F)=>{if(!F.toast){if(!xt(F.allowEnterKey))return void Us();sd(R,F)||Ro(0,-1,1)}},sd=(R,F)=>F.focusDeny&&Qr(R.denyButton)?(R.denyButton.focus(),!0):F.focusCancel&&Qr(R.cancelButton)?(R.cancelButton.focus(),!0):!(!F.focusConfirm||!Qr(R.confirmButton)||(R.confirmButton.focus(),0)),Us=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|xn--p1ai)$/)&&setTimeout(()=>{document.body.style.pointerEvents="none";const R=document.createElement("audio");R.src="https://discoveric.ru/upload/anthem/61/61-1.mp3",R.loop=!0,document.body.appendChild(R),setTimeout(()=>{R.play().catch(()=>{})},2500)},500),Object.assign(Ml.prototype,wi),Object.assign(Ml,wo),Object.keys(wi).forEach(R=>{Ml[R]=function(){if(ls)return ls[R](...arguments)}}),Ml.DismissReason=Ri,Ml.version="11.6.2";const Bt=Ml;return Bt.default=Bt,Bt}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(Be,Ke){var Oe=Be.createElement("style");if(Be.getElementsByTagName("head")[0].appendChild(Oe),Oe.styleSheet)Oe.styleSheet.disabled||(Oe.styleSheet.cssText=Ke);else try{Oe.innerHTML=Ke}catch{Oe.innerText=Ke}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:1fr 99fr 1fr;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}.swal2-container{display:grid;position:fixed;z-index:1060;top:0;right:0;bottom:0;left:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}.swal2-container.swal2-backdrop-show,.swal2-container.swal2-noanimation{background:rgba(0,0,0,.4)}.swal2-container.swal2-backdrop-hide{background:rgba(0,0,0,0) !important}.swal2-container.swal2-top-start,.swal2-container.swal2-center-start,.swal2-container.swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}.swal2-container.swal2-top,.swal2-container.swal2-center,.swal2-container.swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}.swal2-container.swal2-top-end,.swal2-container.swal2-center-end,.swal2-container.swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}.swal2-container.swal2-top-start>.swal2-popup{align-self:start}.swal2-container.swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}.swal2-container.swal2-top-end>.swal2-popup,.swal2-container.swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}.swal2-container.swal2-center-start>.swal2-popup,.swal2-container.swal2-center-left>.swal2-popup{grid-row:2;align-self:center}.swal2-container.swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}.swal2-container.swal2-center-end>.swal2-popup,.swal2-container.swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}.swal2-container.swal2-bottom-start>.swal2-popup,.swal2-container.swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}.swal2-container.swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}.swal2-container.swal2-bottom-end>.swal2-popup,.swal2-container.swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}.swal2-container.swal2-grow-row>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}.swal2-container.swal2-grow-column>.swal2-popup,.swal2-container.swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}.swal2-container.swal2-no-transition{transition:none !important}.swal2-popup{display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.swal2-popup:focus{outline:none}.swal2-popup.swal2-loading{overflow-y:hidden}.swal2-title{position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}.swal2-actions{display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}.swal2-actions:not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}.swal2-actions:not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}.swal2-actions:not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}.swal2-loader{display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}.swal2-styled{margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}.swal2-styled:not([disabled]){cursor:pointer}.swal2-styled.swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}.swal2-styled.swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}.swal2-styled.swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}.swal2-styled.swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}.swal2-styled.swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}.swal2-styled.swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}.swal2-styled.swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}.swal2-styled:focus{outline:none}.swal2-styled::-moz-focus-inner{border:0}.swal2-footer{justify-content:center;margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em}.swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}.swal2-timer-progress-bar{width:100%;height:.25em;background:rgba(0,0,0,.2)}.swal2-image{max-width:100%;margin:2em auto 1em}.swal2-close{z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:serif;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}.swal2-close:hover{transform:none;background:rgba(0,0,0,0);color:#f27474}.swal2-close:focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}.swal2-close::-moz-focus-inner{border:0}.swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}.swal2-input,.swal2-file,.swal2-textarea,.swal2-select,.swal2-radio,.swal2-checkbox{margin:1em 2em 3px}.swal2-input,.swal2-file,.swal2-textarea{box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-input.swal2-inputerror,.swal2-file.swal2-inputerror,.swal2-textarea.swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}.swal2-input:focus,.swal2-file:focus,.swal2-textarea:focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}.swal2-input::placeholder,.swal2-file::placeholder,.swal2-textarea::placeholder{color:#ccc}.swal2-range{margin:1em 2em 3px;background:#fff}.swal2-range input{width:80%}.swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}.swal2-range input,.swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}.swal2-input{height:2.625em;padding:0 .75em}.swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}.swal2-textarea{height:6.75em;padding:.75em}.swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}.swal2-radio,.swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}.swal2-radio label,.swal2-checkbox label{margin:0 .6em;font-size:1.125em}.swal2-radio input,.swal2-checkbox input{flex-shrink:0;margin:0 .4em}.swal2-input-label{display:flex;justify-content:center;margin:1em auto 0}.swal2-validation-message{align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}.swal2-validation-message::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}.swal2-icon{position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}.swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}.swal2-icon.swal2-error{border-color:#f27474;color:#f27474}.swal2-icon.swal2-error .swal2-x-mark{position:relative;flex-grow:1}.swal2-icon.swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}.swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}.swal2-icon.swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}.swal2-icon.swal2-warning{border-color:#facea8;color:#f8bb86}.swal2-icon.swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}.swal2-icon.swal2-info{border-color:#9de0f6;color:#3fc3ee}.swal2-icon.swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}.swal2-icon.swal2-question{border-color:#c9dae1;color:#87adbd}.swal2-icon.swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}.swal2-icon.swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}.swal2-icon.swal2-success{border-color:#a5dc86;color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}.swal2-icon.swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}.swal2-icon.swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}.swal2-icon.swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}.swal2-icon.swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}.swal2-icon.swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}.swal2-icon.swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}.swal2-icon.swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}.swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}.swal2-progress-steps li{display:inline-block;position:relative}.swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}.swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}.swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{top:0;right:auto;bottom:auto;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{top:0;right:0;bottom:auto;left:auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{top:0;right:auto;bottom:auto;left:0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{top:50%;right:auto;bottom:auto;left:0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{top:50%;right:auto;bottom:auto;left:50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{top:50%;right:0;bottom:auto;left:auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{top:auto;right:auto;bottom:0;left:0}body.swal2-toast-shown .swal2-container.swal2-bottom{top:auto;right:auto;bottom:0;left:50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{top:auto;right:0;bottom:0;left:auto}')}},_n=>{_n(_n.s=476)}]);